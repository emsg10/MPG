{"version":3,"sources":["webpack:///app.355a744495cb97bf990f.js","webpack:///./src/main.ts","webpack:///./src/app/game/loader.ts","webpack:///./src/app/game/service/assetsLoader.ts","webpack:///./src/app/game/service/loadHelper.ts","webpack:///./src/app/game/model/index.ts","webpack:///./src/app/game/model/tile.ts","webpack:///./src/app/game/model/vector.ts","webpack:///./src/app/game/model/rectangle.ts","webpack:///./src/app/game/model/sprite.ts","webpack:///./src/app/game/model/level.ts","webpack:///./src/app/game/model/assets.ts","webpack:///./src/app/game/model/animation/projectile.ts","webpack:///./src/app/game/model/animation/animation.ts","webpack:///./src/app/game/render/index.ts","webpack:///./src/app/game/render/renderer.ts","webpack:///./src/app/game/render/renderCall.ts","webpack:///./src/app/game/render/colorRenderCall.ts","webpack:///./src/app/game/render/colorRenderer.ts","webpack:///./src/app/game/render/renderHelper.ts","webpack:///./src/app/game/render/textureMapper.ts","webpack:///./src/app/game/render/matrix3.ts","webpack:///./src/app/game/render/dynamicRenderCall.ts","webpack:///./src/app/game/render/particleRenderer.ts","webpack:///./src/app/game/collision/collisionDetection.ts","webpack:///./src/app/game/collision/index.ts","webpack:///./src/app/game/collision/collisionData.ts","webpack:///./src/app/game/collision/grid.ts","webpack:///./src/app/game/model/animation/frameAnimation.ts","webpack:///./src/app/game/model/enum/spellType.ts","webpack:///./src/app/game/model/animation/spell.ts","webpack:///./src/app/game/model/animation/physicalProjectile.ts","webpack:///./src/app/game/forces/gravity.ts","webpack:///./src/app/game/forces/drag.ts","webpack:///./src/app/game/model/animation/meele.ts","webpack:///./src/app/game/model/debug.ts","webpack:///./src/app/game/model/enum/textureType.ts","webpack:///./src/app/game/model/animation/stickyAnimation.ts","webpack:///./src/app/game/model/animation/rotationAnimation.ts","webpack:///./src/app/game/model/animation/staticRotationAnimation.ts","webpack:///./src/app/game/model/animation/collisionProjectile.ts","webpack:///./src/app/game/model/animation/projectileType.ts","webpack:///./src/app/game/model/casts/cast.ts","webpack:///./src/app/game/model/casts/instantCast.ts","webpack:///./src/app/game/model/casts/channelCast.ts","webpack:///./src/app/game/model/casts/spellCast.ts","webpack:///./src/app/game/model/animation/particleProjectile.ts","webpack:///./src/app/game/model/dynamicTile.ts","webpack:///./src/app/game/service/constants.ts","webpack:///./src/app/game/map/model/index.ts","webpack:///./src/app/game/map/model/enemyData.ts","webpack:///./src/app/game/map/model/levelData.ts","webpack:///./src/app/game/map/model/enemyType.ts","webpack:///./src/app/game/map/model/texture-resource.ts","webpack:///./src/app/game/map/model/tile-asset.ts","webpack:///./src/app/game/model/dynamicTileData.ts","webpack:///./src/app/game/model/renderable-data.ts","webpack:///./src/app/game/model/progress.ts","webpack:///./src/app/game/model/audioAsset.ts","webpack:///./src/app/game/model/audio/continousAudio.ts","webpack:///./src/app/game/model/enum/shaderType.ts","webpack:///./src/app/game/character/index.ts","webpack:///./src/app/game/character/enemy.ts","webpack:///./src/app/game/character/character.ts","webpack:///./src/app/game/character/deathType.ts","webpack:///./src/app/game/character/swordman.ts","webpack:///./src/app/game/character/state.ts","webpack:///./src/app/game/character/archer.ts","webpack:///./src/app/game/handler/debugHandler.ts","webpack:///./src/app/game/character/player.ts","webpack:///./src/app/game/handler/spellHandler.ts","webpack:///./src/app/game/character/shadow.ts","webpack:///./src/app/game/character/apprentice.ts","webpack:///./src/app/game/character/screamer.ts","webpack:///./src/app/game/character/masterSorcerer.ts","webpack:///./src/app/game/character/shapeShifterState.ts","webpack:///./src/app/game/character/shapeshifter.ts","webpack:///./src/app/game/game.ts","webpack:///./src/app/game/index.ts","webpack:///./src/app/game/context.ts","webpack:///./src/app/game/tileMap.ts","webpack:///./src/app/game/text/textRenderer.ts","webpack:///./src/app/game/handler/animationHandler.ts","webpack:///./src/app/game/handler/projectileHandler.ts","webpack:///./src/app/game/handler/dynamicTileHandler.ts","webpack:///./src/app/game/handler/particleHandler.ts","webpack:///./src/app/game/particle/particle.ts","webpack:///./src/app/game/render/simpleParticleRenderCall.ts","webpack:///./src/app/game/render/simpleParticleRenderer.ts","webpack:///./src/app/game/handler/enemyHandler.ts","webpack:///./src/app/game/camera.ts","webpack:///./src/app/game/render/dynamicRenderer.ts","webpack:///./src/app/game/UI/ui.ts","webpack:///./src/app/game/UI/bar.ts","webpack:///./src/app/game/UI/sceneHandler.ts","webpack:///./src/app/game/UI/sceneIndex.ts","webpack:///./src/app/game/UI/menu.ts","webpack:///./src/app/game/UI/scene.ts","webpack:///./src/app/game/service/localStorageHelper.ts","webpack:///./src/app/game/UI/clickable.ts","webpack:///./src/app/game/UI/powerSelector.ts","webpack:///./src/app/game/UI/active.ts","webpack:///./src/app/game/UI/powerSelectionMenu.ts","webpack:///./src/app/game/UI/simpleClickable.ts","webpack:///./src/app/game/UI/newGameMenu.ts","webpack:///./src/app/game/UI/restartMenu.ts","webpack:///./src/app/game/UI/creditMenu.ts","webpack:///./src/app/game/handler/audioHandler.ts"],"names":["webpackJsonp","module","exports","__webpack_require__","loader_1","Loader","initialize","assetsLoader_1","rxjs_1","model_1","game_1","loadHelper_1","constants_1","_this","this","loadHelper","LoadHelper","getInstance","asset","Asset","audioAsset","AudioAsset","assetsLoader","AssetsLoader","Observable","forkJoin","getShader","getTexture","getTileTextures","getUiTextures","getLevel","getAudio","Constants","audioResources","subscribe","data","vertexShader","fragmentShader","simpleParticleVertexShader","simpleParticleFragmentShader","dynamicVertexShader","dynamicFragmentShader","colorVertexShader","colorFragmentShader","texture","particleTexture","genericParticleTexture","tileAssets","addToTileAssets","level","bufferDatas","canvas","document","getElementById","game","Game","prototype","newTileAssets","forEach","value","key","set","_1","shaderUrl","textureUrl","levelUrl","audioUrl","constants","fileName","httpGet","catch","handleError","create","observer","Image","src","onload","next","complete","map","extractLevel","url","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","onerror","error","open","send","httpGetBinary","responseType","response","name","getTextures","tileResources","uiResources","getAudioData","obs","Map","count","_loop_1","auidoResource","it","length","_i","audioResources_1","textureResources","textures","_loop_2","textureResource","split","TileAsset","size","textureResources_1","body","JSON","parse","valid","validateLevelData","Error","e","console","log","errMsg","message","toString","throw","character_1","shapeshifter_1","constrcuctor","instance","levelDataToLevel","levelData","projectileHandler","animationHandler","particleHandler","Level","end","Rectangle","player","gameSize","camera","tiles","Tile","area","x","y","width","height","decorativeTiles","background","unshift","dynamicTiles","velocity","vertical","inverse","Vector","DynamicTile","tile","distance","sort","a","b","enemies","enemy","Swordman","Archer","Shadow","MasterSorcerer","Apprentice","Screamer","ShapeShifter","checkDoubleNumberTouple","checkPropertyExists","property","isNumber","number","isNaN","undefined","tile_1","vector_1","rectangle_1","sprite_1","Sprite","level_1","assets_1","projectile_1","Projectile","animation_1","Animation","frameAnimation_1","FrameAnimation","spellType_1","SpellType","spell_1","Spell","physicalProjectile_1","PhysicalProjectile","meele_1","Meele","debug_1","DebugElement","textureType_1","TextureType","stickyAnimation_1","StickyAnimation","rotationAnimation_1","RotationAnimation","staticRotationAnimation_1","StaticRotationAnimation","collisionProjectile_1","CollisionProjectile","projectileType_1","ProjectileType","cast_1","Cast","instantCast_1","InstantCast","channelCast_1","ChannelCast","spellCast_1","SpellCast","particleProjectile_1","ParticleProjectile","dynamicTile_1","dynamicTileData_1","DynamicTileData","renderable_data_1","RenderableData","progress_1","Progress","audioAsset_1","continousAudio_1","ContinuousAudio","shaderType_1","ShaderType","add","vector","copy","normalize","mag","magnitude","Math","sqrt","multiply","factor","invert","position","animation","collisionRatio","collisionArea","projectileType","None","damage","update","travelDistanceX","travelDistanceY","delta","areaToRender","updateForces","render_1","textureNumbers","timeToChange","delay","frameIndex","lastChange","textureCoords","textureNumbers_1","textureNumber","push","RenderHelper","getTextureCoordinates","repetitions","getCurrentFrame","reset","renderer_1","Renderer","renderCall_1","RenderCall","colorRenderCall_1","ColorRenderCall","colorRenderer_1","ColorRenderer","renderHelper_1","dynamicRenderCall_1","DynamicRenderCall","textureMapper_1","TextureMapper","particleRenderer_1","ParticleRenderer","matrix3_1","Matrix3","context","gl","shaderProgram","useProgram","bindAttribLocation","positionLocation","getAttribLocation","textureCoordAttribute","resolutionLocation","getUniformLocation","cameraLocation","resolution","vertexBuffer","createBuffer","textureCoordBuffer","indeciesBuffer","render","renderCalls","renderCall","enableVertexAttribArray","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","vertecies","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","Uint16Array","indecies","vertexAttribPointer","FLOAT","uniform2f","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","tileTextures","get","glTexture","drawElements","TRIANGLES","UNSIGNED_SHORT","disableVertexAttribArray","color","colorShaderProgram","colorAttributeLocation","colorBuffer","renderCalls_1","textureMapper","canvasWidth","canvasHeight","projectionMatrix","createProjectionMatrix","getRelativeValue","relativePosition","getVertecies","currentVertecies","x1","x2","y1","y2","newVertecies","apply","getInverseVertecies","getColor","currentColors","col","getMatrices","angle","currentMatrices","rotationPointX","rotationPointY","moveToRotationPointMatrix","createTranslationMatrix","rotationMatrix","createRotationMatrix","moveBackMatrix","matrix","getIndeciesAttribute","attribute","slice","i","getIndecies","currentIndecies","vertexIndices","addTextureCoordinates","currentTextureCoordinates","textureType","rect","mapTexture","textureCoordinates","getCoords","textureSize","getTiledTextureCoordinates","getMainTextureCoords","texture0","texture1","texture2","texture3","texture4","texture5","texture6","texture7","texture8","texture9","texture10","texture11","texture12","texture13","texture14","texture15","texture16","texture17","texture18","texture19","texture20","texture21","texture22","texture23","texture24","texture25","texture26","texture50","texture51","texture52","texture53","texture54","texture55","texture56","texture57","texture58","texture59","texture60","texture61","texture62","texture63","texture100","texture101","texture102","texture103","texture104","texture105","texture106","texture107","texture108","texture109","texture110","texture111","texture112","texture113","texture114","texture115","texture116","texture117","texture118","texture119","texture120","texture121","texture122","texture123","texture124","texture125","texture126","texture127","texture128","texture129","texture130","texture131","texture132","texture133","texture134","texture135","texture136","texture137","texture138","texture139","texture140","texture141","texture142","texture143","texture144","texture145","texture146","texture147","texture148","texture149","texture150","texture151","texture152","texture153","texture154","texture155","texture156","texture157","texture158","texture159","texture160","texture161","texture162","texture163","texture165","texture166","texture167","texture168","texture169","texture170","texture171","texture172","texture173","texture174","texture175","texture176","texture177","texture178","texture179","texture180","texture181","texture182","texture183","texture184","texture185","texture186","texture187","texture188","texture189","texture190","texture191","texture192","texture193","texture194","texture195","texture196","texture197","texture198","texture199","texture200","texture201","texture202","texture203","texture204","texture205","texture206","texture207","texture208","texture209","texture210","texture211","texture212","texture214","texture215","texture216","texture217","texture218","texture219","texture220","texture221","texture222","texture223","texture224","texture225","texture226","texture227","texture228","texture229","texture230","texture231","texture232","texture233","texture234","texture235","texture236","texture237","texture238","texture239","texture240","texture241","texture242","texture243","texture244","texture245","texture246","texture247","texture248","texture249","texture250","texture251","texture252","texture253","texture254","texture255","texture256","texture257","texture262","texture263","texture264","texture265","texture266","texture267","texture268","texture269","texture270","texture271","texture272","texture273","texture274","texture275","texture276","texture277","texture278","texture279","texture280","texture281","texture282","texture283","texture284","texture285","texture286","texture287","texture288","texture289","texture290","texture291","texture292","texture293","texture294","texture295","texture296","texture297","texture298","texture299","texture300","texture301","texture302","texture303","texture304","texture305","texture306","texture500","texture550","texture551","texture552","texture553","texture554","texture555","texture556","texture557","texture558","texture560","texture561","texture562","texture563","texture564","texture565","texture566","texture567","texture568","texture569","texture570","texture571","texture572","texture573","texture574","texture575","texture576","texture577","texture578","texture579","texture580","texture581","texture582","texture583","texture584","texture585","texture586","texture587","texture588","texture589","texture590","texture591","texture592","texture593","texture594","texture595","texture596","texture597","texture598","texture600","texture601","texture602","texture603","texture604","texture605","texture606","texture607","texture608","texture609","texture610","texture611","texture612","texture613","texture614","texture615","texture616","texture617","texture618","texture619","texture620","texture621","texture622","texture623","texture624","createIdentityMatrix","tx","ty","angleInRadians","c","cos","s","sin","createScaleMatrix","sx","sy","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","positionConvertion","matrices","collisionDetection_1","collisionDetection","CollisionDetection","relativeTimeAttribute","lifeTimeAttribute","startPositionLocation","endPositionLocation","colorLocation","pointEndPositionsBuffer","pointStartPositionsBuffer","pointLifetimesBuffer","pointRelativeTimeBuffer","call","relativeTime","itemSize","numItems","lifetimes","startPositions","endPositions","type","frostBlast","frostParticelTexture","uniform1i","uniform4f","drawArrays","POINTS","createGrid","collidables","grid","Grid","collidables_1","collidable","insert","character","frameVelocity","collisionData","checkCollision","fastCheckEnviroment","clear","possibleColls","possibleColls_1","aabbCheck","checkProjectileCollisionX","projectile","staticCollisions","checkClose","broadphasebox","getSweptBroadphaseBoxX","CollisionData","possibleColls_2","aabbCollisionX","_a","possibleColls_3","wallCollision","checkProjectileCollisionY","getSweptBroadphaseBoxY","possibleColls_4","aabbCollisionY","tilesToCheck","dynamicCollisionData","rect1","getCollisionArea","dynamicTiles_1","dynamicTile","deltaVelocity","checkDynamicTileY","possibleColls_5","groundCollision","velocityY","collisionTimeY","_b","dynamicTiles_2","checkDynamicTileX","_c","tilesToCheck_1","collisionTimeX","velocityX","remainingTime","getClosestX","closestX","possibleColls_6","tileVal","checkCoutOfBounds","dead","rect2","aabbCheckS","areas","areas_1","characterCollisionArea","lift","abs","yInvEntry","yInvExit","yEntry","yExit","Number","MAX_SAFE_INTEGER","entryTime","exitTime","normalY","fallDeath","xInvEntry","xInvExit","xEntry","xExit","normalX","collisionData_1","grid_1","canvasSize","gridSize","maxX","maxY","j","coords","getGridCoordinates","result","floor","xi","ceil","yi","__extends","d","__","constructor","p","hasOwnProperty","Object","_super","growthX","growthY","offsetX","offsetY","particleFunction","texturenumbers","lastFrameIndex","gravity_1","drag_1","gravityStrength","gravity","Gravity","dragStrength","drag","Drag","onGroundCollision","PI","extendedOnGroundCollision","strength","deltaDrag","offset","vec","atan2","done","cancel","onCast","currentAnimation","channelAnimation","lowerChannelAnimation","onChannel","onCancel","defaultValue","maxValue","growth","channeling","lowerCurrentAnimation","currentValue","resetValue","mainRepetion","hasCast","onUpdate","verticalAxis","maxDistance","renderHelper","initialDown","initialRight","tileSize","initialPosition","travelDistance","calculateVerticalMovement","calculateHorizontalMovement","turn","TextureResource","enemyData_1","EnemyData","levelData_1","LevelData","enemyType_1","EnemyType","texture_resource_1","tile_asset_1","image","active","audioContext","duration","gainValue","continue","playing","gainNode","createGain","connect","destination","source","stop","play","gain","createBufferSource","buffer","start","loop","onended","currentTime","enemy_1","Enemy","swordman_1","archer_1","Character","player_1","Player","shadow_1","state_1","State","apprentice_1","screamer_1","masterSorcerer_1","iEnemy_1","IEnemy","shapeShifterState_1","ShapeShifterState","deathType_1","burnValue","direction","oldDirection","hitDamage","hp","freezeDamage","flameDamage","maxFreeze","freezeValue","burnDamage","cinderValue","burnDurationFactor","hitAreaOffset","minDistance","searchAreaOffset","trackingTime","trackingMaxTime","trackingSpeed","idleSpeed","hitting","damageAudioTimerValue","damageAudioTimer","currentState","Idle","takeDamage","deathType","DeathType","freezeDeath","fireBlast","fireDeath","swordDeath","burn","setFreezeSpeed","actualSpeed","maxSpeed","pow","freeze","toMove","nextToEdge","fall","leftEdge","rightEdge","freezePercent","updateColor","updateBurnDamage","idle","idleAnimation","inRange","IdleToTrackingTransition","idleToTrackingTransition","trackingToInRangeTransition","trackingToIdleTransition","patrol","moveLeft","moveRight","hit","hitAnimation","Tracking","moveToPlayer","npcAction","TrackingToIdleTransition","track","TrackingToInRangeTransition","InHitRange","checkStop","gapSize","trackingAnimation","rand","min","max","random","getDeltaPosition","middlePosition","getPathBlocks","deltaPos","blocksize","bowPosition","blocks","newMagnitude","clearShoot","pathBlocks","pathBlocks_1","block","colorColl","acceleration","moving","hitCollisionAreas","hitOffset","audioHandler","playSound","setHitAnimation","checkHitCollisionAreas","createCollisionProjectile","meeleAnimation","createHit","swordscut_a","debugHandler_1","arrowVelocity","shoot","debugHandler","DebugHandler","calculatePath","createArrow","getDeltaVelocity","getVelocity","debugRects","createRenderCall","spellHandler_1","mana","progress","fireLevel","frostLevel","shieldLevel","defaultJumpSpeed","jumpSpeed","damageAnimations","stunned","liftVelocity","externalDragForce","dragForce","externalDrag","idleTime","idleTimeChange","jumping","inJump","manaRegen","externalVelocity","onGroundTimer","shieldTextureCoords","spellHandler","SpellHandler","lowerIdleAnimation","upperIdleAnimation","upperRunningAnimation","lowerRunningAnimation","stunnedAnimation","lowerJumpAnimation","upperJumpAnimation","lowerStillAnimation","upperStillAnimation","maxMana","lowerAnimation","upperAnimation","stepAudio","createContinuos","hardHit","stun","useMana","regenMana","isMoving","renderLower","castingShield","renderShield","shieldExplosion","createShieldExplosionEffect","getCalculatedPos","getShieldCollidables","shieldCollidables","createPlayerSword_death","currentCast","totalVelocity","updateDamageAnimations","getProjectileCollisionArea","calcPos","jump","cast","removeItems","stickyAnimation","removeItems_1","remove","index","indexOf","splice","break","refShieldCollidables","maxMagicValue","minMagicValue","createShieldCollidables","initCasts","flameThrowerAudio","freezeAudio","shieldAudio","magicChannelAudio","maxMagicAudio","channelMagicCast","createMagicEffect","createShieldEffect","updateBreak","spellType","fireball","castFireBall","electricbolt","castElectricBall","castFireBlast","castFrostBlast","shield","castShield","channelmagic","castChannelMagic","posx","posy","fireBallCast","fireBlastCast","frostBlastCast","fireblastAnimation","onFireCast","getOnCastFireBlast","frostBlastAnimation","onFrostCast","getOnCastFrostBlast","channelLowerAnimation","onChannelMagic","createChannelMagic","onCancelChannelMagic","castAnimation","onFireBallUpdate","createFireBall","onFireBallCast","createFireBlast","createFrostBlast","spotted","idleToTrackingAnimation","trackingToIdleTransitionAnimation","pos","projectileVelocity","onBlackFireUpdate","createNecroFireBall","createNecroBall","NecroBall","hitTimer","chargeTimer","positionMiddle","defaultChannelTime","shootDefaultCooldown","shootCooldown","channelTimer","shootsFired","maxShoots","channelHitTransitionAnimation","channel","createNecroChannelMagic","index_1","moveTimer","up","ammunition","elevated","leveled","elevateTime","p1FireCd","p2FireCd","p3FireCd","p2BurstCd","fireSingle","p2BeamCd","p2Beam2Cd","burstTimer","burstTimer2","fireCdTimer","patrolTimer","patrolMax","currentSpell","renderHalper","createBlueFireBall","onNecroUpdate","sorcererAnimation","sorcererAnimationP2","sorcererAnimationP3","levelCompleted","Phase1","Phase1To2","Phase2","Phase2To3","phase1","phase1To2","phase2","phase2To3","Phase3","phase3","rendercall","move","turnToPlayer","p1Fire","createBlueChannelMagic","leveledYCorrds","moveReset","fireMixedP3","fireMixed","hail","beam","necroBall","hail2","inverseOffsetX","inverseOffsetY","p2FireBall","getProjectileVelocity","getPos","p2Fire2","p2Fire","p2FireBeam","BlueBall","startSpread","endSpread","deltaX","amount","aceleration","smother","textRenderer_1","animationHandler_1","projectileHandler_1","dynamicTileHandler_1","particleHandler_1","simpleParticleRenderer_1","enemyHandler_1","camera_1","dynamicRenderer_1","ui_1","sceneHandler_1","localStorageHelper_1","sceneIndex_1","audioHandler_1","fps","collision","gameArea","deathTimer","levelCompletedTimer","Context","renderer","sceneHandler","SceneHandler","colorRenderer","simpleParticleRenderer","SimpleParticleRenderer","dynamicRenderer","DynamicRenderer","AudioHandler","initKeyBindings","initLoop","loadLevel","intevalTimer","setInterval","run","lastUpdate","Date","getTime","loops","skipTicks","maxFrameSkip","nextGameTick","started","enemyHandler","dynamicTileHandler","setCurrentLevel","currentScene","SceneIndex","RestartMenu","checkGoal","checkKeys","UI","dynamicRenderCall","colorRenderCall","colorRenderCalls","simpleRenderCalls","tileMap","createGoalRenderCall","textRenderer","createTextRenderCall","createDynamicRenderCall","createStaticRenderCall","createRenderCalls","collisionAreaEnd","leftKeyPress","rightKeyPress","jumpKeyPress","shieldPress","frostKeyPress","fireKeyPress","fireballKeyPress","channelMagicKeyPress","addEventListener","event","keyCode","LocalStorageHelper","getCurrentProgress","ParticleHandler","AnimationHandler","ProjectileHandler","getSpellLevel","defence","DynamicTileHandler","Camera","fire","frost","EnemyHandler","TileMap","TextRenderer","spellPoints","context_1","tileMap_1","initContext","initShaders","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","clearColor","getContext","compileShader","Vertex","Fragment","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","getProgramInfoLog","dynamicVertecyProgram","simpleParticleProgram","initAssetTextures","initTextures","initBaseTextures","textureMap","tileAsset","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","generateMipmap","LINEAR","CLAMP_TO_EDGE","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","shaderType","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","decorativeRenderCalls","decorativeTileMap","createStaticRenderCalls","tiles_1","tiles_2","goal","createDecorativeRenderCall","sizeX","sizeY","animations","dynamicAnimations","staticAnimations","bloodAnimation_A","bloodAnimation_B_Right","bloodAnimation_B_Left","voidAnimation","bloodAnimation_C","swordman_death","onCompletion","swordman_corpse","createArcherDeath","archer_death","archer_corpse","player_sword_death_corpse","player_sword_death_animation","apprentice_Death","apprentice_corpse","masterSorcerer_death","masterSorcerer_corpse","screamer_Death","screamer_corpse","shadow_Death","shadow_corpse","swordman_head","fireball_destroy","necroball_explosion","createNecroballExplosion","blue_explosion","createBlueExplosion","fireball_explosion","createFireballExplosion","createDebugAnimation","fireDeathSwordman","createFireDeath","fireDeathArcher","createDeadArrow","collAngle","createArrowHit","useCollisionArea","frozenSwordMan","frozenArcher","frozenPart","partIndex","baseTextureNumber","completedAnimations","totalAnimations","concat","totalAnimations_1","completedAnimations_1","completedAnimation","projectiles","enemyProjectiles","debuggHandler","arrow","collRect","rectangle","Arrow","velocityValue","fireBall","collisionProjectile","Sword","createSwordman_death","currentFrame","projectileCorpse","createShadow_death","createMasterSorcerer_death","createScreamer_death","createApprentice_death","createFrozenSwordManDeath","onComplete","velocotyies","collisionAreas","createFrozenPart","createFrozenArcherDeath","removeProjectile","removeEnemyProjectile","updateFriendslyProjectiles","updateEnemyProjectiles","removeProjectile_1","destroyProjectile","removeEnemyProjectile_1","destroyAnimation","calculateDirection","removeProjectiles","playerCollisionArea","updateAndCollCheckEnemyProjectile","checkStaticObjectCollisions","shieldCollisionData","setShieldDamage","setDamageAnimation","createStickyArrowAnimation","setStaticObjectAnimation","animationOffset","updateAndCollCheck","drainShield","extra","baseNumber","particle_1","simpleParticleRenderCall_1","frostParticles","frostEffectParticles","fireParticles","fireEffectParticles","necroEffectParticles","blueEffectParticles","shieldEffectParticles","noGravity","fireColor","frostColor","frostEffectColor","shieldColor","necroColor","blueColor","flameParticleSettings","largeFlameParticleSettings","flameEffectSettings","channelMagicEffectSettings","fireExplosionSettings","magicEffectSettings","frostParticleSettings","largefrostParticleSettings","frostEffectParticleSettings","burnEffectSettings","shieldEffectSettings","invertedShieldEffectSettings","shieldExplosionEffectSettings","invertedShieldExplosionEffectSettings","settings","effectParticles","createCircleParticles","createCenterCircleParticles","fireballExplosion","radius","particleSize","positionOffset","offsetXInverse","offsetYInverse","channelCenter","offSetX","offSetY","createParticles","particles","createBurn","positionCopy","updateEffectParticles","updateParticles","fireRenderCall","SimpleParticleRenderCall","allFireParticles","frostRenderCall","frostEffectRenderCall","frostTexture","shieldEffectRenderCall","necroFireRenderCall","blueFireRenderCall","addParticles","settingFactor","particles_1","particle","pointSize","itemCount","particleCollection","removeCollection","particleCollection_1","updateParticle","lifeTime","removeParticles","spelltype","particleCollection_2","collisionSize","collisionRectangle","enemies_1","removeCollection_1","particleNumber","newParticles","collTime","Particle","radiusX","radiusY","inward","centerOffsetValue","centerSize","centerLifeTime","centerGrowth","centerOffSetX","centerOffSetY","centerParticle","offSet","sizeAttributeLocation","colorUniformLocation","pointSizeBuffer","enemyCollisionCheck","checkBurn","checkEnemyDeath","collarea","removeEnemy","velocityDelta","_d","removeEnemy_1","sceneSize","cameraOffset","maxXCameraPosition","maxYCameraPosition","focusPosition","matrixAttributeLocation","matricesBuffer","bar_1","maxHp","bars","hpBar","ProgressBar","manaBar","hudTextureCoords","bar","Bar","hpFactor","maxWidth","textureArea","maxTextureWidth","manaFactor","menu_1","clickable_1","powerSelector_1","active_1","powerSelectionMenu_1","newGameMenu_1","restartMenu_1","creditMenu_1","StartMenu","lastCurrentScene","scenes","mousePosition","click","clicked","importClicked","playerlist","textInput","textArea","fileUploadButton","fileUploadButtonHighlight","uploadInput","modal","localStorageHelper","assetLoader","startMenu","Menu","createNewGameButton","createContinueButton","createLoadButton","createCreditsButton","load","loadMenu","createToStartMenuBack","LoadMenu","loadLevelSelectionScreen","loadLevelFinishedScreen","loadNewGameMenu","loadRestartMenu","loadCreditMenu","createEventListerners","style","visibility","mouseOver","createMouseRenderCall","scene","currentLevel","levelFinishedScene","PowerSelectionMenu","createNextLevelButton","newPowerSelector","LevelFinished","restartMenu","creditMenu","CreditMenu","createToStartMenuBackFromLevelMenu","CreditsMenu","newGameMenu","NewGameMenu","createToPowerSelectorMenuButton","assets","active1","Active","active2","active3","PowerSelector","onLoad","levelSelectionMenu","clickables","createLevelMenuButtons","LevelSelection","window","relativeElement","getBoundingClientRect","clientX","left","clientY","top","fileReader","FileReader","evt","target","leveldata","tempLevel","display","innerHTML","readAsText","files","setCurrentProgress","onClick","Clickable","disabled","clickable","completedLevels","collumns","createLevelButton","buttonTexture","scene_1","text","menu","getProgression","t","Scene","createBackGround","createMenu","progressionKey","newPlayer","progression","progression_1","saveProgress","playerName","setPowers","getItem","defaultProgress","find","prg","setItem","setActive","progression_2","localStorage","stringify","hoverTexture","textTexture","disabledTexture","hover","baseTextureCoords","hoverTextureCoords","textTextureCoords","disabledTextureCoords","mouseposition","isWithinArea","actives","getPoints","fill","points","addPoint","activeAsset","addRenderCall","partial","has","simpleClickable_1","powerSelectors","powerSelector","simpleClickables","simpleClickable","getAvailablePoints","onHpClick","hpClickable","SimpleClickable","onManaClick","manaClickable","textureKey","checkProgressionExists","reDrawPlayerList","firstChild","removeChild","children","item","createElement","setProperty","textShadow","padding","onclick","this_1","appendChild","getClickCall","creditsCall","AudioContext","sources","continiousAudio","decodeAudioData","then","volume","continious"],"mappings":"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CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACC,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,CACA,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","file":"app.355a744495cb97bf990f.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar loader_1 = __webpack_require__(1);\r\n\t(function () {\r\n\t    new loader_1.Loader().initialize();\r\n\t})();\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar assetsLoader_1 = __webpack_require__(2);\r\n\tvar rxjs_1 = __webpack_require__(3);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar game_1 = __webpack_require__(420);\r\n\tvar loadHelper_1 = __webpack_require__(346);\r\n\tvar constants_1 = __webpack_require__(390);\r\n\tvar Loader = (function () {\r\n\t    function Loader() {\r\n\t        var _this = this;\r\n\t        this.loadHelper = loadHelper_1.LoadHelper.getInstance();\r\n\t        this.asset = new model_1.Asset();\r\n\t        this.audioAsset = new model_1.AudioAsset();\r\n\t        this.assetsLoader = new assetsLoader_1.AssetsLoader();\r\n\t        rxjs_1.Observable.forkJoin(this.assetsLoader.getShader(\"vertexShader.c\"), this.assetsLoader.getShader(\"fragmentShader.c\"), this.assetsLoader.getShader(\"simpleParticleVertexShader.c\"), this.assetsLoader.getShader(\"simpleParticleFragmentShader.c\"), this.assetsLoader.getShader(\"dynamicVertexShader.c\"), this.assetsLoader.getShader(\"dynamicFragmentShader.c\"), this.assetsLoader.getShader(\"colorVertexShader.c\"), this.assetsLoader.getShader(\"colorFragmentShader.c\"), this.assetsLoader.getTexture(\"tiles.png\"), this.assetsLoader.getTexture(\"particleSprites.png\"), this.assetsLoader.getTexture(\"genericParticle.png\"), this.assetsLoader.getTileTextures(\"tile\"), this.assetsLoader.getUiTextures(\"ui\"), this.assetsLoader.getLevel(\"0\"), this.assetsLoader.getAudio(constants_1.Constants.getInstance().audioResources)).subscribe(function (data) {\r\n\t            _this.asset.vertexShader = data[0];\r\n\t            _this.asset.fragmentShader = data[1];\r\n\t            _this.asset.simpleParticleVertexShader = data[2];\r\n\t            _this.asset.simpleParticleFragmentShader = data[3];\r\n\t            _this.asset.dynamicVertexShader = data[4];\r\n\t            _this.asset.dynamicFragmentShader = data[5];\r\n\t            _this.asset.colorVertexShader = data[6];\r\n\t            _this.asset.colorFragmentShader = data[7];\r\n\t            _this.asset.texture = data[8];\r\n\t            _this.asset.particleTexture = data[9];\r\n\t            _this.asset.genericParticleTexture = data[10];\r\n\t            _this.asset.tileAssets = data[11];\r\n\t            _this.asset.tileAssets = _this.addToTileAssets(_this.asset.tileAssets, data[12]);\r\n\t            _this.level = data[13];\r\n\t            _this.audioAsset.bufferDatas = data[14];\r\n\t            _this.canvas = document.getElementById(\"gameCanvas\");\r\n\t            _this.game = new game_1.Game(_this.asset, _this.audioAsset, _this.canvas, _this.level);\r\n\t        });\r\n\t    }\r\n\t    Loader.prototype.addToTileAssets = function (tileAssets, newTileAssets) {\r\n\t        newTileAssets.forEach(function (value, key) {\r\n\t            tileAssets.set(key, value);\r\n\t        });\r\n\t        return tileAssets;\r\n\t    };\r\n\t    Loader.prototype.initialize = function () {\r\n\t    };\r\n\t    return Loader;\r\n\t}());\r\n\texports.Loader = Loader;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar rxjs_1 = __webpack_require__(3);\r\n\tvar loadHelper_1 = __webpack_require__(346);\r\n\tvar constants_1 = __webpack_require__(390);\r\n\tvar _1 = __webpack_require__(391);\r\n\tvar AssetsLoader = (function () {\r\n\t    function AssetsLoader() {\r\n\t        this.shaderUrl = 'src/shader/';\r\n\t        this.textureUrl = \"src/assets/texture/\";\r\n\t        this.levelUrl = \"src/maps/\";\r\n\t        this.audioUrl = \"src/assets/audio/\";\r\n\t        this.constants = constants_1.Constants.getInstance();\r\n\t    }\r\n\t    AssetsLoader.prototype.getShader = function (fileName) {\r\n\t        return this.httpGet(this.shaderUrl + fileName)\r\n\t            .catch(this.handleError);\r\n\t    };\r\n\t    AssetsLoader.prototype.getTexture = function (fileName) {\r\n\t        var _this = this;\r\n\t        return rxjs_1.Observable.create(function (observer) {\r\n\t            var texture = new Image();\r\n\t            texture.src = _this.textureUrl + fileName;\r\n\t            texture.onload = function () {\r\n\t                observer.next(texture);\r\n\t                observer.complete();\r\n\t            };\r\n\t        });\r\n\t    };\r\n\t    AssetsLoader.prototype.getLevel = function (level) {\r\n\t        return this.httpGet(this.levelUrl + level + \".json\")\r\n\t            .map(this.extractLevel)\r\n\t            .catch(this.handleError);\r\n\t    };\r\n\t    AssetsLoader.prototype.httpGet = function (url) {\r\n\t        return rxjs_1.Observable.create(function (observer) {\r\n\t            var xmlHttp = new XMLHttpRequest();\r\n\t            xmlHttp.onreadystatechange = function () {\r\n\t                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n\t                    observer.next(xmlHttp.responseText);\r\n\t                    observer.complete();\r\n\t                }\r\n\t                ;\r\n\t            };\r\n\t            xmlHttp.onerror = function () {\r\n\t                observer.error(xmlHttp.responseText);\r\n\t            };\r\n\t            xmlHttp.open(\"GET\", url, true);\r\n\t            xmlHttp.send(null);\r\n\t        });\r\n\t    };\r\n\t    AssetsLoader.prototype.httpGetBinary = function (url) {\r\n\t        return rxjs_1.Observable.create(function (observer) {\r\n\t            var xmlHttp = new XMLHttpRequest();\r\n\t            xmlHttp.responseType = 'arraybuffer';\r\n\t            xmlHttp.onreadystatechange = function () {\r\n\t                if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n\t                    observer.next(xmlHttp.response);\r\n\t                    observer.complete();\r\n\t                }\r\n\t                ;\r\n\t            };\r\n\t            xmlHttp.onerror = function () {\r\n\t                observer.error(xmlHttp.responseText);\r\n\t            };\r\n\t            xmlHttp.open(\"GET\", url, true);\r\n\t            xmlHttp.send(null);\r\n\t        });\r\n\t    };\r\n\t    AssetsLoader.prototype.getTileTextures = function (name) {\r\n\t        return this.getTextures(name, this.constants.tileResources);\r\n\t    };\r\n\t    AssetsLoader.prototype.getUiTextures = function (name) {\r\n\t        return this.getTextures(name, this.constants.uiResources);\r\n\t    };\r\n\t    AssetsLoader.prototype.getAudioData = function (name) {\r\n\t        return this.httpGetBinary(this.audioUrl + name);\r\n\t    };\r\n\t    AssetsLoader.prototype.getAudio = function (audioResources) {\r\n\t        var _this = this;\r\n\t        return rxjs_1.Observable.create(function (obs) {\r\n\t            var map = new Map();\r\n\t            var count = 0;\r\n\t            var _loop_1 = function(auidoResource) {\r\n\t                _this.getAudioData(auidoResource).subscribe(function (it) {\r\n\t                    count++;\r\n\t                    map.set(auidoResource, it);\r\n\t                    if (count >= audioResources.length) {\r\n\t                        obs.next(map);\r\n\t                        obs.complete();\r\n\t                    }\r\n\t                });\r\n\t            };\r\n\t            for (var _i = 0, audioResources_1 = audioResources; _i < audioResources_1.length; _i++) {\r\n\t                var auidoResource = audioResources_1[_i];\r\n\t                _loop_1(auidoResource);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    AssetsLoader.prototype.getTextures = function (name, textureResources) {\r\n\t        var _this = this;\r\n\t        return rxjs_1.Observable.create(function (obs) {\r\n\t            var textures = new Map();\r\n\t            var count = 0;\r\n\t            var _loop_2 = function(textureResource) {\r\n\t                var texture = new Image();\r\n\t                texture.src = _this.textureUrl + textureResource.name;\r\n\t                texture.onload = function () {\r\n\t                    count++;\r\n\t                    var key = +textureResource.name.split(name)[0];\r\n\t                    textures.set(key, new _1.TileAsset(key, texture, textureResource.size));\r\n\t                    if (count >= textureResources.length) {\r\n\t                        obs.next(textures);\r\n\t                        obs.complete();\r\n\t                    }\r\n\t                };\r\n\t            };\r\n\t            for (var _i = 0, textureResources_1 = textureResources; _i < textureResources_1.length; _i++) {\r\n\t                var textureResource = textureResources_1[_i];\r\n\t                _loop_2(textureResource);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    AssetsLoader.prototype.extractLevel = function (responseText) {\r\n\t        var loadHelper = loadHelper_1.LoadHelper.getInstance();\r\n\t        var body = JSON.parse(responseText);\r\n\t        try {\r\n\t            var valid = loadHelper.validateLevelData(body);\r\n\t            if (!valid) {\r\n\t                throw new Error(\"Validation error\");\r\n\t            }\r\n\t        }\r\n\t        catch (e) {\r\n\t            console.log(\"Invalid level: \" + e);\r\n\t            return {};\r\n\t        }\r\n\t        return body;\r\n\t    };\r\n\t    AssetsLoader.prototype.handleError = function (error) {\r\n\t        var errMsg;\r\n\t        errMsg = error.message ? error.message : error.toString();\r\n\t        console.error(errMsg);\r\n\t        return rxjs_1.Observable.throw(errMsg);\r\n\t    };\r\n\t    return AssetsLoader;\r\n\t}());\r\n\texports.AssetsLoader = AssetsLoader;\r\n\n\n/***/ }),\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */,\n/* 58 */,\n/* 59 */,\n/* 60 */,\n/* 61 */,\n/* 62 */,\n/* 63 */,\n/* 64 */,\n/* 65 */,\n/* 66 */,\n/* 67 */,\n/* 68 */,\n/* 69 */,\n/* 70 */,\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */,\n/* 105 */,\n/* 106 */,\n/* 107 */,\n/* 108 */,\n/* 109 */,\n/* 110 */,\n/* 111 */,\n/* 112 */,\n/* 113 */,\n/* 114 */,\n/* 115 */,\n/* 116 */,\n/* 117 */,\n/* 118 */,\n/* 119 */,\n/* 120 */,\n/* 121 */,\n/* 122 */,\n/* 123 */,\n/* 124 */,\n/* 125 */,\n/* 126 */,\n/* 127 */,\n/* 128 */,\n/* 129 */,\n/* 130 */,\n/* 131 */,\n/* 132 */,\n/* 133 */,\n/* 134 */,\n/* 135 */,\n/* 136 */,\n/* 137 */,\n/* 138 */,\n/* 139 */,\n/* 140 */,\n/* 141 */,\n/* 142 */,\n/* 143 */,\n/* 144 */,\n/* 145 */,\n/* 146 */,\n/* 147 */,\n/* 148 */,\n/* 149 */,\n/* 150 */,\n/* 151 */,\n/* 152 */,\n/* 153 */,\n/* 154 */,\n/* 155 */,\n/* 156 */,\n/* 157 */,\n/* 158 */,\n/* 159 */,\n/* 160 */,\n/* 161 */,\n/* 162 */,\n/* 163 */,\n/* 164 */,\n/* 165 */,\n/* 166 */,\n/* 167 */,\n/* 168 */,\n/* 169 */,\n/* 170 */,\n/* 171 */,\n/* 172 */,\n/* 173 */,\n/* 174 */,\n/* 175 */,\n/* 176 */,\n/* 177 */,\n/* 178 */,\n/* 179 */,\n/* 180 */,\n/* 181 */,\n/* 182 */,\n/* 183 */,\n/* 184 */,\n/* 185 */,\n/* 186 */,\n/* 187 */,\n/* 188 */,\n/* 189 */,\n/* 190 */,\n/* 191 */,\n/* 192 */,\n/* 193 */,\n/* 194 */,\n/* 195 */,\n/* 196 */,\n/* 197 */,\n/* 198 */,\n/* 199 */,\n/* 200 */,\n/* 201 */,\n/* 202 */,\n/* 203 */,\n/* 204 */,\n/* 205 */,\n/* 206 */,\n/* 207 */,\n/* 208 */,\n/* 209 */,\n/* 210 */,\n/* 211 */,\n/* 212 */,\n/* 213 */,\n/* 214 */,\n/* 215 */,\n/* 216 */,\n/* 217 */,\n/* 218 */,\n/* 219 */,\n/* 220 */,\n/* 221 */,\n/* 222 */,\n/* 223 */,\n/* 224 */,\n/* 225 */,\n/* 226 */,\n/* 227 */,\n/* 228 */,\n/* 229 */,\n/* 230 */,\n/* 231 */,\n/* 232 */,\n/* 233 */,\n/* 234 */,\n/* 235 */,\n/* 236 */,\n/* 237 */,\n/* 238 */,\n/* 239 */,\n/* 240 */,\n/* 241 */,\n/* 242 */,\n/* 243 */,\n/* 244 */,\n/* 245 */,\n/* 246 */,\n/* 247 */,\n/* 248 */,\n/* 249 */,\n/* 250 */,\n/* 251 */,\n/* 252 */,\n/* 253 */,\n/* 254 */,\n/* 255 */,\n/* 256 */,\n/* 257 */,\n/* 258 */,\n/* 259 */,\n/* 260 */,\n/* 261 */,\n/* 262 */,\n/* 263 */,\n/* 264 */,\n/* 265 */,\n/* 266 */,\n/* 267 */,\n/* 268 */,\n/* 269 */,\n/* 270 */,\n/* 271 */,\n/* 272 */,\n/* 273 */,\n/* 274 */,\n/* 275 */,\n/* 276 */,\n/* 277 */,\n/* 278 */,\n/* 279 */,\n/* 280 */,\n/* 281 */,\n/* 282 */,\n/* 283 */,\n/* 284 */,\n/* 285 */,\n/* 286 */,\n/* 287 */,\n/* 288 */,\n/* 289 */,\n/* 290 */,\n/* 291 */,\n/* 292 */,\n/* 293 */,\n/* 294 */,\n/* 295 */,\n/* 296 */,\n/* 297 */,\n/* 298 */,\n/* 299 */,\n/* 300 */,\n/* 301 */,\n/* 302 */,\n/* 303 */,\n/* 304 */,\n/* 305 */,\n/* 306 */,\n/* 307 */,\n/* 308 */,\n/* 309 */,\n/* 310 */,\n/* 311 */,\n/* 312 */,\n/* 313 */,\n/* 314 */,\n/* 315 */,\n/* 316 */,\n/* 317 */,\n/* 318 */,\n/* 319 */,\n/* 320 */,\n/* 321 */,\n/* 322 */,\n/* 323 */,\n/* 324 */,\n/* 325 */,\n/* 326 */,\n/* 327 */,\n/* 328 */,\n/* 329 */,\n/* 330 */,\n/* 331 */,\n/* 332 */,\n/* 333 */,\n/* 334 */,\n/* 335 */,\n/* 336 */,\n/* 337 */,\n/* 338 */,\n/* 339 */,\n/* 340 */,\n/* 341 */,\n/* 342 */,\n/* 343 */,\n/* 344 */,\n/* 345 */,\n/* 346 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar character_1 = __webpack_require__(403);\r\n\tvar shapeshifter_1 = __webpack_require__(419);\r\n\tvar LoadHelper = (function () {\r\n\t    function LoadHelper() {\r\n\t    }\r\n\t    LoadHelper.prototype.constrcuctor = function () {\r\n\t        if (LoadHelper.instance) {\r\n\t            throw new Error(\"Static class cant be instanced!\");\r\n\t        }\r\n\t        LoadHelper.instance = this;\r\n\t    };\r\n\t    LoadHelper.getInstance = function () {\r\n\t        return LoadHelper.instance;\r\n\t    };\r\n\t    LoadHelper.prototype.levelDataToLevel = function (levelData, projectileHandler, animationHandler, particleHandler, game) {\r\n\t        var level = new model_1.Level();\r\n\t        level.name = levelData.name;\r\n\t        level.end = new model_1.Rectangle(levelData.end[0], levelData.end[1], 256, 128);\r\n\t        level.player = [levelData.player[0], levelData.player[1]];\r\n\t        level.gameSize = [levelData.gameSize[0], levelData.gameSize[1]];\r\n\t        level.camera = [levelData.camera[0], levelData.camera[1]];\r\n\t        level.tiles = levelData.tiles.map(function (it) { return new model_1.Tile(it.area.x, it.area.y, it.area.width, it.area.height, it.key); });\r\n\t        level.decorativeTiles = levelData.decorativeTiles.map(function (it) { return new model_1.Tile(it.area.x, it.area.y, it.area.width, it.area.height, it.key); });\r\n\t        if (levelData.background) {\r\n\t            var background = levelData.background;\r\n\t            level.decorativeTiles.unshift(new model_1.Tile(background.area.x, background.area.y, background.area.width, background.area.height, background.key));\r\n\t        }\r\n\t        level.dynamicTiles = levelData.dynamicTiles.map(function (it) {\r\n\t            var velocity;\r\n\t            if (it.vertical) {\r\n\t                if (it.inverse) {\r\n\t                    velocity = new model_1.Vector(0, -it.velocity);\r\n\t                }\r\n\t                else {\r\n\t                    velocity = new model_1.Vector(0, it.velocity);\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                if (it.inverse) {\r\n\t                    velocity = new model_1.Vector(-it.velocity, 0);\r\n\t                }\r\n\t                else {\r\n\t                    velocity = new model_1.Vector(it.velocity, 0);\r\n\t                }\r\n\t            }\r\n\t            return new model_1.DynamicTile(new model_1.Tile(it.tile.x, it.tile.y, it.tile.width, it.tile.height, it.key), velocity, it.vertical, it.distance);\r\n\t        });\r\n\t        level.dynamicTiles.sort(function (a, b) {\r\n\t            return a.tile.key - b.tile.key;\r\n\t        });\r\n\t        level.enemies = levelData.enemies.map(function (it) {\r\n\t            var enemy;\r\n\t            if (it.key == 50) {\r\n\t                enemy = new character_1.Swordman(new model_1.Vector(it.area.x, it.area.y), it.area.width, it.area.height, projectileHandler, animationHandler);\r\n\t            }\r\n\t            else if (it.key == 51) {\r\n\t                enemy = new character_1.Archer(new model_1.Vector(it.area.x, it.area.y), it.area.width, it.area.height, projectileHandler, animationHandler);\r\n\t            }\r\n\t            else if (it.key == 52) {\r\n\t                enemy = new character_1.Shadow(new model_1.Vector(it.area.x, it.area.y), 85, 85, projectileHandler, animationHandler);\r\n\t            }\r\n\t            else if (it.key == 53) {\r\n\t                enemy = new character_1.MasterSorcerer(new model_1.Vector(it.area.x, it.area.y), 128, 96, projectileHandler, animationHandler, particleHandler);\r\n\t            }\r\n\t            else if (it.key == 54) {\r\n\t                enemy = new character_1.Apprentice(new model_1.Vector(it.area.x, it.area.y), it.area.width, it.area.height, projectileHandler, animationHandler, particleHandler);\r\n\t            }\r\n\t            else if (it.key == 55) {\r\n\t                enemy = new character_1.Screamer(new model_1.Vector(it.area.x, it.area.y), 64, 96, projectileHandler, animationHandler, particleHandler);\r\n\t            }\r\n\t            else if (it.key == 56) {\r\n\t                enemy = new shapeshifter_1.ShapeShifter(new model_1.Vector(it.area.x, it.area.y), 128, 128, projectileHandler, animationHandler, particleHandler, game);\r\n\t            }\r\n\t            return enemy;\r\n\t        });\r\n\t        return level;\r\n\t    };\r\n\t    LoadHelper.prototype.validateLevelData = function (levelData) {\r\n\t        var valid = (this.checkDoubleNumberTouple(levelData, \"camera\")\r\n\t            && this.checkPropertyExists(levelData, \"dynamicTiles\")\r\n\t            && this.checkPropertyExists(levelData, \"enemies\")\r\n\t            && this.checkPropertyExists(levelData, \"tiles\")\r\n\t            && this.checkPropertyExists(levelData, \"decorativeTiles\")\r\n\t            && this.checkPropertyExists(levelData, \"background\")\r\n\t            && this.checkDoubleNumberTouple(levelData, \"player\")\r\n\t            && this.checkDoubleNumberTouple(levelData, \"gameSize\")\r\n\t            && this.checkDoubleNumberTouple(levelData, \"end\"));\r\n\t        return valid;\r\n\t    };\r\n\t    LoadHelper.prototype.checkDoubleNumberTouple = function (levelData, property) {\r\n\t        var value = (this.checkPropertyExists(levelData, property) && levelData[property].length == 2 && this.isNumber(levelData[property][0]) && this.isNumber(levelData[property][1]));\r\n\t        return value;\r\n\t    };\r\n\t    LoadHelper.prototype.isNumber = function (number) {\r\n\t        return (!isNaN(+number));\r\n\t    };\r\n\t    LoadHelper.prototype.checkPropertyExists = function (levelData, property) {\r\n\t        var value = (levelData[property] !== undefined);\r\n\t        return value;\r\n\t    };\r\n\t    LoadHelper.instance = new LoadHelper();\r\n\t    return LoadHelper;\r\n\t}());\r\n\texports.LoadHelper = LoadHelper;\r\n\n\n/***/ }),\n/* 347 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar tile_1 = __webpack_require__(348);\r\n\texports.Tile = tile_1.Tile;\r\n\tvar vector_1 = __webpack_require__(349);\r\n\texports.Vector = vector_1.Vector;\r\n\tvar rectangle_1 = __webpack_require__(350);\r\n\texports.Rectangle = rectangle_1.Rectangle;\r\n\tvar sprite_1 = __webpack_require__(351);\r\n\texports.Sprite = sprite_1.Sprite;\r\n\tvar level_1 = __webpack_require__(352);\r\n\texports.Level = level_1.Level;\r\n\tvar assets_1 = __webpack_require__(353);\r\n\texports.Asset = assets_1.Asset;\r\n\tvar projectile_1 = __webpack_require__(354);\r\n\texports.Projectile = projectile_1.Projectile;\r\n\tvar animation_1 = __webpack_require__(355);\r\n\texports.Animation = animation_1.Animation;\r\n\tvar frameAnimation_1 = __webpack_require__(370);\r\n\texports.FrameAnimation = frameAnimation_1.FrameAnimation;\r\n\tvar spellType_1 = __webpack_require__(371);\r\n\texports.SpellType = spellType_1.SpellType;\r\n\tvar spell_1 = __webpack_require__(372);\r\n\texports.Spell = spell_1.Spell;\r\n\tvar physicalProjectile_1 = __webpack_require__(373);\r\n\texports.PhysicalProjectile = physicalProjectile_1.PhysicalProjectile;\r\n\tvar meele_1 = __webpack_require__(376);\r\n\texports.Meele = meele_1.Meele;\r\n\tvar debug_1 = __webpack_require__(377);\r\n\texports.DebugElement = debug_1.DebugElement;\r\n\tvar textureType_1 = __webpack_require__(378);\r\n\texports.TextureType = textureType_1.TextureType;\r\n\tvar stickyAnimation_1 = __webpack_require__(379);\r\n\texports.StickyAnimation = stickyAnimation_1.StickyAnimation;\r\n\tvar rotationAnimation_1 = __webpack_require__(380);\r\n\texports.RotationAnimation = rotationAnimation_1.RotationAnimation;\r\n\tvar staticRotationAnimation_1 = __webpack_require__(381);\r\n\texports.StaticRotationAnimation = staticRotationAnimation_1.StaticRotationAnimation;\r\n\tvar collisionProjectile_1 = __webpack_require__(382);\r\n\texports.CollisionProjectile = collisionProjectile_1.CollisionProjectile;\r\n\tvar projectileType_1 = __webpack_require__(383);\r\n\texports.ProjectileType = projectileType_1.ProjectileType;\r\n\tvar cast_1 = __webpack_require__(384);\r\n\texports.Cast = cast_1.Cast;\r\n\tvar instantCast_1 = __webpack_require__(385);\r\n\texports.InstantCast = instantCast_1.InstantCast;\r\n\tvar channelCast_1 = __webpack_require__(386);\r\n\texports.ChannelCast = channelCast_1.ChannelCast;\r\n\tvar spellCast_1 = __webpack_require__(387);\r\n\texports.SpellCast = spellCast_1.SpellCast;\r\n\tvar particleProjectile_1 = __webpack_require__(388);\r\n\texports.ParticleProjectile = particleProjectile_1.ParticleProjectile;\r\n\tvar dynamicTile_1 = __webpack_require__(389);\r\n\texports.DynamicTile = dynamicTile_1.DynamicTile;\r\n\tvar dynamicTileData_1 = __webpack_require__(397);\r\n\texports.DynamicTileData = dynamicTileData_1.DynamicTileData;\r\n\tvar renderable_data_1 = __webpack_require__(398);\r\n\texports.RenderableData = renderable_data_1.RenderableData;\r\n\tvar progress_1 = __webpack_require__(399);\r\n\texports.Progress = progress_1.Progress;\r\n\tvar audioAsset_1 = __webpack_require__(400);\r\n\texports.AudioAsset = audioAsset_1.AudioAsset;\r\n\tvar continousAudio_1 = __webpack_require__(401);\r\n\texports.ContinuousAudio = continousAudio_1.ContinuousAudio;\r\n\tvar shaderType_1 = __webpack_require__(402);\r\n\texports.ShaderType = shaderType_1.ShaderType;\r\n\n\n/***/ }),\n/* 348 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Tile = (function () {\r\n\t    function Tile(x, y, width, height, key) {\r\n\t        this.x = x;\r\n\t        this.y = y;\r\n\t        this.width = width;\r\n\t        this.height = height;\r\n\t        this.key = key;\r\n\t    }\r\n\t    return Tile;\r\n\t}());\r\n\texports.Tile = Tile;\r\n\n\n/***/ }),\n/* 349 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Vector = (function () {\r\n\t    function Vector(x, y) {\r\n\t        this.x = x;\r\n\t        this.y = y;\r\n\t    }\r\n\t    Vector.prototype.add = function (vector) {\r\n\t        if (vector) {\r\n\t            this.x += vector.x;\r\n\t            this.y += vector.y;\r\n\t        }\r\n\t        return this;\r\n\t    };\r\n\t    Vector.prototype.copy = function (vector) {\r\n\t        return new Vector(vector.x, vector.y);\r\n\t    };\r\n\t    Vector.prototype.normalize = function () {\r\n\t        var mag = this.magnitude();\r\n\t        this.x = this.x / mag;\r\n\t        this.y = this.y / mag;\r\n\t    };\r\n\t    Vector.prototype.magnitude = function () {\r\n\t        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n\t    };\r\n\t    Vector.prototype.multiply = function (factor) {\r\n\t        this.x = this.x * factor;\r\n\t        this.y = this.y * factor;\r\n\t    };\r\n\t    Vector.prototype.invert = function () {\r\n\t        this.x = -this.x;\r\n\t        this.y = -this.y;\r\n\t        return this;\r\n\t    };\r\n\t    return Vector;\r\n\t}());\r\n\texports.Vector = Vector;\r\n\n\n/***/ }),\n/* 350 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Rectangle = (function () {\r\n\t    function Rectangle(x, y, width, height) {\r\n\t        this.x = x;\r\n\t        this.y = y;\r\n\t        this.width = width;\r\n\t        this.height = height;\r\n\t    }\r\n\t    return Rectangle;\r\n\t}());\r\n\texports.Rectangle = Rectangle;\r\n\n\n/***/ }),\n/* 351 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Sprite = (function () {\r\n\t    function Sprite(position) {\r\n\t        this.position = position;\r\n\t    }\r\n\t    return Sprite;\r\n\t}());\r\n\texports.Sprite = Sprite;\r\n\n\n/***/ }),\n/* 352 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Level = (function () {\r\n\t    function Level() {\r\n\t        this.tiles = [];\r\n\t        this.decorativeTiles = [];\r\n\t        this.dynamicTiles = [];\r\n\t        this.enemies = [];\r\n\t    }\r\n\t    return Level;\r\n\t}());\r\n\texports.Level = Level;\r\n\n\n/***/ }),\n/* 353 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Asset = (function () {\r\n\t    function Asset() {\r\n\t    }\r\n\t    return Asset;\r\n\t}());\r\n\texports.Asset = Asset;\r\n\n\n/***/ }),\n/* 354 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar Projectile = (function () {\r\n\t    function Projectile(velocity, area, animation, collisionRatio, collisionArea) {\r\n\t        this.projectileType = _1.ProjectileType.None;\r\n\t        this.damage = 0;\r\n\t        this.velocity = velocity;\r\n\t        this.area = area;\r\n\t        this.animation = animation;\r\n\t        if (collisionArea) {\r\n\t            this.collisionArea = collisionArea;\r\n\t        }\r\n\t        else {\r\n\t            this.collisionArea = new _1.Rectangle(this.area.x + (this.area.width / 2) - ((this.area.width * collisionRatio) / 2), this.area.y + (this.area.height / 2) - ((this.area.height * collisionRatio) / 2), this.area.width * collisionRatio, this.area.height * collisionRatio);\r\n\t        }\r\n\t    }\r\n\t    Projectile.prototype.update = function (travelDistanceX, travelDistanceY, delta) {\r\n\t        this.area.x += travelDistanceX;\r\n\t        this.area.y += travelDistanceY;\r\n\t        this.collisionArea.x += travelDistanceX;\r\n\t        this.collisionArea.y += travelDistanceY;\r\n\t        this.animation.areaToRender.x = this.area.x;\r\n\t        this.animation.areaToRender.y = this.area.y;\r\n\t    };\r\n\t    Projectile.prototype.updateForces = function (delta) {\r\n\t    };\r\n\t    return Projectile;\r\n\t}());\r\n\texports.Projectile = Projectile;\r\n\n\n/***/ }),\n/* 355 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar Animation = (function () {\r\n\t    function Animation(textureNumbers) {\r\n\t        this.timeToChange = 100;\r\n\t        this.inverse = false;\r\n\t        this.delay = 0;\r\n\t        this.frameIndex = 0;\r\n\t        this.lastChange = 0;\r\n\t        this.textureCoords = [];\r\n\t        for (var _i = 0, textureNumbers_1 = textureNumbers; _i < textureNumbers_1.length; _i++) {\r\n\t            var textureNumber = textureNumbers_1[_i];\r\n\t            this.textureCoords.push(render_1.RenderHelper.getInstance().getTextureCoordinates([], textureNumber));\r\n\t        }\r\n\t    }\r\n\t    Animation.prototype.next = function (delta) {\r\n\t        this.lastChange += delta;\r\n\t        if (this.lastChange >= this.timeToChange) {\r\n\t            this.lastChange = 0;\r\n\t            if (this.delay > 0) {\r\n\t                this.delay--;\r\n\t            }\r\n\t            this.frameIndex++;\r\n\t            if (this.repetitions) {\r\n\t                this.repetitions--;\r\n\t            }\r\n\t            if (this.frameIndex >= this.textureCoords.length) {\r\n\t                this.frameIndex = 0;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Animation.prototype.getCurrentFrame = function () {\r\n\t        return this.textureCoords[this.frameIndex];\r\n\t    };\r\n\t    Animation.prototype.reset = function () {\r\n\t        this.frameIndex = 0;\r\n\t        this.lastChange = 0;\r\n\t    };\r\n\t    return Animation;\r\n\t}());\r\n\texports.Animation = Animation;\r\n\n\n/***/ }),\n/* 356 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar renderer_1 = __webpack_require__(357);\r\n\texports.Renderer = renderer_1.Renderer;\r\n\tvar renderCall_1 = __webpack_require__(358);\r\n\texports.RenderCall = renderCall_1.RenderCall;\r\n\tvar colorRenderCall_1 = __webpack_require__(359);\r\n\texports.ColorRenderCall = colorRenderCall_1.ColorRenderCall;\r\n\tvar colorRenderer_1 = __webpack_require__(360);\r\n\texports.ColorRenderer = colorRenderer_1.ColorRenderer;\r\n\tvar renderHelper_1 = __webpack_require__(361);\r\n\texports.RenderHelper = renderHelper_1.RenderHelper;\r\n\tvar dynamicRenderCall_1 = __webpack_require__(364);\r\n\texports.DynamicRenderCall = dynamicRenderCall_1.DynamicRenderCall;\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\texports.TextureMapper = textureMapper_1.TextureMapper;\r\n\tvar particleRenderer_1 = __webpack_require__(365);\r\n\texports.ParticleRenderer = particleRenderer_1.ParticleRenderer;\r\n\tvar matrix3_1 = __webpack_require__(363);\r\n\texports.Matrix3 = matrix3_1.Matrix3;\r\n\n\n/***/ }),\n/* 357 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar Renderer = (function () {\r\n\t    function Renderer(context) {\r\n\t        this.context = context;\r\n\t        this.gl = this.context.gl;\r\n\t        this.shaderProgram = this.context.shaderProgram;\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 1, \"a_texture_coord\");\r\n\t        this.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t        this.textureCoordAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_texture_coord\");\r\n\t        this.resolutionLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_resolution\");\r\n\t        this.cameraLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_camera\");\r\n\t        this.resolution = new model_1.Vector(this.context.gl.canvas.width, this.context.gl.canvas.height);\r\n\t        this.vertexBuffer = this.gl.createBuffer();\r\n\t        this.textureCoordBuffer = this.gl.createBuffer();\r\n\t        this.indeciesBuffer = this.gl.createBuffer();\r\n\t    }\r\n\t    Renderer.prototype.render = function (renderCalls, camera) {\r\n\t        var _this = this;\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        renderCalls.forEach(function (renderCall, key) {\r\n\t            _this.gl.enableVertexAttribArray(_this.positionLocation);\r\n\t            _this.gl.enableVertexAttribArray(_this.textureCoordAttribute);\r\n\t            _this.gl.bindBuffer(_this.gl.ARRAY_BUFFER, _this.vertexBuffer);\r\n\t            _this.gl.bufferData(_this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), _this.gl.STATIC_DRAW);\r\n\t            _this.gl.bindBuffer(_this.gl.ARRAY_BUFFER, _this.textureCoordBuffer);\r\n\t            _this.gl.bufferData(_this.gl.ARRAY_BUFFER, new Float32Array(renderCall.textureCoords), _this.gl.STATIC_DRAW);\r\n\t            _this.gl.bindBuffer(_this.gl.ELEMENT_ARRAY_BUFFER, _this.indeciesBuffer);\r\n\t            _this.gl.bufferData(_this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(renderCall.indecies), _this.gl.STATIC_DRAW);\r\n\t            _this.gl.bindBuffer(_this.gl.ARRAY_BUFFER, _this.vertexBuffer);\r\n\t            _this.gl.vertexAttribPointer(_this.positionLocation, 2, _this.gl.FLOAT, false, 0, 0);\r\n\t            _this.gl.bindBuffer(_this.gl.ARRAY_BUFFER, _this.textureCoordBuffer);\r\n\t            _this.gl.vertexAttribPointer(_this.textureCoordAttribute, 2, _this.gl.FLOAT, false, 0, 0);\r\n\t            _this.gl.uniform2f(_this.resolutionLocation, _this.resolution.x, _this.resolution.y);\r\n\t            _this.gl.uniform2f(_this.cameraLocation, camera[0], camera[1]);\r\n\t            _this.gl.activeTexture(_this.gl.TEXTURE0);\r\n\t            if (key != -1) {\r\n\t                _this.gl.bindTexture(_this.gl.TEXTURE_2D, _this.context.tileTextures.get(key));\r\n\t            }\r\n\t            else {\r\n\t                _this.gl.bindTexture(_this.gl.TEXTURE_2D, _this.context.glTexture);\r\n\t            }\r\n\t            _this.gl.bindBuffer(_this.gl.ELEMENT_ARRAY_BUFFER, _this.indeciesBuffer);\r\n\t            _this.gl.drawElements(_this.gl.TRIANGLES, renderCall.indecies.length, _this.gl.UNSIGNED_SHORT, 0);\r\n\t            _this.gl.disableVertexAttribArray(_this.positionLocation);\r\n\t            _this.gl.disableVertexAttribArray(_this.textureCoordAttribute);\r\n\t        });\r\n\t    };\r\n\t    return Renderer;\r\n\t}());\r\n\texports.Renderer = Renderer;\r\n\n\n/***/ }),\n/* 358 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar RenderCall = (function () {\r\n\t    function RenderCall() {\r\n\t        this.vertecies = [];\r\n\t        this.indecies = [];\r\n\t        this.textureCoords = [];\r\n\t    }\r\n\t    return RenderCall;\r\n\t}());\r\n\texports.RenderCall = RenderCall;\r\n\n\n/***/ }),\n/* 359 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ColorRenderCall = (function () {\r\n\t    function ColorRenderCall() {\r\n\t        this.vertecies = [];\r\n\t        this.indecies = [];\r\n\t        this.textureCoords = [];\r\n\t        this.color = [];\r\n\t    }\r\n\t    return ColorRenderCall;\r\n\t}());\r\n\texports.ColorRenderCall = ColorRenderCall;\r\n\n\n/***/ }),\n/* 360 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar ColorRenderer = (function () {\r\n\t    function ColorRenderer(context) {\r\n\t        this.context = context;\r\n\t        this.gl = this.context.gl;\r\n\t        this.shaderProgram = this.context.colorShaderProgram;\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 1, \"a_color\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 2, \"a_texture_coord\");\r\n\t        this.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t        this.colorAttributeLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_color\");\r\n\t        this.textureCoordAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_texture_coord\");\r\n\t        this.resolutionLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_resolution\");\r\n\t        this.cameraLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_camera\");\r\n\t        this.resolution = new model_1.Vector(this.context.gl.canvas.width, this.context.gl.canvas.height);\r\n\t        this.colorBuffer = this.gl.createBuffer();\r\n\t        this.vertexBuffer = this.gl.createBuffer();\r\n\t        this.textureCoordBuffer = this.gl.createBuffer();\r\n\t        this.indeciesBuffer = this.gl.createBuffer();\r\n\t    }\r\n\t    ColorRenderer.prototype.render = function (renderCalls, camera) {\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        for (var _i = 0, renderCalls_1 = renderCalls; _i < renderCalls_1.length; _i++) {\r\n\t            var renderCall = renderCalls_1[_i];\r\n\t            this.gl.enableVertexAttribArray(this.positionLocation);\r\n\t            this.gl.enableVertexAttribArray(this.textureCoordAttribute);\r\n\t            this.gl.enableVertexAttribArray(this.colorAttributeLocation);\r\n\t            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t            this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\t            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t            this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.textureCoords), this.gl.STATIC_DRAW);\r\n\t            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorBuffer);\r\n\t            this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.color), this.gl.STATIC_DRAW);\r\n\t            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t            this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(renderCall.indecies), this.gl.STATIC_DRAW);\r\n\t            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t            this.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\t            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t            this.gl.vertexAttribPointer(this.textureCoordAttribute, 2, this.gl.FLOAT, false, 0, 0);\r\n\t            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorBuffer);\r\n\t            this.gl.vertexAttribPointer(this.colorAttributeLocation, 4, this.gl.FLOAT, false, 0, 0);\r\n\t            this.gl.uniform2f(this.resolutionLocation, this.resolution.x, this.resolution.y);\r\n\t            this.gl.uniform2f(this.cameraLocation, camera[0], camera[1]);\r\n\t            this.gl.activeTexture(this.gl.TEXTURE0);\r\n\t            this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.glTexture);\r\n\t            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t            this.gl.drawElements(this.gl.TRIANGLES, renderCall.indecies.length, this.gl.UNSIGNED_SHORT, 0);\r\n\t            this.gl.disableVertexAttribArray(this.positionLocation);\r\n\t            this.gl.disableVertexAttribArray(this.textureCoordAttribute);\r\n\t            this.gl.disableVertexAttribArray(this.colorAttributeLocation);\r\n\t        }\r\n\t    };\r\n\t    return ColorRenderer;\r\n\t}());\r\n\texports.ColorRenderer = ColorRenderer;\r\n\n\n/***/ }),\n/* 361 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar matrix3_1 = __webpack_require__(363);\r\n\tvar RenderHelper = (function () {\r\n\t    function RenderHelper() {\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.canvasWidth = 1200;\r\n\t        this.canvasHeight = 800;\r\n\t        this.projectionMatrix = matrix3_1.Matrix3.createProjectionMatrix(this.canvasWidth, this.canvasHeight);\r\n\t    }\r\n\t    RenderHelper.prototype.constrcuctor = function () {\r\n\t        if (RenderHelper.instance) {\r\n\t            throw new Error(\"Static class cant be instanced!\");\r\n\t        }\r\n\t        RenderHelper.instance = this;\r\n\t    };\r\n\t    RenderHelper.getInstance = function () {\r\n\t        return RenderHelper.instance;\r\n\t    };\r\n\t    RenderHelper.prototype.getRelativeValue = function (x, y) {\r\n\t        var relativePosition = new model_1.Vector(0, 0);\r\n\t        relativePosition.x = x / (this.canvasWidth / 2) - 1;\r\n\t        relativePosition.y = -y / (this.canvasHeight / 2) + 1;\r\n\t        return relativePosition;\r\n\t    };\r\n\t    RenderHelper.prototype.getVertecies = function (x, y, width, height, currentVertecies) {\r\n\t        var x1 = x;\r\n\t        var x2 = x + width;\r\n\t        var y1 = y;\r\n\t        var y2 = y + height;\r\n\t        var newVertecies = [\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x2, y1,\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x1, y2\r\n\t        ];\r\n\t        currentVertecies.push.apply(currentVertecies, newVertecies);\r\n\t        return currentVertecies;\r\n\t    };\r\n\t    RenderHelper.prototype.getInverseVertecies = function (x, y, width, height, currentVertecies) {\r\n\t        var x1 = x + width;\r\n\t        var x2 = x;\r\n\t        var y1 = y;\r\n\t        var y2 = y + height;\r\n\t        var newVertecies = [\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x2, y1,\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x1, y2\r\n\t        ];\r\n\t        currentVertecies.push.apply(currentVertecies, newVertecies);\r\n\t        return currentVertecies;\r\n\t    };\r\n\t    RenderHelper.prototype.getColor = function (currentColors, color) {\r\n\t        var col = [];\r\n\t        if (color) {\r\n\t            col = color;\r\n\t        }\r\n\t        else {\r\n\t            col = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\t        }\r\n\t        currentColors.push.apply(currentColors, col);\r\n\t        return currentColors;\r\n\t    };\r\n\t    RenderHelper.prototype.getMatrices = function (x, y, width, height, angle, currentMatrices) {\r\n\t        var rotationPointX = x + width / 2;\r\n\t        var rotationPointY = y + height / 2;\r\n\t        var moveToRotationPointMatrix = matrix3_1.Matrix3.createTranslationMatrix(-rotationPointX, -rotationPointY);\r\n\t        var rotationMatrix = matrix3_1.Matrix3.createRotationMatrix(angle);\r\n\t        var moveBackMatrix = matrix3_1.Matrix3.createTranslationMatrix(rotationPointX, rotationPointY);\r\n\t        var matrix = matrix3_1.Matrix3.multiply(moveToRotationPointMatrix, rotationMatrix);\r\n\t        matrix = matrix3_1.Matrix3.multiply(matrix, moveBackMatrix);\r\n\t        matrix = matrix3_1.Matrix3.multiply(matrix, this.projectionMatrix);\r\n\t        matrix = this.getIndeciesAttribute(matrix);\r\n\t        currentMatrices.push.apply(currentMatrices, matrix);\r\n\t        return currentMatrices;\r\n\t    };\r\n\t    RenderHelper.prototype.getIndeciesAttribute = function (attribute) {\r\n\t        var copy = attribute.slice(0, attribute.length);\r\n\t        for (var i = 0; i < 5; i++) {\r\n\t            attribute.push.apply(attribute, copy);\r\n\t        }\r\n\t        return attribute;\r\n\t    };\r\n\t    RenderHelper.prototype.getIndecies = function (currentIndecies) {\r\n\t        var vertexIndices = [\r\n\t            currentIndecies.length, currentIndecies.length + 1, currentIndecies.length + 2, currentIndecies.length + 3, currentIndecies.length + 4, currentIndecies.length + 5\r\n\t        ];\r\n\t        currentIndecies.push.apply(currentIndecies, vertexIndices);\r\n\t        return currentIndecies;\r\n\t    };\r\n\t    RenderHelper.prototype.addTextureCoordinates = function (currentTextureCoordinates, textureCoords) {\r\n\t        currentTextureCoordinates.push.apply(currentTextureCoordinates, textureCoords);\r\n\t        return currentTextureCoordinates;\r\n\t    };\r\n\t    RenderHelper.prototype.getTextureCoordinates = function (currentTextureCoordinates, textureType) {\r\n\t        var rect = this.textureMapper.mapTexture(textureType);\r\n\t        var textureCoordinates = this.getCoords(rect, RenderHelper.textureSize);\r\n\t        currentTextureCoordinates.push.apply(currentTextureCoordinates, textureCoordinates);\r\n\t        return currentTextureCoordinates;\r\n\t    };\r\n\t    RenderHelper.prototype.getTiledTextureCoordinates = function (tile, currentTextureCoordinates, size) {\r\n\t        var x1 = 0;\r\n\t        var x2 = tile.width / size[0];\r\n\t        var y1 = 0;\r\n\t        var y2 = tile.height / size[1];\r\n\t        var textureCoordinates = [\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x2, y1,\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x1, y2\r\n\t        ];\r\n\t        currentTextureCoordinates.push.apply(currentTextureCoordinates, textureCoordinates);\r\n\t        return currentTextureCoordinates;\r\n\t    };\r\n\t    RenderHelper.prototype.getMainTextureCoords = function (rect) {\r\n\t        return this.getCoords(rect, RenderHelper.textureSize);\r\n\t    };\r\n\t    RenderHelper.prototype.getCoords = function (rect, size) {\r\n\t        var x1 = rect.x / size;\r\n\t        var y1 = rect.y / size;\r\n\t        var x2 = (rect.x + rect.width) / size;\r\n\t        var y2 = (rect.y + rect.height) / size;\r\n\t        var textureCoordinates = [\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x2, y1,\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x1, y2\r\n\t        ];\r\n\t        return textureCoordinates;\r\n\t    };\r\n\t    RenderHelper.instance = new RenderHelper();\r\n\t    RenderHelper.textureSize = 2048;\r\n\t    return RenderHelper;\r\n\t}());\r\n\texports.RenderHelper = RenderHelper;\r\n\n\n/***/ }),\n/* 362 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar TextureMapper = (function () {\r\n\t    function TextureMapper() {\r\n\t        this.texture0 = new model_1.Rectangle(0, 0, 0, 0);\r\n\t        this.texture1 = new model_1.Rectangle(0, 0, 51.2, 51.2);\r\n\t        this.texture2 = new model_1.Rectangle(51.2, 0, 51.2, 51.2);\r\n\t        this.texture3 = new model_1.Rectangle(102.4, 0, 51.2, 51.2);\r\n\t        this.texture4 = new model_1.Rectangle(153.6, 0, 51.2, 51.2);\r\n\t        this.texture5 = new model_1.Rectangle(204.8, 0, 51.2, 51.2);\r\n\t        this.texture6 = new model_1.Rectangle(0, 51.2, 51.2, 51.2);\r\n\t        this.texture7 = new model_1.Rectangle(51.2, 51.2, 51.2, 51.2);\r\n\t        this.texture8 = new model_1.Rectangle(102.4, 51.2, 51.2, 51.2);\r\n\t        this.texture9 = new model_1.Rectangle(153.6, 51.2, 51.2, 51.2);\r\n\t        this.texture10 = new model_1.Rectangle(204.8, 51.2, 51.2, 51.2);\r\n\t        this.texture11 = new model_1.Rectangle(0, 102.4, 51.2, 51.2);\r\n\t        this.texture12 = new model_1.Rectangle(51.2, 102.4, 51.2, 51.2);\r\n\t        this.texture13 = new model_1.Rectangle(102.4, 102.4, 51.2, 51.2);\r\n\t        this.texture14 = new model_1.Rectangle(153.6, 102.4, 51.2, 51.2);\r\n\t        this.texture15 = new model_1.Rectangle(204.8, 102.4, 51.2, 50);\r\n\t        this.texture16 = new model_1.Rectangle(0, 153.6, 51.2, 51.2);\r\n\t        this.texture17 = new model_1.Rectangle(51.2, 153.6, 51.2, 51.2);\r\n\t        this.texture18 = new model_1.Rectangle(102.4, 153.6, 51.2, 51.2);\r\n\t        this.texture19 = new model_1.Rectangle(153.6, 153.6, 50, 50);\r\n\t        this.texture20 = new model_1.Rectangle(204.8, 153.6, 51.2, 51.2);\r\n\t        this.texture21 = new model_1.Rectangle(0, 204.8, 51.2, 51.2);\r\n\t        this.texture22 = new model_1.Rectangle(51.2, 204.8, 51.2, 51.2);\r\n\t        this.texture23 = new model_1.Rectangle(102.4, 204.8, 50, 51.2);\r\n\t        this.texture24 = new model_1.Rectangle(153.6, 204.8, 51.2, 51.2);\r\n\t        this.texture25 = new model_1.Rectangle(234, 220, 20, 36);\r\n\t        this.texture26 = new model_1.Rectangle(128, 320, 86, 128);\r\n\t        this.texture50 = new model_1.Rectangle(0, 368, 128, 16);\r\n\t        this.texture51 = new model_1.Rectangle(32, 1280, 290, 32);\r\n\t        this.texture52 = new model_1.Rectangle(32, 1440, 64, 8);\r\n\t        this.texture53 = new model_1.Rectangle(33, 1448, 8, 8);\r\n\t        this.texture54 = new model_1.Rectangle(33, 1456, 8, 8);\r\n\t        this.texture55 = new model_1.Rectangle(384, 1024, 128, 128);\r\n\t        this.texture56 = new model_1.Rectangle(512, 1024, 128, 128);\r\n\t        this.texture57 = new model_1.Rectangle(640, 1024, 128, 128);\r\n\t        this.texture58 = new model_1.Rectangle(768, 1024, 128, 128);\r\n\t        this.texture59 = new model_1.Rectangle(896, 1024, 128, 128);\r\n\t        this.texture60 = new model_1.Rectangle(1760, 1248, 32, 64);\r\n\t        this.texture61 = new model_1.Rectangle(1792, 1248, 32, 64);\r\n\t        this.texture62 = new model_1.Rectangle(1824, 1248, 32, 64);\r\n\t        this.texture63 = new model_1.Rectangle(1856, 1248, 32, 64);\r\n\t        this.texture100 = new model_1.Rectangle(258, 2, 55, 50);\r\n\t        this.texture101 = new model_1.Rectangle(311, 2, 64, 55);\r\n\t        this.texture102 = new model_1.Rectangle(375, 2, 72, 64);\r\n\t        this.texture103 = new model_1.Rectangle(257, 64, 75, 64);\r\n\t        this.texture104 = new model_1.Rectangle(336, 64, 78, 72);\r\n\t        this.texture105 = new model_1.Rectangle(416, 64, 82, 75);\r\n\t        this.texture106 = new model_1.Rectangle(256, 192, 128, 128);\r\n\t        this.texture107 = new model_1.Rectangle(384, 192, 128, 128);\r\n\t        this.texture108 = new model_1.Rectangle(512, 192, 128, 128);\r\n\t        this.texture109 = new model_1.Rectangle(256, 320, 128, 128);\r\n\t        this.texture110 = new model_1.Rectangle(384, 320, 128, 128);\r\n\t        this.texture111 = new model_1.Rectangle(512, 320, 128, 128);\r\n\t        this.texture112 = new model_1.Rectangle(512, 0, 128, 128);\r\n\t        this.texture113 = new model_1.Rectangle(640, 0, 128, 128);\r\n\t        this.texture114 = new model_1.Rectangle(768, 0, 128, 128);\r\n\t        this.texture115 = new model_1.Rectangle(896, 0, 128, 128);\r\n\t        this.texture116 = new model_1.Rectangle(704, 128, 128, 128);\r\n\t        this.texture117 = new model_1.Rectangle(832, 128, 128, 128);\r\n\t        this.texture118 = new model_1.Rectangle(1870, 340, 85, 85);\r\n\t        this.texture119 = new model_1.Rectangle(1955, 340, 85, 85);\r\n\t        this.texture120 = new model_1.Rectangle(1700, 425, 85, 85);\r\n\t        this.texture121 = new model_1.Rectangle(1785, 425, 85, 85);\r\n\t        this.texture122 = new model_1.Rectangle(1870, 425, 85, 85);\r\n\t        this.texture123 = new model_1.Rectangle(1955, 425, 85, 85);\r\n\t        this.texture124 = new model_1.Rectangle(1700, 510, 85, 85);\r\n\t        this.texture125 = new model_1.Rectangle(1785, 510, 85, 85);\r\n\t        this.texture126 = new model_1.Rectangle(1870, 510, 85, 85);\r\n\t        this.texture127 = new model_1.Rectangle(1955, 510, 85, 85);\r\n\t        this.texture128 = new model_1.Rectangle(1700, 595, 85, 85);\r\n\t        this.texture129 = new model_1.Rectangle(1785, 595, 85, 85);\r\n\t        this.texture130 = new model_1.Rectangle(1870, 595, 85, 85);\r\n\t        this.texture131 = new model_1.Rectangle(1955, 595, 85, 85);\r\n\t        this.texture132 = new model_1.Rectangle(1700, 680, 85, 85);\r\n\t        this.texture133 = new model_1.Rectangle(1785, 680, 85, 85);\r\n\t        this.texture134 = new model_1.Rectangle(1870, 680, 85, 85);\r\n\t        this.texture135 = new model_1.Rectangle(1955, 680, 85, 85);\r\n\t        this.texture136 = new model_1.Rectangle(1700, 765, 85, 85);\r\n\t        this.texture137 = new model_1.Rectangle(1785, 765, 85, 85);\r\n\t        this.texture138 = new model_1.Rectangle(1870, 765, 85, 85);\r\n\t        this.texture139 = new model_1.Rectangle(1408, 448, 64, 64);\r\n\t        this.texture140 = new model_1.Rectangle(1472, 448, 64, 64);\r\n\t        this.texture141 = new model_1.Rectangle(1536, 448, 64, 64);\r\n\t        this.texture142 = new model_1.Rectangle(1600, 448, 64, 64);\r\n\t        this.texture143 = new model_1.Rectangle(1408, 512, 64, 64);\r\n\t        this.texture144 = new model_1.Rectangle(1472, 512, 64, 64);\r\n\t        this.texture145 = new model_1.Rectangle(1536, 512, 64, 64);\r\n\t        this.texture146 = new model_1.Rectangle(1600, 512, 64, 64);\r\n\t        this.texture147 = new model_1.Rectangle(0, 896, 128, 128);\r\n\t        this.texture148 = new model_1.Rectangle(128, 896, 128, 128);\r\n\t        this.texture149 = new model_1.Rectangle(256, 896, 128, 128);\r\n\t        this.texture150 = new model_1.Rectangle(0, 1024, 128, 128);\r\n\t        this.texture151 = new model_1.Rectangle(128, 1024, 128, 128);\r\n\t        this.texture152 = new model_1.Rectangle(256, 1024, 128, 128);\r\n\t        this.texture153 = new model_1.Rectangle(1408, 576, 64, 64);\r\n\t        this.texture154 = new model_1.Rectangle(1472, 576, 64, 64);\r\n\t        this.texture155 = new model_1.Rectangle(1536, 576, 64, 64);\r\n\t        this.texture156 = new model_1.Rectangle(32, 608, 32, 64);\r\n\t        this.texture157 = new model_1.Rectangle(96, 608, 32, 64);\r\n\t        this.texture158 = new model_1.Rectangle(160, 608, 32, 64);\r\n\t        this.texture159 = new model_1.Rectangle(224, 608, 32, 64);\r\n\t        this.texture160 = new model_1.Rectangle(1056, 1248, 32, 64);\r\n\t        this.texture161 = new model_1.Rectangle(1088, 1248, 32, 64);\r\n\t        this.texture162 = new model_1.Rectangle(992, 1248, 32, 64);\r\n\t        this.texture163 = new model_1.Rectangle(1024, 1248, 32, 64);\r\n\t        this.texture165 = new model_1.Rectangle(1152, 1248, 32, 64);\r\n\t        this.texture166 = new model_1.Rectangle(1184, 1248, 32, 64);\r\n\t        this.texture167 = new model_1.Rectangle(1216, 1248, 32, 64);\r\n\t        this.texture168 = new model_1.Rectangle(1280, 1248, 32, 64);\r\n\t        this.texture169 = new model_1.Rectangle(1312, 1248, 32, 64);\r\n\t        this.texture170 = new model_1.Rectangle(1344, 1248, 32, 64);\r\n\t        this.texture171 = new model_1.Rectangle(1376, 1248, 32, 64);\r\n\t        this.texture172 = new model_1.Rectangle(1408, 1248, 32, 64);\r\n\t        this.texture173 = new model_1.Rectangle(1472, 1248, 32, 64);\r\n\t        this.texture174 = new model_1.Rectangle(1504, 1248, 32, 64);\r\n\t        this.texture175 = new model_1.Rectangle(1536, 1248, 32, 64);\r\n\t        this.texture176 = new model_1.Rectangle(1568, 1248, 32, 64);\r\n\t        this.texture177 = new model_1.Rectangle(1600, 1248, 32, 64);\r\n\t        this.texture178 = new model_1.Rectangle(1632, 1248, 32, 64);\r\n\t        this.texture179 = new model_1.Rectangle(1248, 32, 164, 27);\r\n\t        this.texture180 = new model_1.Rectangle(1248, 96, 32, 32);\r\n\t        this.texture181 = new model_1.Rectangle(1248, 64, 164, 27);\r\n\t        this.texture182 = new model_1.Rectangle(1248, 0, 164, 27);\r\n\t        this.texture183 = new model_1.Rectangle(1440, 0, 164, 27);\r\n\t        this.texture184 = new model_1.Rectangle(1440, 32, 164, 27);\r\n\t        this.texture185 = new model_1.Rectangle(1440, 64, 164, 27);\r\n\t        this.texture186 = new model_1.Rectangle(1440, 96, 164, 27);\r\n\t        this.texture187 = new model_1.Rectangle(1088, 96, 128, 64);\r\n\t        this.texture188 = new model_1.Rectangle(1088, 192, 128, 64);\r\n\t        this.texture189 = new model_1.Rectangle(1088, 256, 128, 64);\r\n\t        this.texture190 = new model_1.Rectangle(1088, 320, 128, 64);\r\n\t        this.texture191 = new model_1.Rectangle(1088, 384, 128, 64);\r\n\t        this.texture192 = new model_1.Rectangle(1088, 448, 128, 64);\r\n\t        this.texture193 = new model_1.Rectangle(1088, 512, 128, 64);\r\n\t        this.texture194 = new model_1.Rectangle(1088, 576, 128, 64);\r\n\t        this.texture195 = new model_1.Rectangle(1088, 640, 128, 64);\r\n\t        this.texture196 = new model_1.Rectangle(1088, 704, 128, 64);\r\n\t        this.texture197 = new model_1.Rectangle(1088, 768, 128, 64);\r\n\t        this.texture198 = new model_1.Rectangle(1632, 0, 270, 64);\r\n\t        this.texture199 = new model_1.Rectangle(64, 1664, 128, 128);\r\n\t        this.texture200 = new model_1.Rectangle(28, 293, 28, 26);\r\n\t        this.texture201 = new model_1.Rectangle(56, 293, 28, 26);\r\n\t        this.texture202 = new model_1.Rectangle(84, 293, 28, 26);\r\n\t        this.texture203 = new model_1.Rectangle(0, 290, 28, 29);\r\n\t        this.texture204 = new model_1.Rectangle(112, 290, 28, 29);\r\n\t        this.texture205 = new model_1.Rectangle(140, 290, 28, 29);\r\n\t        this.texture206 = new model_1.Rectangle(168, 290, 28, 29);\r\n\t        this.texture207 = new model_1.Rectangle(196, 290, 28, 29);\r\n\t        this.texture208 = new model_1.Rectangle(224, 290, 28, 29);\r\n\t        this.texture209 = new model_1.Rectangle(0, 480, 28, 29);\r\n\t        this.texture210 = new model_1.Rectangle(28, 480, 28, 29);\r\n\t        this.texture211 = new model_1.Rectangle(56, 480, 28, 29);\r\n\t        this.texture212 = new model_1.Rectangle(84, 480, 28, 29);\r\n\t        this.texture214 = new model_1.Rectangle(0, 448, 28, 29);\r\n\t        this.texture215 = new model_1.Rectangle(28, 448, 28, 29);\r\n\t        this.texture216 = new model_1.Rectangle(56, 448, 28, 29);\r\n\t        this.texture217 = new model_1.Rectangle(84, 448, 28, 29);\r\n\t        this.texture218 = new model_1.Rectangle(112, 448, 28, 29);\r\n\t        this.texture219 = new model_1.Rectangle(140, 448, 28, 29);\r\n\t        this.texture220 = new model_1.Rectangle(0, 416, 28, 29);\r\n\t        this.texture221 = new model_1.Rectangle(28, 416, 28, 29);\r\n\t        this.texture222 = new model_1.Rectangle(56, 416, 28, 29);\r\n\t        this.texture223 = new model_1.Rectangle(84, 416, 28, 29);\r\n\t        this.texture224 = new model_1.Rectangle(0, 384, 28, 29);\r\n\t        this.texture225 = new model_1.Rectangle(28, 384, 28, 29);\r\n\t        this.texture226 = new model_1.Rectangle(56, 384, 28, 29);\r\n\t        this.texture227 = new model_1.Rectangle(112, 480, 28, 29);\r\n\t        this.texture228 = new model_1.Rectangle(140, 480, 28, 29);\r\n\t        this.texture229 = new model_1.Rectangle(168, 480, 28, 29);\r\n\t        this.texture230 = new model_1.Rectangle(196, 480, 28, 29);\r\n\t        this.texture231 = new model_1.Rectangle(224, 480, 28, 29);\r\n\t        this.texture232 = new model_1.Rectangle(252, 480, 28, 29);\r\n\t        this.texture233 = new model_1.Rectangle(32, 1152, 32, 32);\r\n\t        this.texture234 = new model_1.Rectangle(64, 1152, 32, 32);\r\n\t        this.texture235 = new model_1.Rectangle(96, 1152, 32, 32);\r\n\t        this.texture236 = new model_1.Rectangle(128, 1152, 32, 32);\r\n\t        this.texture237 = new model_1.Rectangle(160, 1152, 32, 32);\r\n\t        this.texture238 = new model_1.Rectangle(192, 1152, 32, 32);\r\n\t        this.texture239 = new model_1.Rectangle(224, 1152, 32, 32);\r\n\t        this.texture240 = new model_1.Rectangle(256, 1152, 32, 32);\r\n\t        this.texture241 = new model_1.Rectangle(288, 1152, 32, 32);\r\n\t        this.texture242 = new model_1.Rectangle(320, 1152, 32, 32);\r\n\t        this.texture243 = new model_1.Rectangle(32, 1216, 32, 32);\r\n\t        this.texture244 = new model_1.Rectangle(64, 1216, 32, 32);\r\n\t        this.texture245 = new model_1.Rectangle(96, 1216, 32, 32);\r\n\t        this.texture246 = new model_1.Rectangle(128, 1216, 32, 32);\r\n\t        this.texture247 = new model_1.Rectangle(160, 1216, 32, 32);\r\n\t        this.texture248 = new model_1.Rectangle(192, 1216, 32, 32);\r\n\t        this.texture249 = new model_1.Rectangle(0, 320, 28, 32);\r\n\t        this.texture250 = new model_1.Rectangle(224, 1216, 32, 32);\r\n\t        this.texture251 = new model_1.Rectangle(256, 1216, 32, 32);\r\n\t        this.texture252 = new model_1.Rectangle(288, 1216, 32, 32);\r\n\t        this.texture253 = new model_1.Rectangle(320, 1216, 32, 32);\r\n\t        this.texture254 = new model_1.Rectangle(352, 1216, 32, 32);\r\n\t        this.texture255 = new model_1.Rectangle(384, 1216, 32, 32);\r\n\t        this.texture256 = new model_1.Rectangle(416, 1216, 32, 32);\r\n\t        this.texture257 = new model_1.Rectangle(448, 1216, 32, 32);\r\n\t        this.texture262 = new model_1.Rectangle(32, 1344, 32, 32);\r\n\t        this.texture263 = new model_1.Rectangle(64, 1344, 32, 32);\r\n\t        this.texture264 = new model_1.Rectangle(96, 1344, 32, 32);\r\n\t        this.texture265 = new model_1.Rectangle(160, 1344, 32, 32);\r\n\t        this.texture266 = new model_1.Rectangle(192, 1344, 32, 32);\r\n\t        this.texture267 = new model_1.Rectangle(224, 1344, 32, 32);\r\n\t        this.texture268 = new model_1.Rectangle(32, 1401, 24, 7);\r\n\t        this.texture269 = new model_1.Rectangle(64, 1401, 15, 7);\r\n\t        this.texture270 = new model_1.Rectangle(288, 1344, 32, 32);\r\n\t        this.texture271 = new model_1.Rectangle(320, 1344, 32, 32);\r\n\t        this.texture272 = new model_1.Rectangle(352, 1344, 32, 32);\r\n\t        this.texture273 = new model_1.Rectangle(384, 1344, 32, 32);\r\n\t        this.texture274 = new model_1.Rectangle(416, 1344, 32, 32);\r\n\t        this.texture275 = new model_1.Rectangle(448, 1344, 32, 32);\r\n\t        this.texture276 = new model_1.Rectangle(288, 1376, 32, 32);\r\n\t        this.texture277 = new model_1.Rectangle(320, 1376, 32, 32);\r\n\t        this.texture278 = new model_1.Rectangle(352, 1376, 32, 32);\r\n\t        this.texture279 = new model_1.Rectangle(384, 1376, 32, 32);\r\n\t        this.texture280 = new model_1.Rectangle(416, 1376, 32, 32);\r\n\t        this.texture281 = new model_1.Rectangle(448, 1376, 32, 32);\r\n\t        this.texture282 = new model_1.Rectangle(512, 1344, 32, 32);\r\n\t        this.texture283 = new model_1.Rectangle(544, 1344, 32, 32);\r\n\t        this.texture284 = new model_1.Rectangle(576, 1344, 32, 32);\r\n\t        this.texture285 = new model_1.Rectangle(608, 1344, 32, 32);\r\n\t        this.texture286 = new model_1.Rectangle(640, 1344, 32, 32);\r\n\t        this.texture287 = new model_1.Rectangle(672, 1344, 32, 32);\r\n\t        this.texture288 = new model_1.Rectangle(704, 1344, 32, 32);\r\n\t        this.texture289 = new model_1.Rectangle(736, 1344, 32, 32);\r\n\t        this.texture290 = new model_1.Rectangle(800, 1344, 32, 32);\r\n\t        this.texture291 = new model_1.Rectangle(832, 1344, 32, 32);\r\n\t        this.texture292 = new model_1.Rectangle(864, 1344, 32, 32);\r\n\t        this.texture293 = new model_1.Rectangle(896, 1344, 32, 32);\r\n\t        this.texture294 = new model_1.Rectangle(480, 1376, 28, 32);\r\n\t        this.texture295 = new model_1.Rectangle(512, 1376, 28, 32);\r\n\t        this.texture296 = new model_1.Rectangle(544, 1376, 28, 32);\r\n\t        this.texture297 = new model_1.Rectangle(480, 1440, 20, 20);\r\n\t        this.texture298 = new model_1.Rectangle(512, 1440, 20, 20);\r\n\t        this.texture299 = new model_1.Rectangle(544, 1440, 20, 20);\r\n\t        this.texture300 = new model_1.Rectangle(32, 1664, 128, 128);\r\n\t        this.texture301 = new model_1.Rectangle(1344, 1184, 64, 64);\r\n\t        this.texture302 = new model_1.Rectangle(1408, 1184, 64, 64);\r\n\t        this.texture303 = new model_1.Rectangle(1472, 1184, 64, 64);\r\n\t        this.texture304 = new model_1.Rectangle(1536, 1184, 64, 64);\r\n\t        this.texture305 = new model_1.Rectangle(1600, 1184, 64, 64);\r\n\t        this.texture306 = new model_1.Rectangle(1664, 1184, 64, 64);\r\n\t        this.texture500 = new model_1.Rectangle(0, 1536, 96, 64);\r\n\t        this.texture550 = new model_1.Rectangle(1088, 0, 128, 64);\r\n\t        this.texture551 = new model_1.Rectangle(1632, 96, 111, 12);\r\n\t        this.texture552 = new model_1.Rectangle(1632, 128, 111, 12);\r\n\t        this.texture553 = new model_1.Rectangle(1440, 128, 164, 27);\r\n\t        this.texture554 = new model_1.Rectangle(1248, 128, 164, 27);\r\n\t        this.texture555 = new model_1.Rectangle(1440, 160, 164, 27);\r\n\t        this.texture556 = new model_1.Rectangle(1440, 192, 164, 27);\r\n\t        this.texture557 = new model_1.Rectangle(1440, 224, 164, 27);\r\n\t        this.texture558 = new model_1.Rectangle(1440, 256, 164, 27);\r\n\t        this.texture560 = new model_1.Rectangle(1344, 704, 64, 96);\r\n\t        this.texture561 = new model_1.Rectangle(1408, 704, 64, 96);\r\n\t        this.texture562 = new model_1.Rectangle(1472, 704, 64, 96);\r\n\t        this.texture563 = new model_1.Rectangle(1536, 704, 64, 96);\r\n\t        this.texture564 = new model_1.Rectangle(1600, 704, 64, 96);\r\n\t        this.texture565 = new model_1.Rectangle(1344, 800, 64, 96);\r\n\t        this.texture566 = new model_1.Rectangle(1408, 800, 64, 96);\r\n\t        this.texture567 = new model_1.Rectangle(1472, 800, 64, 96);\r\n\t        this.texture568 = new model_1.Rectangle(1536, 800, 64, 96);\r\n\t        this.texture569 = new model_1.Rectangle(1600, 800, 64, 96);\r\n\t        this.texture570 = new model_1.Rectangle(1344, 896, 64, 96);\r\n\t        this.texture571 = new model_1.Rectangle(1408, 896, 64, 96);\r\n\t        this.texture572 = new model_1.Rectangle(1472, 896, 64, 96);\r\n\t        this.texture573 = new model_1.Rectangle(1536, 896, 64, 96);\r\n\t        this.texture574 = new model_1.Rectangle(1600, 896, 64, 96);\r\n\t        this.texture575 = new model_1.Rectangle(1344, 992, 64, 96);\r\n\t        this.texture576 = new model_1.Rectangle(1408, 992, 64, 96);\r\n\t        this.texture577 = new model_1.Rectangle(1472, 992, 64, 96);\r\n\t        this.texture578 = new model_1.Rectangle(1536, 992, 64, 96);\r\n\t        this.texture579 = new model_1.Rectangle(1600, 992, 64, 96);\r\n\t        this.texture580 = new model_1.Rectangle(1408, 1440, 128, 96);\r\n\t        this.texture581 = new model_1.Rectangle(1536, 1440, 128, 96);\r\n\t        this.texture582 = new model_1.Rectangle(1664, 1440, 128, 96);\r\n\t        this.texture583 = new model_1.Rectangle(1792, 1440, 128, 96);\r\n\t        this.texture584 = new model_1.Rectangle(1408, 1568, 128, 96);\r\n\t        this.texture585 = new model_1.Rectangle(1536, 1568, 128, 96);\r\n\t        this.texture586 = new model_1.Rectangle(1664, 1568, 128, 96);\r\n\t        this.texture587 = new model_1.Rectangle(1792, 1568, 128, 96);\r\n\t        this.texture588 = new model_1.Rectangle(1408, 1696, 128, 96);\r\n\t        this.texture589 = new model_1.Rectangle(1536, 1696, 128, 96);\r\n\t        this.texture590 = new model_1.Rectangle(1664, 1696, 128, 96);\r\n\t        this.texture591 = new model_1.Rectangle(1792, 1696, 128, 96);\r\n\t        this.texture592 = new model_1.Rectangle(1408, 1824, 128, 96);\r\n\t        this.texture593 = new model_1.Rectangle(1536, 1824, 128, 96);\r\n\t        this.texture594 = new model_1.Rectangle(1664, 1824, 128, 96);\r\n\t        this.texture595 = new model_1.Rectangle(1792, 1824, 128, 96);\r\n\t        this.texture596 = new model_1.Rectangle(1408, 1952, 128, 96);\r\n\t        this.texture597 = new model_1.Rectangle(1664, 1952, 128, 96);\r\n\t        this.texture598 = new model_1.Rectangle(1792, 1952, 128, 96);\r\n\t        this.texture600 = new model_1.Rectangle(448, 736, 128, 128);\r\n\t        this.texture601 = new model_1.Rectangle(576, 736, 128, 128);\r\n\t        this.texture602 = new model_1.Rectangle(704, 736, 128, 128);\r\n\t        this.texture603 = new model_1.Rectangle(832, 736, 128, 128);\r\n\t        this.texture604 = new model_1.Rectangle(448, 864, 128, 128);\r\n\t        this.texture605 = new model_1.Rectangle(576, 864, 128, 128);\r\n\t        this.texture606 = new model_1.Rectangle(704, 864, 128, 128);\r\n\t        this.texture607 = new model_1.Rectangle(832, 864, 128, 128);\r\n\t        this.texture608 = new model_1.Rectangle(448, 480, 128, 128);\r\n\t        this.texture609 = new model_1.Rectangle(576, 480, 128, 128);\r\n\t        this.texture610 = new model_1.Rectangle(704, 480, 128, 128);\r\n\t        this.texture611 = new model_1.Rectangle(832, 480, 128, 128);\r\n\t        this.texture612 = new model_1.Rectangle(448, 608, 128, 128);\r\n\t        this.texture613 = new model_1.Rectangle(576, 608, 128, 128);\r\n\t        this.texture614 = new model_1.Rectangle(704, 608, 128, 128);\r\n\t        this.texture615 = new model_1.Rectangle(832, 608, 128, 128);\r\n\t        this.texture616 = new model_1.Rectangle(32, 512, 128, 128);\r\n\t        this.texture617 = new model_1.Rectangle(160, 512, 128, 128);\r\n\t        this.texture618 = new model_1.Rectangle(288, 512, 128, 128);\r\n\t        this.texture619 = new model_1.Rectangle(32, 640, 128, 128);\r\n\t        this.texture620 = new model_1.Rectangle(160, 640, 128, 128);\r\n\t        this.texture621 = new model_1.Rectangle(288, 640, 128, 128);\r\n\t        this.texture622 = new model_1.Rectangle(32, 768, 128, 128);\r\n\t        this.texture623 = new model_1.Rectangle(160, 768, 128, 128);\r\n\t        this.texture624 = new model_1.Rectangle(1440, 288, 164, 27);\r\n\t    }\r\n\t    TextureMapper.prototype.constrcuctor = function () {\r\n\t        if (TextureMapper.instance) {\r\n\t            throw new Error(\"Static class cant be instanced!\");\r\n\t        }\r\n\t        TextureMapper.instance = this;\r\n\t    };\r\n\t    TextureMapper.getInstance = function () {\r\n\t        return TextureMapper.instance;\r\n\t    };\r\n\t    TextureMapper.prototype.mapTexture = function (textureType) {\r\n\t        switch (textureType) {\r\n\t            case 0: return this.texture0;\r\n\t            case 1: return this.texture1;\r\n\t            case 2: return this.texture2;\r\n\t            case 3: return this.texture3;\r\n\t            case 4: return this.texture4;\r\n\t            case 5: return this.texture5;\r\n\t            case 6: return this.texture6;\r\n\t            case 7: return this.texture7;\r\n\t            case 8: return this.texture8;\r\n\t            case 9: return this.texture9;\r\n\t            case 10: return this.texture10;\r\n\t            case 11: return this.texture11;\r\n\t            case 12: return this.texture12;\r\n\t            case 13: return this.texture13;\r\n\t            case 14: return this.texture14;\r\n\t            case 15: return this.texture15;\r\n\t            case 16: return this.texture16;\r\n\t            case 17: return this.texture17;\r\n\t            case 18: return this.texture18;\r\n\t            case 19: return this.texture19;\r\n\t            case 20: return this.texture20;\r\n\t            case 21: return this.texture21;\r\n\t            case 22: return this.texture22;\r\n\t            case 23: return this.texture23;\r\n\t            case 24: return this.texture24;\r\n\t            case 25: return this.texture25;\r\n\t            case 26: return this.texture26;\r\n\t            case 50: return this.texture50;\r\n\t            case 51: return this.texture51;\r\n\t            case 52: return this.texture52;\r\n\t            case 53: return this.texture53;\r\n\t            case 54: return this.texture54;\r\n\t            case 55: return this.texture55;\r\n\t            case 56: return this.texture56;\r\n\t            case 57: return this.texture57;\r\n\t            case 58: return this.texture58;\r\n\t            case 59: return this.texture59;\r\n\t            case 60: return this.texture60;\r\n\t            case 61: return this.texture61;\r\n\t            case 62: return this.texture62;\r\n\t            case 63: return this.texture63;\r\n\t            case 100: return this.texture100;\r\n\t            case 101: return this.texture101;\r\n\t            case 102: return this.texture102;\r\n\t            case 103: return this.texture103;\r\n\t            case 104: return this.texture104;\r\n\t            case 105: return this.texture105;\r\n\t            case 106: return this.texture106;\r\n\t            case 107: return this.texture107;\r\n\t            case 108: return this.texture108;\r\n\t            case 109: return this.texture109;\r\n\t            case 110: return this.texture110;\r\n\t            case 111: return this.texture111;\r\n\t            case 112: return this.texture112;\r\n\t            case 113: return this.texture113;\r\n\t            case 114: return this.texture114;\r\n\t            case 115: return this.texture115;\r\n\t            case 116: return this.texture116;\r\n\t            case 117: return this.texture117;\r\n\t            case 118: return this.texture118;\r\n\t            case 119: return this.texture119;\r\n\t            case 120: return this.texture120;\r\n\t            case 121: return this.texture121;\r\n\t            case 122: return this.texture122;\r\n\t            case 123: return this.texture123;\r\n\t            case 124: return this.texture124;\r\n\t            case 125: return this.texture125;\r\n\t            case 126: return this.texture126;\r\n\t            case 127: return this.texture127;\r\n\t            case 128: return this.texture128;\r\n\t            case 129: return this.texture129;\r\n\t            case 130: return this.texture130;\r\n\t            case 131: return this.texture131;\r\n\t            case 132: return this.texture132;\r\n\t            case 133: return this.texture133;\r\n\t            case 134: return this.texture134;\r\n\t            case 135: return this.texture135;\r\n\t            case 136: return this.texture136;\r\n\t            case 137: return this.texture137;\r\n\t            case 138: return this.texture138;\r\n\t            case 139: return this.texture139;\r\n\t            case 140: return this.texture140;\r\n\t            case 141: return this.texture141;\r\n\t            case 142: return this.texture142;\r\n\t            case 143: return this.texture143;\r\n\t            case 144: return this.texture144;\r\n\t            case 145: return this.texture145;\r\n\t            case 146: return this.texture146;\r\n\t            case 147: return this.texture147;\r\n\t            case 148: return this.texture148;\r\n\t            case 149: return this.texture149;\r\n\t            case 150: return this.texture150;\r\n\t            case 151: return this.texture151;\r\n\t            case 152: return this.texture152;\r\n\t            case 153: return this.texture153;\r\n\t            case 154: return this.texture154;\r\n\t            case 155: return this.texture155;\r\n\t            case 156: return this.texture156;\r\n\t            case 157: return this.texture157;\r\n\t            case 158: return this.texture158;\r\n\t            case 159: return this.texture159;\r\n\t            case 160: return this.texture160;\r\n\t            case 161: return this.texture161;\r\n\t            case 162: return this.texture162;\r\n\t            case 163: return this.texture163;\r\n\t            case 165: return this.texture165;\r\n\t            case 166: return this.texture166;\r\n\t            case 167: return this.texture167;\r\n\t            case 168: return this.texture168;\r\n\t            case 169: return this.texture169;\r\n\t            case 170: return this.texture170;\r\n\t            case 171: return this.texture171;\r\n\t            case 172: return this.texture172;\r\n\t            case 173: return this.texture173;\r\n\t            case 174: return this.texture174;\r\n\t            case 175: return this.texture175;\r\n\t            case 176: return this.texture176;\r\n\t            case 177: return this.texture177;\r\n\t            case 178: return this.texture178;\r\n\t            case 179: return this.texture179;\r\n\t            case 180: return this.texture180;\r\n\t            case 181: return this.texture181;\r\n\t            case 182: return this.texture182;\r\n\t            case 183: return this.texture183;\r\n\t            case 184: return this.texture184;\r\n\t            case 185: return this.texture185;\r\n\t            case 186: return this.texture186;\r\n\t            case 187: return this.texture187;\r\n\t            case 188: return this.texture188;\r\n\t            case 189: return this.texture189;\r\n\t            case 190: return this.texture190;\r\n\t            case 191: return this.texture191;\r\n\t            case 192: return this.texture192;\r\n\t            case 193: return this.texture193;\r\n\t            case 194: return this.texture194;\r\n\t            case 195: return this.texture195;\r\n\t            case 196: return this.texture196;\r\n\t            case 197: return this.texture197;\r\n\t            case 198: return this.texture198;\r\n\t            case 199: return this.texture199;\r\n\t            case 200: return this.texture200;\r\n\t            case 201: return this.texture201;\r\n\t            case 202: return this.texture202;\r\n\t            case 203: return this.texture203;\r\n\t            case 204: return this.texture204;\r\n\t            case 205: return this.texture205;\r\n\t            case 206: return this.texture206;\r\n\t            case 207: return this.texture207;\r\n\t            case 208: return this.texture208;\r\n\t            case 209: return this.texture209;\r\n\t            case 210: return this.texture210;\r\n\t            case 211: return this.texture211;\r\n\t            case 212: return this.texture212;\r\n\t            case 214: return this.texture214;\r\n\t            case 215: return this.texture215;\r\n\t            case 216: return this.texture216;\r\n\t            case 217: return this.texture217;\r\n\t            case 218: return this.texture218;\r\n\t            case 219: return this.texture219;\r\n\t            case 220: return this.texture220;\r\n\t            case 221: return this.texture221;\r\n\t            case 222: return this.texture222;\r\n\t            case 223: return this.texture223;\r\n\t            case 224: return this.texture224;\r\n\t            case 225: return this.texture225;\r\n\t            case 226: return this.texture226;\r\n\t            case 227: return this.texture227;\r\n\t            case 228: return this.texture228;\r\n\t            case 229: return this.texture229;\r\n\t            case 230: return this.texture230;\r\n\t            case 231: return this.texture231;\r\n\t            case 232: return this.texture232;\r\n\t            case 233: return this.texture233;\r\n\t            case 234: return this.texture234;\r\n\t            case 235: return this.texture235;\r\n\t            case 236: return this.texture236;\r\n\t            case 237: return this.texture237;\r\n\t            case 238: return this.texture238;\r\n\t            case 239: return this.texture239;\r\n\t            case 240: return this.texture240;\r\n\t            case 241: return this.texture241;\r\n\t            case 242: return this.texture242;\r\n\t            case 243: return this.texture243;\r\n\t            case 244: return this.texture244;\r\n\t            case 245: return this.texture245;\r\n\t            case 246: return this.texture246;\r\n\t            case 247: return this.texture247;\r\n\t            case 248: return this.texture248;\r\n\t            case 249: return this.texture249;\r\n\t            case 250: return this.texture250;\r\n\t            case 251: return this.texture251;\r\n\t            case 252: return this.texture252;\r\n\t            case 253: return this.texture253;\r\n\t            case 254: return this.texture254;\r\n\t            case 255: return this.texture255;\r\n\t            case 256: return this.texture256;\r\n\t            case 257: return this.texture257;\r\n\t            case 262: return this.texture262;\r\n\t            case 263: return this.texture263;\r\n\t            case 264: return this.texture264;\r\n\t            case 265: return this.texture265;\r\n\t            case 266: return this.texture266;\r\n\t            case 267: return this.texture267;\r\n\t            case 268: return this.texture268;\r\n\t            case 269: return this.texture269;\r\n\t            case 270: return this.texture270;\r\n\t            case 271: return this.texture271;\r\n\t            case 272: return this.texture272;\r\n\t            case 273: return this.texture273;\r\n\t            case 274: return this.texture274;\r\n\t            case 275: return this.texture275;\r\n\t            case 276: return this.texture276;\r\n\t            case 277: return this.texture277;\r\n\t            case 278: return this.texture278;\r\n\t            case 279: return this.texture279;\r\n\t            case 280: return this.texture280;\r\n\t            case 281: return this.texture281;\r\n\t            case 282: return this.texture282;\r\n\t            case 283: return this.texture283;\r\n\t            case 284: return this.texture284;\r\n\t            case 285: return this.texture285;\r\n\t            case 286: return this.texture286;\r\n\t            case 287: return this.texture287;\r\n\t            case 288: return this.texture288;\r\n\t            case 289: return this.texture289;\r\n\t            case 290: return this.texture290;\r\n\t            case 291: return this.texture291;\r\n\t            case 292: return this.texture292;\r\n\t            case 293: return this.texture293;\r\n\t            case 294: return this.texture294;\r\n\t            case 295: return this.texture295;\r\n\t            case 296: return this.texture296;\r\n\t            case 297: return this.texture297;\r\n\t            case 298: return this.texture298;\r\n\t            case 299: return this.texture299;\r\n\t            case 300: return this.texture300;\r\n\t            case 301: return this.texture301;\r\n\t            case 302: return this.texture302;\r\n\t            case 303: return this.texture303;\r\n\t            case 304: return this.texture304;\r\n\t            case 305: return this.texture305;\r\n\t            case 306: return this.texture306;\r\n\t            case 500: return this.texture500;\r\n\t            case 550: return this.texture550;\r\n\t            case 551: return this.texture551;\r\n\t            case 552: return this.texture552;\r\n\t            case 553: return this.texture553;\r\n\t            case 554: return this.texture554;\r\n\t            case 555: return this.texture555;\r\n\t            case 556: return this.texture556;\r\n\t            case 557: return this.texture557;\r\n\t            case 558: return this.texture558;\r\n\t            case 560: return this.texture560;\r\n\t            case 561: return this.texture561;\r\n\t            case 562: return this.texture562;\r\n\t            case 563: return this.texture563;\r\n\t            case 564: return this.texture564;\r\n\t            case 565: return this.texture565;\r\n\t            case 566: return this.texture566;\r\n\t            case 567: return this.texture567;\r\n\t            case 568: return this.texture568;\r\n\t            case 569: return this.texture569;\r\n\t            case 570: return this.texture570;\r\n\t            case 571: return this.texture571;\r\n\t            case 572: return this.texture572;\r\n\t            case 573: return this.texture573;\r\n\t            case 574: return this.texture574;\r\n\t            case 575: return this.texture575;\r\n\t            case 576: return this.texture576;\r\n\t            case 577: return this.texture577;\r\n\t            case 578: return this.texture578;\r\n\t            case 579: return this.texture579;\r\n\t            case 580: return this.texture580;\r\n\t            case 581: return this.texture581;\r\n\t            case 582: return this.texture582;\r\n\t            case 583: return this.texture583;\r\n\t            case 584: return this.texture584;\r\n\t            case 585: return this.texture585;\r\n\t            case 586: return this.texture586;\r\n\t            case 587: return this.texture587;\r\n\t            case 588: return this.texture588;\r\n\t            case 589: return this.texture589;\r\n\t            case 590: return this.texture590;\r\n\t            case 591: return this.texture591;\r\n\t            case 592: return this.texture592;\r\n\t            case 593: return this.texture593;\r\n\t            case 594: return this.texture594;\r\n\t            case 595: return this.texture595;\r\n\t            case 596: return this.texture596;\r\n\t            case 597: return this.texture597;\r\n\t            case 598: return this.texture598;\r\n\t            case 600: return this.texture600;\r\n\t            case 601: return this.texture601;\r\n\t            case 602: return this.texture602;\r\n\t            case 603: return this.texture603;\r\n\t            case 604: return this.texture604;\r\n\t            case 605: return this.texture605;\r\n\t            case 606: return this.texture606;\r\n\t            case 607: return this.texture607;\r\n\t            case 608: return this.texture608;\r\n\t            case 609: return this.texture609;\r\n\t            case 610: return this.texture610;\r\n\t            case 611: return this.texture611;\r\n\t            case 612: return this.texture612;\r\n\t            case 613: return this.texture613;\r\n\t            case 614: return this.texture614;\r\n\t            case 615: return this.texture615;\r\n\t            case 616: return this.texture616;\r\n\t            case 617: return this.texture617;\r\n\t            case 618: return this.texture618;\r\n\t            case 619: return this.texture619;\r\n\t            case 620: return this.texture620;\r\n\t            case 621: return this.texture621;\r\n\t            case 622: return this.texture622;\r\n\t            case 623: return this.texture623;\r\n\t            case 624: return this.texture624;\r\n\t        }\r\n\t    };\r\n\t    TextureMapper.instance = new TextureMapper();\r\n\t    return TextureMapper;\r\n\t}());\r\n\texports.TextureMapper = TextureMapper;\r\n\n\n/***/ }),\n/* 363 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Matrix3 = (function () {\r\n\t    function Matrix3() {\r\n\t    }\r\n\t    Matrix3.prototype.createIdentityMatrix = function () {\r\n\t        return [\r\n\t            1, 0, 0,\r\n\t            0, 1, 0,\r\n\t            0, 0, 1\r\n\t        ];\r\n\t    };\r\n\t    Matrix3.createProjectionMatrix = function (width, height) {\r\n\t        return [\r\n\t            2 / width, 0, 0,\r\n\t            0, -2 / height, 0,\r\n\t            -1, 1, 1\r\n\t        ];\r\n\t    };\r\n\t    Matrix3.createTranslationMatrix = function (tx, ty) {\r\n\t        return [\r\n\t            1, 0, 0,\r\n\t            0, 1, 0,\r\n\t            tx, ty, 1\r\n\t        ];\r\n\t    };\r\n\t    Matrix3.createRotationMatrix = function (angleInRadians) {\r\n\t        var c = Math.cos(angleInRadians);\r\n\t        var s = Math.sin(angleInRadians);\r\n\t        return [\r\n\t            c, -s, 0,\r\n\t            s, c, 0,\r\n\t            0, 0, 1\r\n\t        ];\r\n\t    };\r\n\t    Matrix3.createScaleMatrix = function (sx, sy) {\r\n\t        return [\r\n\t            sx, 0, 0,\r\n\t            0, sy, 0,\r\n\t            0, 0, 1\r\n\t        ];\r\n\t    };\r\n\t    Matrix3.multiply = function (a, b) {\r\n\t        var a00 = a[0 * 3 + 0];\r\n\t        var a01 = a[0 * 3 + 1];\r\n\t        var a02 = a[0 * 3 + 2];\r\n\t        var a10 = a[1 * 3 + 0];\r\n\t        var a11 = a[1 * 3 + 1];\r\n\t        var a12 = a[1 * 3 + 2];\r\n\t        var a20 = a[2 * 3 + 0];\r\n\t        var a21 = a[2 * 3 + 1];\r\n\t        var a22 = a[2 * 3 + 2];\r\n\t        var b00 = b[0 * 3 + 0];\r\n\t        var b01 = b[0 * 3 + 1];\r\n\t        var b02 = b[0 * 3 + 2];\r\n\t        var b10 = b[1 * 3 + 0];\r\n\t        var b11 = b[1 * 3 + 1];\r\n\t        var b12 = b[1 * 3 + 2];\r\n\t        var b20 = b[2 * 3 + 0];\r\n\t        var b21 = b[2 * 3 + 1];\r\n\t        var b22 = b[2 * 3 + 2];\r\n\t        return [a00 * b00 + a01 * b10 + a02 * b20,\r\n\t            a00 * b01 + a01 * b11 + a02 * b21,\r\n\t            a00 * b02 + a01 * b12 + a02 * b22,\r\n\t            a10 * b00 + a11 * b10 + a12 * b20,\r\n\t            a10 * b01 + a11 * b11 + a12 * b21,\r\n\t            a10 * b02 + a11 * b12 + a12 * b22,\r\n\t            a20 * b00 + a21 * b10 + a22 * b20,\r\n\t            a20 * b01 + a21 * b11 + a22 * b21,\r\n\t            a20 * b02 + a21 * b12 + a22 * b22];\r\n\t    };\r\n\t    Matrix3.positionConvertion = function (x, y, matrix) {\r\n\t        x = x * matrix[0] + y * matrix[3] + 1 * matrix[6];\r\n\t        y = x * matrix[1] + y * matrix[4] + 1 * matrix[7];\r\n\t        return [x, y];\r\n\t    };\r\n\t    return Matrix3;\r\n\t}());\r\n\texports.Matrix3 = Matrix3;\r\n\n\n/***/ }),\n/* 364 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar DynamicRenderCall = (function () {\r\n\t    function DynamicRenderCall() {\r\n\t        this.vertecies = [];\r\n\t        this.indecies = [];\r\n\t        this.textureCoords = [];\r\n\t        this.matrices = [];\r\n\t    }\r\n\t    return DynamicRenderCall;\r\n\t}());\r\n\texports.DynamicRenderCall = DynamicRenderCall;\r\n\n\n/***/ }),\n/* 365 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar ParticleRenderer = (function () {\r\n\t    function ParticleRenderer(context, particleHandler) {\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.context = context;\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.gl = this.context.gl;\r\n\t        //this.shaderProgram = this.context.particleProgram;\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 0, \"a_relativeTime\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 1, \"a_lifetime\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 2, \"a_startPosition\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 3, \"a_endPosition\");\r\n\t        this.relativeTimeAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_relativeTime\");\r\n\t        this.lifeTimeAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_lifetime\");\r\n\t        this.startPositionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_startPosition\");\r\n\t        this.endPositionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_endPosition\");\r\n\t        this.particleTexture = this.gl.getUniformLocation(this.shaderProgram, \"u_particleTexture\");\r\n\t        this.colorLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n\t        this.pointEndPositionsBuffer = this.gl.createBuffer();\r\n\t        this.pointStartPositionsBuffer = this.gl.createBuffer();\r\n\t        this.pointLifetimesBuffer = this.gl.createBuffer();\r\n\t        this.pointRelativeTimeBuffer = this.gl.createBuffer();\r\n\t    }\r\n\t    ParticleRenderer.prototype.render = function (renderCalls) {\r\n\t        for (var _i = 0, renderCalls_1 = renderCalls; _i < renderCalls_1.length; _i++) {\r\n\t            var call = renderCalls_1[_i];\r\n\t            if (call.length > 0) {\r\n\t                this.gl.useProgram(this.shaderProgram);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointRelativeTimeBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.relativeTime), this.gl.STATIC_DRAW);\r\n\t                this.pointRelativeTimeBuffer.itemSize = 1;\r\n\t                this.pointRelativeTimeBuffer.numItems = call.length;\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointLifetimesBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.lifetimes), this.gl.STATIC_DRAW);\r\n\t                this.pointLifetimesBuffer.itemSize = 1;\r\n\t                this.pointLifetimesBuffer.numItems = call.length;\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointStartPositionsBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.startPositions), this.gl.STATIC_DRAW);\r\n\t                this.pointStartPositionsBuffer.itemSize = 3;\r\n\t                this.pointStartPositionsBuffer.numItems = call.length;\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointEndPositionsBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.endPositions), this.gl.STATIC_DRAW);\r\n\t                this.pointEndPositionsBuffer.itemSize = 3;\r\n\t                this.pointEndPositionsBuffer.numItems = call.length;\r\n\t                this.gl.enableVertexAttribArray(this.lifeTimeAttribute);\r\n\t                this.gl.enableVertexAttribArray(this.relativeTimeAttribute);\r\n\t                this.gl.enableVertexAttribArray(this.startPositionLocation);\r\n\t                this.gl.enableVertexAttribArray(this.endPositionLocation);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointRelativeTimeBuffer);\r\n\t                this.gl.vertexAttribPointer(this.relativeTimeAttribute, this.pointRelativeTimeBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointLifetimesBuffer);\r\n\t                this.gl.vertexAttribPointer(this.lifeTimeAttribute, this.pointLifetimesBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointStartPositionsBuffer);\r\n\t                this.gl.vertexAttribPointer(this.startPositionLocation, this.pointStartPositionsBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointEndPositionsBuffer);\r\n\t                this.gl.vertexAttribPointer(this.endPositionLocation, this.pointEndPositionsBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.activeTexture(this.gl.TEXTURE0);\r\n\t                if (call.type == model_1.SpellType.frostBlast) {\r\n\t                    this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.frostParticelTexture);\r\n\t                }\r\n\t                else {\r\n\t                    this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.genericParticleTexture);\r\n\t                }\r\n\t                this.gl.uniform1i(this.particleTexture, 0);\r\n\t                this.gl.uniform4f(this.colorLocation, call.color[0], call.color[1], call.color[2], call.color[3]);\r\n\t                this.gl.drawArrays(this.gl.POINTS, 0, this.pointLifetimesBuffer.numItems);\r\n\t                this.gl.disableVertexAttribArray(this.lifeTimeAttribute);\r\n\t                this.gl.disableVertexAttribArray(this.relativeTimeAttribute);\r\n\t                this.gl.disableVertexAttribArray(this.startPositionLocation);\r\n\t                this.gl.disableVertexAttribArray(this.endPositionLocation);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return ParticleRenderer;\r\n\t}());\r\n\texports.ParticleRenderer = ParticleRenderer;\r\n\n\n/***/ }),\n/* 366 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar _1 = __webpack_require__(367);\r\n\tvar CollisionDetection = (function () {\r\n\t    function CollisionDetection() {\r\n\t        if (CollisionDetection.instance) {\r\n\t            throw new Error(\"Static class cant be instanced!\");\r\n\t        }\r\n\t        CollisionDetection.instance = this;\r\n\t    }\r\n\t    CollisionDetection.getInstance = function () {\r\n\t        return CollisionDetection.instance;\r\n\t    };\r\n\t    CollisionDetection.prototype.createGrid = function (gameSize, collidables) {\r\n\t        this.gameSize = gameSize;\r\n\t        this.grid = new _1.Grid(25, this.gameSize);\r\n\t        for (var _i = 0, collidables_1 = collidables; _i < collidables_1.length; _i++) {\r\n\t            var collidable = collidables_1[_i];\r\n\t            this.grid.insert(collidable);\r\n\t        }\r\n\t    };\r\n\t    CollisionDetection.prototype.collisionDetection = function (tiles, dynamicTiles, character, frameVelocity, delta) {\r\n\t        var collisionData = this.checkCollision(tiles, dynamicTiles, character, frameVelocity, delta);\r\n\t        return collisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.fastCheckEnviroment = function (rect, tiles) {\r\n\t        var clear = true;\r\n\t        var possibleColls = this.grid.get(rect);\r\n\t        for (var _i = 0, possibleColls_1 = possibleColls; _i < possibleColls_1.length; _i++) {\r\n\t            var tile = possibleColls_1[_i];\r\n\t            if (this.aabbCheck(rect, tile)) {\r\n\t                clear = false;\r\n\t            }\r\n\t        }\r\n\t        return clear;\r\n\t    };\r\n\t    CollisionDetection.prototype.checkProjectileCollisionX = function (collidables, projectile, frameVelocity, staticCollisions, checkClose) {\r\n\t        var broadphasebox = this.getSweptBroadphaseBoxX(projectile.collisionArea, frameVelocity);\r\n\t        var possibleColls;\r\n\t        if (staticCollisions) {\r\n\t            possibleColls = this.grid.get(broadphasebox);\r\n\t        }\r\n\t        else {\r\n\t            possibleColls = collidables;\r\n\t        }\r\n\t        var collisionData = new _1.CollisionData();\r\n\t        for (var _i = 0, possibleColls_2 = possibleColls; _i < possibleColls_2.length; _i++) {\r\n\t            var collidable = possibleColls_2[_i];\r\n\t            if (this.aabbCheck(broadphasebox, collidable)) {\r\n\t                collisionData = this.aabbCollisionX(projectile.collisionArea, collidable, frameVelocity, collisionData);\r\n\t            }\r\n\t        }\r\n\t        if (checkClose) {\r\n\t            for (var _a = 0, possibleColls_3 = possibleColls; _a < possibleColls_3.length; _a++) {\r\n\t                var collidable = possibleColls_3[_a];\r\n\t                if (this.aabbCheck(projectile.collisionArea, collidable)) {\r\n\t                    collisionData.wallCollision = true;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return collisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.checkProjectileCollisionY = function (collidables, projectile, frameVelocity, staticCollisions) {\r\n\t        var broadphasebox = this.getSweptBroadphaseBoxY(projectile.collisionArea, frameVelocity);\r\n\t        var possibleColls;\r\n\t        if (staticCollisions) {\r\n\t            possibleColls = this.grid.get(broadphasebox);\r\n\t        }\r\n\t        else {\r\n\t            possibleColls = collidables;\r\n\t        }\r\n\t        var collisionData = new _1.CollisionData();\r\n\t        for (var _i = 0, possibleColls_4 = possibleColls; _i < possibleColls_4.length; _i++) {\r\n\t            var collidable = possibleColls_4[_i];\r\n\t            if (this.aabbCheck(broadphasebox, collidable)) {\r\n\t                collisionData = this.aabbCollisionY(projectile.collisionArea, collidable, frameVelocity, collisionData);\r\n\t            }\r\n\t        }\r\n\t        return collisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.checkCollision = function (tiles, dynamicTiles, character, frameVelocity, delta) {\r\n\t        var tilesToCheck = tiles;\r\n\t        var collisionData = new _1.CollisionData();\r\n\t        var dynamicCollisionData = new _1.CollisionData();\r\n\t        var rect1 = character.getCollisionArea();\r\n\t        var broadphasebox = this.getSweptBroadphaseBoxY(rect1, frameVelocity);\r\n\t        var possibleColls = this.grid.get(broadphasebox);\r\n\t        for (var _i = 0, dynamicTiles_1 = dynamicTiles; _i < dynamicTiles_1.length; _i++) {\r\n\t            var dynamicTile = dynamicTiles_1[_i];\r\n\t            var deltaVelocity = new model_1.Vector(frameVelocity.x - dynamicTile.velocity.x * delta, frameVelocity.y - dynamicTile.velocity.y * delta);\r\n\t            dynamicCollisionData = this.checkDynamicTileY(dynamicTile, rect1, character, deltaVelocity, dynamicCollisionData, delta);\r\n\t        }\r\n\t        for (var _a = 0, possibleColls_5 = possibleColls; _a < possibleColls_5.length; _a++) {\r\n\t            var tile = possibleColls_5[_a];\r\n\t            if (this.aabbCheck(broadphasebox, tile)) {\r\n\t                collisionData = this.aabbCollisionY(rect1, tile, frameVelocity, collisionData);\r\n\t            }\r\n\t        }\r\n\t        if (dynamicCollisionData.groundCollision) {\r\n\t            collisionData = dynamicCollisionData;\r\n\t            frameVelocity.y = dynamicCollisionData.velocityY;\r\n\t        }\r\n\t        character.position.y += frameVelocity.y * collisionData.collisionTimeY;\r\n\t        rect1 = character.getCollisionArea();\r\n\t        broadphasebox = this.getSweptBroadphaseBoxX(rect1, frameVelocity);\r\n\t        for (var _b = 0, dynamicTiles_2 = dynamicTiles; _b < dynamicTiles_2.length; _b++) {\r\n\t            var dynamicTile = dynamicTiles_2[_b];\r\n\t            var deltaVelocity = new model_1.Vector(frameVelocity.x - dynamicTile.velocity.x * delta, frameVelocity.y - dynamicTile.velocity.y * delta);\r\n\t            dynamicCollisionData = this.checkDynamicTileX(dynamicTile, rect1, character, deltaVelocity, dynamicCollisionData, delta);\r\n\t        }\r\n\t        for (var _c = 0, tilesToCheck_1 = tilesToCheck; _c < tilesToCheck_1.length; _c++) {\r\n\t            var tile = tilesToCheck_1[_c];\r\n\t            if (this.aabbCheck(broadphasebox, tile)) {\r\n\t                collisionData = this.aabbCollisionX(character.getCollisionArea(), tile, frameVelocity, collisionData);\r\n\t            }\r\n\t        }\r\n\t        if (dynamicCollisionData.wallCollision) {\r\n\t            collisionData.wallCollision = dynamicCollisionData.wallCollision;\r\n\t            collisionData.collisionTimeX = dynamicCollisionData.collisionTimeX;\r\n\t            frameVelocity.x = dynamicCollisionData.velocityX;\r\n\t        }\r\n\t        character.position.x += frameVelocity.x * collisionData.collisionTimeX;\r\n\t        collisionData.remainingTime = 1 - collisionData.collisionTimeY;\r\n\t        return collisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.getClosestX = function (rect, tiles, inverse) {\r\n\t        var closestX = inverse ? 0 : this.gameSize.x;\r\n\t        var possibleColls = this.grid.get(rect);\r\n\t        for (var _i = 0, possibleColls_6 = possibleColls; _i < possibleColls_6.length; _i++) {\r\n\t            var tile = possibleColls_6[_i];\r\n\t            if (this.aabbCheck(rect, tile)) {\r\n\t                if (inverse) {\r\n\t                    var tileVal = tile.x + tile.width;\r\n\t                    if (tileVal > closestX) {\r\n\t                        closestX = tileVal;\r\n\t                    }\r\n\t                }\r\n\t                else {\r\n\t                    var tileVal = tile.x;\r\n\t                    if (tileVal < closestX) {\r\n\t                        closestX = tileVal;\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return closestX;\r\n\t    };\r\n\t    CollisionDetection.prototype.checkCoutOfBounds = function (character, area) {\r\n\t        var rect = new model_1.Rectangle(0, 0, area[0], area[1]);\r\n\t        if (!this.aabbCheck(character.getCollisionArea(), rect)) {\r\n\t            character.dead = true;\r\n\t        }\r\n\t    };\r\n\t    CollisionDetection.prototype.aabbCheck = function (rect1, rect2) {\r\n\t        return (rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.height + rect1.y > rect2.y);\r\n\t    };\r\n\t    CollisionDetection.prototype.aabbCheckS = function (rect1, areas) {\r\n\t        for (var _i = 0, areas_1 = areas; _i < areas_1.length; _i++) {\r\n\t            var rect2 = areas_1[_i];\r\n\t            if ((rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.height + rect1.y > rect2.y)) {\r\n\t                return true;\r\n\t            }\r\n\t        }\r\n\t        return false;\r\n\t    };\r\n\t    CollisionDetection.prototype.checkDynamicTileY = function (dynamicTile, characterCollisionArea, character, frameVelocity, dynamicCollisionData, delta) {\r\n\t        var broadphasebox = this.getSweptBroadphaseBoxY(characterCollisionArea, frameVelocity);\r\n\t        if (this.aabbCheck(broadphasebox, dynamicTile.tile)) {\r\n\t            dynamicCollisionData = this.aabbCollisionY(characterCollisionArea, dynamicTile.tile, frameVelocity, dynamicCollisionData);\r\n\t            if (dynamicCollisionData.groundCollision) {\r\n\t                dynamicCollisionData.lift = dynamicTile;\r\n\t            }\r\n\t        }\r\n\t        return dynamicCollisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.checkDynamicTileX = function (dynamicTile, characterCollisionArea, character, frameVelocity, dynamicCollisionData, delta) {\r\n\t        var broadphasebox = this.getSweptBroadphaseBoxX(characterCollisionArea, frameVelocity);\r\n\t        if (this.aabbCheck(broadphasebox, dynamicTile.tile)) {\r\n\t            dynamicCollisionData = this.aabbCollisionX(characterCollisionArea, dynamicTile.tile, frameVelocity, dynamicCollisionData);\r\n\t        }\r\n\t        return dynamicCollisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.getSweptBroadphaseBoxX = function (rect, velocity) {\r\n\t        var x = rect.x + velocity.x;\r\n\t        var y = rect.y;\r\n\t        var width = rect.width + Math.abs(velocity.x);\r\n\t        var height = rect.height;\r\n\t        return new model_1.Rectangle(x, y, width, height);\r\n\t    };\r\n\t    CollisionDetection.prototype.getSweptBroadphaseBoxY = function (rect, velocity) {\r\n\t        var x = rect.x;\r\n\t        var y = rect.y + velocity.y;\r\n\t        var width = rect.width;\r\n\t        var height = rect.height + Math.abs(velocity.y);\r\n\t        return new model_1.Rectangle(x, y, width, height);\r\n\t    };\r\n\t    CollisionDetection.prototype.aabbCollisionY = function (rect1, rect2, velocity, collisionData) {\r\n\t        var yInvEntry;\r\n\t        var yInvExit;\r\n\t        if (velocity.y > 0) {\r\n\t            yInvEntry = (rect2.y) - (rect1.y + rect1.height);\r\n\t            yInvExit = (rect2.y + rect2.height) - (rect1.y);\r\n\t        }\r\n\t        else {\r\n\t            yInvEntry = (rect2.y + rect2.height) - (rect1.y);\r\n\t            yInvExit = (rect2.y) - (rect1.y + rect1.height);\r\n\t        }\r\n\t        var yEntry;\r\n\t        var yExit;\r\n\t        if (velocity.y == 0) {\r\n\t            yEntry = -Number.MAX_SAFE_INTEGER;\r\n\t            yExit = Number.MAX_SAFE_INTEGER;\r\n\t        }\r\n\t        else {\r\n\t            yEntry = yInvEntry / velocity.y;\r\n\t            yExit = yInvExit / velocity.y;\r\n\t        }\r\n\t        var entryTime = yEntry;\r\n\t        var exitTime = yExit;\r\n\t        if (entryTime > exitTime || yEntry < 0 || yEntry > 1) {\r\n\t            return collisionData;\r\n\t        }\r\n\t        else {\r\n\t            if (velocity.y < 0) {\r\n\t                collisionData.normalY = 1;\r\n\t            }\r\n\t            else {\r\n\t                collisionData.normalY = -1;\r\n\t            }\r\n\t            if (collisionData.collisionTimeY > entryTime) {\r\n\t                collisionData.collisionTimeY = entryTime;\r\n\t                collisionData.velocityY = velocity.y;\r\n\t            }\r\n\t            if (velocity.y > 28) {\r\n\t                collisionData.fallDeath = true;\r\n\t            }\r\n\t            collisionData.groundCollision = true;\r\n\t        }\r\n\t        return collisionData;\r\n\t    };\r\n\t    CollisionDetection.prototype.aabbCollisionX = function (rect1, rect2, velocity, collisionData) {\r\n\t        var xInvEntry;\r\n\t        var xInvExit;\r\n\t        if (velocity.x > 0) {\r\n\t            xInvEntry = (rect2.x) - (rect1.x + rect1.width);\r\n\t            xInvExit = (rect2.x + rect2.width) - (rect1.x);\r\n\t        }\r\n\t        else {\r\n\t            xInvEntry = (rect2.x + rect2.width) - (rect1.x);\r\n\t            xInvExit = (rect2.x) - (rect1.x + rect1.width);\r\n\t        }\r\n\t        var xEntry;\r\n\t        var xExit;\r\n\t        if (velocity.x == 0) {\r\n\t            xEntry = -Number.MAX_SAFE_INTEGER;\r\n\t            xExit = Number.MAX_SAFE_INTEGER;\r\n\t        }\r\n\t        else {\r\n\t            xEntry = xInvEntry / velocity.x;\r\n\t            xExit = xInvExit / velocity.x;\r\n\t        }\r\n\t        var entryTime = xEntry;\r\n\t        var exitTime = xExit;\r\n\t        if (entryTime > exitTime || xEntry < 0 || xEntry > 1) {\r\n\t            return collisionData;\r\n\t        }\r\n\t        else {\r\n\t            if (xInvEntry < 0) {\r\n\t                collisionData.normalX = 1;\r\n\t            }\r\n\t            else {\r\n\t                collisionData.normalX = -1;\r\n\t            }\r\n\t            if (collisionData.collisionTimeX > entryTime) {\r\n\t                collisionData.collisionTimeX = entryTime;\r\n\t                collisionData.velocityX = velocity.x;\r\n\t            }\r\n\t            collisionData.wallCollision = true;\r\n\t        }\r\n\t        return collisionData;\r\n\t    };\r\n\t    CollisionDetection.instance = new CollisionDetection();\r\n\t    return CollisionDetection;\r\n\t}());\r\n\texports.CollisionDetection = CollisionDetection;\r\n\n\n/***/ }),\n/* 367 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar collisionData_1 = __webpack_require__(368);\r\n\texports.CollisionData = collisionData_1.CollisionData;\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\texports.CollisionDetection = collisionDetection_1.CollisionDetection;\r\n\tvar grid_1 = __webpack_require__(369);\r\n\texports.Grid = grid_1.Grid;\r\n\n\n/***/ }),\n/* 368 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar CollisionData = (function () {\r\n\t    function CollisionData() {\r\n\t        this.normalX = 0;\r\n\t        this.normalY = 0;\r\n\t        this.collisionTimeY = 1;\r\n\t        this.collisionTimeX = 1;\r\n\t        this.remainingTime = 0;\r\n\t        this.wallCollision = false;\r\n\t        this.groundCollision = false;\r\n\t        this.lift = null;\r\n\t        this.fallDeath = false;\r\n\t    }\r\n\t    return CollisionData;\r\n\t}());\r\n\texports.CollisionData = CollisionData;\r\n\n\n/***/ }),\n/* 369 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Grid = (function () {\r\n\t    function Grid(size, canvasSize) {\r\n\t        this.grid = [];\r\n\t        this.gridSize = size;\r\n\t        this.maxX = canvasSize.x / this.gridSize;\r\n\t        this.maxY = canvasSize.y / this.gridSize;\r\n\t        for (var i = 0; i < this.maxX; i++) {\r\n\t            this.grid[i] = [];\r\n\t            for (var j = 0; j < this.maxY; j++) {\r\n\t                this.grid[i][j] = [];\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    Grid.prototype.insert = function (rect) {\r\n\t        var coords = this.getGridCoordinates(rect);\r\n\t        for (var i = 0; i < coords[2]; i++) {\r\n\t            for (var j = 0; j < coords[3]; j++) {\r\n\t                this.grid[coords[0] + i][coords[1] + j].push(rect);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Grid.prototype.get = function (rect) {\r\n\t        var result = [];\r\n\t        var coords = this.getGridCoordinates(rect);\r\n\t        for (var i = 0; i < coords[2]; i++) {\r\n\t            for (var j = 0; j < coords[3]; j++) {\r\n\t                result.push.apply(result, this.grid[coords[0] + i][coords[1] + j]);\r\n\t            }\r\n\t        }\r\n\t        return result;\r\n\t    };\r\n\t    Grid.prototype.getGridCoordinates = function (rect) {\r\n\t        var x = Math.floor(rect.x / this.gridSize);\r\n\t        var y = Math.floor(rect.y / this.gridSize);\r\n\t        var xi = Math.ceil(rect.width / this.gridSize) + 1;\r\n\t        var yi = Math.ceil(rect.height / this.gridSize) + 1;\r\n\t        if (x < 0) {\r\n\t            x = 0;\r\n\t        }\r\n\t        if (y < 0) {\r\n\t            y = 0;\r\n\t        }\r\n\t        if (x + xi > this.maxX) {\r\n\t            xi = this.maxX - x;\r\n\t        }\r\n\t        if (y + yi > this.maxY) {\r\n\t            yi = this.maxY - y;\r\n\t        }\r\n\t        return [x, y, xi, yi];\r\n\t    };\r\n\t    return Grid;\r\n\t}());\r\n\texports.Grid = Grid;\r\n\n\n/***/ }),\n/* 370 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar FrameAnimation = (function (_super) {\r\n\t    __extends(FrameAnimation, _super);\r\n\t    function FrameAnimation(growthX, growthY, offsetX, offsetY, particleFunction, texturenumbers) {\r\n\t        _super.call(this, texturenumbers);\r\n\t        this.offsetY = 20;\r\n\t        this.offsetX = 10;\r\n\t        this.particleFunction = particleFunction;\r\n\t        this.growthX = growthX;\r\n\t        this.growthY = growthY;\r\n\t        this.offsetX = offsetX;\r\n\t        this.offsetY = offsetY;\r\n\t        this.lastFrameIndex = this.frameIndex;\r\n\t    }\r\n\t    FrameAnimation.prototype.next = function (delta) {\r\n\t        if (this.lastFrameIndex != this.frameIndex) {\r\n\t            this.lastFrameIndex = this.frameIndex;\r\n\t            this.offsetX += this.growthX;\r\n\t            this.offsetY += this.growthY;\r\n\t        }\r\n\t        this.particleFunction(new _1.Vector(this.areaToRender.x + this.offsetX, this.areaToRender.y - this.offsetY));\r\n\t        _super.prototype.next.call(this, delta);\r\n\t    };\r\n\t    return FrameAnimation;\r\n\t}(_1.Animation));\r\n\texports.FrameAnimation = FrameAnimation;\r\n\n\n/***/ }),\n/* 371 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (SpellType) {\r\n\t    SpellType[SpellType[\"fireball\"] = 1] = \"fireball\";\r\n\t    SpellType[SpellType[\"electricbolt\"] = 2] = \"electricbolt\";\r\n\t    SpellType[SpellType[\"frostBlast\"] = 3] = \"frostBlast\";\r\n\t    SpellType[SpellType[\"fireBlast\"] = 4] = \"fireBlast\";\r\n\t    SpellType[SpellType[\"shield\"] = 5] = \"shield\";\r\n\t    SpellType[SpellType[\"channelmagic\"] = 6] = \"channelmagic\";\r\n\t})(exports.SpellType || (exports.SpellType = {}));\r\n\tvar SpellType = exports.SpellType;\r\n\n\n/***/ }),\n/* 372 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar Spell = (function (_super) {\r\n\t    __extends(Spell, _super);\r\n\t    function Spell(velocity, area, animation, collisionRatio, distance, type) {\r\n\t        _super.call(this, velocity, area, animation, collisionRatio);\r\n\t        this.distance = distance;\r\n\t        this.type = type;\r\n\t    }\r\n\t    Spell.prototype.update = function (travelDistanceX, travelDistanceY, delta) {\r\n\t        _super.prototype.update.call(this, travelDistanceX, travelDistanceY, delta);\r\n\t        this.distance -= Math.abs(travelDistanceX);\r\n\t    };\r\n\t    return Spell;\r\n\t}(_1.Projectile));\r\n\texports.Spell = Spell;\r\n\n\n/***/ }),\n/* 373 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar gravity_1 = __webpack_require__(374);\r\n\tvar drag_1 = __webpack_require__(375);\r\n\tvar PhysicalProjectile = (function (_super) {\r\n\t    __extends(PhysicalProjectile, _super);\r\n\t    function PhysicalProjectile(velocity, area, animation, collisionRatio, collisionArea, angle) {\r\n\t        _super.call(this, velocity, area, animation, collisionRatio, collisionArea);\r\n\t        this.gravityStrength = 0.0025;\r\n\t        this.gravity = new gravity_1.Gravity(this.gravityStrength);\r\n\t        this.dragStrength = 0.0005;\r\n\t        this.drag = new drag_1.Drag(this.dragStrength);\r\n\t        this.angle = angle;\r\n\t    }\r\n\t    PhysicalProjectile.prototype.update = function (travelDistanceX, travelDistanceY, delta) {\r\n\t        _super.prototype.update.call(this, travelDistanceX, travelDistanceY, delta);\r\n\t    };\r\n\t    PhysicalProjectile.prototype.updateForces = function (delta) {\r\n\t        this.gravity.apply(this.velocity, delta);\r\n\t        this.drag.apply(this.velocity, delta);\r\n\t    };\r\n\t    PhysicalProjectile.prototype.onGroundCollision = function () {\r\n\t        if (this.animation instanceof _1.StaticRotationAnimation) {\r\n\t            if (this.animation.inverse) {\r\n\t                this.animation.angle = 0;\r\n\t            }\r\n\t            else {\r\n\t                this.animation.angle = Math.PI * 2;\r\n\t            }\r\n\t        }\r\n\t        if (this.extendedOnGroundCollision) {\r\n\t            this.extendedOnGroundCollision();\r\n\t        }\r\n\t    };\r\n\t    return PhysicalProjectile;\r\n\t}(_1.Projectile));\r\n\texports.PhysicalProjectile = PhysicalProjectile;\r\n\n\n/***/ }),\n/* 374 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Gravity = (function () {\r\n\t    function Gravity(strength) {\r\n\t        this.strength = 0;\r\n\t        this.strength = strength;\r\n\t    }\r\n\t    Gravity.prototype.apply = function (vector, delta) {\r\n\t        vector.y += this.strength * delta;\r\n\t    };\r\n\t    return Gravity;\r\n\t}());\r\n\texports.Gravity = Gravity;\r\n\n\n/***/ }),\n/* 375 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Drag = (function () {\r\n\t    function Drag(strength) {\r\n\t        this.strength = 0;\r\n\t        this.strength = strength;\r\n\t    }\r\n\t    Drag.prototype.apply = function (vector, delta) {\r\n\t        var deltaDrag = delta * this.strength;\r\n\t        if (vector.x > 0) {\r\n\t            vector.x -= deltaDrag;\r\n\t            if (vector.x < deltaDrag) {\r\n\t                vector.x = 0;\r\n\t            }\r\n\t        }\r\n\t        else if (vector.x < 0) {\r\n\t            vector.x += deltaDrag;\r\n\t            if (vector.x > deltaDrag) {\r\n\t                vector.x = 0;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return Drag;\r\n\t}());\r\n\texports.Drag = Drag;\r\n\n\n/***/ }),\n/* 376 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar Meele = (function (_super) {\r\n\t    __extends(Meele, _super);\r\n\t    function Meele(velocity, area, animation, collisionRatio) {\r\n\t        _super.call(this, velocity, area, animation, collisionRatio);\r\n\t    }\r\n\t    Meele.prototype.update = function (travelDistanceX, travelDistanceY, delta) {\r\n\t        _super.prototype.update.call(this, travelDistanceX, travelDistanceY, delta);\r\n\t    };\r\n\t    return Meele;\r\n\t}(_1.Projectile));\r\n\texports.Meele = Meele;\r\n\n\n/***/ }),\n/* 377 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar DebugElement = (function () {\r\n\t    function DebugElement(area, inverse) {\r\n\t        this.area = area;\r\n\t        this.inverse = inverse;\r\n\t    }\r\n\t    return DebugElement;\r\n\t}());\r\n\texports.DebugElement = DebugElement;\r\n\n\n/***/ }),\n/* 378 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (TextureType) {\r\n\t    TextureType[TextureType[\"tileTexture\"] = 1] = \"tileTexture\";\r\n\t    TextureType[TextureType[\"particleTexture\"] = 2] = \"particleTexture\";\r\n\t    TextureType[TextureType[\"frostTexture\"] = 3] = \"frostTexture\";\r\n\t})(exports.TextureType || (exports.TextureType = {}));\r\n\tvar TextureType = exports.TextureType;\r\n\n\n/***/ }),\n/* 379 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar StickyAnimation = (function () {\r\n\t    function StickyAnimation(animation, offset) {\r\n\t        this.animation = animation;\r\n\t        this.offset = offset;\r\n\t    }\r\n\t    return StickyAnimation;\r\n\t}());\r\n\texports.StickyAnimation = StickyAnimation;\r\n\n\n/***/ }),\n/* 380 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar RotationAnimation = (function (_super) {\r\n\t    __extends(RotationAnimation, _super);\r\n\t    function RotationAnimation(vec, texturenumbers) {\r\n\t        _super.call(this, texturenumbers);\r\n\t        this.vec = vec;\r\n\t    }\r\n\t    RotationAnimation.prototype.next = function (delta) {\r\n\t        this.angle = Math.atan2(this.vec.x, this.vec.y);\r\n\t        if (this.inverse) {\r\n\t            this.angle = this.angle + Math.PI * 0.5;\r\n\t        }\r\n\t        else {\r\n\t            this.angle = this.angle + Math.PI * 1.5;\r\n\t        }\r\n\t        _super.prototype.next.call(this, delta);\r\n\t    };\r\n\t    return RotationAnimation;\r\n\t}(_1.Animation));\r\n\texports.RotationAnimation = RotationAnimation;\r\n\n\n/***/ }),\n/* 381 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar StaticRotationAnimation = (function (_super) {\r\n\t    __extends(StaticRotationAnimation, _super);\r\n\t    function StaticRotationAnimation(vec, inverse, texturenumbers) {\r\n\t        _super.call(this, texturenumbers);\r\n\t        this.vec = vec;\r\n\t        this.inverse = inverse;\r\n\t        this.angle = Math.atan2(this.vec.x, this.vec.y);\r\n\t        if (this.inverse) {\r\n\t            this.angle = this.angle + Math.PI * 0.5;\r\n\t        }\r\n\t        else {\r\n\t            this.angle = this.angle + Math.PI * 1.5;\r\n\t        }\r\n\t    }\r\n\t    StaticRotationAnimation.prototype.next = function (delta) {\r\n\t        _super.prototype.next.call(this, delta);\r\n\t    };\r\n\t    return StaticRotationAnimation;\r\n\t}(_1.Animation));\r\n\texports.StaticRotationAnimation = StaticRotationAnimation;\r\n\n\n/***/ }),\n/* 382 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar CollisionProjectile = (function (_super) {\r\n\t    __extends(CollisionProjectile, _super);\r\n\t    function CollisionProjectile(velocity, area, distance, animation, damage) {\r\n\t        _super.call(this, velocity, area, animation, 1);\r\n\t        this.damage = damage;\r\n\t        this.distance = distance;\r\n\t    }\r\n\t    CollisionProjectile.prototype.update = function (travelDistanceX, travelDistanceY, delta) {\r\n\t        _super.prototype.update.call(this, travelDistanceX, travelDistanceY, delta);\r\n\t        this.distance -= Math.abs(travelDistanceX);\r\n\t    };\r\n\t    return CollisionProjectile;\r\n\t}(_1.Projectile));\r\n\texports.CollisionProjectile = CollisionProjectile;\r\n\n\n/***/ }),\n/* 383 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (ProjectileType) {\r\n\t    ProjectileType[ProjectileType[\"None\"] = 0] = \"None\";\r\n\t    ProjectileType[ProjectileType[\"Arrow\"] = 1] = \"Arrow\";\r\n\t    ProjectileType[ProjectileType[\"Sword\"] = 2] = \"Sword\";\r\n\t    ProjectileType[ProjectileType[\"NecroBall\"] = 3] = \"NecroBall\";\r\n\t    ProjectileType[ProjectileType[\"BlueBall\"] = 4] = \"BlueBall\";\r\n\t})(exports.ProjectileType || (exports.ProjectileType = {}));\r\n\tvar ProjectileType = exports.ProjectileType;\r\n\n\n/***/ }),\n/* 384 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Cast = (function () {\r\n\t    function Cast() {\r\n\t        this.done = false;\r\n\t    }\r\n\t    Cast.prototype.update = function (delta) {\r\n\t    };\r\n\t    Cast.prototype.cancel = function () {\r\n\t    };\r\n\t    Cast.prototype.reset = function () {\r\n\t        this.done = false;\r\n\t    };\r\n\t    return Cast;\r\n\t}());\r\n\texports.Cast = Cast;\r\n\n\n/***/ }),\n/* 385 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar InstantCast = (function (_super) {\r\n\t    __extends(InstantCast, _super);\r\n\t    function InstantCast(animation, onCast) {\r\n\t        _super.call(this);\r\n\t        this.currentAnimation = animation;\r\n\t        this.onCast = onCast;\r\n\t    }\r\n\t    InstantCast.prototype.update = function (delta) {\r\n\t        this.currentAnimation = this.onCast(this.currentAnimation);\r\n\t        this.currentAnimation.next(delta);\r\n\t        if (this.currentAnimation.repetitions <= 0) {\r\n\t            this.done = true;\r\n\t        }\r\n\t    };\r\n\t    InstantCast.prototype.reset = function () {\r\n\t        this.currentAnimation.reset();\r\n\t        this.currentAnimation.repetitions = 1;\r\n\t        _super.prototype.reset.call(this);\r\n\t    };\r\n\t    return InstantCast;\r\n\t}(model_1.Cast));\r\n\texports.InstantCast = InstantCast;\r\n\n\n/***/ }),\n/* 386 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar ChannelCast = (function (_super) {\r\n\t    __extends(ChannelCast, _super);\r\n\t    function ChannelCast(channelAnimation, lowerChannelAnimation, onChannel, onCancel, defaultValue, maxValue, growth) {\r\n\t        _super.call(this);\r\n\t        this.channeling = false;\r\n\t        this.onChannel = onChannel;\r\n\t        this.onCancel = onCancel;\r\n\t        this.currentAnimation = channelAnimation;\r\n\t        this.lowerCurrentAnimation = lowerChannelAnimation;\r\n\t        this.defaultValue = defaultValue;\r\n\t        this.maxValue = maxValue;\r\n\t        this.growth = growth;\r\n\t        this.currentValue = this.defaultValue;\r\n\t    }\r\n\t    ChannelCast.prototype.update = function (delta) {\r\n\t        if (this.channeling) {\r\n\t            this.delay = 150;\r\n\t        }\r\n\t        if (this.delay > 0) {\r\n\t            this.currentAnimation.next(delta);\r\n\t            if (this.currentValue >= this.maxValue) {\r\n\t                this.currentValue = this.maxValue;\r\n\t            }\r\n\t            else {\r\n\t                this.currentValue += (delta * this.growth);\r\n\t            }\r\n\t            this.onChannel();\r\n\t        }\r\n\t        else {\r\n\t            this.done = true;\r\n\t        }\r\n\t        this.delay -= delta;\r\n\t        this.channeling = false;\r\n\t    };\r\n\t    ChannelCast.prototype.resetValue = function () {\r\n\t        this.currentValue = this.defaultValue;\r\n\t    };\r\n\t    ChannelCast.prototype.cancel = function () {\r\n\t        this.onCancel();\r\n\t    };\r\n\t    ChannelCast.prototype.reset = function () {\r\n\t    };\r\n\t    return ChannelCast;\r\n\t}(model_1.Cast));\r\n\texports.ChannelCast = ChannelCast;\r\n\n\n/***/ }),\n/* 387 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar SpellCast = (function (_super) {\r\n\t    __extends(SpellCast, _super);\r\n\t    function SpellCast(animation, mainRepetion, onCast) {\r\n\t        _super.call(this);\r\n\t        this.size = 20;\r\n\t        this.currentAnimation = animation;\r\n\t        this.onCast = onCast;\r\n\t        this.mainRepetion = mainRepetion;\r\n\t        this.hasCast = false;\r\n\t    }\r\n\t    SpellCast.prototype.update = function (delta) {\r\n\t        if (this.currentAnimation.repetitions == this.mainRepetion && !this.hasCast) {\r\n\t            this.currentAnimation = this.onCast(this.currentAnimation, this.size);\r\n\t            this.hasCast = true;\r\n\t        }\r\n\t        this.currentAnimation.next(delta);\r\n\t        if (this.currentAnimation.repetitions <= 0) {\r\n\t            this.done = true;\r\n\t        }\r\n\t    };\r\n\t    SpellCast.prototype.reset = function () {\r\n\t        this.hasCast = false;\r\n\t        this.currentAnimation.repetitions = 4;\r\n\t        this.currentAnimation.reset();\r\n\t        _super.prototype.reset.call(this);\r\n\t    };\r\n\t    return SpellCast;\r\n\t}(model_1.Cast));\r\n\texports.SpellCast = SpellCast;\r\n\n\n/***/ }),\n/* 388 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar ParticleProjectile = (function (_super) {\r\n\t    __extends(ParticleProjectile, _super);\r\n\t    function ParticleProjectile(velocity, area, animation, collisionRatio, distance, inverse, offset, onUpdate, collisionArea) {\r\n\t        _super.call(this, velocity, area, animation, collisionRatio, collisionArea);\r\n\t        this.onUpdate = onUpdate;\r\n\t        this.distance = distance;\r\n\t        this.inverse = inverse;\r\n\t        this.offset = offset;\r\n\t    }\r\n\t    ParticleProjectile.prototype.update = function (travelDistanceX, travelDistanceY, delta) {\r\n\t        _super.prototype.update.call(this, travelDistanceX, travelDistanceY, delta);\r\n\t        this.onUpdate(this.area, this.inverse, this.offset);\r\n\t        this.distance -= Math.abs(travelDistanceX);\r\n\t    };\r\n\t    return ParticleProjectile;\r\n\t}(_1.Projectile));\r\n\texports.ParticleProjectile = ParticleProjectile;\r\n\n\n/***/ }),\n/* 389 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar constants_1 = __webpack_require__(390);\r\n\tvar _1 = __webpack_require__(347);\r\n\tvar DynamicTile = (function () {\r\n\t    function DynamicTile(tile, velocity, verticalAxis, maxDistance) {\r\n\t        this.inverse = false;\r\n\t        this.distance = 0;\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.constants = constants_1.Constants.getInstance();\r\n\t        this.tile = tile;\r\n\t        this.velocity = velocity;\r\n\t        this.verticalAxis = verticalAxis;\r\n\t        this.maxDistance = maxDistance;\r\n\t        if (this.velocity.y > 0) {\r\n\t            this.initialDown = true;\r\n\t        }\r\n\t        else {\r\n\t            this.initialDown = false;\r\n\t        }\r\n\t        if (this.velocity.x > 0) {\r\n\t            this.initialRight = true;\r\n\t        }\r\n\t        else {\r\n\t            this.initialRight = false;\r\n\t        }\r\n\t        this.textureCoordinates = this.renderHelper.getTiledTextureCoordinates(this.tile, [], this.constants.tileSize);\r\n\t        this.initialPosition = new _1.Vector(tile.x, tile.y);\r\n\t    }\r\n\t    DynamicTile.prototype.update = function (delta, travelDistance) {\r\n\t        if (this.verticalAxis) {\r\n\t            this.calculateVerticalMovement(delta, travelDistance);\r\n\t        }\r\n\t        else {\r\n\t            this.calculateHorizontalMovement(delta, travelDistance);\r\n\t        }\r\n\t    };\r\n\t    DynamicTile.prototype.calculateVerticalMovement = function (delta, travelDistance) {\r\n\t        this.distance += Math.abs(travelDistance);\r\n\t        if (this.distance >= this.maxDistance) {\r\n\t            this.distance = this.maxDistance;\r\n\t            if (this.inverse) {\r\n\t                this.tile.y = this.initialPosition.y;\r\n\t            }\r\n\t            else {\r\n\t                if (this.initialDown) {\r\n\t                    this.tile.y = this.initialPosition.y + this.maxDistance;\r\n\t                }\r\n\t                else {\r\n\t                    this.tile.y = this.initialPosition.y - this.maxDistance;\r\n\t                }\r\n\t            }\r\n\t            this.turn();\r\n\t        }\r\n\t        else {\r\n\t            this.tile.y += travelDistance;\r\n\t        }\r\n\t    };\r\n\t    DynamicTile.prototype.calculateHorizontalMovement = function (delta, travelDistance) {\r\n\t        this.distance += Math.abs(travelDistance);\r\n\t        if (this.distance >= this.maxDistance) {\r\n\t            this.distance = this.maxDistance;\r\n\t            if (this.inverse) {\r\n\t                this.tile.x = this.initialPosition.x;\r\n\t            }\r\n\t            else {\r\n\t                if (this.initialRight) {\r\n\t                    this.tile.x = this.initialPosition.x + this.maxDistance;\r\n\t                }\r\n\t                else {\r\n\t                    this.tile.x = this.initialPosition.x - this.maxDistance;\r\n\t                }\r\n\t            }\r\n\t            this.turn();\r\n\t        }\r\n\t        else {\r\n\t            this.tile.x += travelDistance;\r\n\t        }\r\n\t    };\r\n\t    DynamicTile.prototype.turn = function () {\r\n\t        this.distance = 0;\r\n\t        this.inverse = !this.inverse;\r\n\t        this.velocity.invert();\r\n\t    };\r\n\t    return DynamicTile;\r\n\t}());\r\n\texports.DynamicTile = DynamicTile;\r\n\n\n/***/ }),\n/* 390 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar _1 = __webpack_require__(391);\r\n\tvar Constants = (function () {\r\n\t    function Constants() {\r\n\t        this.tileResources = [\r\n\t            new _1.TextureResource(\"1tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"2tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"3tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"4tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"5tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"6tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"7tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"8tile.png\", [32, 32]),\r\n\t            new _1.TextureResource(\"9tile.png\", [32, 32])\r\n\t        ];\r\n\t        this.uiResources = [\r\n\t            new _1.TextureResource(\"100ui.png\", [256, 128]),\r\n\t            new _1.TextureResource(\"101ui.png\", [512, 512]),\r\n\t            new _1.TextureResource(\"102ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"103ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"104ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"105ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"106ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"107ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"108ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"109ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"110ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"111ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"112ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"113ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"114ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"115ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"116ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"117ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"118ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"119ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"120ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"121ui.png\", [256, 256]),\r\n\t            new _1.TextureResource(\"122ui.png\", [1024, 1024])\r\n\t        ];\r\n\t        this.audioResources = [\r\n\t            \"explosion1.wav\",\r\n\t            \"explosion2.wav\",\r\n\t            \"flamethrower.ogg\",\r\n\t            \"freeze.ogg\",\r\n\t            \"shield.ogg\",\r\n\t            \"foom.wav\",\r\n\t            \"fireloop.ogg\",\r\n\t            \"jump.ogg\",\r\n\t            \"bow.wav\",\r\n\t            \"arrowhit.wav\",\r\n\t            \"playerhit.wav\",\r\n\t            \"swordmanhit.wav\",\r\n\t            \"swing3.wav\",\r\n\t            \"shade9.wav\",\r\n\t            \"shade15.wav\",\r\n\t            \"shade2.wav\",\r\n\t            \"swordmandeath.wav\",\r\n\t            \"shade13.wav\",\r\n\t            \"soundseffects.ogg\",\r\n\t            \"shot2.ogg\",\r\n\t            \"forcepush.ogg\",\r\n\t            \"explode4.ogg\",\r\n\t            \"ogre2.wav\",\r\n\t            \"mnstr3.wav\",\r\n\t            \"mnstr5.wav\",\r\n\t            \"magic1.wav\",\r\n\t            \"spellend.wav\",\r\n\t            \"fireplace.wav\",\r\n\t            \"shade11.wav\",\r\n\t            \"shade12.wav\",\r\n\t            \"step.flac\"\r\n\t        ];\r\n\t        this.tileSize = [32, 32];\r\n\t    }\r\n\t    Constants.prototype.constrcuctor = function () {\r\n\t        if (Constants.instance) {\r\n\t            throw new Error(\"Static class cant be instanced!\");\r\n\t        }\r\n\t        Constants.instance = this;\r\n\t    };\r\n\t    Constants.getInstance = function () {\r\n\t        return Constants.instance;\r\n\t    };\r\n\t    Constants.instance = new Constants();\r\n\t    return Constants;\r\n\t}());\r\n\texports.Constants = Constants;\r\n\n\n/***/ }),\n/* 391 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar enemyData_1 = __webpack_require__(392);\r\n\texports.EnemyData = enemyData_1.EnemyData;\r\n\tvar levelData_1 = __webpack_require__(393);\r\n\texports.LevelData = levelData_1.LevelData;\r\n\tvar enemyType_1 = __webpack_require__(394);\r\n\texports.EnemyType = enemyType_1.EnemyType;\r\n\tvar texture_resource_1 = __webpack_require__(395);\r\n\texports.TextureResource = texture_resource_1.TextureResource;\r\n\tvar tile_asset_1 = __webpack_require__(396);\r\n\texports.TileAsset = tile_asset_1.TileAsset;\r\n\n\n/***/ }),\n/* 392 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar EnemyData = (function () {\r\n\t    function EnemyData() {\r\n\t    }\r\n\t    return EnemyData;\r\n\t}());\r\n\texports.EnemyData = EnemyData;\r\n\n\n/***/ }),\n/* 393 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar LevelData = (function () {\r\n\t    function LevelData() {\r\n\t    }\r\n\t    return LevelData;\r\n\t}());\r\n\texports.LevelData = LevelData;\r\n\n\n/***/ }),\n/* 394 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (EnemyType) {\r\n\t    EnemyType[EnemyType[\"swordman\"] = 1] = \"swordman\";\r\n\t})(exports.EnemyType || (exports.EnemyType = {}));\r\n\tvar EnemyType = exports.EnemyType;\r\n\n\n/***/ }),\n/* 395 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar TextureResource = (function () {\r\n\t    function TextureResource(name, size) {\r\n\t        this.name = name;\r\n\t        this.size = size;\r\n\t    }\r\n\t    return TextureResource;\r\n\t}());\r\n\texports.TextureResource = TextureResource;\r\n\n\n/***/ }),\n/* 396 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar TileAsset = (function () {\r\n\t    function TileAsset(key, image, size) {\r\n\t        this.key = key;\r\n\t        this.image = image;\r\n\t        this.size = size;\r\n\t    }\r\n\t    return TileAsset;\r\n\t}());\r\n\texports.TileAsset = TileAsset;\r\n\n\n/***/ }),\n/* 397 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar DynamicTileData = (function () {\r\n\t    function DynamicTileData() {\r\n\t    }\r\n\t    return DynamicTileData;\r\n\t}());\r\n\texports.DynamicTileData = DynamicTileData;\r\n\n\n/***/ }),\n/* 398 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar RenderableData = (function () {\r\n\t    function RenderableData() {\r\n\t    }\r\n\t    return RenderableData;\r\n\t}());\r\n\texports.RenderableData = RenderableData;\r\n\n\n/***/ }),\n/* 399 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Progress = (function () {\r\n\t    function Progress() {\r\n\t        this.active = false;\r\n\t    }\r\n\t    return Progress;\r\n\t}());\r\n\texports.Progress = Progress;\r\n\n\n/***/ }),\n/* 400 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar AudioAsset = (function () {\r\n\t    function AudioAsset() {\r\n\t    }\r\n\t    return AudioAsset;\r\n\t}());\r\n\texports.AudioAsset = AudioAsset;\r\n\n\n/***/ }),\n/* 401 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ContinuousAudio = (function () {\r\n\t    function ContinuousAudio(audioContext, data, duration, offset, gainValue) {\r\n\t        this.audioContext = audioContext;\r\n\t        this.data = data;\r\n\t        this.duration = duration;\r\n\t        this.offset = offset;\r\n\t        this.gainValue = gainValue;\r\n\t        this.continue = false;\r\n\t        this.playing = false;\r\n\t        this.gainNode = this.audioContext.createGain();\r\n\t        this.gainNode.connect(this.audioContext.destination);\r\n\t    }\r\n\t    ContinuousAudio.prototype.update = function () {\r\n\t        if (!this.continue) {\r\n\t            if (this.source) {\r\n\t                this.stop();\r\n\t            }\r\n\t        }\r\n\t        this.continue = false;\r\n\t    };\r\n\t    ContinuousAudio.prototype.play = function () {\r\n\t        var _this = this;\r\n\t        this.continue = true;\r\n\t        if (!this.playing) {\r\n\t            this.gainNode.gain.value = this.gainValue;\r\n\t            this.source = this.audioContext.createBufferSource();\r\n\t            this.source.buffer = this.data;\r\n\t            this.source.connect(this.gainNode);\r\n\t            this.source.start(0, this.offset, this.duration);\r\n\t            this.source.loop = true;\r\n\t            this.source.onended = function () {\r\n\t                _this.playing = false;\r\n\t            };\r\n\t            this.playing = true;\r\n\t        }\r\n\t    };\r\n\t    ContinuousAudio.prototype.reset = function () {\r\n\t        this.stop();\r\n\t    };\r\n\t    ContinuousAudio.prototype.stop = function () {\r\n\t        if (this.playing) {\r\n\t            this.gainNode.gain.value = 0;\r\n\t            this.source.stop(this.audioContext.currentTime + 0.01);\r\n\t        }\r\n\t    };\r\n\t    return ContinuousAudio;\r\n\t}());\r\n\texports.ContinuousAudio = ContinuousAudio;\r\n\n\n/***/ }),\n/* 402 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (ShaderType) {\r\n\t    ShaderType[ShaderType[\"Vertex\"] = 1] = \"Vertex\";\r\n\t    ShaderType[ShaderType[\"Fragment\"] = 2] = \"Fragment\";\r\n\t})(exports.ShaderType || (exports.ShaderType = {}));\r\n\tvar ShaderType = exports.ShaderType;\r\n\n\n/***/ }),\n/* 403 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\texports.Enemy = enemy_1.Enemy;\r\n\tvar swordman_1 = __webpack_require__(407);\r\n\texports.Swordman = swordman_1.Swordman;\r\n\tvar archer_1 = __webpack_require__(409);\r\n\texports.Archer = archer_1.Archer;\r\n\tvar character_1 = __webpack_require__(405);\r\n\texports.Character = character_1.Character;\r\n\tvar player_1 = __webpack_require__(411);\r\n\texports.Player = player_1.Player;\r\n\tvar shadow_1 = __webpack_require__(413);\r\n\texports.Shadow = shadow_1.Shadow;\r\n\tvar state_1 = __webpack_require__(408);\r\n\texports.State = state_1.State;\r\n\tvar apprentice_1 = __webpack_require__(414);\r\n\texports.Apprentice = apprentice_1.Apprentice;\r\n\tvar screamer_1 = __webpack_require__(415);\r\n\texports.Screamer = screamer_1.Screamer;\r\n\tvar masterSorcerer_1 = __webpack_require__(416);\r\n\texports.MasterSorcerer = masterSorcerer_1.MasterSorcerer;\r\n\tvar iEnemy_1 = __webpack_require__(417);\r\n\texports.IEnemy = iEnemy_1.IEnemy;\r\n\tvar shapeShifterState_1 = __webpack_require__(418);\r\n\texports.ShapeShifterState = shapeShifterState_1.ShapeShifterState;\r\n\n\n/***/ }),\n/* 404 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar character_1 = __webpack_require__(405);\r\n\tvar _1 = __webpack_require__(403);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar deathType_1 = __webpack_require__(406);\r\n\tvar Enemy = (function (_super) {\r\n\t    __extends(Enemy, _super);\r\n\t    function Enemy(position, width, height) {\r\n\t        _super.call(this, position, width, height);\r\n\t        this.color = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\t        this.burnValue = 0;\r\n\t        this.direction = true;\r\n\t        this.oldDirection = true;\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.hitDamage = 0;\r\n\t        this.hp = 100;\r\n\t        this.freezeDamage = 0.08;\r\n\t        this.flameDamage = 0.12;\r\n\t        this.maxFreeze = this.hp / this.freezeDamage;\r\n\t        this.freezeValue = 0;\r\n\t        this.burnDamage = 0.2;\r\n\t        this.cinderValue = 0;\r\n\t        this.burnDurationFactor = 3;\r\n\t        this.hitAreaOffset = 40;\r\n\t        this.minDistance = 5;\r\n\t        this.searchAreaOffset = 150;\r\n\t        this.trackingTime = 0;\r\n\t        this.trackingMaxTime = 3000;\r\n\t        this.trackingSpeed = 0;\r\n\t        this.idleSpeed = 0;\r\n\t        this.hitting = false;\r\n\t        this.damageAudioTimerValue = 500;\r\n\t        this.damageAudioTimer = 0;\r\n\t        this.currentState = _1.State.Idle;\r\n\t    }\r\n\t    Enemy.prototype.takeDamage = function (damage, type) {\r\n\t        this.hp = this.hp - damage;\r\n\t        if (this.hp <= 0) {\r\n\t            if (type == model_1.SpellType.frostBlast) {\r\n\t                this.deathType = deathType_1.DeathType.freezeDeath;\r\n\t            }\r\n\t            else if (type == model_1.SpellType.fireBlast) {\r\n\t                this.deathType = deathType_1.DeathType.fireDeath;\r\n\t            }\r\n\t            else {\r\n\t                this.deathType = deathType_1.DeathType.swordDeath;\r\n\t            }\r\n\t            this.dead = true;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.burn = function () {\r\n\t        this.cinderValue += this.burnDurationFactor;\r\n\t        this.takeDamage(this.flameDamage, model_1.SpellType.fireBlast);\r\n\t        if (this.cinderValue > 300) {\r\n\t            this.burnValue += this.burnDurationFactor;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.setFreezeSpeed = function () {\r\n\t        this.actualSpeed = this.maxSpeed * Math.pow(0.997, this.freezeValue);\r\n\t        if (this.actualSpeed < this.maxSpeed * 0.3) {\r\n\t            this.actualSpeed = this.maxSpeed * 0.3;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.freeze = function () {\r\n\t        this.freezeValue++;\r\n\t        if (this.actualSpeed > this.maxSpeed * 0.3) {\r\n\t            this.actualSpeed = this.actualSpeed * 0.997;\r\n\t        }\r\n\t        this.takeDamage(this.freezeDamage, model_1.SpellType.frostBlast);\r\n\t    };\r\n\t    Enemy.prototype.update = function (delta, tiles, player) {\r\n\t        this.toMove.x = this.velocity.x * delta;\r\n\t        this.toMove.y = this.velocity.y * delta;\r\n\t        this.nextToEdge = false;\r\n\t        if (this.actualSpeed < this.maxSpeed) {\r\n\t            this.actualSpeed = this.actualSpeed * 1.005;\r\n\t        }\r\n\t        this.collisionData = this.collisionDetection.collisionDetection(tiles, [], this, this.toMove, delta);\r\n\t        this.fall(delta);\r\n\t        var collisionArea = this.getCollisionArea();\r\n\t        var leftEdge = this.collisionDetection.fastCheckEnviroment(new model_1.Rectangle(collisionArea.x, collisionArea.y + collisionArea.height, 1, 30), tiles);\r\n\t        var rightEdge = this.collisionDetection.fastCheckEnviroment(new model_1.Rectangle(collisionArea.x + collisionArea.width, collisionArea.y + collisionArea.height, 1, 30), tiles);\r\n\t        if (leftEdge && rightEdge) {\r\n\t            this.nextToEdge = true;\r\n\t        }\r\n\t        else {\r\n\t            if (this.inverse) {\r\n\t                if (leftEdge) {\r\n\t                    this.direction = false;\r\n\t                    this.nextToEdge = true;\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                if (rightEdge) {\r\n\t                    this.direction = true;\r\n\t                    this.nextToEdge = true;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        if (this.collisionData.groundCollision) {\r\n\t            this.velocity.y = 0;\r\n\t        }\r\n\t        if (this.collisionData.wallCollision) {\r\n\t            if (this.collisionData.normalX == 1) {\r\n\t                this.nextToEdge = true;\r\n\t                this.direction = !this.direction;\r\n\t            }\r\n\t            else {\r\n\t                this.nextToEdge = true;\r\n\t                this.direction = !this.direction;\r\n\t            }\r\n\t            this.velocity.x = 0;\r\n\t        }\r\n\t        var freezePercent = this.freezeValue / this.maxFreeze;\r\n\t        this.updateColor([1.0 + (freezePercent * 1.0), 1.0 + (freezePercent * 2.0), 1.0 + (freezePercent * 2.0), 1.0]);\r\n\t        this.updateBurnDamage();\r\n\t        if (this.damageAudioTimer > 0) {\r\n\t            this.damageAudioTimer -= delta;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.getCollisionArea = function () {\r\n\t        var collisionArea = new model_1.Rectangle(0, 0, 0, 0);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Enemy.prototype.idle = function (delta, player, tiles) {\r\n\t        this.currentAnimation = this.idleAnimation;\r\n\t        this.maxSpeed = this.idleSpeed;\r\n\t        if (this.inRange(player, this.searchAreaOffset, tiles)) {\r\n\t            this.currentState = _1.State.IdleToTrackingTransition;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.idleToTrackingTransition = function (delta) {\r\n\t    };\r\n\t    Enemy.prototype.trackingToInRangeTransition = function (delta) {\r\n\t    };\r\n\t    Enemy.prototype.trackingToIdleTransition = function (delta) {\r\n\t    };\r\n\t    Enemy.prototype.patrol = function (delta) {\r\n\t        if (this.oldDirection != this.direction) {\r\n\t            this.oldDirection = this.direction;\r\n\t        }\r\n\t        if (this.oldDirection) {\r\n\t            this.moveLeft(delta);\r\n\t        }\r\n\t        else {\r\n\t            this.moveRight(delta);\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.hit = function (delta, player, tiles) {\r\n\t        this.currentAnimation = this.hitAnimation;\r\n\t        if (!this.inRange(player, this.hitAreaOffset, tiles) && this.hitAnimation.frameIndex == 0) {\r\n\t            this.currentState = _1.State.Tracking;\r\n\t        }\r\n\t        this.moveToPlayer(delta, player, tiles, 10);\r\n\t    };\r\n\t    Enemy.prototype.npcAction = function (delta, player, tiles) {\r\n\t        switch (this.currentState) {\r\n\t            case _1.State.Idle:\r\n\t                this.idle(delta, player, tiles);\r\n\t                break;\r\n\t            case _1.State.IdleToTrackingTransition:\r\n\t                this.idleToTrackingTransition(delta);\r\n\t                break;\r\n\t            case _1.State.TrackingToIdleTransition:\r\n\t                this.trackingToIdleTransition(delta);\r\n\t                break;\r\n\t            case _1.State.Tracking:\r\n\t                this.track(player, delta, tiles, 10);\r\n\t                break;\r\n\t            case _1.State.TrackingToInRangeTransition:\r\n\t                this.trackingToInRangeTransition(delta);\r\n\t                break;\r\n\t            case _1.State.InHitRange:\r\n\t                this.hit(delta, player, tiles);\r\n\t                break;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.checkStop = function (player, tiles) {\r\n\t        if (this.nextToEdge || this.inRange(player, this.minDistance, tiles)) {\r\n\t            this.stop();\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.stop = function () {\r\n\t        this.velocity.x = 0;\r\n\t    };\r\n\t    Enemy.prototype.track = function (player, delta, tiles, gapSize) {\r\n\t        this.currentAnimation = this.trackingAnimation;\r\n\t        this.maxSpeed = this.trackingSpeed;\r\n\t        this.trackingTime -= delta;\r\n\t        if (this.trackingTime <= 0) {\r\n\t            this.currentState = _1.State.TrackingToIdleTransition;\r\n\t        }\r\n\t        if (this.inRange(player, this.searchAreaOffset, tiles)) {\r\n\t            this.trackingTime = this.trackingMaxTime;\r\n\t        }\r\n\t        if (this.inRange(player, this.hitAreaOffset, tiles)) {\r\n\t            this.currentState = _1.State.TrackingToInRangeTransition;\r\n\t        }\r\n\t        this.moveToPlayer(delta, player, tiles, gapSize);\r\n\t    };\r\n\t    Enemy.prototype.moveToPlayer = function (delta, player, tiles, gapSize) {\r\n\t        if (Math.abs(player.position.x - this.position.x) > gapSize) {\r\n\t            if (player.position.x < this.position.x) {\r\n\t                this.moveLeft(delta);\r\n\t                this.checkStop(player, tiles);\r\n\t            }\r\n\t            else if (player.position.x > this.position.x) {\r\n\t                this.moveRight(delta);\r\n\t                this.checkStop(player, tiles);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.inRange = function (player, offset, tiles) {\r\n\t    };\r\n\t    Enemy.prototype.rand = function (min, max) {\r\n\t        return min + (Math.random() * (max - min));\r\n\t    };\r\n\t    Enemy.prototype.getDeltaPosition = function (player, offsetX, offsetY) {\r\n\t        return new model_1.Vector(player.middlePosition.x - offsetX - this.position.x, player.middlePosition.y - offsetY - this.position.y);\r\n\t    };\r\n\t    Enemy.prototype.getPathBlocks = function (deltaPos) {\r\n\t        var blocksize = 20;\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        var direction = deltaPos.copy(deltaPos);\r\n\t        var bowPosition = new model_1.Vector(this.position.x, this.position.y + 10);\r\n\t        direction.normalize();\r\n\t        var blocks = [];\r\n\t        for (var i = 0; i < Math.floor(magnitude / blocksize); i++) {\r\n\t            var newMagnitude = magnitude - (i * blocksize);\r\n\t            blocks.push(new model_1.Rectangle(bowPosition.x + direction.x * newMagnitude, bowPosition.y + direction.y * newMagnitude, blocksize, 17));\r\n\t        }\r\n\t        return blocks;\r\n\t    };\r\n\t    Enemy.prototype.clearShoot = function (deltaPos, tiles) {\r\n\t        var clear = true;\r\n\t        var pathBlocks = this.getPathBlocks(deltaPos);\r\n\t        for (var _i = 0, pathBlocks_1 = pathBlocks; _i < pathBlocks_1.length; _i++) {\r\n\t            var block = pathBlocks_1[_i];\r\n\t            if (!this.collisionDetection.fastCheckEnviroment(block, tiles)) {\r\n\t                clear = false;\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t        return clear;\r\n\t    };\r\n\t    Enemy.prototype.updateBurnDamage = function () {\r\n\t        if (this.burnValue > 0) {\r\n\t            this.takeDamage(this.burnDamage, model_1.SpellType.fireBlast);\r\n\t            this.burnValue--;\r\n\t        }\r\n\t    };\r\n\t    Enemy.prototype.updateColor = function (color) {\r\n\t        var colorColl = [];\r\n\t        for (var i = 0; i < 6; i++) {\r\n\t            colorColl.push.apply(colorColl, color);\r\n\t        }\r\n\t        this.color = colorColl;\r\n\t    };\r\n\t    return Enemy;\r\n\t}(character_1.Character));\r\n\texports.Enemy = Enemy;\r\n\n\n/***/ }),\n/* 405 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar gravity_1 = __webpack_require__(374);\r\n\tvar Character = (function () {\r\n\t    function Character(position, width, height) {\r\n\t        this.toMove = new model_1.Vector(0, 0);\r\n\t        this.dead = false;\r\n\t        this.inverse = false;\r\n\t        this.velocity = new model_1.Vector(0, 0);\r\n\t        this.maxSpeed = 0.3;\r\n\t        this.actualSpeed = 0.3;\r\n\t        this.acceleration = 0.009;\r\n\t        this.moving = false;\r\n\t        this.gravityStrength = 0.0025;\r\n\t        this.gravity = new gravity_1.Gravity(this.gravityStrength);\r\n\t        this.position = position;\r\n\t        this.width = width;\r\n\t        this.height = height;\r\n\t    }\r\n\t    Character.prototype.moveRight = function (delta) {\r\n\t        if (this.velocity.x < this.actualSpeed) {\r\n\t            this.velocity.x += this.acceleration * delta;\r\n\t        }\r\n\t        if (this.velocity.x > this.actualSpeed) {\r\n\t            this.velocity.x = this.actualSpeed;\r\n\t        }\r\n\t        this.inverse = false;\r\n\t        this.moving = true;\r\n\t    };\r\n\t    Character.prototype.moveLeft = function (delta) {\r\n\t        if (this.velocity.x > -this.actualSpeed) {\r\n\t            this.velocity.x -= this.acceleration * delta;\r\n\t        }\r\n\t        if (this.velocity.x < -this.actualSpeed) {\r\n\t            this.velocity.x = -this.actualSpeed;\r\n\t        }\r\n\t        this.inverse = true;\r\n\t        this.moving = true;\r\n\t    };\r\n\t    Character.prototype.fall = function (delta) {\r\n\t        this.gravity.apply(this.velocity, delta);\r\n\t    };\r\n\t    Character.prototype.getCollisionArea = function () {\r\n\t        var collisionArea = new model_1.Rectangle(this.position.x, this.position.y, this.width, this.height);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    return Character;\r\n\t}());\r\n\texports.Character = Character;\r\n\n\n/***/ }),\n/* 406 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (DeathType) {\r\n\t    DeathType[DeathType[\"fallDeath\"] = 0] = \"fallDeath\";\r\n\t    DeathType[DeathType[\"swordDeath\"] = 1] = \"swordDeath\";\r\n\t    DeathType[DeathType[\"freezeDeath\"] = 2] = \"freezeDeath\";\r\n\t    DeathType[DeathType[\"fireDeath\"] = 3] = \"fireDeath\";\r\n\t})(exports.DeathType || (exports.DeathType = {}));\r\n\tvar DeathType = exports.DeathType;\r\n\n\n/***/ }),\n/* 407 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar state_1 = __webpack_require__(408);\r\n\tvar Swordman = (function (_super) {\r\n\t    __extends(Swordman, _super);\r\n\t    function Swordman(position, width, height, projectileHandler, animationHandler) {\r\n\t        _super.call(this, position, width, height);\r\n\t        this.hitCollisionAreas = [];\r\n\t        this.hitAreaOffset = 100;\r\n\t        this.searchAreaOffset = 600;\r\n\t        this.hitting = false;\r\n\t        this.trackingSpeed = 0.2;\r\n\t        this.idleSpeed = 0.1;\r\n\t        this.minDistance = 5;\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.hitOffset = 40;\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.maxSpeed = 0.1;\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t        this.idleAnimation = new model_1.Animation([228, 227, 229, 227]);\r\n\t        this.idleAnimation.timeToChange = 150;\r\n\t        this.hitAnimation = new model_1.Animation([231, 231, 232, 230, 212]);\r\n\t        this.trackingAnimation = new model_1.Animation([211, 209, 211, 210]);\r\n\t    }\r\n\t    Swordman.prototype.takeDamage = function (damage, type) {\r\n\t        _super.prototype.takeDamage.call(this, damage, type);\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"swordmanhit.wav\", 1, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    Swordman.prototype.update = function (delta, tiles, player) {\r\n\t        _super.prototype.update.call(this, delta, tiles, player);\r\n\t        this.npcAction(delta, player, tiles);\r\n\t        if (this.currentAnimation == this.hitAnimation) {\r\n\t            this.currentAnimation.next(delta);\r\n\t        }\r\n\t        else {\r\n\t            if (this.velocity.x != 0 || this.collisionData.wallCollision) {\r\n\t                this.currentAnimation.next(delta);\r\n\t            }\r\n\t        }\r\n\t        this.setHitAnimation();\r\n\t        this.checkHitCollisionAreas(player);\r\n\t    };\r\n\t    Swordman.prototype.checkHitCollisionAreas = function (player) {\r\n\t        if (this.hitAnimation) {\r\n\t            if (this.hitAnimation.frameIndex == 1 && !this.hitting) {\r\n\t                this.hitting = true;\r\n\t                this.projectileHandler.createCollisionProjectile(this.position, this.width, this.inverse, 30, new model_1.Vector(0.5, 0.6));\r\n\t            }\r\n\t            if (this.hitAnimation.frameIndex == 0) {\r\n\t                this.hitting = false;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Swordman.prototype.idle = function (delta, player, tiles) {\r\n\t        _super.prototype.idle.call(this, delta, player, tiles);\r\n\t        this.patrol(delta);\r\n\t    };\r\n\t    Swordman.prototype.idleToTrackingTransition = function (delta) {\r\n\t        this.currentState = state_1.State.Tracking;\r\n\t        this.maxSpeed = this.trackingSpeed;\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t    };\r\n\t    Swordman.prototype.trackingToInRangeTransition = function (delta) {\r\n\t        this.currentState = state_1.State.InHitRange;\r\n\t    };\r\n\t    Swordman.prototype.trackingToIdleTransition = function (delta) {\r\n\t        this.maxSpeed = this.idleSpeed;\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t        this.currentState = state_1.State.Idle;\r\n\t    };\r\n\t    Swordman.prototype.track = function (player, delta, tiles, gapSize) {\r\n\t        this.actualSpeed = this.trackingSpeed;\r\n\t        _super.prototype.track.call(this, player, delta, tiles, gapSize);\r\n\t    };\r\n\t    Swordman.prototype.inRange = function (player, offset, tiles) {\r\n\t        var deltaPos;\r\n\t        if (this.inverse) {\r\n\t            deltaPos = this.getDeltaPosition(player, 50, 0);\r\n\t        }\r\n\t        else {\r\n\t            deltaPos = this.getDeltaPosition(player, 0, 0);\r\n\t        }\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        if (magnitude < offset) {\r\n\t            if (this.clearShoot(deltaPos, tiles)) {\r\n\t                return true;\r\n\t            }\r\n\t            else {\r\n\t                return false;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    Swordman.prototype.hit = function (delta, player, tiles) {\r\n\t        this.actualSpeed = 0;\r\n\t        _super.prototype.hit.call(this, delta, player, tiles);\r\n\t        if (this.meeleAnimation) {\r\n\t            if (this.meeleAnimation.repetitions <= 0) {\r\n\t                this.createHit(player);\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.createHit(player);\r\n\t        }\r\n\t    };\r\n\t    Swordman.prototype.createHit = function (player) {\r\n\t        this.animationHandler.audioHandler.playSound(\"swing3.wav\", 1, 0, 0.1);\r\n\t        if (!this.inverse) {\r\n\t            this.meeleAnimation = this.animationHandler.swordscut_a(new model_1.Vector(this.position.x + this.hitOffset, this.position.y), 50, !this.inverse);\r\n\t        }\r\n\t        else {\r\n\t            this.meeleAnimation = this.animationHandler.swordscut_a(new model_1.Vector(this.position.x - this.hitOffset, this.position.y), 50, !this.inverse);\r\n\t        }\r\n\t    };\r\n\t    Swordman.prototype.setHitAnimation = function () {\r\n\t        if (this.meeleAnimation) {\r\n\t            if (!this.inverse) {\r\n\t                this.meeleAnimation.areaToRender.x = this.position.x + this.hitOffset;\r\n\t                this.meeleAnimation.areaToRender.y = this.position.y;\r\n\t            }\r\n\t            else {\r\n\t                this.meeleAnimation.areaToRender.x = this.position.x - this.hitOffset;\r\n\t                this.meeleAnimation.areaToRender.y = this.position.y;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Swordman.prototype.getCollisionArea = function () {\r\n\t        var collisionArea = new model_1.Rectangle(this.position.x + 10, this.position.y, this.width - 20, 55);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    return Swordman;\r\n\t}(enemy_1.Enemy));\r\n\texports.Swordman = Swordman;\r\n\n\n/***/ }),\n/* 408 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (State) {\r\n\t    State[State[\"Idle\"] = 0] = \"Idle\";\r\n\t    State[State[\"IdleToTrackingTransition\"] = 1] = \"IdleToTrackingTransition\";\r\n\t    State[State[\"TrackingToIdleTransition\"] = 2] = \"TrackingToIdleTransition\";\r\n\t    State[State[\"Tracking\"] = 3] = \"Tracking\";\r\n\t    State[State[\"TrackingToInRangeTransition\"] = 4] = \"TrackingToInRangeTransition\";\r\n\t    State[State[\"InHitRange\"] = 5] = \"InHitRange\";\r\n\t})(exports.State || (exports.State = {}));\r\n\tvar State = exports.State;\r\n\n\n/***/ }),\n/* 409 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar _1 = __webpack_require__(403);\r\n\tvar Archer = (function (_super) {\r\n\t    __extends(Archer, _super);\r\n\t    function Archer(position, width, height, projectileHandler, animationHandler) {\r\n\t        _super.call(this, position, width, height);\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.hitAreaOffset = 600;\r\n\t        this.searchAreaOffset = 800;\r\n\t        this.hp = 50;\r\n\t        this.arrowVelocity = 0.5;\r\n\t        this.shoot = false;\r\n\t        this.debugHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.maxSpeed = 0.1;\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t        this.idleAnimation = new model_1.Animation([267, 266, 267, 265]);\r\n\t        this.hitAnimation = new model_1.Animation([262, 264, 263, 264]);\r\n\t        this.trackingAnimation = new model_1.Animation([267, 266, 267, 265]);\r\n\t        this.trackingAnimation.timeToChange = 175;\r\n\t        this.hitAnimation.timeToChange = 300;\r\n\t        this.currentAnimation = this.hitAnimation;\r\n\t        this.idleAnimation.timeToChange = 175;\r\n\t    }\r\n\t    Archer.prototype.update = function (delta, tiles, player) {\r\n\t        this.npcAction(delta, player, tiles);\r\n\t        _super.prototype.update.call(this, delta, tiles, player);\r\n\t        this.currentAnimation.next(delta);\r\n\t    };\r\n\t    Archer.prototype.getCollisionArea = function () {\r\n\t        var collisionArea = new model_1.Rectangle(this.position.x + 10, this.position.y - 5, this.width - 20, 55);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Archer.prototype.takeDamage = function (damage, type) {\r\n\t        _super.prototype.takeDamage.call(this, damage, type);\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"swordmanhit.wav\", 1, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    Archer.prototype.idle = function (delta, player, tiles) {\r\n\t        _super.prototype.idle.call(this, delta, player, tiles);\r\n\t        this.patrol(delta);\r\n\t    };\r\n\t    Archer.prototype.hit = function (delta, player, tiles) {\r\n\t        _super.prototype.hit.call(this, delta, player, tiles);\r\n\t        if (this.hitAnimation.frameIndex == 3) {\r\n\t            if (!this.shoot) {\r\n\t                this.shoot = true;\r\n\t                var velocity = this.calculatePath(player, this.inverse);\r\n\t                var bowPosition = new model_1.Vector(this.position.x, this.position.y + 20);\r\n\t                this.projectileHandler.createArrow(bowPosition, this.inverse, velocity);\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.shoot = false;\r\n\t        }\r\n\t    };\r\n\t    Archer.prototype.idleToTrackingTransition = function (delta) {\r\n\t        this.currentState = _1.State.Tracking;\r\n\t    };\r\n\t    Archer.prototype.trackingToInRangeTransition = function (delta) {\r\n\t        this.currentState = _1.State.InHitRange;\r\n\t    };\r\n\t    Archer.prototype.trackingToIdleTransition = function (delta) {\r\n\t        this.currentState = _1.State.Idle;\r\n\t    };\r\n\t    Archer.prototype.inRange = function (player, offset, tiles) {\r\n\t        var deltaPos = this.getDeltaPosition(player, 10, 0);\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        if (magnitude < this.searchAreaOffset) {\r\n\t            if (this.clearShoot(deltaPos, tiles)) {\r\n\t                return true;\r\n\t            }\r\n\t            else {\r\n\t                return false;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    Archer.prototype.getDeltaVelocity = function (player, deltaPos) {\r\n\t        var velocity = player.getVelocity();\r\n\t        var deltaVelocity = velocity.x * velocity.x * 800;\r\n\t        if (deltaPos.x < 0) {\r\n\t            if (velocity.x > 0) {\r\n\t                return -deltaVelocity;\r\n\t            }\r\n\t            else {\r\n\t                return deltaVelocity;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            if (velocity.x > 0) {\r\n\t                return deltaVelocity;\r\n\t            }\r\n\t            else {\r\n\t                return -deltaVelocity;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Archer.prototype.calculatePath = function (player, inverse) {\r\n\t        var deltaPos = this.getDeltaPosition(player, 10, 0);\r\n\t        deltaPos.y = deltaPos.y - ((deltaPos.x * deltaPos.x * 0.00063) + this.getDeltaVelocity(player, deltaPos));\r\n\t        var velocity = new model_1.Vector(deltaPos.x, deltaPos.y * this.rand(0.85, 1.15));\r\n\t        velocity.normalize();\r\n\t        velocity.multiply(this.arrowVelocity);\r\n\t        return velocity;\r\n\t    };\r\n\t    return Archer;\r\n\t}(enemy_1.Enemy));\r\n\texports.Archer = Archer;\r\n\n\n/***/ }),\n/* 410 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar renderHelper_1 = __webpack_require__(361);\r\n\tvar DebugHandler = (function () {\r\n\t    function DebugHandler() {\r\n\t        this.debugRects = [];\r\n\t        this.renderHelper = renderHelper_1.RenderHelper.getInstance();\r\n\t        if (DebugHandler.instance) {\r\n\t            throw new Error(\"Static class cant be instanced!\");\r\n\t        }\r\n\t        DebugHandler.instance = this;\r\n\t    }\r\n\t    DebugHandler.getInstance = function () {\r\n\t        return DebugHandler.instance;\r\n\t    };\r\n\t    DebugHandler.prototype.createRenderCall = function (renderCall) {\r\n\t        for (var _i = 0, _a = this.debugRects; _i < _a.length; _i++) {\r\n\t            var rect = _a[_i];\r\n\t            renderCall.vertecies = this.renderHelper.getVertecies(rect.x, rect.y, rect.width, rect.height, renderCall.vertecies);\r\n\t            renderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, 1);\r\n\t            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        }\r\n\t        return renderCall;\r\n\t    };\r\n\t    DebugHandler.instance = new DebugHandler();\r\n\t    return DebugHandler;\r\n\t}());\r\n\texports.DebugHandler = DebugHandler;\r\n\n\n/***/ }),\n/* 411 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar spellHandler_1 = __webpack_require__(412);\r\n\tvar drag_1 = __webpack_require__(375);\r\n\tvar character_1 = __webpack_require__(405);\r\n\tvar deathType_1 = __webpack_require__(406);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar Player = (function (_super) {\r\n\t    __extends(Player, _super);\r\n\t    function Player(position, context, projectileHandler, animationHandler, particleHandler, width, height, hp, mana, progress, fireLevel, frostLevel, shieldLevel) {\r\n\t        _super.call(this, position, width, height);\r\n\t        this.defaultJumpSpeed = -0.8;\r\n\t        this.jumpSpeed = this.defaultJumpSpeed;\r\n\t        this.damageAnimations = [];\r\n\t        this.stunned = false;\r\n\t        this.lift = null;\r\n\t        this.liftVelocity = new model_1.Vector(0, 0);\r\n\t        this.middlePosition = new model_1.Vector(0, 0);\r\n\t        this.acceleration = 0.003;\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.drag = 0.0015;\r\n\t        this.externalDragForce = 0.0005;\r\n\t        this.dragForce = new drag_1.Drag(this.drag);\r\n\t        this.externalDrag = new drag_1.Drag(this.externalDragForce);\r\n\t        this.idleTime = 3000;\r\n\t        this.idleTimeChange = 3000;\r\n\t        this.jumping = false;\r\n\t        this.inJump = false;\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.manaRegen = 1;\r\n\t        this.externalVelocity = new model_1.Vector(0, 0);\r\n\t        this.onGroundTimer = 0;\r\n\t        this.shieldTextureCoords = this.renderHelper.getTextureCoordinates([], 199);\r\n\t        this.damageAudioTimerValue = 500;\r\n\t        this.damageAudioTimer = 0;\r\n\t        this.debugHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.context = context;\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.spellHandler = new spellHandler_1.SpellHandler(this.animationHandler, this.projectileHandler, this.particleHandler, this, fireLevel, frostLevel, shieldLevel);\r\n\t        this.lowerIdleAnimation = new model_1.Animation([162]);\r\n\t        this.upperIdleAnimation = new model_1.Animation([163]);\r\n\t        this.upperRunningAnimation = new model_1.Animation([170, 171, 172, 170, 173, 174]);\r\n\t        this.upperRunningAnimation.timeToChange = 150;\r\n\t        this.lowerRunningAnimation = new model_1.Animation([165, 166, 167, 165, 168, 169]);\r\n\t        this.lowerRunningAnimation.timeToChange = 150;\r\n\t        this.stunnedAnimation = new model_1.Animation([60, 61, 62, 63]);\r\n\t        this.stunnedAnimation.timeToChange = 200;\r\n\t        this.lowerJumpAnimation = new model_1.Animation([160]);\r\n\t        this.upperJumpAnimation = new model_1.Animation([161]);\r\n\t        this.lowerStillAnimation = new model_1.Animation([165]);\r\n\t        this.upperStillAnimation = new model_1.Animation([170]);\r\n\t        this.hp = hp;\r\n\t        this.mana = mana;\r\n\t        this.maxMana = this.mana;\r\n\t        this.lowerAnimation = this.lowerIdleAnimation;\r\n\t        this.upperAnimation = this.upperIdleAnimation;\r\n\t        this.stepAudio = this.animationHandler.audioHandler.createContinuos(\"step.flac\", 2, 0, 0.05);\r\n\t    }\r\n\t    Player.prototype.takeDamage = function (damage) {\r\n\t        this.hp -= damage;\r\n\t        if (this.hp <= 0) {\r\n\t            this.hp = 0;\r\n\t            this.deathType = deathType_1.DeathType.swordDeath;\r\n\t        }\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"playerhit.wav\", 1, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.hardHit = function (inverse, x) {\r\n\t        this.stun();\r\n\t        this.velocity.x = 0;\r\n\t        if (inverse) {\r\n\t            this.externalVelocity.x += x;\r\n\t        }\r\n\t        else {\r\n\t            this.externalVelocity.x -= x;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.useMana = function (mana) {\r\n\t        if (this.mana - mana <= 0) {\r\n\t            return false;\r\n\t        }\r\n\t        this.mana -= mana;\r\n\t        return true;\r\n\t    };\r\n\t    Player.prototype.regenMana = function () {\r\n\t        this.mana += this.manaRegen;\r\n\t        if (this.mana > this.maxMana) {\r\n\t            this.mana = this.maxMana;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.getVelocity = function () {\r\n\t        return new model_1.Vector(this.velocity.x + this.externalVelocity.x + this.liftVelocity.x, this.velocity.y + this.externalVelocity.y + this.liftVelocity.y);\r\n\t    };\r\n\t    Player.prototype.isMoving = function () {\r\n\t        return this.velocity.x == 0 && this.velocity.y == 0;\r\n\t    };\r\n\t    Player.prototype.createRenderCall = function (renderCall) {\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        if (this.inverse) {\r\n\t            renderCall.vertecies = this.renderHelper.getInverseVertecies(this.position.x, this.position.y, this.width, this.height, renderCall.vertecies);\r\n\t        }\r\n\t        else {\r\n\t            renderCall.vertecies = this.renderHelper.getVertecies(this.position.x, this.position.y, this.width, this.height, renderCall.vertecies);\r\n\t        }\r\n\t        if (this.stunned) {\r\n\t            renderCall.textureCoords.push.apply(renderCall.textureCoords, this.stunnedAnimation.getCurrentFrame());\r\n\t        }\r\n\t        else {\r\n\t            renderCall.textureCoords.push.apply(renderCall.textureCoords, this.upperAnimation.getCurrentFrame());\r\n\t            this.renderLower(renderCall);\r\n\t            if (this.spellHandler.castingShield) {\r\n\t                this.renderShield(renderCall);\r\n\t                this.spellHandler.castingShield = false;\r\n\t            }\r\n\t        }\r\n\t        return renderCall;\r\n\t    };\r\n\t    Player.prototype.shieldExplosion = function (inverse) {\r\n\t        this.animationHandler.audioHandler.playSound(\"magic1.wav\", 2, 0, 0.1);\r\n\t        this.particleHandler.createShieldExplosionEffect(this.getCalculatedPos(this.position, 0), this.inverse);\r\n\t        this.hardHit(inverse, 0.7);\r\n\t    };\r\n\t    Player.prototype.getShieldCollidables = function () {\r\n\t        if (this.spellHandler.castingShield) {\r\n\t            return this.spellHandler.shieldCollidables;\r\n\t        }\r\n\t        else {\r\n\t            return [];\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.renderLower = function (renderCall) {\r\n\t        var call = new render_1.RenderCall();\r\n\t        var x = this.position.x;\r\n\t        var x1;\r\n\t        var x2;\r\n\t        if (this.inverse) {\r\n\t            x2 = x;\r\n\t            x1 = x + (this.width);\r\n\t        }\r\n\t        else {\r\n\t            x2 = x + (this.width);\r\n\t            x1 = x;\r\n\t        }\r\n\t        var y1 = this.position.y;\r\n\t        var y2 = this.position.y + (this.height);\r\n\t        call.vertecies = [\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x2, y1,\r\n\t            x1, y1,\r\n\t            x2, y2,\r\n\t            x1, y2\r\n\t        ];\r\n\t        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.lowerAnimation.getCurrentFrame());\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        renderCall.vertecies.push.apply(renderCall.vertecies, call.vertecies);\r\n\t    };\r\n\t    Player.prototype.update = function (tiles, dynamicTiles, delta) {\r\n\t        var collisionData = this.collisionDetection.collisionDetection(tiles, dynamicTiles, this, this.toMove, delta);\r\n\t        this.middlePosition.x = (this.position.x + this.width / 2);\r\n\t        this.middlePosition.y = this.position.y;\r\n\t        if (this.lift == null) {\r\n\t            this.fall(delta);\r\n\t        }\r\n\t        else {\r\n\t            if (collisionData.groundCollision) {\r\n\t                this.liftVelocity = new model_1.Vector(0, 0);\r\n\t                this.lift = null;\r\n\t            }\r\n\t            collisionData.groundCollision = true;\r\n\t            collisionData.normalY = -1;\r\n\t        }\r\n\t        if (collisionData.lift != null && collisionData.groundCollision && collisionData.normalY == -1) {\r\n\t            this.lift = collisionData.lift;\r\n\t        }\r\n\t        if (this.deathType) {\r\n\t            if (this.deathType == deathType_1.DeathType.swordDeath) {\r\n\t                this.dead = true;\r\n\t                this.projectileHandler.createPlayerSword_death(this.position, this.inverse);\r\n\t            }\r\n\t        }\r\n\t        if (collisionData.groundCollision) {\r\n\t            this.velocity.y = 0;\r\n\t            if (collisionData.normalY == -1) {\r\n\t                this.inJump = false;\r\n\t                if (this.jumping) {\r\n\t                    this.liftVelocity = new model_1.Vector(0, 0);\r\n\t                    this.lift = null;\r\n\t                    this.idleTime = 0;\r\n\t                    this.velocity.y = this.jumpSpeed;\r\n\t                    this.inJump = true;\r\n\t                    this.animationHandler.audioHandler.playSound(\"jump.ogg\", 1, 0, 0.1);\r\n\t                }\r\n\t                this.onGroundTimer = 50;\r\n\t            }\r\n\t            else if (this.onGroundTimer >= 0) {\r\n\t                collisionData.fallDeath = true;\r\n\t            }\r\n\t        }\r\n\t        if (collisionData.fallDeath) {\r\n\t            this.dead = true;\r\n\t            this.animationHandler.fallDeath(this.position);\r\n\t        }\r\n\t        if (collisionData.wallCollision) {\r\n\t            this.velocity.x = 0;\r\n\t            this.externalVelocity.x = 0;\r\n\t        }\r\n\t        if (this.velocity.x != 0 || collisionData.wallCollision) {\r\n\t            this.idleTime = 0;\r\n\t        }\r\n\t        else {\r\n\t            this.idleTime += delta;\r\n\t            this.lowerRunningAnimation.reset();\r\n\t            this.upperRunningAnimation.reset();\r\n\t        }\r\n\t        if (!this.moving) {\r\n\t            if (this.externalVelocity.x != 0) {\r\n\t                this.externalDrag.apply(this.externalVelocity, delta);\r\n\t            }\r\n\t            else {\r\n\t                this.dragForce.apply(this.velocity, delta);\r\n\t            }\r\n\t        }\r\n\t        this.spellHandler.update(delta);\r\n\t        if (this.inJump) {\r\n\t            this.lowerAnimation = this.lowerJumpAnimation;\r\n\t        }\r\n\t        else if (this.moving || this.velocity.x != 0) {\r\n\t            this.lowerAnimation = this.lowerRunningAnimation;\r\n\t            this.stepAudio.play();\r\n\t        }\r\n\t        else {\r\n\t            this.lowerAnimation = this.lowerStillAnimation;\r\n\t        }\r\n\t        if (this.stunned) {\r\n\t            this.stunnedAnimation.next(delta);\r\n\t            this.spellHandler.castingShield = false;\r\n\t            if (this.stunnedAnimation.repetitions == 0) {\r\n\t                this.stunned = false;\r\n\t            }\r\n\t        }\r\n\t        else if (this.spellHandler.currentCast) {\r\n\t            if (this.spellHandler.currentCast instanceof model_1.ChannelCast) {\r\n\t                this.lowerAnimation = this.spellHandler.currentCast.lowerCurrentAnimation;\r\n\t            }\r\n\t            this.upperAnimation = this.spellHandler.currentCast.currentAnimation;\r\n\t        }\r\n\t        else if (this.inJump) {\r\n\t            this.upperAnimation = this.upperJumpAnimation;\r\n\t        }\r\n\t        else if (this.idleTime >= this.idleTimeChange) {\r\n\t            this.lowerAnimation = this.lowerIdleAnimation;\r\n\t            this.upperAnimation = this.upperIdleAnimation;\r\n\t        }\r\n\t        else if (this.moving || this.velocity.x != 0) {\r\n\t            this.upperRunningAnimation.frameIndex = this.lowerRunningAnimation.frameIndex;\r\n\t            this.upperRunningAnimation.lastChange = this.lowerRunningAnimation.lastChange;\r\n\t            this.upperAnimation = this.upperRunningAnimation;\r\n\t            this.lowerAnimation = this.lowerRunningAnimation;\r\n\t        }\r\n\t        else {\r\n\t            this.upperAnimation = this.upperStillAnimation;\r\n\t            this.lowerAnimation = this.lowerStillAnimation;\r\n\t        }\r\n\t        this.lowerAnimation.next(delta);\r\n\t        this.upperAnimation.next(delta);\r\n\t        this.jumping = false;\r\n\t        this.moving = false;\r\n\t        var totalVelocity = this.getVelocity();\r\n\t        this.toMove.x = totalVelocity.x * delta;\r\n\t        this.toMove.y = totalVelocity.y * delta;\r\n\t        this.updateDamageAnimations();\r\n\t        this.onGroundTimer -= delta;\r\n\t        if (this.damageAudioTimer > 0) {\r\n\t            this.damageAudioTimer -= delta;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.moveRight = function (delta) {\r\n\t        _super.prototype.moveRight.call(this, delta);\r\n\t    };\r\n\t    Player.prototype.moveLeft = function (delta) {\r\n\t        _super.prototype.moveLeft.call(this, delta);\r\n\t    };\r\n\t    Player.prototype.getCollisionArea = function () {\r\n\t        var collisionArea = new model_1.Rectangle(this.position.x + 8, this.position.y + 14, 32, 68);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Player.prototype.getProjectileCollisionArea = function () {\r\n\t        var collisionArea = new model_1.Rectangle(this.position.x + 14, this.position.y + 14, 20, 72);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Player.prototype.getCalculatedPos = function (position, size) {\r\n\t        return new model_1.Vector(this.calcPos(position.x, size, 25), this.calcPos(position.y, size, 43));\r\n\t    };\r\n\t    Player.prototype.calcPos = function (value, size, offset) {\r\n\t        return value - (size / 2 - offset);\r\n\t    };\r\n\t    Player.prototype.jump = function () {\r\n\t        if (!this.jumping) {\r\n\t            this.jumping = true;\r\n\t        }\r\n\t    };\r\n\t    Player.prototype.cast = function (type) {\r\n\t        this.spellHandler.cast(type);\r\n\t    };\r\n\t    Player.prototype.renderShield = function (renderCall) {\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(this.position.x - 18, this.position.y - 5, 80, 100, renderCall.vertecies);\r\n\t        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.shieldTextureCoords);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        return renderCall;\r\n\t    };\r\n\t    Player.prototype.stun = function () {\r\n\t        this.stunned = true;\r\n\t        this.stunnedAnimation.repetitions = 10;\r\n\t        this.stunnedAnimation.reset();\r\n\t    };\r\n\t    Player.prototype.updateDamageAnimations = function () {\r\n\t        var removeItems = [];\r\n\t        for (var _i = 0, _a = this.damageAnimations; _i < _a.length; _i++) {\r\n\t            var stickyAnimation = _a[_i];\r\n\t            stickyAnimation.animation.areaToRender.x = this.position.x - stickyAnimation.offset.x;\r\n\t            stickyAnimation.animation.areaToRender.y = this.position.y - stickyAnimation.offset.y;\r\n\t            if (stickyAnimation.animation.repetitions <= 0) {\r\n\t                removeItems.push(stickyAnimation);\r\n\t            }\r\n\t        }\r\n\t        for (var _b = 0, removeItems_1 = removeItems; _b < removeItems_1.length; _b++) {\r\n\t            var remove = removeItems_1[_b];\r\n\t            var index = this.damageAnimations.indexOf(remove);\r\n\t            if (index != -1) {\r\n\t                this.damageAnimations.splice(index, 1);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return Player;\r\n\t}(character_1.Character));\r\n\texports.Player = Player;\r\n\n\n/***/ }),\n/* 412 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar SpellHandler = (function () {\r\n\t    function SpellHandler(animationHandler, projectileHandler, particleHandler, player, fireLevel, frostLevel, shieldLevel) {\r\n\t        this.fireLevel = fireLevel;\r\n\t        this.frostLevel = frostLevel;\r\n\t        this.shieldLevel = shieldLevel;\r\n\t        this.shieldCollidables = [];\r\n\t        this.castingShield = false;\r\n\t        this.break = 0;\r\n\t        this.refShieldCollidables = [];\r\n\t        this.maxMagicValue = 50 + (20 * this.fireLevel);\r\n\t        this.minMagicValue = 25 + (5 * this.fireLevel);\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.player = player;\r\n\t        this.createShieldCollidables();\r\n\t        this.initCasts();\r\n\t        this.flameThrowerAudio = this.animationHandler.audioHandler.createContinuos(\"flamethrower.ogg\", 3.5, 0, 0.1);\r\n\t        this.freezeAudio = this.animationHandler.audioHandler.createContinuos(\"freeze.ogg\", 6, 0, 0.1);\r\n\t        this.shieldAudio = this.animationHandler.audioHandler.createContinuos(\"shield.ogg\", 2.4, 0, 0.03);\r\n\t        this.magicChannelAudio = this.animationHandler.audioHandler.createContinuos(\"fireloop.ogg\", 1, 0, 0.02);\r\n\t        this.maxMagicAudio = this.animationHandler.audioHandler.createContinuos(\"fireloop.ogg\", 2.5, 1, 0.01);\r\n\t    }\r\n\t    SpellHandler.prototype.update = function (delta) {\r\n\t        if (this.currentCast && this.break == 0) {\r\n\t            this.currentCast.update(delta);\r\n\t            if (this.currentCast.done) {\r\n\t                this.currentCast.cancel();\r\n\t                this.currentCast = null;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            if (!this.castingShield) {\r\n\t                this.player.regenMana();\r\n\t            }\r\n\t        }\r\n\t        if (this.channelMagicCast.currentValue >= this.maxMagicValue) {\r\n\t            this.particleHandler.createMagicEffect(this.player.position, this.player.inverse);\r\n\t            this.maxMagicAudio.play();\r\n\t        }\r\n\t        if (this.castingShield) {\r\n\t            this.shieldCollidables = [];\r\n\t            for (var _i = 0, _a = this.refShieldCollidables; _i < _a.length; _i++) {\r\n\t                var collidable = _a[_i];\r\n\t                this.shieldCollidables.push(new model_1.Rectangle(collidable.x + this.player.position.x, collidable.y + this.player.position.y, collidable.width, collidable.height));\r\n\t            }\r\n\t            this.shieldAudio.play();\r\n\t            this.particleHandler.createShieldEffect(this.player.getCalculatedPos(this.player.position, 0), this.player.inverse, this.shieldLevel);\r\n\t        }\r\n\t        this.updateBreak(delta);\r\n\t    };\r\n\t    SpellHandler.prototype.cast = function (spellType) {\r\n\t        switch (spellType) {\r\n\t            case model_1.SpellType.fireball:\r\n\t                this.castFireBall();\r\n\t                break;\r\n\t            case model_1.SpellType.electricbolt:\r\n\t                this.castElectricBall();\r\n\t                break;\r\n\t            case model_1.SpellType.fireBlast:\r\n\t                this.castFireBlast();\r\n\t                break;\r\n\t            case model_1.SpellType.frostBlast:\r\n\t                this.castFrostBlast();\r\n\t                break;\r\n\t            case model_1.SpellType.shield:\r\n\t                this.castShield();\r\n\t                break;\r\n\t            case model_1.SpellType.channelmagic:\r\n\t                this.castChannelMagic();\r\n\t                break;\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.createShieldCollidables = function () {\r\n\t        this.refShieldCollidables = [];\r\n\t        var posx = 17;\r\n\t        var posy = 40;\r\n\t        for (var i = 0; i < 20; i++) {\r\n\t            var angle = void 0;\r\n\t            var x = void 0;\r\n\t            angle = Math.PI * (i * 0.1 + 0.6);\r\n\t            x = posx + (30 * Math.cos(angle));\r\n\t            var y = posy + (40 * Math.sin(angle));\r\n\t            this.refShieldCollidables.push(new model_1.Rectangle(x, y, 12, 12));\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.castShield = function () {\r\n\t        if (this.player.useMana(0.1)) {\r\n\t            if (this.break == 0) {\r\n\t                this.castingShield = true;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.break = 500;\r\n\t            this.player.shieldExplosion(this.player.inverse);\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.updateBreak = function (delta) {\r\n\t        this.break -= delta;\r\n\t        if (this.break < 0) {\r\n\t            this.break = 0;\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.castFireBall = function () {\r\n\t        if (!this.currentCast || (this.currentCast == this.fireBallCast && this.fireBallCast.currentAnimation.repetitions == 1)) {\r\n\t            if (this.player.useMana(20)) {\r\n\t                this.fireBallCast.reset();\r\n\t                this.fireBallCast.size = this.channelMagicCast.currentValue;\r\n\t                this.channelMagicCast.resetValue();\r\n\t                this.currentCast = this.fireBallCast;\r\n\t            }\r\n\t            else {\r\n\t                this.break = 500;\r\n\t                if (this.castingShield) {\r\n\t                    this.player.shieldExplosion(this.player.inverse);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.castElectricBall = function () {\r\n\t    };\r\n\t    SpellHandler.prototype.castChannelMagic = function () {\r\n\t        if ((!this.currentCast || this.currentCast == this.channelMagicCast) && this.player.isMoving()) {\r\n\t            this.channelMagicCast.channeling = true;\r\n\t            this.channelMagicCast.done = false;\r\n\t            this.currentCast = this.channelMagicCast;\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.castFireBlast = function () {\r\n\t        if (!this.currentCast || this.currentCast == this.fireBlastCast) {\r\n\t            if (this.player.useMana(0.5)) {\r\n\t                this.fireBlastCast.reset();\r\n\t                this.currentCast = this.fireBlastCast;\r\n\t            }\r\n\t            else {\r\n\t                this.break = 500;\r\n\t                if (this.castingShield) {\r\n\t                    this.player.shieldExplosion(this.player.inverse);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.castFrostBlast = function () {\r\n\t        if (!this.currentCast || this.currentCast == this.frostBlastCast) {\r\n\t            if (this.player.useMana(0.5)) {\r\n\t                this.frostBlastCast.reset();\r\n\t                this.currentCast = this.frostBlastCast;\r\n\t            }\r\n\t            else {\r\n\t                this.break = 500;\r\n\t                if (this.castingShield) {\r\n\t                    this.player.shieldExplosion(this.player.inverse);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.initCasts = function () {\r\n\t        var _this = this;\r\n\t        var fireblastAnimation = new model_1.Animation([178]);\r\n\t        fireblastAnimation.repetitions = 1;\r\n\t        var onFireCast = this.getOnCastFireBlast(this.fireLevel);\r\n\t        this.fireBlastCast = new model_1.InstantCast(fireblastAnimation, onFireCast);\r\n\t        var frostBlastAnimation = new model_1.Animation([178]);\r\n\t        frostBlastAnimation.repetitions = 1;\r\n\t        var onFrostCast = this.getOnCastFrostBlast(this.frostLevel);\r\n\t        this.frostBlastCast = new model_1.InstantCast(frostBlastAnimation, onFrostCast);\r\n\t        var channelAnimation = new model_1.Animation([175]);\r\n\t        var channelLowerAnimation = new model_1.Animation([162]);\r\n\t        var onChannelMagic = function () {\r\n\t            _this.particleHandler.createChannelMagic(_this.player.position, _this.player.inverse);\r\n\t            _this.magicChannelAudio.play();\r\n\t        };\r\n\t        var onCancelChannelMagic = function () {\r\n\t        };\r\n\t        this.channelMagicCast = new model_1.ChannelCast(channelAnimation, channelLowerAnimation, onChannelMagic, onCancelChannelMagic, 25 + (5 * this.fireLevel), this.maxMagicValue, 0.03);\r\n\t        var castAnimation = new model_1.Animation([170, 176, 177, 176]);\r\n\t        castAnimation.repetitions = 3;\r\n\t        castAnimation.timeToChange = 170;\r\n\t        var onFireBallUpdate = function (area, inverse, offsetX) {\r\n\t            _this.particleHandler.createFireBall(new model_1.Vector(area.x, area.y), area.width, inverse, offsetX);\r\n\t        };\r\n\t        var onFireBallCast = function (animation, size) {\r\n\t            _this.projectileHandler.createFireBall(_this.player.getCalculatedPos(_this.player.position, size), _this.player.inverse, 0.6, size, 11, onFireBallUpdate);\r\n\t            _this.animationHandler.audioHandler.playSound(\"foom.wav\", 1, 0, 0.03);\r\n\t            return animation;\r\n\t        };\r\n\t        this.fireBallCast = new model_1.SpellCast(castAnimation, 2, onFireBallCast);\r\n\t    };\r\n\t    SpellHandler.prototype.getOnCastFireBlast = function (fireLevel) {\r\n\t        var _this = this;\r\n\t        if (fireLevel == 0) {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFireBlast(_this.player.position, _this.player.inverse, 0);\r\n\t                _this.flameThrowerAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        else if (fireLevel == 1) {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFireBlast(_this.player.position, _this.player.inverse, 1);\r\n\t                _this.flameThrowerAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        else if (fireLevel == 2) {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFireBlast(_this.player.position, _this.player.inverse, 2);\r\n\t                _this.flameThrowerAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        else {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFireBlast(_this.player.position, _this.player.inverse, 3);\r\n\t                _this.flameThrowerAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t    };\r\n\t    SpellHandler.prototype.getOnCastFrostBlast = function (frostLevel) {\r\n\t        var _this = this;\r\n\t        if (frostLevel == 0) {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFrostBlast(_this.player.position, _this.player.inverse, 0);\r\n\t                _this.freezeAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        else if (frostLevel == 1) {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFrostBlast(_this.player.position, _this.player.inverse, 1);\r\n\t                _this.freezeAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        else if (frostLevel == 2) {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFrostBlast(_this.player.position, _this.player.inverse, 2);\r\n\t                _this.freezeAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        else {\r\n\t            return function (animation) {\r\n\t                _this.particleHandler.createFrostBlast(_this.player.position, _this.player.inverse, 3);\r\n\t                _this.freezeAudio.play();\r\n\t                return animation;\r\n\t            };\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    return SpellHandler;\r\n\t}());\r\n\texports.SpellHandler = SpellHandler;\r\n\n\n/***/ }),\n/* 413 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar state_1 = __webpack_require__(408);\r\n\tvar Shadow = (function (_super) {\r\n\t    __extends(Shadow, _super);\r\n\t    function Shadow(position, width, height, projectileHandler, animationHandler) {\r\n\t        _super.call(this, position, width, height);\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.hitAreaOffset = 50;\r\n\t        this.searchAreaOffset = 100;\r\n\t        this.hp = 300;\r\n\t        this.trackingSpeed = 0.2;\r\n\t        this.idleSpeed = 0;\r\n\t        this.minDistance = 30;\r\n\t        this.spotted = false;\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.idleAnimation = new model_1.Animation([118]);\r\n\t        this.idleToTrackingAnimation = new model_1.Animation([119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132]);\r\n\t        this.idleToTrackingAnimation.repetitions = 13;\r\n\t        this.idleToTrackingAnimation.timeToChange = 50;\r\n\t        this.trackingToIdleTransitionAnimation = new model_1.Animation([132, 130, 127, 124, 119]);\r\n\t        this.trackingToIdleTransitionAnimation.repetitions = 4;\r\n\t        this.trackingAnimation = new model_1.Animation([133, 134, 135]);\r\n\t        this.hitAnimation = new model_1.Animation([136, 136, 137, 137, 138, 138]);\r\n\t        this.hitAnimation.timeToChange = 150;\r\n\t        this.currentAnimation = this.hitAnimation;\r\n\t        this.idleAnimation.timeToChange = 175;\r\n\t    }\r\n\t    Shadow.prototype.update = function (delta, tiles, player) {\r\n\t        _super.prototype.update.call(this, delta, tiles, player);\r\n\t        this.currentAnimation.next(delta);\r\n\t        this.npcAction(delta, player, tiles);\r\n\t    };\r\n\t    Shadow.prototype.getCollisionArea = function () {\r\n\t        var collisionArea;\r\n\t        if (this.currentState != state_1.State.Tracking && this.currentState != state_1.State.InHitRange) {\r\n\t            collisionArea = new model_1.Rectangle(this.position.x + this.width / 2, this.position.y - 5 + this.height, 0, 0);\r\n\t        }\r\n\t        else {\r\n\t            collisionArea = new model_1.Rectangle(this.position.x, this.position.y - 5, this.width, this.height);\r\n\t        }\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Shadow.prototype.takeDamage = function (damage, type) {\r\n\t        _super.prototype.takeDamage.call(this, damage, type);\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"shade15.wav\", 2, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    Shadow.prototype.hit = function (delta, player, tiles) {\r\n\t        _super.prototype.hit.call(this, delta, player, tiles);\r\n\t        if (this.hitAnimation.frameIndex == 2 && !this.hitting) {\r\n\t            this.hitting = true;\r\n\t            var pos = void 0;\r\n\t            if (this.inverse) {\r\n\t                pos = new model_1.Vector(this.position.x + 30, this.position.y + 20);\r\n\t            }\r\n\t            else {\r\n\t                pos = new model_1.Vector(this.position.x - 50, this.position.y + 20);\r\n\t            }\r\n\t            this.animationHandler.audioHandler.playSound(\"shade2.wav\", 1, 0, 0.1);\r\n\t            this.projectileHandler.createCollisionProjectile(pos, this.width, this.inverse, 60, new model_1.Vector(1, 0.8));\r\n\t        }\r\n\t        if (this.hitAnimation.frameIndex == 0) {\r\n\t            this.hitting = false;\r\n\t        }\r\n\t    };\r\n\t    Shadow.prototype.idle = function (delta, player, tiles) {\r\n\t        _super.prototype.idle.call(this, delta, player, tiles);\r\n\t        this.stop();\r\n\t        this.burnValue = 0;\r\n\t    };\r\n\t    Shadow.prototype.idleToTrackingTransition = function (delta) {\r\n\t        this.currentAnimation = this.idleToTrackingAnimation;\r\n\t        this.stop();\r\n\t        if (!this.spotted) {\r\n\t            this.animationHandler.audioHandler.playSound(\"shade9.wav\", 3, 0, 0.5);\r\n\t            this.spotted = true;\r\n\t        }\r\n\t        if (this.idleToTrackingAnimation.repetitions == 0) {\r\n\t            this.trackingTime = this.trackingMaxTime;\r\n\t            this.currentState = state_1.State.Tracking;\r\n\t            this.currentAnimation = this.trackingAnimation;\r\n\t            this.maxSpeed = this.trackingSpeed;\r\n\t            this.actualSpeed = this.maxSpeed;\r\n\t            this.idleToTrackingAnimation.reset();\r\n\t            this.idleToTrackingAnimation.repetitions = 13;\r\n\t        }\r\n\t    };\r\n\t    Shadow.prototype.trackingToInRangeTransition = function (delta) {\r\n\t        this.currentState = state_1.State.InHitRange;\r\n\t    };\r\n\t    Shadow.prototype.trackingToIdleTransition = function (delta) {\r\n\t        this.currentAnimation = this.trackingToIdleTransitionAnimation;\r\n\t        this.stop();\r\n\t        if (this.trackingToIdleTransitionAnimation.repetitions == 0) {\r\n\t            this.currentState = state_1.State.Idle;\r\n\t            this.currentAnimation = this.idleAnimation;\r\n\t            this.maxSpeed = this.idleSpeed;\r\n\t            this.actualSpeed = this.maxSpeed;\r\n\t            this.trackingToIdleTransitionAnimation.reset();\r\n\t            this.trackingToIdleTransitionAnimation.repetitions = 4;\r\n\t        }\r\n\t    };\r\n\t    Shadow.prototype.inRange = function (player, offset, tiles) {\r\n\t        var deltaPos;\r\n\t        if (this.inverse) {\r\n\t            deltaPos = this.getDeltaPosition(player, 0, 0);\r\n\t        }\r\n\t        else {\r\n\t            deltaPos = this.getDeltaPosition(player, 50, 0);\r\n\t        }\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        if (magnitude < offset) {\r\n\t            if (this.clearShoot(deltaPos, tiles)) {\r\n\t                return true;\r\n\t            }\r\n\t            else {\r\n\t                return false;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    return Shadow;\r\n\t}(enemy_1.Enemy));\r\n\texports.Shadow = Shadow;\r\n\n\n/***/ }),\n/* 414 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar state_1 = __webpack_require__(408);\r\n\tvar Apprentice = (function (_super) {\r\n\t    __extends(Apprentice, _super);\r\n\t    function Apprentice(position, width, height, projectileHandler, animationHandler, particleHandler) {\r\n\t        var _this = this;\r\n\t        _super.call(this, position, width, height);\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.hitAreaOffset = 500;\r\n\t        this.searchAreaOffset = 500;\r\n\t        this.hp = 50;\r\n\t        this.trackingSpeed = 0.05;\r\n\t        this.idleSpeed = 0.05;\r\n\t        this.minDistance = 30;\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.projectileVelocity = 0.5;\r\n\t        this.shoot = false;\r\n\t        this.onBlackFireUpdate = function (area, inverse, offsetX) {\r\n\t            _this.particleHandler.createNecroFireBall(new model_1.Vector(area.x, area.y), area.width, inverse, offsetX);\r\n\t        };\r\n\t        this.debugHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.idleAnimation = new model_1.Animation([139, 140, 141, 142, 143]);\r\n\t        this.idleAnimation.timeToChange = 175;\r\n\t        this.trackingAnimation = new model_1.Animation([139, 140, 141, 142, 143]);\r\n\t        this.trackingAnimation.timeToChange = 175;\r\n\t        this.hitAnimation = new model_1.Animation([139, 140, 141, 142, 143]);\r\n\t        this.hitAnimation.timeToChange = 250;\r\n\t        this.currentAnimation = this.hitAnimation;\r\n\t    }\r\n\t    Apprentice.prototype.update = function (delta, tiles, player) {\r\n\t        _super.prototype.update.call(this, delta, tiles, player);\r\n\t        this.currentAnimation.next(delta);\r\n\t        this.npcAction(delta, player, tiles);\r\n\t    };\r\n\t    Apprentice.prototype.getCollisionArea = function () {\r\n\t        var collisionArea;\r\n\t        collisionArea = new model_1.Rectangle(this.position.x + 25, this.position.y + 15, this.width - 50, this.height - 20);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Apprentice.prototype.takeDamage = function (damage, type) {\r\n\t        _super.prototype.takeDamage.call(this, damage, type);\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"ogre2.wav\", 1, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    Apprentice.prototype.hit = function (delta, player, tiles) {\r\n\t        _super.prototype.hit.call(this, delta, player, tiles);\r\n\t        if (this.hitAnimation.frameIndex == 3) {\r\n\t            if (!this.shoot) {\r\n\t                var velocity = this.getDeltaPosition(player, 0, 0);\r\n\t                velocity.y = velocity.y + 20;\r\n\t                velocity.normalize();\r\n\t                velocity.multiply(this.projectileVelocity);\r\n\t                var pos = new model_1.Vector(this.position.x, this.position.y);\r\n\t                this.projectileHandler.createNecroBall(pos, 40, this.inverse, velocity, 100, 40, model_1.ProjectileType.NecroBall, this.onBlackFireUpdate);\r\n\t                this.shoot = true;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.shoot = false;\r\n\t        }\r\n\t    };\r\n\t    Apprentice.prototype.idle = function (delta, player, tiles) {\r\n\t        _super.prototype.idle.call(this, delta, player, tiles);\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t    };\r\n\t    Apprentice.prototype.idleToTrackingTransition = function (delta) {\r\n\t        this.currentState = state_1.State.Tracking;\r\n\t    };\r\n\t    Apprentice.prototype.trackingToInRangeTransition = function (delta) {\r\n\t        this.currentState = state_1.State.InHitRange;\r\n\t    };\r\n\t    Apprentice.prototype.trackingToIdleTransition = function (delta) {\r\n\t        this.currentState = state_1.State.Idle;\r\n\t    };\r\n\t    Apprentice.prototype.inRange = function (player, offset, tiles) {\r\n\t        var deltaPos = this.getDeltaPosition(player, 10, 0);\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        if (magnitude < offset) {\r\n\t            if (this.clearShoot(deltaPos, tiles)) {\r\n\t                return true;\r\n\t            }\r\n\t            else {\r\n\t                return false;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    return Apprentice;\r\n\t}(enemy_1.Enemy));\r\n\texports.Apprentice = Apprentice;\r\n\n\n/***/ }),\n/* 415 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar state_1 = __webpack_require__(408);\r\n\tvar Screamer = (function (_super) {\r\n\t    __extends(Screamer, _super);\r\n\t    function Screamer(position, width, height, projectileHandler, animationHandler, particleHandler) {\r\n\t        var _this = this;\r\n\t        _super.call(this, position, width, height);\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.hitAreaOffset = 500;\r\n\t        this.searchAreaOffset = 500;\r\n\t        this.hp = 300;\r\n\t        this.hitDamage = 50;\r\n\t        this.trackingSpeed = 0.4;\r\n\t        this.idleSpeed = 0.1;\r\n\t        this.minDistance = 30;\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.projectileVelocity = 0.5;\r\n\t        this.onBlackFireUpdate = function (area, inverse, offsetX) {\r\n\t            _this.particleHandler.createNecroFireBall(new model_1.Vector(area.x, area.y), area.width, inverse, offsetX);\r\n\t        };\r\n\t        this.hitTimer = 0;\r\n\t        this.chargeTimer = 1000;\r\n\t        this.debugHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.acceleration = 0.1;\r\n\t        this.idleAnimation = new model_1.Animation([560, 561, 562, 563, 564, 565, 566, 567]);\r\n\t        this.idleAnimation.timeToChange = 175;\r\n\t        this.trackingAnimation = new model_1.Animation([568, 569, 570, 571, 572, 573, 574, 575]);\r\n\t        this.trackingAnimation.timeToChange = 175;\r\n\t        this.hitAnimation = new model_1.Animation([568, 569, 570, 571, 572, 573, 574, 575]);\r\n\t        this.hitAnimation.timeToChange = 250;\r\n\t        this.currentAnimation = this.hitAnimation;\r\n\t    }\r\n\t    Screamer.prototype.update = function (delta, tiles, player) {\r\n\t        _super.prototype.update.call(this, delta, tiles, player);\r\n\t        this.currentAnimation.next(delta);\r\n\t        if (this.hitTimer > 0) {\r\n\t            this.hitTimer -= delta;\r\n\t        }\r\n\t        this.npcAction(delta, player, tiles);\r\n\t    };\r\n\t    Screamer.prototype.getCollisionArea = function () {\r\n\t        var collisionArea;\r\n\t        collisionArea = new model_1.Rectangle(this.position.x + 15, this.position.y, this.width - 30, this.height - 10);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    Screamer.prototype.hit = function (delta, player, tiles) {\r\n\t        _super.prototype.hit.call(this, delta, player, tiles);\r\n\t        if (this.hitTimer <= 0) {\r\n\t            if (this.collisionDetection.aabbCheck(this.getCollisionArea(), player.getCollisionArea())) {\r\n\t                this.hitTimer = 500;\r\n\t                this.chargeTimer = 1000;\r\n\t                this.currentState = state_1.State.Idle;\r\n\t                player.takeDamage(this.hitDamage);\r\n\t                if (player.position.x < this.position.x) {\r\n\t                    player.hardHit(false, 0.8);\r\n\t                }\r\n\t                else {\r\n\t                    player.hardHit(true, 0.8);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Screamer.prototype.idle = function (delta, player, tiles) {\r\n\t        _super.prototype.idle.call(this, delta, player, tiles);\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t    };\r\n\t    Screamer.prototype.idleToTrackingTransition = function (delta) {\r\n\t        this.currentAnimation = this.trackingAnimation;\r\n\t        if (this.chargeTimer > 0) {\r\n\t            this.chargeTimer -= delta;\r\n\t        }\r\n\t        else {\r\n\t            this.currentState = state_1.State.Tracking;\r\n\t            this.animationHandler.audioHandler.playSound(\"soundseffects.ogg\", 2, 0.5, 0.8);\r\n\t        }\r\n\t    };\r\n\t    Screamer.prototype.trackingToInRangeTransition = function (delta) {\r\n\t        this.currentState = state_1.State.InHitRange;\r\n\t    };\r\n\t    Screamer.prototype.trackingToIdleTransition = function (delta) {\r\n\t        this.currentState = state_1.State.Idle;\r\n\t    };\r\n\t    Screamer.prototype.track = function (player, delta, tiles) {\r\n\t        _super.prototype.track.call(this, player, delta, tiles, 30);\r\n\t        this.setFreezeSpeed();\r\n\t    };\r\n\t    Screamer.prototype.inRange = function (player, offset, tiles) {\r\n\t        var deltaPos = this.getDeltaPosition(player, 10, 0);\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        if (magnitude < offset) {\r\n\t            if (this.clearShoot(deltaPos, tiles)) {\r\n\t                return true;\r\n\t            }\r\n\t            else {\r\n\t                return false;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    Screamer.prototype.moveToPlayer = function (delta, player, tiles, gapSize) {\r\n\t        var positionMiddle = this.position.x + (this.width / 2);\r\n\t        if (Math.abs(player.middlePosition.x - positionMiddle) > gapSize) {\r\n\t            if (player.middlePosition.x < positionMiddle) {\r\n\t                this.moveLeft(delta);\r\n\t            }\r\n\t            else if (player.middlePosition.x > positionMiddle) {\r\n\t                this.moveRight(delta);\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.currentState = state_1.State.Idle;\r\n\t            this.chargeTimer = 1000;\r\n\t        }\r\n\t    };\r\n\t    return Screamer;\r\n\t}(enemy_1.Enemy));\r\n\texports.Screamer = Screamer;\r\n\n\n/***/ }),\n/* 416 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar enemy_1 = __webpack_require__(404);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar textureMapper_1 = __webpack_require__(362);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar state_1 = __webpack_require__(408);\r\n\tvar MasterSorcerer = (function (_super) {\r\n\t    __extends(MasterSorcerer, _super);\r\n\t    function MasterSorcerer(position, width, height, projectileHandler, animationHandler, particleHandler) {\r\n\t        var _this = this;\r\n\t        _super.call(this, position, width, height);\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.hitAreaOffset = 400;\r\n\t        this.searchAreaOffset = 800;\r\n\t        this.hp = 500;\r\n\t        this.trackingSpeed = 0.1;\r\n\t        this.idleSpeed = 0.1;\r\n\t        this.minDistance = 30;\r\n\t        this.textureMapper = textureMapper_1.TextureMapper.getInstance();\r\n\t        this.projectileVelocity = 0.5;\r\n\t        this.shoot = false;\r\n\t        this.onBlackFireUpdate = function (area, inverse, offsetX) {\r\n\t            _this.particleHandler.createNecroFireBall(new model_1.Vector(area.x, area.y), area.width, inverse, offsetX);\r\n\t        };\r\n\t        this.defaultChannelTime = 1500;\r\n\t        this.shootDefaultCooldown = 100;\r\n\t        this.shootCooldown = this.shootDefaultCooldown;\r\n\t        this.channelTimer = this.defaultChannelTime;\r\n\t        this.shootsFired = 0;\r\n\t        this.maxShoots = 10;\r\n\t        this.debugHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.idleAnimation = new model_1.Animation([580, 581, 582, 583, 584, 585]);\r\n\t        this.idleAnimation.timeToChange = 175;\r\n\t        this.trackingAnimation = new model_1.Animation([580, 581, 582, 583, 584, 585]);\r\n\t        this.trackingAnimation.timeToChange = 175;\r\n\t        this.channelHitTransitionAnimation = new model_1.Animation([585, 597, 598]);\r\n\t        this.channelHitTransitionAnimation.timeToChange = 150;\r\n\t        this.hitAnimation = new model_1.Animation([598]);\r\n\t        this.hitAnimation.timeToChange = 150;\r\n\t        this.channelAnimation = new model_1.Animation([585]);\r\n\t        this.currentAnimation = this.hitAnimation;\r\n\t    }\r\n\t    MasterSorcerer.prototype.update = function (delta, tiles, player) {\r\n\t        _super.prototype.update.call(this, delta, tiles, player);\r\n\t        this.currentAnimation.next(delta);\r\n\t        this.npcAction(delta, player, tiles);\r\n\t    };\r\n\t    MasterSorcerer.prototype.takeDamage = function (damage, type) {\r\n\t        _super.prototype.takeDamage.call(this, damage, type);\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"mnstr3.wav\", 2, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    MasterSorcerer.prototype.getCollisionArea = function () {\r\n\t        var collisionArea;\r\n\t        collisionArea = new model_1.Rectangle(this.position.x + 25, this.position.y + 35, this.width - 50, this.height - 40);\r\n\t        return collisionArea;\r\n\t    };\r\n\t    MasterSorcerer.prototype.track = function (player, delta, tiles, gapSize) {\r\n\t        _super.prototype.track.call(this, player, delta, tiles, gapSize);\r\n\t        this.setFreezeSpeed();\r\n\t    };\r\n\t    MasterSorcerer.prototype.hit = function (delta, player, tiles) {\r\n\t        if (!this.inRange(player, this.hitAreaOffset, tiles) && this.hitAnimation.frameIndex == 0) {\r\n\t            this.currentState = state_1.State.Tracking;\r\n\t        }\r\n\t        this.moveToPlayer(delta, player, tiles, 10);\r\n\t        this.actualSpeed = 0;\r\n\t        if (this.channel(delta)) {\r\n\t            this.currentAnimation = this.channelAnimation;\r\n\t            this.particleHandler.createNecroChannelMagic(this.position, this.inverse, 101, 10, 27, 10);\r\n\t        }\r\n\t        else if (this.channelHitTransitionAnimation.frameIndex != 2) {\r\n\t            this.currentAnimation = this.channelHitTransitionAnimation;\r\n\t        }\r\n\t        else {\r\n\t            this.currentAnimation = this.hitAnimation;\r\n\t            if (this.shootCooldown <= 0) {\r\n\t                if (this.shootsFired < this.maxShoots) {\r\n\t                    this.shootsFired++;\r\n\t                    var velocity = this.getDeltaPosition(player, 0, this.rand(0, 50));\r\n\t                    velocity.y = velocity.y + 20;\r\n\t                    velocity.normalize();\r\n\t                    velocity.multiply(this.projectileVelocity);\r\n\t                    var pos = void 0;\r\n\t                    if (this.inverse) {\r\n\t                        pos = new model_1.Vector(this.position.x - 18, this.position.y + 20);\r\n\t                    }\r\n\t                    else {\r\n\t                        pos = new model_1.Vector(this.position.x + 80, this.position.y + 20);\r\n\t                    }\r\n\t                    this.projectileHandler.createNecroBall(pos, 25, this.inverse, velocity, 10, 40, model_1.ProjectileType.NecroBall, this.onBlackFireUpdate);\r\n\t                }\r\n\t                else {\r\n\t                    this.shootsFired = 0;\r\n\t                    this.channelTimer = this.defaultChannelTime;\r\n\t                    this.channelHitTransitionAnimation.reset();\r\n\t                }\r\n\t                this.shootCooldown = this.shootDefaultCooldown;\r\n\t            }\r\n\t            else {\r\n\t                this.shootCooldown -= delta;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    MasterSorcerer.prototype.idle = function (delta, player, tiles) {\r\n\t        _super.prototype.idle.call(this, delta, player, tiles);\r\n\t        this.actualSpeed = this.maxSpeed;\r\n\t        this.patrol(delta);\r\n\t    };\r\n\t    MasterSorcerer.prototype.idleToTrackingTransition = function (delta) {\r\n\t        this.currentState = state_1.State.Tracking;\r\n\t    };\r\n\t    MasterSorcerer.prototype.trackingToInRangeTransition = function (delta) {\r\n\t        this.currentState = state_1.State.InHitRange;\r\n\t    };\r\n\t    MasterSorcerer.prototype.trackingToIdleTransition = function (delta) {\r\n\t        this.currentState = state_1.State.Idle;\r\n\t    };\r\n\t    MasterSorcerer.prototype.inRange = function (player, offset, tiles) {\r\n\t        var deltaPos = this.getDeltaPosition(player, 10, 0);\r\n\t        var magnitude = deltaPos.magnitude();\r\n\t        if (magnitude < offset) {\r\n\t            if (this.clearShoot(deltaPos, tiles)) {\r\n\t                return true;\r\n\t            }\r\n\t            else {\r\n\t                return false;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return false;\r\n\t        }\r\n\t    };\r\n\t    MasterSorcerer.prototype.channel = function (delta) {\r\n\t        this.channelTimer -= delta;\r\n\t        if (this.channelTimer <= 0) {\r\n\t            return false;\r\n\t        }\r\n\t        else {\r\n\t            return true;\r\n\t        }\r\n\t    };\r\n\t    return MasterSorcerer;\r\n\t}(enemy_1.Enemy));\r\n\texports.MasterSorcerer = MasterSorcerer;\r\n\n\n/***/ }),\n/* 417 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\n\n/***/ }),\n/* 418 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (ShapeShifterState) {\r\n\t    ShapeShifterState[ShapeShifterState[\"Idle\"] = 0] = \"Idle\";\r\n\t    ShapeShifterState[ShapeShifterState[\"Phase1\"] = 1] = \"Phase1\";\r\n\t    ShapeShifterState[ShapeShifterState[\"Phase1To2\"] = 2] = \"Phase1To2\";\r\n\t    ShapeShifterState[ShapeShifterState[\"Phase2\"] = 3] = \"Phase2\";\r\n\t    ShapeShifterState[ShapeShifterState[\"Phase2To3\"] = 4] = \"Phase2To3\";\r\n\t    ShapeShifterState[ShapeShifterState[\"Phase3\"] = 5] = \"Phase3\";\r\n\t})(exports.ShapeShifterState || (exports.ShapeShifterState = {}));\r\n\tvar ShapeShifterState = exports.ShapeShifterState;\r\n\n\n/***/ }),\n/* 419 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar _1 = __webpack_require__(356);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar index_1 = __webpack_require__(403);\r\n\tvar deathType_1 = __webpack_require__(406);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar ShapeShifter = (function (_super) {\r\n\t    __extends(ShapeShifter, _super);\r\n\t    function ShapeShifter(position, width, height, projectileHandler, animationHandler, particleHandler, game) {\r\n\t        var _this = this;\r\n\t        _super.call(this, position, width, height);\r\n\t        this.position = position;\r\n\t        this.width = width;\r\n\t        this.height = height;\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.particleHandler = particleHandler;\r\n\t        this.game = game;\r\n\t        this.burnValue = 0;\r\n\t        this.color = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\t        this.gravityStrength = 0;\r\n\t        this.damageAudioTimerValue = 500;\r\n\t        this.damageAudioTimer = 0;\r\n\t        this.currentState = index_1.ShapeShifterState.Idle;\r\n\t        this.hp = 1500;\r\n\t        this.moveTimer = 0;\r\n\t        this.up = true;\r\n\t        this.ammunition = 10;\r\n\t        this.elevated = false;\r\n\t        this.leveled = false;\r\n\t        this.elevateTime = 0;\r\n\t        this.projectileVelocity = 0.5;\r\n\t        this.p1FireCd = 1000;\r\n\t        this.p2FireCd = 2000;\r\n\t        this.p3FireCd = 1000;\r\n\t        this.p2BurstCd = 70;\r\n\t        this.fireSingle = false;\r\n\t        this.p2BeamCd = 300;\r\n\t        this.p2Beam2Cd = 1500;\r\n\t        this.burstTimer = 0;\r\n\t        this.burstTimer2 = 0;\r\n\t        this.fireCdTimer = 0;\r\n\t        this.patrolTimer = 0;\r\n\t        this.patrolMax = 5000;\r\n\t        this.direction = true;\r\n\t        this.currentSpell = 0;\r\n\t        this.freezeDamage = 0.08;\r\n\t        this.burnDamage = 0.2;\r\n\t        this.cinderValue = 0;\r\n\t        this.burnDurationFactor = 1;\r\n\t        this.flameDamage = 0.12;\r\n\t        this.magicChannelAudio = this.animationHandler.audioHandler.createContinuos(\"fireloop.ogg\", 1, 0, 0.01);\r\n\t        this.renderHalper = _1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.onBlackFireUpdate = function (area, inverse, offsetX) {\r\n\t            _this.particleHandler.createBlueFireBall(new model_1.Vector(area.x, area.y), area.width, inverse, offsetX);\r\n\t        };\r\n\t        this.onNecroUpdate = function (area, inverse, offsetX) {\r\n\t            _this.particleHandler.createNecroFireBall(new model_1.Vector(area.x, area.y), area.width, inverse, offsetX);\r\n\t        };\r\n\t        this.sorcererAnimation = new model_1.Animation([600, 601, 602, 603, 604, 605, 606, 607]);\r\n\t        this.sorcererAnimationP2 = new model_1.Animation([608, 609, 610, 611, 612, 613, 614, 615]);\r\n\t        this.sorcererAnimationP3 = new model_1.Animation([616, 617, 618, 619, 620, 621, 622, 623]);\r\n\t        this.currentAnimation = this.sorcererAnimation;\r\n\t        this.collisionArea = new model_1.Rectangle(0, 0, this.width - 64, this.height - 40);\r\n\t        this.velocity = new model_1.Vector(0, 0);\r\n\t        this.toMove = new model_1.Vector(0, 0);\r\n\t    }\r\n\t    ShapeShifter.prototype.getCollisionArea = function () {\r\n\t        return this.collisionArea;\r\n\t    };\r\n\t    ShapeShifter.prototype.takeDamage = function (damage, type) {\r\n\t        this.hp = this.hp - damage;\r\n\t        if (this.hp <= 0) {\r\n\t            if (type == model_1.SpellType.frostBlast) {\r\n\t                this.deathType = deathType_1.DeathType.freezeDeath;\r\n\t            }\r\n\t            else if (type == model_1.SpellType.fireBlast) {\r\n\t                this.deathType = deathType_1.DeathType.fireDeath;\r\n\t            }\r\n\t            else {\r\n\t                this.deathType = deathType_1.DeathType.swordDeath;\r\n\t            }\r\n\t            this.dead = true;\r\n\t            this.game.levelCompleted = true;\r\n\t        }\r\n\t        if (this.hp < 1000 && this.currentState == index_1.ShapeShifterState.Phase1) {\r\n\t            this.animationHandler.audioHandler.playSound(\"shade12.wav\", 2, 0, 0.1);\r\n\t            this.currentState = index_1.ShapeShifterState.Phase1To2;\r\n\t        }\r\n\t        else if (this.hp < 500 && this.currentState == index_1.ShapeShifterState.Phase2) {\r\n\t            this.animationHandler.audioHandler.playSound(\"shade12.wav\", 2, 0, 0.1);\r\n\t            this.currentState = index_1.ShapeShifterState.Phase2To3;\r\n\t        }\r\n\t        if (this.damageAudioTimer <= 0) {\r\n\t            this.animationHandler.audioHandler.playSound(\"shade11.wav\", 2, 0, 0.1);\r\n\t            this.damageAudioTimer = this.damageAudioTimerValue;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.freeze = function () {\r\n\t        this.takeDamage(this.freezeDamage, model_1.SpellType.frostBlast);\r\n\t    };\r\n\t    ShapeShifter.prototype.burn = function () {\r\n\t        this.cinderValue += this.burnDurationFactor;\r\n\t        this.takeDamage(this.flameDamage, model_1.SpellType.fireBlast);\r\n\t        if (this.cinderValue > 300) {\r\n\t            this.burnValue += this.burnDurationFactor;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.update = function (delta, tiles, player) {\r\n\t        this.currentAnimation.next(delta);\r\n\t        this.toMove.x = this.velocity.x * delta;\r\n\t        this.toMove.y = this.velocity.y * delta;\r\n\t        this.collisionArea.x = this.position.x + 32;\r\n\t        this.collisionArea.y = this.position.y + 40;\r\n\t        this.collisionData = this.collisionDetection.collisionDetection(tiles, [], this, this.toMove, delta);\r\n\t        switch (this.currentState) {\r\n\t            case index_1.ShapeShifterState.Idle:\r\n\t                this.idle(delta, player);\r\n\t                break;\r\n\t            case index_1.ShapeShifterState.Phase1:\r\n\t                this.phase1(delta, player);\r\n\t                break;\r\n\t            case index_1.ShapeShifterState.Phase1To2:\r\n\t                this.phase1To2();\r\n\t                break;\r\n\t            case index_1.ShapeShifterState.Phase2:\r\n\t                this.phase2(delta, player);\r\n\t                break;\r\n\t            case index_1.ShapeShifterState.Phase2To3:\r\n\t                this.phase2To3();\r\n\t                break;\r\n\t            case index_1.ShapeShifterState.Phase3:\r\n\t                this.phase3(delta, player);\r\n\t                break;\r\n\t        }\r\n\t        this.updateBurnDamage();\r\n\t        if (this.damageAudioTimer > 0) {\r\n\t            this.damageAudioTimer -= delta;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.createRenderCall = function (rendercall) {\r\n\t    };\r\n\t    ShapeShifter.prototype.fall = function (delta) {\r\n\t    };\r\n\t    ShapeShifter.prototype.updateBurnDamage = function () {\r\n\t        if (this.burnValue > 0) {\r\n\t            this.takeDamage(this.burnDamage, model_1.SpellType.fireBlast);\r\n\t            this.burnValue--;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.idle = function (delta, player) {\r\n\t        this.move(delta, 500, 0.0005, 0.01);\r\n\t        if (Math.abs(this.position.x - player.position.x) < 400) {\r\n\t            this.currentState = index_1.ShapeShifterState.Phase1;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.phase1 = function (delta, player) {\r\n\t        this.turnToPlayer(player);\r\n\t        if (!this.elevated) {\r\n\t            this.velocity.y = -0.2;\r\n\t            this.elevateTime += delta;\r\n\t            if (this.elevateTime > 700) {\r\n\t                this.leveledYCorrds = this.position.y;\r\n\t                this.elevated = true;\r\n\t                this.elevateTime = 0;\r\n\t                this.velocity.y = 0;\r\n\t            }\r\n\t            else {\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.move(delta, 500, 0.0005, 0.1);\r\n\t            this.patrol(delta);\r\n\t            this.fireCdTimer += delta;\r\n\t            if (this.fireCdTimer > this.p1FireCd) {\r\n\t                this.p1Fire(player);\r\n\t                this.fireCdTimer = 0;\r\n\t            }\r\n\t            else {\r\n\t                this.magicChannelAudio.play();\r\n\t                this.particleHandler.createBlueChannelMagic(this.position, this.inverse, 105, 75, 20, 75);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.phase1To2 = function () {\r\n\t        this.currentAnimation = this.sorcererAnimationP2;\r\n\t        this.currentState = index_1.ShapeShifterState.Phase2;\r\n\t    };\r\n\t    ShapeShifter.prototype.phase2To3 = function () {\r\n\t        this.currentAnimation = this.sorcererAnimationP3;\r\n\t        this.currentState = index_1.ShapeShifterState.Phase3;\r\n\t    };\r\n\t    ShapeShifter.prototype.phase3 = function (delta, player) {\r\n\t        this.velocity.x = 0;\r\n\t        this.turnToPlayer(player);\r\n\t        if (!this.leveled) {\r\n\t            this.velocity.y = 0;\r\n\t            if (this.position.y < this.leveledYCorrds) {\r\n\t                this.velocity.y = 0.2;\r\n\t            }\r\n\t            else {\r\n\t                this.velocity.y = -0.2;\r\n\t            }\r\n\t            if (this.position.y < this.leveledYCorrds && (this.position.y + 5) > this.leveledYCorrds) {\r\n\t                this.leveled = true;\r\n\t                this.moveReset();\r\n\t                this.velocity.y = 0.1;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            this.patrol(delta);\r\n\t            this.move(delta, 1500, 0.003, 0.1);\r\n\t        }\r\n\t        this.fireMixedP3(delta, player);\r\n\t    };\r\n\t    ShapeShifter.prototype.phase2 = function (delta, player) {\r\n\t        this.velocity.x = 0;\r\n\t        this.turnToPlayer(player);\r\n\t        this.move(delta, 500, 0.0005, 0.05);\r\n\t        this.fireMixed(delta, player);\r\n\t    };\r\n\t    ShapeShifter.prototype.fireMixedP3 = function (delta, player) {\r\n\t        this.fireCdTimer += delta;\r\n\t        this.burstTimer += delta;\r\n\t        this.burstTimer2 += delta;\r\n\t        if (this.fireCdTimer > this.p3FireCd) {\r\n\t            this.currentSpell = Math.floor(this.rand(0, 3.99));\r\n\t            this.fireCdTimer = 0;\r\n\t            this.burstTimer = 0;\r\n\t            this.burstTimer2 = 0;\r\n\t            this.fireSingle = false;\r\n\t        }\r\n\t        switch (this.currentSpell) {\r\n\t            case 0:\r\n\t                this.hail(player, 140, 15, 5, 15);\r\n\t                break;\r\n\t            case 1:\r\n\t                this.beam(player, 130, 35, 0, 35);\r\n\t                break;\r\n\t            case 2:\r\n\t                this.necroBall(player, 50, 0, 65, 0);\r\n\t                break;\r\n\t            case 3:\r\n\t                this.hail2(player, 65, 35, 80, 35);\r\n\t                break;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.fireMixed = function (delta, player) {\r\n\t        this.fireCdTimer += delta;\r\n\t        this.burstTimer += delta;\r\n\t        this.burstTimer2 += delta;\r\n\t        if (this.fireCdTimer > this.p2FireCd) {\r\n\t            this.currentSpell = Math.floor(this.rand(0, 3.99));\r\n\t            this.fireCdTimer = 0;\r\n\t            this.burstTimer = 0;\r\n\t            this.burstTimer2 = 0;\r\n\t            this.fireSingle = false;\r\n\t        }\r\n\t        switch (this.currentSpell) {\r\n\t            case 0:\r\n\t                this.hail(player, 150, 30, 10, 30);\r\n\t                break;\r\n\t            case 1:\r\n\t                this.beam(player, 140, 70, 0, 70);\r\n\t                break;\r\n\t            case 2:\r\n\t                this.necroBall(player, 40, 20, 70, 20);\r\n\t                break;\r\n\t            case 3:\r\n\t                this.hail2(player, 30, 50, 110, 50);\r\n\t                break;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.necroBall = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        if (!this.fireSingle) {\r\n\t            this.fireSingle = true;\r\n\t            this.p2FireBall(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    ShapeShifter.prototype.p2FireBall = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        var velocity = this.getProjectileVelocity(player, 50, 70);\r\n\t        var pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        this.projectileHandler.createNecroBall(pos, 50, this.inverse, velocity, 100, -40, model_1.ProjectileType.NecroBall, this.onNecroUpdate);\r\n\t    };\r\n\t    ShapeShifter.prototype.hail2 = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        if (this.burstTimer < this.p2BurstCd) {\r\n\t            this.p2Fire2(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    ShapeShifter.prototype.hail = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        if (this.burstTimer < this.p2BurstCd) {\r\n\t            this.p2Fire(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    ShapeShifter.prototype.p2FireBeam = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        var velocity = this.getProjectileVelocity(player, 50, 120);\r\n\t        var pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        this.projectileHandler.createNecroBall(pos, 30, this.inverse, velocity, 25, -40, model_1.ProjectileType.BlueBall, this.onBlackFireUpdate);\r\n\t    };\r\n\t    ShapeShifter.prototype.p2Fire = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        var velocity = this.getProjectileVelocity(player, 0, 100);\r\n\t        var pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        this.projectileHandler.createNecroBall(pos, 10, this.inverse, velocity, 10, -40, model_1.ProjectileType.BlueBall, this.onBlackFireUpdate);\r\n\t    };\r\n\t    ShapeShifter.prototype.p2Fire2 = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        var velocity = this.getProjectileVelocity(player, 0, 100);\r\n\t        var pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        this.projectileHandler.createNecroBall(pos, 20, this.inverse, velocity, 15, -40, model_1.ProjectileType.NecroBall, this.onNecroUpdate);\r\n\t    };\r\n\t    ShapeShifter.prototype.beam = function (player, offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        if (this.burstTimer > this.p2BeamCd) {\r\n\t            this.burstTimer = 0;\r\n\t            this.p2FireBeam(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    ShapeShifter.prototype.patrol = function (delta) {\r\n\t        this.patrolTimer += delta;\r\n\t        if (this.patrolTimer > this.patrolMax) {\r\n\t            this.direction = !this.direction;\r\n\t            this.patrolTimer = 0;\r\n\t        }\r\n\t        if (this.direction) {\r\n\t            this.velocity.x = 0.1;\r\n\t        }\r\n\t        else {\r\n\t            this.velocity.x = -0.1;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.getProjectileVelocity = function (player, startSpread, endSpread) {\r\n\t        var velocity = this.getDeltaPosition(player, 0, this.rand(startSpread, endSpread));\r\n\t        velocity.y = velocity.y + 20;\r\n\t        velocity.normalize();\r\n\t        velocity.multiply(this.projectileVelocity);\r\n\t        return velocity;\r\n\t    };\r\n\t    ShapeShifter.prototype.getPos = function (offsetX, offsetY, inverseOffsetX, inverseOffsetY) {\r\n\t        var pos;\r\n\t        if (this.inverse) {\r\n\t            pos = new model_1.Vector(this.position.x + inverseOffsetX, this.position.y + inverseOffsetY);\r\n\t        }\r\n\t        else {\r\n\t            pos = new model_1.Vector(this.position.x + offsetX, this.position.y + offsetY);\r\n\t        }\r\n\t        return pos;\r\n\t    };\r\n\t    ShapeShifter.prototype.p1Fire = function (player) {\r\n\t        var velocity = this.getProjectileVelocity(player, 0, 100);\r\n\t        var pos = this.getPos(120, 40, -10, 40);\r\n\t        this.projectileHandler.createNecroBall(pos, 60, this.inverse, velocity, 50, -40, model_1.ProjectileType.BlueBall, this.onBlackFireUpdate);\r\n\t    };\r\n\t    ShapeShifter.prototype.rand = function (min, max) {\r\n\t        return min + (Math.random() * (max - min));\r\n\t    };\r\n\t    ShapeShifter.prototype.turnToPlayer = function (player) {\r\n\t        var deltaX = this.position.x - player.position.x;\r\n\t        if (deltaX > 0) {\r\n\t            this.inverse = true;\r\n\t        }\r\n\t        else {\r\n\t            this.inverse = false;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.moveReset = function () {\r\n\t        this.moveTimer = 0;\r\n\t        this.up = true;\r\n\t    };\r\n\t    ShapeShifter.prototype.move = function (delta, amount, aceleration, smother) {\r\n\t        this.moveTimer += delta;\r\n\t        if (this.moveTimer > amount) {\r\n\t            this.moveTimer = 0;\r\n\t            if (this.up) {\r\n\t                this.velocity.y = -smother;\r\n\t            }\r\n\t            else {\r\n\t                this.velocity.y = smother;\r\n\t            }\r\n\t            this.up = !this.up;\r\n\t        }\r\n\t        if (this.up) {\r\n\t            this.velocity.y -= aceleration;\r\n\t        }\r\n\t        else {\r\n\t            this.velocity.y += aceleration;\r\n\t        }\r\n\t    };\r\n\t    ShapeShifter.prototype.getDeltaPosition = function (player, offsetX, offsetY) {\r\n\t        if (this.inverse) {\r\n\t            return new model_1.Vector(player.middlePosition.x - offsetX - this.position.x, player.middlePosition.y - offsetY - this.position.y);\r\n\t        }\r\n\t        else {\r\n\t            return new model_1.Vector(player.middlePosition.x - offsetX - (this.position.x + this.width), player.middlePosition.y - offsetY - this.position.y);\r\n\t        }\r\n\t    };\r\n\t    return ShapeShifter;\r\n\t}(index_1.Character));\r\n\texports.ShapeShifter = ShapeShifter;\r\n\n\n/***/ }),\n/* 420 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar _1 = __webpack_require__(421);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar player_1 = __webpack_require__(411);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar textRenderer_1 = __webpack_require__(424);\r\n\tvar animationHandler_1 = __webpack_require__(425);\r\n\tvar projectileHandler_1 = __webpack_require__(426);\r\n\tvar dynamicTileHandler_1 = __webpack_require__(427);\r\n\tvar particleHandler_1 = __webpack_require__(428);\r\n\tvar simpleParticleRenderer_1 = __webpack_require__(431);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar enemyHandler_1 = __webpack_require__(432);\r\n\tvar camera_1 = __webpack_require__(433);\r\n\tvar dynamicRenderer_1 = __webpack_require__(434);\r\n\tvar ui_1 = __webpack_require__(435);\r\n\tvar sceneHandler_1 = __webpack_require__(437);\r\n\tvar loadHelper_1 = __webpack_require__(346);\r\n\tvar localStorageHelper_1 = __webpack_require__(441);\r\n\tvar sceneIndex_1 = __webpack_require__(438);\r\n\tvar audioHandler_1 = __webpack_require__(450);\r\n\tvar Game = (function () {\r\n\t    function Game(asset, audioAsset, canvas, level) {\r\n\t        this.asset = asset;\r\n\t        this.canvasWidth = 1200;\r\n\t        this.canvasHeight = 800;\r\n\t        this.levelCompleted = false;\r\n\t        this.fps = 60;\r\n\t        this.collision = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.loadHelper = loadHelper_1.LoadHelper.getInstance();\r\n\t        this.gameArea = new model_1.Rectangle(-50, -50, this.canvasWidth + 100, this.canvasHeight + 100);\r\n\t        this.level = new model_1.Level();\r\n\t        this.debugHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.deathTimer = 0;\r\n\t        this.levelCompletedTimer = 3000;\r\n\t        this.renderCalls = new Map();\r\n\t        this.context = new _1.Context(asset, this.canvasWidth, this.canvasHeight, canvas);\r\n\t        this.renderer = new render_1.Renderer(this.context);\r\n\t        this.sceneHandler = new sceneHandler_1.SceneHandler(this.renderer, [this.canvasWidth, this.canvasHeight], canvas, this);\r\n\t        this.colorRenderer = new render_1.ColorRenderer(this.context);\r\n\t        this.simpleParticleRenderer = new simpleParticleRenderer_1.SimpleParticleRenderer(this.context);\r\n\t        this.dynamicRenderer = new dynamicRenderer_1.DynamicRenderer(this.context);\r\n\t        this.audioHandler = new audioHandler_1.AudioHandler(audioAsset);\r\n\t        this.levelData = level;\r\n\t        this.initKeyBindings();\r\n\t        this.reset(this.levelData);\r\n\t        this.initLoop();\r\n\t    }\r\n\t    Game.prototype.reset = function (levelData) {\r\n\t        this.loadLevel(levelData);\r\n\t    };\r\n\t    Game.prototype.initLoop = function () {\r\n\t        this.intevalTimer = setInterval(this.run(), 0);\r\n\t    };\r\n\t    Game.prototype.run = function () {\r\n\t        var _this = this;\r\n\t        this.lastUpdate = (new Date).getTime();\r\n\t        var loops = 0, skipTicks = 1000 / this.fps, maxFrameSkip = 3, nextGameTick = (new Date).getTime();\r\n\t        return function () {\r\n\t            loops = 0;\r\n\t            while ((new Date).getTime() > nextGameTick && loops < maxFrameSkip) {\r\n\t                var delta = nextGameTick - _this.lastUpdate;\r\n\t                _this.lastUpdate = nextGameTick;\r\n\t                //this.debugHandler.debugRects = [];\r\n\t                if (_this.sceneHandler.started) {\r\n\t                    if (!_this.player.dead && !_this.levelCompleted) {\r\n\t                        _this.checkGoal();\r\n\t                        _this.checkKeys(delta);\r\n\t                        _this.audioHandler.update(delta);\r\n\t                        _this.collision.checkCoutOfBounds(_this.player, _this.level.gameSize);\r\n\t                        _this.player.update(_this.level.tiles, _this.dynamicTileHandler.dynamicTiles, delta);\r\n\t                        _this.dynamicTileHandler.update(_this.player, delta);\r\n\t                        _this.enemyHandler.update(delta, _this.level.tiles, _this.player);\r\n\t                        _this.animationHandler.update(delta);\r\n\t                        _this.projectileHandler.update(delta, _this.level.tiles, _this.player, _this.dynamicTileHandler.dynamicTiles);\r\n\t                        _this.UI.update(_this.player.hp, _this.player.mana);\r\n\t                        _this.camera.update(_this.player.position);\r\n\t                        _this.particleHandler.update(delta, _this.enemyHandler.enemies);\r\n\t                    }\r\n\t                    else if (_this.levelCompleted) {\r\n\t                        _this.audioHandler.reset();\r\n\t                        _this.levelCompletedTimer -= delta;\r\n\t                        _this.enemyHandler.update(delta, _this.level.tiles, _this.player);\r\n\t                        _this.animationHandler.update(delta);\r\n\t                        _this.projectileHandler.update(delta, _this.level.tiles, _this.player, _this.dynamicTileHandler.dynamicTiles);\r\n\t                        _this.particleHandler.update(delta, _this.enemyHandler.enemies);\r\n\t                        if (_this.levelCompletedTimer < 0) {\r\n\t                            _this.audioHandler.reset();\r\n\t                            _this.sceneHandler.levelCompleted(_this.level.name);\r\n\t                        }\r\n\t                    }\r\n\t                    else if (_this.deathTimer < 3000) {\r\n\t                        _this.deathTimer += delta;\r\n\t                        _this.player.position.x = -1000;\r\n\t                        _this.player.position.y = -1000;\r\n\t                        _this.enemyHandler.update(delta, _this.level.tiles, _this.player);\r\n\t                        _this.animationHandler.update(delta);\r\n\t                        _this.projectileHandler.update(delta, _this.level.tiles, _this.player, _this.dynamicTileHandler.dynamicTiles);\r\n\t                        _this.particleHandler.update(delta, _this.enemyHandler.enemies);\r\n\t                    }\r\n\t                    else {\r\n\t                        _this.audioHandler.reset();\r\n\t                        _this.sceneHandler.started = false;\r\n\t                        _this.sceneHandler.setCurrentLevel(_this.level.name);\r\n\t                        _this.sceneHandler.currentScene = sceneIndex_1.SceneIndex.RestartMenu;\r\n\t                    }\r\n\t                    _this.render();\r\n\t                }\r\n\t                else {\r\n\t                    _this.sceneHandler.update();\r\n\t                    _this.sceneHandler.render();\r\n\t                }\r\n\t                nextGameTick += skipTicks;\r\n\t            }\r\n\t        };\r\n\t    };\r\n\t    Game.prototype.render = function () {\r\n\t        this.context.clear([0, 0, 0, 0.95]);\r\n\t        var dynamicRenderCall = new render_1.DynamicRenderCall();\r\n\t        var renderCall = new render_1.RenderCall();\r\n\t        this.renderCalls.clear();\r\n\t        var colorRenderCall = new render_1.ColorRenderCall();\r\n\t        var colorRenderCalls = [];\r\n\t        var simpleRenderCalls = [];\r\n\t        //GAME\r\n\t        this.enemyHandler.createRenderCall(colorRenderCall);\r\n\t        this.tileMap.createGoalRenderCall(this.level.end, renderCall);\r\n\t        if (this.player.dead) {\r\n\t            this.textRenderer.createTextRenderCall(400, 64, 50, renderCall, this.camera.position);\r\n\t            for (var _i = 0, _a = this.player.damageAnimations; _i < _a.length; _i++) {\r\n\t                var stickyAnimation = _a[_i];\r\n\t                this.animationHandler.remove(stickyAnimation.animation);\r\n\t            }\r\n\t            this.player.damageAnimations = [];\r\n\t        }\r\n\t        else if (this.levelCompleted) {\r\n\t            this.textRenderer.createTextRenderCall(800, 96, 51, renderCall, this.camera.position);\r\n\t        }\r\n\t        else {\r\n\t            renderCall = this.player.createRenderCall(renderCall);\r\n\t        }\r\n\t        this.animationHandler.createDynamicRenderCall(dynamicRenderCall, this.camera.position);\r\n\t        this.animationHandler.createRenderCall(colorRenderCall);\r\n\t        this.animationHandler.createStaticRenderCall(renderCall);\r\n\t        this.UI.createRenderCall(renderCall, this.camera.position);\r\n\t        simpleRenderCalls = this.particleHandler.createRenderCalls(simpleRenderCalls);\r\n\t        this.debugHandler.createRenderCall(renderCall);\r\n\t        colorRenderCalls.push(colorRenderCall);\r\n\t        this.tileMap.createRenderCall(this.renderCalls);\r\n\t        this.renderCalls = this.dynamicTileHandler.createRenderCall(this.renderCalls);\r\n\t        this.renderCalls.set(-1, renderCall);\r\n\t        this.renderer.render(this.renderCalls, this.camera.position);\r\n\t        this.colorRenderer.render(colorRenderCalls, this.camera.position);\r\n\t        this.simpleParticleRenderer.render(simpleRenderCalls, this.camera.position);\r\n\t        this.dynamicRenderer.render([dynamicRenderCall]);\r\n\t    };\r\n\t    Game.prototype.checkGoal = function () {\r\n\t        this.levelCompleted = this.collision.aabbCheck(this.player.getCollisionArea(), this.collisionAreaEnd);\r\n\t    };\r\n\t    Game.prototype.checkKeys = function (delta) {\r\n\t        if (!this.player.stunned) {\r\n\t            if (this.leftKeyPress) {\r\n\t                this.player.moveLeft(delta);\r\n\t            }\r\n\t            else if (this.rightKeyPress) {\r\n\t                this.player.moveRight(delta);\r\n\t            }\r\n\t            if (this.jumpKeyPress) {\r\n\t                this.player.jump();\r\n\t            }\r\n\t            if (this.shieldPress) {\r\n\t                this.player.cast(model_1.SpellType.shield);\r\n\t            }\r\n\t            if (this.frostKeyPress) {\r\n\t                this.player.cast(model_1.SpellType.frostBlast);\r\n\t            }\r\n\t            else if (this.fireKeyPress) {\r\n\t                this.player.cast(model_1.SpellType.fireBlast);\r\n\t            }\r\n\t            else if (this.fireballKeyPress) {\r\n\t                this.player.cast(model_1.SpellType.fireball);\r\n\t            }\r\n\t            else if (this.channelMagicKeyPress) {\r\n\t                this.player.cast(model_1.SpellType.channelmagic);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Game.prototype.initKeyBindings = function () {\r\n\t        var _this = this;\r\n\t        document.body.addEventListener(\"keydown\", function (event) {\r\n\t            var keyCode = event.keyCode;\r\n\t            switch (keyCode) {\r\n\t                case 65:\r\n\t                    _this.leftKeyPress = true;\r\n\t                    break;\r\n\t                case 68:\r\n\t                    _this.rightKeyPress = true;\r\n\t                    break;\r\n\t                case 87:\r\n\t                    _this.jumpKeyPress = true;\r\n\t                    break;\r\n\t                case 97:\r\n\t                    _this.fireballKeyPress = true;\r\n\t                    break;\r\n\t                case 49:\r\n\t                    _this.fireballKeyPress = true;\r\n\t                    break;\r\n\t                case 98:\r\n\t                    _this.channelMagicKeyPress = true;\r\n\t                    break;\r\n\t                case 50:\r\n\t                    _this.channelMagicKeyPress = true;\r\n\t                    break;\r\n\t                case 99:\r\n\t                    _this.frostKeyPress = true;\r\n\t                    break;\r\n\t                case 51:\r\n\t                    _this.frostKeyPress = true;\r\n\t                    break;\r\n\t                case 100:\r\n\t                    _this.fireKeyPress = true;\r\n\t                    break;\r\n\t                case 52:\r\n\t                    _this.fireKeyPress = true;\r\n\t                    break;\r\n\t                case 101:\r\n\t                    _this.shieldPress = true;\r\n\t                    break;\r\n\t                case 53:\r\n\t                    _this.shieldPress = true;\r\n\t                    break;\r\n\t                case 38:\r\n\t                    _this.jumpKeyPress = true;\r\n\t                    break;\r\n\t                case 39:\r\n\t                    _this.rightKeyPress = true;\r\n\t                    break;\r\n\t                case 37:\r\n\t                    _this.leftKeyPress = true;\r\n\t                    break;\r\n\t            }\r\n\t        });\r\n\t        document.body.addEventListener(\"keyup\", function (event) {\r\n\t            var keyCode = event.keyCode;\r\n\t            switch (keyCode) {\r\n\t                case 65:\r\n\t                    _this.leftKeyPress = false;\r\n\t                    break;\r\n\t                case 68:\r\n\t                    _this.rightKeyPress = false;\r\n\t                    break;\r\n\t                case 87:\r\n\t                    _this.jumpKeyPress = false;\r\n\t                    break;\r\n\t                case 97:\r\n\t                    _this.fireballKeyPress = false;\r\n\t                    break;\r\n\t                case 49:\r\n\t                    _this.fireballKeyPress = false;\r\n\t                    break;\r\n\t                case 98:\r\n\t                    _this.channelMagicKeyPress = false;\r\n\t                    break;\r\n\t                case 50:\r\n\t                    _this.channelMagicKeyPress = false;\r\n\t                    break;\r\n\t                case 99:\r\n\t                    _this.frostKeyPress = false;\r\n\t                    break;\r\n\t                case 51:\r\n\t                    _this.frostKeyPress = false;\r\n\t                    break;\r\n\t                case 100:\r\n\t                    _this.fireKeyPress = false;\r\n\t                    break;\r\n\t                case 52:\r\n\t                    _this.fireKeyPress = false;\r\n\t                    break;\r\n\t                case 101:\r\n\t                    _this.shieldPress = false;\r\n\t                    break;\r\n\t                case 53:\r\n\t                    _this.shieldPress = false;\r\n\t                    break;\r\n\t                case 38:\r\n\t                    _this.jumpKeyPress = false;\r\n\t                    break;\r\n\t                case 39:\r\n\t                    _this.rightKeyPress = false;\r\n\t                    break;\r\n\t                case 37:\r\n\t                    _this.leftKeyPress = false;\r\n\t                    break;\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    Game.prototype.loadLevel = function (levelData) {\r\n\t        var progress = localStorageHelper_1.LocalStorageHelper.getInstance().getCurrentProgress();\r\n\t        this.particleHandler = new particleHandler_1.ParticleHandler();\r\n\t        this.animationHandler = new animationHandler_1.AnimationHandler(this.particleHandler, this.audioHandler);\r\n\t        this.projectileHandler = new projectileHandler_1.ProjectileHandler(this.animationHandler, this.getSpellLevel(progress.defence));\r\n\t        this.dynamicTileHandler = new dynamicTileHandler_1.DynamicTileHandler();\r\n\t        this.level = this.loadHelper.levelDataToLevel(levelData, this.projectileHandler, this.animationHandler, this.particleHandler, this);\r\n\t        this.collisionAreaEnd = new model_1.Rectangle(this.level.end.x + (this.level.end.width / 2), this.level.end.y + (this.level.end.height / 2), 1, 1);\r\n\t        this.particleHandler.tiles = this.level.tiles;\r\n\t        this.camera = new camera_1.Camera([this.level.camera[0], this.level.camera[1]], [this.canvasWidth, this.canvasHeight], this.level.gameSize);\r\n\t        this.levelCompleted = false;\r\n\t        var hp = 100 + (10 * progress.hp);\r\n\t        var mana = 200 + (20 * progress.mana);\r\n\t        this.player = new player_1.Player(new model_1.Vector(this.level.player[0], this.level.player[1]), this.context, this.projectileHandler, this.animationHandler, this.particleHandler, 48, 85, hp, mana, progress, this.getSpellLevel(progress.fire), this.getSpellLevel(progress.frost), this.getSpellLevel(progress.defence));\r\n\t        this.collision.createGrid(new model_1.Vector(this.level.gameSize[0], this.level.gameSize[1]), this.level.tiles);\r\n\t        this.UI = new ui_1.UI(hp, mana);\r\n\t        this.enemyHandler = new enemyHandler_1.EnemyHandler(this.context, this.projectileHandler, this.animationHandler, this.particleHandler);\r\n\t        this.enemyHandler.enemies = this.level.enemies;\r\n\t        this.deathTimer = 0;\r\n\t        this.levelCompletedTimer = 3000;\r\n\t        this.dynamicTileHandler.dynamicTiles = this.level.dynamicTiles;\r\n\t        this.tileMap = new _1.TileMap(this.level.tiles, this.level.decorativeTiles);\r\n\t        this.textRenderer = new textRenderer_1.TextRenderer(this.context);\r\n\t    };\r\n\t    Game.prototype.getSpellLevel = function (spellPoints) {\r\n\t        if (spellPoints == 0) {\r\n\t            return 0;\r\n\t        }\r\n\t        else if (spellPoints < 3) {\r\n\t            return 1;\r\n\t        }\r\n\t        else if (spellPoints < 6) {\r\n\t            return 2;\r\n\t        }\r\n\t        else {\r\n\t            return 3;\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    return Game;\r\n\t}());\r\n\texports.Game = Game;\r\n\n\n/***/ }),\n/* 421 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar context_1 = __webpack_require__(422);\r\n\texports.Context = context_1.Context;\r\n\tvar game_1 = __webpack_require__(420);\r\n\texports.Game = game_1.Game;\r\n\tvar tileMap_1 = __webpack_require__(423);\r\n\texports.TileMap = tileMap_1.TileMap;\r\n\tvar renderer_1 = __webpack_require__(357);\r\n\texports.Renderer = renderer_1.Renderer;\r\n\n\n/***/ }),\n/* 422 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar Context = (function () {\r\n\t    function Context(asset, width, height, canvas) {\r\n\t        this.tileTextures = new Map();\r\n\t        this.initContext(width, height, canvas);\r\n\t        this.initShaders(asset);\r\n\t    }\r\n\t    Context.prototype.clear = function (color) {\r\n\t        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\r\n\t        this.gl.clearColor(color[0], color[1], color[2], color[3]);\r\n\t    };\r\n\t    Context.prototype.initContext = function (width, height, canvas) {\r\n\t        canvas.width = width;\r\n\t        canvas.height = height;\r\n\t        this.gl = canvas.getContext(\"experimental-webgl\");\r\n\t        console.log(\"Context initialized...\");\r\n\t    };\r\n\t    Context.prototype.initShaders = function (asset) {\r\n\t        var vertexShader = this.compileShader(asset.vertexShader, model_1.ShaderType.Vertex);\r\n\t        var fragmentShader = this.compileShader(asset.fragmentShader, model_1.ShaderType.Fragment);\r\n\t        var simpleParticleVertexShader = this.compileShader(asset.simpleParticleVertexShader, model_1.ShaderType.Vertex);\r\n\t        var simpleParticleFragmentShader = this.compileShader(asset.simpleParticleFragmentShader, model_1.ShaderType.Fragment);\r\n\t        var dynamicVertexShader = this.compileShader(asset.dynamicVertexShader, model_1.ShaderType.Vertex);\r\n\t        var dynamicFragmentShader = this.compileShader(asset.dynamicFragmentShader, model_1.ShaderType.Fragment);\r\n\t        var colorVertexShader = this.compileShader(asset.colorVertexShader, model_1.ShaderType.Vertex);\r\n\t        var colorFragmentShader = this.compileShader(asset.colorFragmentShader, model_1.ShaderType.Fragment);\r\n\t        this.colorShaderProgram = this.gl.createProgram();\r\n\t        this.gl.attachShader(this.colorShaderProgram, colorVertexShader);\r\n\t        this.gl.attachShader(this.colorShaderProgram, colorFragmentShader);\r\n\t        this.gl.linkProgram(this.colorShaderProgram);\r\n\t        if (!this.gl.getProgramParameter(this.colorShaderProgram, this.gl.LINK_STATUS)) {\r\n\t            alert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.colorShaderProgram));\r\n\t        }\r\n\t        this.dynamicVertecyProgram = this.gl.createProgram();\r\n\t        this.gl.attachShader(this.dynamicVertecyProgram, dynamicVertexShader);\r\n\t        this.gl.attachShader(this.dynamicVertecyProgram, dynamicFragmentShader);\r\n\t        this.gl.linkProgram(this.dynamicVertecyProgram);\r\n\t        if (!this.gl.getProgramParameter(this.dynamicVertecyProgram, this.gl.LINK_STATUS)) {\r\n\t            alert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.dynamicVertecyProgram));\r\n\t        }\r\n\t        this.simpleParticleProgram = this.gl.createProgram();\r\n\t        this.gl.attachShader(this.simpleParticleProgram, simpleParticleVertexShader);\r\n\t        this.gl.attachShader(this.simpleParticleProgram, simpleParticleFragmentShader);\r\n\t        this.gl.linkProgram(this.simpleParticleProgram);\r\n\t        if (!this.gl.getProgramParameter(this.simpleParticleProgram, this.gl.LINK_STATUS)) {\r\n\t            alert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.simpleParticleProgram));\r\n\t        }\r\n\t        this.shaderProgram = this.gl.createProgram();\r\n\t        this.gl.attachShader(this.shaderProgram, vertexShader);\r\n\t        this.gl.attachShader(this.shaderProgram, fragmentShader);\r\n\t        this.gl.linkProgram(this.shaderProgram);\r\n\t        if (!this.gl.getProgramParameter(this.shaderProgram, this.gl.LINK_STATUS)) {\r\n\t            alert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.shaderProgram));\r\n\t        }\r\n\t        this.initAssetTextures(this.gl, asset);\r\n\t    };\r\n\t    Context.prototype.initAssetTextures = function (gl, asset) {\r\n\t        this.initTextures(gl, asset.tileAssets);\r\n\t        this.initBaseTextures(gl, asset);\r\n\t    };\r\n\t    Context.prototype.initTextures = function (gl, textureMap) {\r\n\t        var _this = this;\r\n\t        textureMap.forEach(function (tileAsset, key) {\r\n\t            var texture = gl.createTexture();\r\n\t            gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\t            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, tileAsset.image);\r\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n\t            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\t            _this.tileTextures.set(key, texture);\r\n\t        });\r\n\t    };\r\n\t    Context.prototype.initBaseTextures = function (gl, asset) {\r\n\t        this.glTexture = gl.createTexture();\r\n\t        gl.bindTexture(gl.TEXTURE_2D, this.glTexture);\r\n\t        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, asset.texture);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\t        gl.generateMipmap(gl.TEXTURE_2D);\r\n\t        this.frostParticelTexture = gl.createTexture();\r\n\t        gl.bindTexture(gl.TEXTURE_2D, this.frostParticelTexture);\r\n\t        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, asset.particleTexture);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\t        this.genericParticleTexture = gl.createTexture();\r\n\t        gl.bindTexture(gl.TEXTURE_2D, this.genericParticleTexture);\r\n\t        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, asset.genericParticleTexture);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\t        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\t        gl.enable(gl.BLEND);\r\n\t    };\r\n\t    Context.prototype.compileShader = function (source, shaderType) {\r\n\t        var shader;\r\n\t        if (shaderType == model_1.ShaderType.Fragment) {\r\n\t            shader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n\t        }\r\n\t        else if (shaderType == model_1.ShaderType.Vertex) {\r\n\t            shader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n\t        }\r\n\t        this.gl.shaderSource(shader, source);\r\n\t        this.gl.compileShader(shader);\r\n\t        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\r\n\t            console.log(\"An error occurred compiling the shaders: \" + this.gl.getShaderInfoLog(shader));\r\n\t            return null;\r\n\t        }\r\n\t        return shader;\r\n\t    };\r\n\t    return Context;\r\n\t}());\r\n\texports.Context = Context;\r\n\n\n/***/ }),\n/* 423 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar renderCall_1 = __webpack_require__(358);\r\n\tvar renderHelper_1 = __webpack_require__(361);\r\n\tvar constants_1 = __webpack_require__(390);\r\n\tvar TileMap = (function () {\r\n\t    function TileMap(tiles, decorativeTiles) {\r\n\t        this.tiles = tiles;\r\n\t        this.decorativeTiles = decorativeTiles;\r\n\t        this.renderCalls = new Map();\r\n\t        this.decorativeRenderCalls = new Map();\r\n\t        this.renderHelper = renderHelper_1.RenderHelper.getInstance();\r\n\t        this.constants = constants_1.Constants.getInstance();\r\n\t        this.tileMap = new Map();\r\n\t        this.decorativeTileMap = new Map();\r\n\t        this.createStaticRenderCalls(this.tiles, this.tileMap, this.renderCalls);\r\n\t        this.createStaticRenderCalls(this.decorativeTiles, this.decorativeTileMap, this.decorativeRenderCalls);\r\n\t    }\r\n\t    TileMap.prototype.createStaticRenderCalls = function (tiles, tileMap, renderCalls) {\r\n\t        var _this = this;\r\n\t        for (var _i = 0, tiles_1 = tiles; _i < tiles_1.length; _i++) {\r\n\t            var tile = tiles_1[_i];\r\n\t            var set = tileMap.get(tile.key);\r\n\t            if (set) {\r\n\t                set.push(tile);\r\n\t            }\r\n\t            else {\r\n\t                tileMap.set(tile.key, [tile]);\r\n\t            }\r\n\t        }\r\n\t        tileMap.forEach(function (tiles, key) {\r\n\t            var renderCall = new renderCall_1.RenderCall();\r\n\t            renderCall.key = key;\r\n\t            for (var _i = 0, tiles_2 = tiles; _i < tiles_2.length; _i++) {\r\n\t                var tile = tiles_2[_i];\r\n\t                renderCall.vertecies = _this.renderHelper.getVertecies(tile.x, tile.y, tile.width, tile.height, renderCall.vertecies);\r\n\t                renderCall.textureCoords = _this.renderHelper.getTiledTextureCoordinates(tile, renderCall.textureCoords, _this.constants.tileSize);\r\n\t                renderCall.indecies = _this.renderHelper.getIndecies(renderCall.indecies);\r\n\t            }\r\n\t            renderCalls.set(renderCall.key, renderCall);\r\n\t        });\r\n\t    };\r\n\t    TileMap.prototype.createGoalRenderCall = function (goal, renderCall) {\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(goal.x, goal.y, goal.width, goal.height, renderCall.vertecies);\r\n\t        renderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, 550);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        return renderCall;\r\n\t    };\r\n\t    TileMap.prototype.createRenderCall = function (renderCalls) {\r\n\t        renderCalls = this.createDecorativeRenderCall(renderCalls);\r\n\t        this.renderCalls.forEach(function (renderCall, key) {\r\n\t            var set = renderCalls.get(key);\r\n\t            if (!set) {\r\n\t                renderCalls.set(key, new renderCall_1.RenderCall());\r\n\t                set = renderCalls.get(key);\r\n\t            }\r\n\t            set.vertecies.push.apply(set.vertecies, renderCall.vertecies);\r\n\t            set.indecies.push.apply(set.indecies, renderCall.indecies);\r\n\t            set.textureCoords.push.apply(set.textureCoords, renderCall.textureCoords);\r\n\t        });\r\n\t    };\r\n\t    TileMap.prototype.createDecorativeRenderCall = function (renderCalls) {\r\n\t        this.decorativeRenderCalls.forEach(function (renderCall, key) {\r\n\t            var set = renderCalls.get(key);\r\n\t            if (!set) {\r\n\t                renderCalls.set(key, new renderCall_1.RenderCall());\r\n\t                set = renderCalls.get(key);\r\n\t            }\r\n\t            set.vertecies.push.apply(set.vertecies, renderCall.vertecies);\r\n\t            set.indecies.push.apply(set.indecies, renderCall.indecies);\r\n\t            set.textureCoords.push.apply(set.textureCoords, renderCall.textureCoords);\r\n\t        });\r\n\t        return renderCalls;\r\n\t    };\r\n\t    return TileMap;\r\n\t}());\r\n\texports.TileMap = TileMap;\r\n\n\n/***/ }),\n/* 424 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar renderHelper_1 = __webpack_require__(361);\r\n\tvar TextRenderer = (function () {\r\n\t    function TextRenderer(context) {\r\n\t        this.renderHelper = new renderHelper_1.RenderHelper();\r\n\t        this.context = context;\r\n\t    }\r\n\t    TextRenderer.prototype.createTextRenderCall = function (sizeX, sizeY, type, renderCall, camera) {\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(((this.context.gl.canvas.width / 2) - (sizeX / 2) + camera[0]), ((this.context.gl.canvas.height / 2) - (sizeY / 2) + camera[1]), sizeX, sizeY, renderCall.vertecies);\r\n\t        renderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, type);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        return renderCall;\r\n\t    };\r\n\t    return TextRenderer;\r\n\t}());\r\n\texports.TextRenderer = TextRenderer;\r\n\n\n/***/ }),\n/* 425 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar AnimationHandler = (function () {\r\n\t    function AnimationHandler(particleHandler, audioHandler) {\r\n\t        this.audioHandler = audioHandler;\r\n\t        this.animations = [];\r\n\t        this.dynamicAnimations = [];\r\n\t        this.staticAnimations = [];\r\n\t        this.textureMapper = render_1.TextureMapper.getInstance();\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.particleHandler = particleHandler;\r\n\t    }\r\n\t    AnimationHandler.prototype.bloodAnimation_A = function (position, size) {\r\n\t        var animation = new model_1.Animation([100, 101, 102, 103, 104, 105]);\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, size, size);\r\n\t        animation.repetitions = 6;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.bloodAnimation_B_Right = function (position, size) {\r\n\t        var animation = new model_1.Animation([106, 107, 108, 109, 110, 111]);\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x - 75, position.y, size, size);\r\n\t        animation.repetitions = 6;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.bloodAnimation_B_Left = function (position, size) {\r\n\t        var animation = new model_1.Animation([106, 107, 108, 109, 110, 111]);\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, size, size);\r\n\t        animation.inverse = true;\r\n\t        animation.repetitions = 6;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.voidAnimation = function () {\r\n\t        var animation = new model_1.Animation([]);\r\n\t        animation.areaToRender = new model_1.Rectangle(0, 0, 0, 0);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.bloodAnimation_C = function (position, size) {\r\n\t        var animation = new model_1.Animation([147, 148, 149, 150, 151, 152]);\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, size, size);\r\n\t        animation.repetitions = 6;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.swordman_death = function (position, inverse) {\r\n\t        var _this = this;\r\n\t        var animation = new model_1.Animation([\r\n\t            214, 216, 217, 218\r\n\t        ]);\r\n\t        animation.timeToChange = 120;\r\n\t        animation.repetitions = 4;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, 56, 59);\r\n\t        animation.inverse = inverse;\r\n\t        animation.onCompletion = function () {\r\n\t            _this.swordman_corpse(position, inverse);\r\n\t        };\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.createArcherDeath = function (area, inverse) {\r\n\t        this.bloodAnimation_C(new model_1.Vector(area.x - 10, area.y - 20), 75);\r\n\t        this.bloodAnimation_B_Left(new model_1.Vector(area.x - 10, area.y - 20), 75);\r\n\t        this.bloodAnimation_B_Right(new model_1.Vector(area.x + 65, area.y - 20), 75);\r\n\t        this.archer_death(area, inverse);\r\n\t    };\r\n\t    AnimationHandler.prototype.archer_death = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var animation = new model_1.Animation([290, 291, 292, 293]);\r\n\t        animation.timeToChange = 120;\r\n\t        animation.repetitions = 4;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.inverse = inverse;\r\n\t        animation.onCompletion = function () {\r\n\t            _this.archer_corpse(area, inverse);\r\n\t        };\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.archer_corpse = function (area, inverse) {\r\n\t        var animation = new model_1.Animation([293]);\r\n\t        animation.timeToChange = 120;\r\n\t        animation.delay = 4;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.inverse = inverse;\r\n\t        this.staticAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.player_sword_death_corpse = function (position, inverse) {\r\n\t        var animation = new model_1.Animation([306]);\r\n\t        animation.timeToChange = 150;\r\n\t        animation.delay = 6;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, 90, 90);\r\n\t        animation.inverse = inverse;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.player_sword_death_animation = function (position, inverse) {\r\n\t        var animation = new model_1.Animation([301, 302, 303, 304, 305, 306]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 150;\r\n\t        animation.repetitions = 6;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, 90, 90);\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.apprentice_Death = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var animation = new model_1.Animation([144, 145, 146, 153, 154, 155]);\r\n\t        animation.repetitions = 5;\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 150;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.onCompletion = function () {\r\n\t            _this.apprentice_corpse(area, inverse);\r\n\t        };\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.apprentice_corpse = function (area, inverse) {\r\n\t        var animation = new model_1.Animation([155]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 150;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        this.staticAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.masterSorcerer_death = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var animation = new model_1.Animation([586, 587, 589, 590, 591, 592, 593, 594, 595, 596]);\r\n\t        animation.repetitions = 9;\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 125;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.onCompletion = function () {\r\n\t            _this.masterSorcerer_corpse(area, inverse);\r\n\t        };\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.masterSorcerer_corpse = function (area, inverse) {\r\n\t        var animation = new model_1.Animation([596]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 175;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        this.staticAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.screamer_Death = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var animation = new model_1.Animation([576, 577, 578, 579]);\r\n\t        animation.repetitions = 3;\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 175;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.onCompletion = function () {\r\n\t            _this.screamer_corpse(area, inverse);\r\n\t        };\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.screamer_corpse = function (area, inverse) {\r\n\t        var animation = new model_1.Animation([579]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 175;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        this.staticAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.shadow_Death = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var animation = new model_1.Animation([132, 130, 127, 124, 119]);\r\n\t        animation.repetitions = 4;\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 100;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.onCompletion = function () {\r\n\t            _this.shadow_corpse(area, inverse);\r\n\t        };\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.shadow_corpse = function (area, inverse) {\r\n\t        var animation = new model_1.Animation([119]);\r\n\t        animation.repetitions = 4;\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 100;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        this.staticAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.swordman_corpse = function (position, inverse) {\r\n\t        var animation = new model_1.Animation([219]);\r\n\t        animation.timeToChange = 120;\r\n\t        animation.delay = 4;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, 56, 59);\r\n\t        animation.inverse = inverse;\r\n\t        this.staticAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.swordman_head = function (position, inverse) {\r\n\t        var animation = new model_1.Animation([215, 220, 221, 222, 223, 224, 225, 226]);\r\n\t        animation.timeToChange = 75;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, 56, 59);\r\n\t        animation.inverse = inverse;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.fireball_destroy = function (position, size) {\r\n\t        var animation = new model_1.Animation([118, 119, 120, 121, 122, 123, 124, 125, 126]);\r\n\t        animation.timeToChange = 50;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, size, size);\r\n\t        animation.repetitions = 9;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.necroball_explosion = function (position, size) {\r\n\t        this.audioHandler.playSound(\"explode4.ogg\", 1, 0, 0.05);\r\n\t        this.particleHandler.createNecroballExplosion(position, size);\r\n\t    };\r\n\t    AnimationHandler.prototype.blue_explosion = function (position, size) {\r\n\t        this.audioHandler.playSound(\"spellend.wav\", 1, 0, 0.03);\r\n\t        this.particleHandler.createBlueExplosion(position, size);\r\n\t    };\r\n\t    AnimationHandler.prototype.fireball_explosion = function (position, size) {\r\n\t        this.audioHandler.playSound(\"explosion1.wav\", 2, 0, 0.05);\r\n\t        this.particleHandler.createFireballExplosion(position, size);\r\n\t    };\r\n\t    AnimationHandler.prototype.swordscut_a = function (position, size, inverse) {\r\n\t        var animation = new model_1.Animation([55, 56, 57, 58, 59]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, size, size);\r\n\t        this.animations.push(animation);\r\n\t        animation.repetitions = 5;\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.createDebugAnimation = function (position, size, repetitions) {\r\n\t        var animation = new model_1.Animation([5]);\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, size, size);\r\n\t        animation.repetitions = repetitions;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.fallDeath = function (position) {\r\n\t        this.bloodAnimation_A(new model_1.Vector(position.x, position.y + 20), 50);\r\n\t        this.bloodAnimation_B_Right(new model_1.Vector(position.x + 5, position.y + 5), 100);\r\n\t        this.bloodAnimation_B_Left(new model_1.Vector(position.x - 55, position.y + 5), 100);\r\n\t    };\r\n\t    AnimationHandler.prototype.fireDeathSwordman = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var onUpdate = function (position) {\r\n\t            _this.particleHandler.createFireDeath(position);\r\n\t        };\r\n\t        var animation = new model_1.FrameAnimation(0, -4, 0, 0, onUpdate, [250, 251, 252, 253, 254, 255, 256, 257]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 100;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.repetitions = 8;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.fireDeathArcher = function (area, inverse) {\r\n\t        var _this = this;\r\n\t        var onUpdate = function (position) {\r\n\t            _this.particleHandler.createFireDeath(position);\r\n\t        };\r\n\t        var animation = new model_1.FrameAnimation(0, -4, 0, 0, onUpdate, [282, 283, 284, 285, 286, 287, 288, 289]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.timeToChange = 100;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.repetitions = 8;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.createArrow = function (area, inverse, velocity) {\r\n\t        var animation = new model_1.RotationAnimation(velocity, [268]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.areaToRender = area;\r\n\t        animation.timeToChange = 20000;\r\n\t        animation.repetitions = 1;\r\n\t        this.dynamicAnimations.push(animation);\r\n\t        this.audioHandler.playSound(\"bow.wav\", 1, 0, 0.1);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.createDeadArrow = function (area, inverse, velocity) {\r\n\t        var collAngle = new model_1.Vector(velocity.x, velocity.y);\r\n\t        var animation = new model_1.StaticRotationAnimation(collAngle, inverse, [268]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.timeToChange = 2000;\r\n\t        animation.repetitions = 1;\r\n\t        this.dynamicAnimations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.createArrowHit = function (projectile, useCollisionArea) {\r\n\t        var collAngle = new model_1.Vector(projectile.velocity.x, projectile.velocity.y);\r\n\t        var animation = new model_1.RotationAnimation(collAngle, [269]);\r\n\t        animation.inverse = projectile.animation.inverse;\r\n\t        if (useCollisionArea) {\r\n\t            animation.areaToRender = new model_1.Rectangle(projectile.collisionArea.x, projectile.collisionArea.y, projectile.area.width, projectile.area.height);\r\n\t        }\r\n\t        else {\r\n\t            animation.areaToRender = new model_1.Rectangle(projectile.area.x, projectile.area.y, projectile.area.width, projectile.area.height);\r\n\t        }\r\n\t        animation.areaToRender.width = animation.areaToRender.width * 0.67;\r\n\t        animation.timeToChange = 2000;\r\n\t        animation.repetitions = 1;\r\n\t        this.dynamicAnimations.push(animation);\r\n\t        this.audioHandler.playSound(\"arrowhit.wav\", 1, 0, 0.1);\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.frozenSwordMan = function (area, inverse, color, onCompletion) {\r\n\t        var animation = new model_1.Animation([237, 238, 239, 240, 241, 242]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.color = color;\r\n\t        animation.timeToChange = 250;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.onCompletion = onCompletion;\r\n\t        this.animations.push(animation);\r\n\t        animation.repetitions = 6;\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.frozenArcher = function (area, inverse, color, onCompletion) {\r\n\t        var animation = new model_1.Animation([270, 271, 272, 273, 274, 275]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.color = color;\r\n\t        animation.timeToChange = 250;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        animation.onCompletion = onCompletion;\r\n\t        this.animations.push(animation);\r\n\t        animation.repetitions = 6;\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.frozenPart = function (area, inverse, color, partIndex, baseTextureNumber) {\r\n\t        var animation = new model_1.Animation([baseTextureNumber + partIndex]);\r\n\t        animation.inverse = inverse;\r\n\t        animation.color = color;\r\n\t        animation.timeToChange = 2000;\r\n\t        animation.areaToRender = new model_1.Rectangle(area.x, area.y, area.width, area.height);\r\n\t        this.animations.push(animation);\r\n\t        animation.repetitions = 1;\r\n\t        return animation;\r\n\t    };\r\n\t    AnimationHandler.prototype.update = function (delta) {\r\n\t        var completedAnimations = [];\r\n\t        var totalAnimations = this.animations.concat(this.dynamicAnimations);\r\n\t        for (var _i = 0, totalAnimations_1 = totalAnimations; _i < totalAnimations_1.length; _i++) {\r\n\t            var animation = totalAnimations_1[_i];\r\n\t            animation.next(delta);\r\n\t            if (animation.repetitions <= 0) {\r\n\t                completedAnimations.push(animation);\r\n\t                if (animation.onCompletion) {\r\n\t                    animation.onCompletion();\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        for (var _a = 0, completedAnimations_1 = completedAnimations; _a < completedAnimations_1.length; _a++) {\r\n\t            var completedAnimation = completedAnimations_1[_a];\r\n\t            this.remove(completedAnimation);\r\n\t        }\r\n\t    };\r\n\t    AnimationHandler.prototype.createDynamicRenderCall = function (renderCall, camera) {\r\n\t        for (var _i = 0, _a = this.dynamicAnimations; _i < _a.length; _i++) {\r\n\t            var animation = _a[_i];\r\n\t            if (animation instanceof model_1.RotationAnimation || animation instanceof model_1.StaticRotationAnimation) {\r\n\t                var x = animation.areaToRender.x - camera[0];\r\n\t                var y = animation.areaToRender.y - camera[1];\r\n\t                var width = animation.areaToRender.width;\r\n\t                var height = animation.areaToRender.height;\r\n\t                if (animation.inverse) {\r\n\t                    renderCall.vertecies = this.renderHelper.getInverseVertecies(x, y, width, height, renderCall.vertecies);\r\n\t                }\r\n\t                else {\r\n\t                    renderCall.vertecies = this.renderHelper.getVertecies(x, y, width, height, renderCall.vertecies);\r\n\t                }\r\n\t                renderCall.textureCoords.push.apply(renderCall.textureCoords, animation.getCurrentFrame());\r\n\t                renderCall.matrices = this.renderHelper.getMatrices(x, y, width, height, animation.angle, renderCall.matrices);\r\n\t                renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    AnimationHandler.prototype.createRenderCall = function (renderCall) {\r\n\t        for (var _i = 0, _a = this.animations; _i < _a.length; _i++) {\r\n\t            var animation = _a[_i];\r\n\t            if (animation.delay <= 0) {\r\n\t                var x = animation.areaToRender.x;\r\n\t                var y = animation.areaToRender.y;\r\n\t                var width = animation.areaToRender.width;\r\n\t                var height = animation.areaToRender.height;\r\n\t                if (animation.inverse) {\r\n\t                    renderCall.vertecies = this.renderHelper.getInverseVertecies(x, y, width, height, renderCall.vertecies);\r\n\t                }\r\n\t                else {\r\n\t                    renderCall.vertecies = this.renderHelper.getVertecies(x, y, width, height, renderCall.vertecies);\r\n\t                }\r\n\t                renderCall.textureCoords.push.apply(renderCall.textureCoords, animation.getCurrentFrame());\r\n\t                renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t                if (animation.color) {\r\n\t                    renderCall.color = this.renderHelper.getColor(renderCall.color, animation.color);\r\n\t                }\r\n\t                else {\r\n\t                    renderCall.color = this.renderHelper.getColor(renderCall.color, null);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return renderCall;\r\n\t    };\r\n\t    AnimationHandler.prototype.createStaticRenderCall = function (renderCall) {\r\n\t        for (var _i = 0, _a = this.staticAnimations; _i < _a.length; _i++) {\r\n\t            var animation = _a[_i];\r\n\t            if (animation.inverse) {\r\n\t                renderCall.vertecies = this.renderHelper.getInverseVertecies(animation.areaToRender.x, animation.areaToRender.y, animation.areaToRender.width, animation.areaToRender.height, renderCall.vertecies);\r\n\t            }\r\n\t            else {\r\n\t                renderCall.vertecies = this.renderHelper.getVertecies(animation.areaToRender.x, animation.areaToRender.y, animation.areaToRender.width, animation.areaToRender.height, renderCall.vertecies);\r\n\t            }\r\n\t            renderCall.textureCoords.push.apply(renderCall.textureCoords, animation.getCurrentFrame());\r\n\t            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        }\r\n\t        return renderCall;\r\n\t    };\r\n\t    AnimationHandler.prototype.remove = function (animation) {\r\n\t        var index = this.animations.indexOf(animation);\r\n\t        if (index != -1) {\r\n\t            this.animations.splice(index, 1);\r\n\t        }\r\n\t        else {\r\n\t            index = this.dynamicAnimations.indexOf(animation);\r\n\t            if (index != -1) {\r\n\t                this.dynamicAnimations.splice(index, 1);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    AnimationHandler.prototype.enemy = function (position, inverse) {\r\n\t        var animation = new model_1.Animation([209, 211, 210]);\r\n\t        animation.timeToChange = 120;\r\n\t        animation.areaToRender = new model_1.Rectangle(position.x, position.y, 56, 58);\r\n\t        animation.inverse = inverse;\r\n\t        this.animations.push(animation);\r\n\t        return animation;\r\n\t    };\r\n\t    return AnimationHandler;\r\n\t}());\r\n\texports.AnimationHandler = AnimationHandler;\r\n\n\n/***/ }),\n/* 426 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar debugHandler_1 = __webpack_require__(410);\r\n\tvar gravity_1 = __webpack_require__(374);\r\n\tvar drag_1 = __webpack_require__(375);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar ProjectileHandler = (function () {\r\n\t    function ProjectileHandler(animationHandler, shieldLevel) {\r\n\t        this.shieldLevel = shieldLevel;\r\n\t        this.projectiles = [];\r\n\t        this.enemyProjectiles = [];\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.debuggHandler = debugHandler_1.DebugHandler.getInstance();\r\n\t        this.animationHandler = animationHandler;\r\n\t    }\r\n\t    ProjectileHandler.prototype.clear = function () {\r\n\t        this.projectiles = [];\r\n\t        this.enemyProjectiles = [];\r\n\t    };\r\n\t    ProjectileHandler.prototype.createArrow = function (position, inverse, velocity) {\r\n\t        var arrow;\r\n\t        var rectangle = new model_1.Rectangle(position.x, position.y, 40, 10);\r\n\t        var collRect;\r\n\t        if (inverse) {\r\n\t            collRect = new model_1.Rectangle(position.x + 10, position.y + 5, 1, 1);\r\n\t        }\r\n\t        else {\r\n\t            collRect = new model_1.Rectangle(position.x + 20, position.y + 5, 1, 1);\r\n\t        }\r\n\t        var animation = this.animationHandler.createArrow(rectangle, inverse, velocity);\r\n\t        arrow = new model_1.PhysicalProjectile(velocity, rectangle, animation, 1, collRect, true);\r\n\t        arrow.gravity = new gravity_1.Gravity(0.0003);\r\n\t        arrow.drag = new drag_1.Drag(0);\r\n\t        arrow.projectileType = model_1.ProjectileType.Arrow;\r\n\t        arrow.damage = 20;\r\n\t        this.enemyProjectiles.push(arrow);\r\n\t        return arrow;\r\n\t    };\r\n\t    ProjectileHandler.prototype.createNecroBall = function (position, size, inverse, velocity, damage, offset, type, onUpdate) {\r\n\t        var necroBall;\r\n\t        if (inverse) {\r\n\t            var area = new model_1.Rectangle(position.x + 5, position.y, size, size);\r\n\t            necroBall = new model_1.ParticleProjectile(velocity, area, this.animationHandler.voidAnimation(), 0.2, (size * 10), inverse, 0, onUpdate);\r\n\t        }\r\n\t        else {\r\n\t            var area = new model_1.Rectangle(position.x + offset, position.y, size, size);\r\n\t            necroBall = new model_1.ParticleProjectile(velocity, area, this.animationHandler.voidAnimation(), 0.2, (size * 10), inverse, 0, onUpdate);\r\n\t        }\r\n\t        necroBall.projectileType = type;\r\n\t        necroBall.damage = damage;\r\n\t        necroBall.distance = 1000;\r\n\t        this.animationHandler.audioHandler.playSound(\"foom.wav\", 1, 0, 0.03);\r\n\t        this.enemyProjectiles.push(necroBall);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createDeadArrow = function (position, inverse, velocity, push) {\r\n\t        var arrow;\r\n\t        var rectangle = new model_1.Rectangle(position.x, position.y, 40, 10);\r\n\t        var collRect;\r\n\t        if (inverse) {\r\n\t            collRect = new model_1.Rectangle(position.x + 10, position.y + 5, 1, 1);\r\n\t        }\r\n\t        else {\r\n\t            collRect = new model_1.Rectangle(position.x + 20, position.y + 5, 1, 1);\r\n\t        }\r\n\t        var animation = this.animationHandler.createDeadArrow(rectangle, inverse, velocity);\r\n\t        velocity.x = -velocity.x / 2;\r\n\t        if (push) {\r\n\t            velocity.x += push.x;\r\n\t            velocity.y += push.y;\r\n\t        }\r\n\t        arrow = new model_1.PhysicalProjectile(velocity, rectangle, animation, 1, collRect);\r\n\t        arrow.gravity = new gravity_1.Gravity(0.0006);\r\n\t        arrow.drag = new drag_1.Drag(0.0002);\r\n\t        arrow.projectileType = model_1.ProjectileType.None;\r\n\t        this.projectiles.push(arrow);\r\n\t        return arrow;\r\n\t    };\r\n\t    ProjectileHandler.prototype.createFireBall = function (position, inverse, velocityValue, strength, offset, onUpdate) {\r\n\t        var fireBall;\r\n\t        if (inverse) {\r\n\t            fireBall = new model_1.ParticleProjectile(new model_1.Vector(-velocityValue, 0), new model_1.Rectangle(position.x, position.y, strength, strength), this.animationHandler.voidAnimation(), 0.2, (strength * 10), inverse, offset, onUpdate);\r\n\t        }\r\n\t        else {\r\n\t            fireBall = new model_1.ParticleProjectile(new model_1.Vector(velocityValue, 0), new model_1.Rectangle(position.x, position.y, strength, strength), this.animationHandler.voidAnimation(), 0.2, (strength * 10), inverse, offset, onUpdate);\r\n\t        }\r\n\t        this.projectiles.push(fireBall);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createCollisionProjectile = function (position, offset, inverse, damage, velocity) {\r\n\t        var rect;\r\n\t        if (inverse) {\r\n\t            rect = new model_1.Rectangle(position.x, position.y - 10, 10, 10);\r\n\t            velocity.x = -velocity.x;\r\n\t        }\r\n\t        else {\r\n\t            rect = new model_1.Rectangle(position.x + offset, position.y - 10, 10, 10);\r\n\t        }\r\n\t        var collisionProjectile = new model_1.CollisionProjectile(velocity, rect, 40, this.animationHandler.voidAnimation(), damage);\r\n\t        collisionProjectile.projectileType = model_1.ProjectileType.Sword;\r\n\t        this.enemyProjectiles.push(collisionProjectile);\r\n\t        return collisionProjectile;\r\n\t    };\r\n\t    ProjectileHandler.prototype.createSwordman_death = function (position, inverse, velocity) {\r\n\t        var projectile;\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(position.x, position.y, 28, 29), this.animationHandler.swordman_head(position, inverse), 0.3);\r\n\t        projectile.extendedOnGroundCollision = function () {\r\n\t            var currentFrame = projectile.animation.getCurrentFrame();\r\n\t            projectile.animation.textureCoords = [currentFrame];\r\n\t            projectile.animation.frameIndex = 0;\r\n\t        };\r\n\t        this.animationHandler.bloodAnimation_C(new model_1.Vector(position.x - 10, position.y - 20), 75);\r\n\t        this.animationHandler.bloodAnimation_B_Left(new model_1.Vector(position.x - 10, position.y - 20), 75);\r\n\t        this.animationHandler.bloodAnimation_B_Right(new model_1.Vector(position.x + 65, position.y - 20), 75);\r\n\t        this.animationHandler.swordman_death(position, inverse);\r\n\t        this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\t        this.projectiles.push(projectile);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createPlayerSword_death = function (position, inverse) {\r\n\t        var projectile;\r\n\t        var projectileCorpse;\r\n\t        var velocity = new model_1.Vector(0, 0);\r\n\t        var x = position.x;\r\n\t        if (inverse) {\r\n\t            x -= 45;\r\n\t        }\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(x, position.y - 6, 45, 85), this.animationHandler.player_sword_death_animation(position, inverse), 1);\r\n\t        projectileCorpse = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(x, position.y - 6, 45, 85), this.animationHandler.player_sword_death_corpse(position, inverse), 1);\r\n\t        if (inverse) {\r\n\t            this.animationHandler.bloodAnimation_B_Left(new model_1.Vector(position.x - 10, position.y - 20), 75);\r\n\t        }\r\n\t        else {\r\n\t            this.animationHandler.bloodAnimation_B_Right(new model_1.Vector(position.x + 65, position.y - 20), 75);\r\n\t        }\r\n\t        this.projectiles.push(projectile);\r\n\t        this.projectiles.push(projectileCorpse);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createShadow_death = function (area, inverse) {\r\n\t        var projectile;\r\n\t        var velocity = new model_1.Vector(0, 0);\r\n\t        var x = area.x;\r\n\t        this.animationHandler.audioHandler.playSound(\"shade13.wav\", 2, 0, 0.3);\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.shadow_Death(area, inverse), 0.8);\r\n\t        this.projectiles.push(projectile);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createMasterSorcerer_death = function (area, inverse) {\r\n\t        var projectile;\r\n\t        var velocity = new model_1.Vector(0, 0);\r\n\t        var x = area.x;\r\n\t        this.animationHandler.audioHandler.playSound(\"mnstr5.wav\", 2, 0, 0.3);\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.masterSorcerer_death(area, inverse), 0.8);\r\n\t        this.projectiles.push(projectile);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createScreamer_death = function (area, inverse) {\r\n\t        var projectile;\r\n\t        var velocity = new model_1.Vector(0, 0);\r\n\t        var x = area.x;\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.screamer_Death(area, inverse), 0.8);\r\n\t        this.projectiles.push(projectile);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createApprentice_death = function (area, inverse) {\r\n\t        var projectile;\r\n\t        var velocity = new model_1.Vector(0, 0);\r\n\t        var x = area.x;\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.apprentice_Death(area, inverse), 0.8);\r\n\t        this.projectiles.push(projectile);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createFrozenSwordManDeath = function (area, inverse, color) {\r\n\t        var _this = this;\r\n\t        var onComplete = function () {\r\n\t            var velocotyies = [\r\n\t                new model_1.Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t            ];\r\n\t            var collisionAreas = [\r\n\t                new model_1.Rectangle(area.x + 7, area.y + 22, 11, 8),\r\n\t                new model_1.Rectangle(area.x + 12, area.y + 5, 12, 12),\r\n\t                new model_1.Rectangle(area.x + 15, area.y + 24, 14, 6),\r\n\t                new model_1.Rectangle(area.x + 13, area.y + 38, 6, 8),\r\n\t                new model_1.Rectangle(area.x + 6, area.y + 38, 8, 10),\r\n\t                new model_1.Rectangle(area.x + 4, area.y + 11, 13, 16)\r\n\t            ];\r\n\t            for (var i = 0; i < 6; i++) {\r\n\t                _this.createFrozenPart(velocotyies[i], area, inverse, color, i, 243, collisionAreas[i]);\r\n\t            }\r\n\t        };\r\n\t        this.animationHandler.frozenSwordMan(area, inverse, color, onComplete);\r\n\t    };\r\n\t    ProjectileHandler.prototype.createFrozenArcherDeath = function (area, inverse, color) {\r\n\t        var _this = this;\r\n\t        var onComplete = function () {\r\n\t            var velocotyies = [\r\n\t                new model_1.Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t                new model_1.Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n\t            ];\r\n\t            var collisionAreas = [\r\n\t                new model_1.Rectangle(area.x + 8, area.y + 2, 11, 6),\r\n\t                new model_1.Rectangle(area.x + 4, area.y + 4, 9, 14),\r\n\t                new model_1.Rectangle(area.x + 17, area.y + 3, 11, 11),\r\n\t                new model_1.Rectangle(area.x + 13, area.y + 7, 15, 15),\r\n\t                new model_1.Rectangle(area.x + 5, area.y + 15, 13, 17),\r\n\t                new model_1.Rectangle(area.x + 14, area.y + 19, 13, 13)\r\n\t            ];\r\n\t            for (var i = 0; i < 6; i++) {\r\n\t                _this.createFrozenPart(velocotyies[i], area, inverse, color, i, 276, collisionAreas[i]);\r\n\t            }\r\n\t        };\r\n\t        this.animationHandler.frozenArcher(area, inverse, color, onComplete);\r\n\t    };\r\n\t    ProjectileHandler.prototype.update = function (delta, collidables, player, dynamicTiles) {\r\n\t        var removeProjectile = [];\r\n\t        var removeEnemyProjectile = [];\r\n\t        removeProjectile = this.updateFriendslyProjectiles(delta, collidables, dynamicTiles);\r\n\t        removeEnemyProjectile = this.updateEnemyProjectiles(delta, player, collidables, dynamicTiles);\r\n\t        for (var _i = 0, removeProjectile_1 = removeProjectile; _i < removeProjectile_1.length; _i++) {\r\n\t            var projectile = removeProjectile_1[_i];\r\n\t            this.destroyProjectile(projectile, this.projectiles);\r\n\t        }\r\n\t        for (var _a = 0, removeEnemyProjectile_1 = removeEnemyProjectile; _a < removeEnemyProjectile_1.length; _a++) {\r\n\t            var projectile = removeEnemyProjectile_1[_a];\r\n\t            this.destroyProjectile(projectile, this.enemyProjectiles);\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.destroyProjectile = function (projectile, projectiles) {\r\n\t        this.destroyAnimation(projectile);\r\n\t        this.animationHandler.remove(projectile.animation);\r\n\t        var index = projectiles.indexOf(projectile);\r\n\t        if (index != -1) {\r\n\t            projectiles.splice(index, 1);\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.calculateDirection = function (area, enemy) {\r\n\t        var velocity = new model_1.Vector((enemy.position.x + enemy.width / 2) - (area.x + (area.width / 2)), enemy.position.y - (area.y + (area.height / 2)));\r\n\t        velocity.normalize();\r\n\t        velocity.multiply((area.width / 90));\r\n\t        return velocity;\r\n\t    };\r\n\t    ProjectileHandler.prototype.updateEnemyProjectiles = function (delta, player, collidables, dynamicTiles) {\r\n\t        var removeProjectiles = [];\r\n\t        var shieldCollidables = [];\r\n\t        var playerCollisionArea = player.getProjectileCollisionArea();\r\n\t        shieldCollidables.push.apply(shieldCollidables, player.getShieldCollidables());\r\n\t        for (var _i = 0, _a = this.enemyProjectiles; _i < _a.length; _i++) {\r\n\t            var projectile = _a[_i];\r\n\t            var frameVelocity = new model_1.Vector(projectile.velocity.x * delta, projectile.velocity.y * delta);\r\n\t            removeProjectiles = this.updateAndCollCheckEnemyProjectile(projectile, frameVelocity, delta, player, dynamicTiles, playerCollisionArea, shieldCollidables, removeProjectiles);\r\n\t            removeProjectiles = this.checkStaticObjectCollisions(projectile, frameVelocity, collidables, removeProjectiles);\r\n\t        }\r\n\t        return removeProjectiles;\r\n\t    };\r\n\t    ProjectileHandler.prototype.updateAndCollCheckEnemyProjectile = function (projectile, frameVelocity, delta, player, dynamicTiles, playerCollisionArea, shieldCollidables, removeProjectiles) {\r\n\t        var collisionData;\r\n\t        var shieldCollisionData;\r\n\t        var groundCollision;\r\n\t        projectile.updateForces(delta);\r\n\t        var velocity = player.getVelocity();\r\n\t        var deltaVelocity = new model_1.Vector(frameVelocity.x - velocity.x * delta, frameVelocity.y - velocity.y * delta);\r\n\t        collisionData = this.collisionDetection.checkProjectileCollisionY([playerCollisionArea], projectile, deltaVelocity, false);\r\n\t        shieldCollisionData = this.collisionDetection.checkProjectileCollisionY(shieldCollidables, projectile, deltaVelocity, false);\r\n\t        projectile.update(0, collisionData.collisionTimeY * frameVelocity.y, delta);\r\n\t        groundCollision = shieldCollisionData.groundCollision;\r\n\t        if (shieldCollisionData.groundCollision) {\r\n\t            this.setShieldDamage(player, projectile);\r\n\t            removeProjectiles.push(projectile);\r\n\t        }\r\n\t        else if (collisionData.groundCollision) {\r\n\t            if (shieldCollidables.length > 0) {\r\n\t                this.setShieldDamage(player, projectile);\r\n\t            }\r\n\t            else {\r\n\t                this.setDamageAnimation(player, projectile);\r\n\t            }\r\n\t            removeProjectiles.push(projectile);\r\n\t        }\r\n\t        if (projectile.projectileType == model_1.ProjectileType.Arrow) {\r\n\t            collisionData = this.collisionDetection.checkProjectileCollisionX([playerCollisionArea], projectile, deltaVelocity, false, false);\r\n\t            shieldCollisionData = this.collisionDetection.checkProjectileCollisionX(shieldCollidables, projectile, deltaVelocity, false, false);\r\n\t        }\r\n\t        else {\r\n\t            collisionData = this.collisionDetection.checkProjectileCollisionX([playerCollisionArea], projectile, deltaVelocity, false, true);\r\n\t            shieldCollisionData = this.collisionDetection.checkProjectileCollisionX(shieldCollidables, projectile, deltaVelocity, false, true);\r\n\t        }\r\n\t        projectile.update(collisionData.collisionTimeX * frameVelocity.x, 0, delta);\r\n\t        if (!groundCollision) {\r\n\t            if (shieldCollisionData.wallCollision) {\r\n\t                this.setShieldDamage(player, projectile);\r\n\t                removeProjectiles.push(projectile);\r\n\t            }\r\n\t            else if (collisionData.wallCollision) {\r\n\t                if (shieldCollidables.length > 0) {\r\n\t                    this.setShieldDamage(player, projectile);\r\n\t                }\r\n\t                else {\r\n\t                    this.setDamageAnimation(player, projectile);\r\n\t                }\r\n\t                removeProjectiles.push(projectile);\r\n\t            }\r\n\t        }\r\n\t        if (projectile instanceof model_1.CollisionProjectile || projectile instanceof model_1.ParticleProjectile) {\r\n\t            if (projectile.distance <= 0) {\r\n\t                removeProjectiles.push(projectile);\r\n\t            }\r\n\t        }\r\n\t        if (this.collisionDetection.aabbCheckS(projectile.collisionArea, dynamicTiles.map(function (it) { return it.tile; }))) {\r\n\t            removeProjectiles.push(projectile);\r\n\t        }\r\n\t        return removeProjectiles;\r\n\t    };\r\n\t    ProjectileHandler.prototype.setDamageAnimation = function (player, projectile) {\r\n\t        this.animationHandler.bloodAnimation_A(new model_1.Vector(projectile.collisionArea.x, projectile.collisionArea.y), 20);\r\n\t        if (projectile.projectileType == model_1.ProjectileType.Arrow) {\r\n\t            this.createStickyArrowAnimation(player, projectile);\r\n\t            player.takeDamage(projectile.damage);\r\n\t        }\r\n\t        else if (projectile.projectileType == model_1.ProjectileType.Sword && projectile instanceof model_1.CollisionProjectile) {\r\n\t            player.takeDamage(projectile.damage);\r\n\t        }\r\n\t        else if (projectile.projectileType == model_1.ProjectileType.NecroBall || projectile.projectileType == model_1.ProjectileType.BlueBall) {\r\n\t            player.takeDamage(projectile.damage);\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.checkStaticObjectCollisions = function (projectile, frameVelocity, collidables, removeProjectiles) {\r\n\t        var collisionData;\r\n\t        collisionData = this.collisionDetection.checkProjectileCollisionY(collidables, projectile, frameVelocity, true);\r\n\t        if (collisionData.groundCollision) {\r\n\t            this.setStaticObjectAnimation(projectile);\r\n\t            removeProjectiles.push(projectile);\r\n\t        }\r\n\t        else {\r\n\t            collisionData = this.collisionDetection.checkProjectileCollisionX(collidables, projectile, frameVelocity, true, false);\r\n\t            if (collisionData.wallCollision) {\r\n\t                this.setStaticObjectAnimation(projectile);\r\n\t                removeProjectiles.push(projectile);\r\n\t            }\r\n\t        }\r\n\t        return removeProjectiles;\r\n\t    };\r\n\t    ProjectileHandler.prototype.createStickyArrowAnimation = function (player, projectile) {\r\n\t        if (projectile.projectileType == model_1.ProjectileType.Arrow) {\r\n\t            var animationOffset = void 0;\r\n\t            animationOffset = new model_1.Vector((player.position.x) - (projectile.area.x), player.position.y - projectile.area.y);\r\n\t            player.damageAnimations.push(new model_1.StickyAnimation(this.animationHandler.createArrowHit(projectile, true), animationOffset));\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.setStaticObjectAnimation = function (projectile) {\r\n\t        if (projectile.projectileType == model_1.ProjectileType.Arrow) {\r\n\t            this.animationHandler.createArrowHit(projectile, false);\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.updateAndCollCheck = function (projectile, delta, collidables, removeProjectiles, dynamicTiles) {\r\n\t        var collisionData;\r\n\t        projectile.updateForces(delta);\r\n\t        var frameVelocity = new model_1.Vector(projectile.velocity.x * delta, projectile.velocity.y * delta);\r\n\t        collisionData = this.collisionDetection.checkProjectileCollisionY(collidables, projectile, frameVelocity, true);\r\n\t        projectile.update(0, collisionData.collisionTimeY * frameVelocity.y, delta);\r\n\t        if (projectile instanceof model_1.PhysicalProjectile) {\r\n\t            if (collisionData.groundCollision) {\r\n\t                projectile.onGroundCollision();\r\n\t            }\r\n\t        }\r\n\t        if (collisionData.groundCollision) {\r\n\t            projectile.velocity.y = 0;\r\n\t        }\r\n\t        collisionData = this.collisionDetection.checkProjectileCollisionX(collidables, projectile, frameVelocity, true, false);\r\n\t        projectile.update(collisionData.collisionTimeX * frameVelocity.x, 0, delta);\r\n\t        if (projectile instanceof model_1.Spell || projectile instanceof model_1.ParticleProjectile) {\r\n\t            if (projectile.distance <= 0 || collisionData.wallCollision) {\r\n\t                removeProjectiles.push(projectile);\r\n\t            }\r\n\t        }\r\n\t        if (collisionData.wallCollision) {\r\n\t            projectile.velocity.x = 0;\r\n\t        }\r\n\t        if (!(projectile instanceof model_1.PhysicalProjectile)) {\r\n\t            if (this.collisionDetection.aabbCheckS(projectile.collisionArea, dynamicTiles.map(function (it) { return it.tile; }))) {\r\n\t                removeProjectiles.push(projectile);\r\n\t            }\r\n\t        }\r\n\t        return removeProjectiles;\r\n\t    };\r\n\t    ProjectileHandler.prototype.updateFriendslyProjectiles = function (delta, collidables, dynamicTiles) {\r\n\t        var removeProjectiles = [];\r\n\t        for (var _i = 0, _a = this.projectiles; _i < _a.length; _i++) {\r\n\t            var projectile = _a[_i];\r\n\t            this.updateAndCollCheck(projectile, delta, collidables, removeProjectiles, dynamicTiles);\r\n\t        }\r\n\t        return removeProjectiles;\r\n\t    };\r\n\t    ProjectileHandler.prototype.setShieldDamage = function (player, projectile) {\r\n\t        if (projectile.projectileType == model_1.ProjectileType.Arrow) {\r\n\t            this.createDeadArrow(new model_1.Vector(projectile.area.x, projectile.area.y), projectile.animation.inverse, projectile.velocity);\r\n\t            this.drainShield(player, projectile, projectile.damage);\r\n\t        }\r\n\t        else if (projectile.projectileType == model_1.ProjectileType.Sword && projectile instanceof model_1.CollisionProjectile) {\r\n\t            this.drainShield(player, projectile, projectile.damage);\r\n\t        }\r\n\t        else if (projectile.projectileType == model_1.ProjectileType.NecroBall || projectile.projectileType == model_1.ProjectileType.BlueBall) {\r\n\t            this.drainShield(player, projectile, projectile.damage * 2);\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.drainShield = function (player, projectile, amount) {\r\n\t        if (player.mana > 0) {\r\n\t            var extra = void 0;\r\n\t            if (this.shieldLevel != 0) {\r\n\t                extra = (amount / this.shieldLevel);\r\n\t            }\r\n\t            else {\r\n\t                extra = amount * 2;\r\n\t            }\r\n\t            if (!player.useMana(amount + extra)) {\r\n\t                player.mana = 0;\r\n\t                if (projectile.area.x > player.position.x) {\r\n\t                    player.shieldExplosion(false);\r\n\t                }\r\n\t                else {\r\n\t                    player.shieldExplosion(true);\r\n\t                }\r\n\t            }\r\n\t            ;\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.destroyAnimation = function (projectile) {\r\n\t        if (projectile instanceof model_1.ParticleProjectile) {\r\n\t            if (projectile.projectileType == model_1.ProjectileType.BlueBall) {\r\n\t                this.animationHandler.blue_explosion(new model_1.Vector(projectile.area.x, projectile.area.y), projectile.area.width);\r\n\t            }\r\n\t            else if (projectile.projectileType == model_1.ProjectileType.NecroBall) {\r\n\t                this.animationHandler.necroball_explosion(new model_1.Vector(projectile.area.x, projectile.area.y), projectile.area.width);\r\n\t            }\r\n\t            else {\r\n\t                this.animationHandler.fireball_explosion(new model_1.Vector(projectile.area.x, projectile.area.y), projectile.area.width);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ProjectileHandler.prototype.createFrozenPart = function (velocity, rect, inverse, color, partIndex, baseNumber, collisionArea) {\r\n\t        var projectile;\r\n\t        projectile = new model_1.PhysicalProjectile(velocity, new model_1.Rectangle(rect.x, rect.y, rect.width, rect.width), this.animationHandler.frozenPart(rect, inverse, color, partIndex, baseNumber), 1, collisionArea);\r\n\t        this.projectiles.push(projectile);\r\n\t    };\r\n\t    return ProjectileHandler;\r\n\t}());\r\n\texports.ProjectileHandler = ProjectileHandler;\r\n\n\n/***/ }),\n/* 427 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar constants_1 = __webpack_require__(390);\r\n\tvar DynamicTileHandler = (function () {\r\n\t    function DynamicTileHandler() {\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.constants = constants_1.Constants.getInstance();\r\n\t    }\r\n\t    DynamicTileHandler.prototype.update = function (player, delta) {\r\n\t        for (var _i = 0, _a = this.dynamicTiles; _i < _a.length; _i++) {\r\n\t            var dynamicTile = _a[_i];\r\n\t            var travelDistance = void 0;\r\n\t            if (dynamicTile.verticalAxis) {\r\n\t                travelDistance = dynamicTile.velocity.y * delta;\r\n\t            }\r\n\t            else {\r\n\t                travelDistance = dynamicTile.velocity.x * delta;\r\n\t            }\r\n\t            dynamicTile.update(delta, travelDistance);\r\n\t            if (player.lift == dynamicTile) {\r\n\t                if (dynamicTile.velocity.y < 0) {\r\n\t                    player.position.y = dynamicTile.tile.y - player.height;\r\n\t                }\r\n\t                else {\r\n\t                    player.position.y = dynamicTile.tile.y - player.height;\r\n\t                }\r\n\t                player.liftVelocity = dynamicTile.velocity;\r\n\t                if (player.position.x > dynamicTile.tile.x + dynamicTile.tile.width || player.position.x + player.width < dynamicTile.tile.x) {\r\n\t                    player.lift = null;\r\n\t                    player.liftVelocity = new model_1.Vector(0, 0);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    DynamicTileHandler.prototype.createRenderCall = function (renderCalls) {\r\n\t        for (var _i = 0, _a = this.dynamicTiles; _i < _a.length; _i++) {\r\n\t            var dynamicTile = _a[_i];\r\n\t            var set = renderCalls.get(dynamicTile.tile.key);\r\n\t            if (!set) {\r\n\t                renderCalls.set(dynamicTile.tile.key, new render_1.RenderCall());\r\n\t                set = renderCalls.get(dynamicTile.tile.key);\r\n\t            }\r\n\t            set.vertecies = this.renderHelper.getVertecies(dynamicTile.tile.x, dynamicTile.tile.y, dynamicTile.tile.width, dynamicTile.tile.height, set.vertecies);\r\n\t            set.textureCoords = this.renderHelper.getTiledTextureCoordinates(dynamicTile.tile, set.textureCoords, this.constants.tileSize);\r\n\t            set.indecies = this.renderHelper.getIndecies(set.indecies);\r\n\t        }\r\n\t        return renderCalls;\r\n\t    };\r\n\t    return DynamicTileHandler;\r\n\t}());\r\n\texports.DynamicTileHandler = DynamicTileHandler;\r\n\n\n/***/ }),\n/* 428 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar particle_1 = __webpack_require__(429);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar renderHelper_1 = __webpack_require__(361);\r\n\tvar simpleParticleRenderCall_1 = __webpack_require__(430);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar gravity_1 = __webpack_require__(374);\r\n\tvar ParticleHandler = (function () {\r\n\t    function ParticleHandler() {\r\n\t        this.frostParticles = [];\r\n\t        this.frostEffectParticles = [];\r\n\t        this.fireParticles = [];\r\n\t        this.fireEffectParticles = [];\r\n\t        this.necroEffectParticles = [];\r\n\t        this.blueEffectParticles = [];\r\n\t        this.shieldEffectParticles = [];\r\n\t        this.renderHelper = renderHelper_1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.gravity = new gravity_1.Gravity(0.0001);\r\n\t        this.noGravity = new gravity_1.Gravity(0);\r\n\t        this.fireColor = [1, 0.5, 0.2, 0.8];\r\n\t        this.frostColor = [0.4, 0.9, 0.9, 0.9];\r\n\t        this.frostEffectColor = [0.7, 0.9, 0.9, 0.9];\r\n\t        this.shieldColor = [0.5, 0.4, 0.7, 0.7];\r\n\t        this.necroColor = [0, 0.5, 0, 0.8];\r\n\t        this.blueColor = [0.4, 0.5, 1, 1];\r\n\t        this.flameParticleSettings = [\r\n\t            2, 5,\r\n\t            500, 700,\r\n\t            0.4, 0.5,\r\n\t            -0.05, -0.03,\r\n\t            0.1\r\n\t        ];\r\n\t        this.largeFlameParticleSettings = [\r\n\t            4, 6,\r\n\t            500, 700,\r\n\t            0.4, 0.5,\r\n\t            -0.05, -0.03,\r\n\t            0.1\r\n\t        ];\r\n\t        this.flameEffectSettings = [\r\n\t            1, 3,\r\n\t            100, 400,\r\n\t            0.3, 0.4,\r\n\t            -0.2, 0.05,\r\n\t            0.0\r\n\t        ];\r\n\t        this.channelMagicEffectSettings = [\r\n\t            8, 4,\r\n\t            500, 500,\r\n\t            -10, 10,\r\n\t            0.1, 0.1,\r\n\t            -0.2,\r\n\t            0, Math.PI * 2\r\n\t        ];\r\n\t        this.fireExplosionSettings = [\r\n\t            4, 8,\r\n\t            500, 500,\r\n\t            -20, 20,\r\n\t            0.05, 0.2,\r\n\t            -0.2,\r\n\t            0, Math.PI * 2,\r\n\t        ];\r\n\t        this.magicEffectSettings = [\r\n\t            1, 3,\r\n\t            300, 300,\r\n\t            -0.01, 0.01,\r\n\t            -0.2, 0,\r\n\t            0.1\r\n\t        ];\r\n\t        this.frostParticleSettings = [\r\n\t            3, 5,\r\n\t            600, 800,\r\n\t            0.4, 0.5,\r\n\t            -0.02, 0.02,\r\n\t            0.2\r\n\t        ];\r\n\t        this.largefrostParticleSettings = [\r\n\t            5, 7,\r\n\t            600, 800,\r\n\t            0.5, 0.6,\r\n\t            -0.02, 0.02,\r\n\t            0.2\r\n\t        ];\r\n\t        this.frostEffectParticleSettings = [\r\n\t            2, 4,\r\n\t            200, 800,\r\n\t            0.4, 0.5,\r\n\t            -0.08, 0.05,\r\n\t            0.0,\r\n\t        ];\r\n\t        this.burnEffectSettings = [\r\n\t            10, 15,\r\n\t            100, 400,\r\n\t            0.05, -0.05,\r\n\t            -0.1, -0.1,\r\n\t            0.0\r\n\t        ];\r\n\t        this.shieldEffectSettings = [\r\n\t            4, 6,\r\n\t            150, 250,\r\n\t            10, 10,\r\n\t            0.1, 0.1,\r\n\t            -0.2,\r\n\t            0, Math.PI * 2\r\n\t        ];\r\n\t        this.invertedShieldEffectSettings = [\r\n\t            2, 4,\r\n\t            100, 100,\r\n\t            10, 10,\r\n\t            0.1, 0.1,\r\n\t            0.2,\r\n\t            -Math.PI * 0.52, -Math.PI * 1.30\r\n\t        ];\r\n\t        this.shieldExplosionEffectSettings = [\r\n\t            4, 8,\r\n\t            1000, 1500,\r\n\t            -20, 20,\r\n\t            -0.2, 0.2,\r\n\t            -0.1,\r\n\t            -Math.PI * 0.52, Math.PI * 0.30\r\n\t        ];\r\n\t        this.invertedShieldExplosionEffectSettings = [\r\n\t            4, 8,\r\n\t            1000, 1500,\r\n\t            -20, 20,\r\n\t            -0.2, 0.2,\r\n\t            -0.1,\r\n\t            -Math.PI * 0.52, -Math.PI * 1.30\r\n\t        ];\r\n\t    }\r\n\t    ParticleHandler.prototype.createShieldExplosionEffect = function (position, inverse) {\r\n\t        position.y = position.y - 5;\r\n\t        var settings = [];\r\n\t        if (inverse) {\r\n\t            settings = this.invertedShieldExplosionEffectSettings;\r\n\t        }\r\n\t        else {\r\n\t            settings = this.shieldExplosionEffectSettings;\r\n\t        }\r\n\t        var effectParticles = this.createCircleParticles(position, 40, 40, false, settings, 100);\r\n\t        (_a = this.shieldEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createShieldEffect = function (position, inverse, shieldLevel) {\r\n\t        position.y = position.y + 5;\r\n\t        var effectParticles = this.createCenterCircleParticles(position, 10, 20, this.shieldEffectSettings, false, 0, 0, 100, 0, 1 + shieldLevel);\r\n\t        (_a = this.shieldEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createFireBall = function (position, size, inverse, offsetX) {\r\n\t        var effectParticles = this.fireBall(position, size, inverse, offsetX);\r\n\t        (_a = this.fireEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createBlueFireBall = function (position, size, inverse, offsetX) {\r\n\t        var effectParticles = this.fireBall(position, size, inverse, offsetX);\r\n\t        (_a = this.blueEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createBlueExplosion = function (position, size) {\r\n\t        var effectParticles = this.fireballExplosion(position, size);\r\n\t        (_a = this.blueEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createNecroFireBall = function (position, size, inverse, offsetX) {\r\n\t        var effectParticles = this.fireBall(position, size, inverse, offsetX);\r\n\t        (_a = this.necroEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createNecroballExplosion = function (position, size) {\r\n\t        var effectParticles = this.fireballExplosion(position, size);\r\n\t        (_a = this.necroEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createFireballExplosion = function (position, size) {\r\n\t        var effectParticles = this.fireballExplosion(position, size);\r\n\t        (_a = this.fireEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.fireballExplosion = function (position, size) {\r\n\t        var radius = size / 2;\r\n\t        var particleSize = 2 + (size / 20);\r\n\t        position.x = position.x + radius;\r\n\t        position.y = position.y + radius;\r\n\t        var settings = [\r\n\t            particleSize, particleSize * 2,\r\n\t            500, 500,\r\n\t            -20, 20,\r\n\t            0.05, 0.2,\r\n\t            -0.2,\r\n\t            0, Math.PI * 2,\r\n\t        ];\r\n\t        var effectParticles = this.createCircleParticles(position, 0, 0, false, settings, 50);\r\n\t        return effectParticles;\r\n\t    };\r\n\t    ParticleHandler.prototype.createChannelMagic = function (position, inverse) {\r\n\t        var positionOffset = new model_1.Vector(position.x + 25, position.y + 45);\r\n\t        var effectParticles = this.createCenterCircleParticles(positionOffset, 30, 40, this.channelMagicEffectSettings, true, 3, 10, 100, 0, 2);\r\n\t        (_a = this.fireEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createNecroChannelMagic = function (position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse) {\r\n\t        var effectParticles = this.channelCenter(position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse);\r\n\t        (_a = this.necroEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createBlueChannelMagic = function (position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse) {\r\n\t        var effectParticles = this.channelCenter(position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse);\r\n\t        (_a = this.blueEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createMagicEffect = function (position, inverse) {\r\n\t        var offSetX = this.rand(-10, 10) + 22;\r\n\t        var offSetY = this.rand(-5, 10) + 45;\r\n\t        var positionOffset = new model_1.Vector(position.x + offSetX, position.y + offSetY);\r\n\t        var effectParticles = this.createParticles(positionOffset, inverse, this.magicEffectSettings, 1);\r\n\t        (_a = this.fireEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createFrostBlast = function (position, inverse, frostLevel) {\r\n\t        var positionOffset = new model_1.Vector(position.x, position.y);\r\n\t        positionOffset.y += 45;\r\n\t        if (inverse) {\r\n\t            positionOffset.x += 10;\r\n\t        }\r\n\t        else {\r\n\t            positionOffset.x += 40;\r\n\t        }\r\n\t        var settings;\r\n\t        if (frostLevel == 3) {\r\n\t            settings = this.largefrostParticleSettings;\r\n\t        }\r\n\t        else {\r\n\t            settings = this.frostParticleSettings;\r\n\t        }\r\n\t        var particles = this.createParticles(positionOffset, inverse, settings, 3 + (frostLevel * 3));\r\n\t        var effectParticles = this.createParticles(positionOffset, inverse, this.frostEffectParticleSettings, 2 + (frostLevel * 1));\r\n\t        (_a = this.frostEffectParticles).push.apply(_a, effectParticles);\r\n\t        (_b = this.frostParticles).push.apply(_b, particles);\r\n\t        var _a, _b;\r\n\t    };\r\n\t    ParticleHandler.prototype.createFireBlast = function (position, inverse, fireLevel) {\r\n\t        var positionOffset = new model_1.Vector(position.x, position.y);\r\n\t        positionOffset.y += 45;\r\n\t        if (inverse) {\r\n\t            positionOffset.x += 10;\r\n\t        }\r\n\t        else {\r\n\t            positionOffset.x += 40;\r\n\t        }\r\n\t        var settings;\r\n\t        if (fireLevel == 3) {\r\n\t            settings = this.largeFlameParticleSettings;\r\n\t        }\r\n\t        else {\r\n\t            settings = this.flameParticleSettings;\r\n\t        }\r\n\t        var particles = this.createParticles(positionOffset, inverse, settings, 3 + (fireLevel * 3));\r\n\t        var effectParticles = this.createParticles(positionOffset, inverse, this.flameEffectSettings, 2 + (fireLevel * 1));\r\n\t        (_a = this.fireParticles).push.apply(_a, particles);\r\n\t        (_b = this.fireEffectParticles).push.apply(_b, effectParticles);\r\n\t        var _a, _b;\r\n\t    };\r\n\t    ParticleHandler.prototype.createBurn = function (position) {\r\n\t        var positionCopy = new model_1.Vector(position.x, position.y);\r\n\t        positionCopy.x += this.rand(-10, 15) + 25;\r\n\t        positionCopy.y += this.rand(-10, 10) + 25;\r\n\t        var effectParticles = this.createParticles(positionCopy, false, this.burnEffectSettings, 1);\r\n\t        (_a = this.fireEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.createFireDeath = function (position) {\r\n\t        position.x += this.rand(-15, 15);\r\n\t        position.x += 25;\r\n\t        position.y += 25;\r\n\t        var effectParticles = this.createParticles(position, false, this.burnEffectSettings, 5);\r\n\t        (_a = this.fireEffectParticles).push.apply(_a, effectParticles);\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.update = function (delta, enemies) {\r\n\t        this.updateEffectParticles(this.blueEffectParticles, delta);\r\n\t        this.updateEffectParticles(this.necroEffectParticles, delta);\r\n\t        this.updateEffectParticles(this.fireEffectParticles, delta);\r\n\t        this.updateEffectParticles(this.frostEffectParticles, delta);\r\n\t        this.updateEffectParticles(this.shieldEffectParticles, delta);\r\n\t        this.updateParticles(this.frostParticles, this.noGravity, delta, enemies, model_1.SpellType.frostBlast);\r\n\t        this.updateParticles(this.fireParticles, this.gravity, delta, enemies, model_1.SpellType.fireBlast);\r\n\t    };\r\n\t    ParticleHandler.prototype.createRenderCalls = function (renderCalls) {\r\n\t        var fireRenderCall = new simpleParticleRenderCall_1.SimpleParticleRenderCall();\r\n\t        var allFireParticles = this.fireParticles.concat(this.fireEffectParticles);\r\n\t        var frostRenderCall = new simpleParticleRenderCall_1.SimpleParticleRenderCall();\r\n\t        var frostEffectRenderCall = new simpleParticleRenderCall_1.SimpleParticleRenderCall();\r\n\t        frostEffectRenderCall.textureType = model_1.TextureType.frostTexture;\r\n\t        var shieldEffectRenderCall = new simpleParticleRenderCall_1.SimpleParticleRenderCall();\r\n\t        shieldEffectRenderCall.textureType = model_1.TextureType.particleTexture;\r\n\t        var necroFireRenderCall = new simpleParticleRenderCall_1.SimpleParticleRenderCall();\r\n\t        necroFireRenderCall.textureType = model_1.TextureType.particleTexture;\r\n\t        var blueFireRenderCall = new simpleParticleRenderCall_1.SimpleParticleRenderCall();\r\n\t        blueFireRenderCall.textureType = model_1.TextureType.particleTexture;\r\n\t        renderCalls.push(this.addParticles(fireRenderCall, allFireParticles, this.fireColor));\r\n\t        renderCalls.push(this.addParticles(frostEffectRenderCall, this.frostEffectParticles, this.frostEffectColor));\r\n\t        renderCalls.push(this.addParticles(frostRenderCall, this.frostParticles, this.frostColor));\r\n\t        renderCalls.push(this.addParticles(shieldEffectRenderCall, this.shieldEffectParticles, this.shieldColor));\r\n\t        renderCalls.push(this.addParticles(necroFireRenderCall, this.necroEffectParticles, this.necroColor));\r\n\t        renderCalls.push(this.addParticles(blueFireRenderCall, this.blueEffectParticles, this.blueColor));\r\n\t        return renderCalls;\r\n\t    };\r\n\t    ParticleHandler.prototype.channelCenter = function (position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse) {\r\n\t        var positionOffset;\r\n\t        if (inverse) {\r\n\t            positionOffset = new model_1.Vector(position.x + offsetXInverse, position.y + offsetYInverse);\r\n\t        }\r\n\t        else {\r\n\t            positionOffset = new model_1.Vector(position.x + offsetX, position.y + offsetY);\r\n\t        }\r\n\t        return this.createCenterCircleParticles(positionOffset, 30, 40, this.channelMagicEffectSettings, true, 3, 10, 100, 0, 2);\r\n\t    };\r\n\t    ParticleHandler.prototype.fireBall = function (position, size, inverse, offsetX) {\r\n\t        var positionOffset = new model_1.Vector(position.x, position.y);\r\n\t        var strength = size / 2;\r\n\t        var radius = strength / 2;\r\n\t        var offset = strength / 10;\r\n\t        var settingFactor = size / 100;\r\n\t        if (inverse) {\r\n\t            positionOffset.x += (strength - offsetX);\r\n\t        }\r\n\t        else {\r\n\t            positionOffset.x += (strength + offsetX);\r\n\t        }\r\n\t        positionOffset.y += strength;\r\n\t        var channelMagicEffectSettings = [\r\n\t            4 + (4 * settingFactor), 2 + (2 * settingFactor),\r\n\t            500, 500,\r\n\t            -10, 10,\r\n\t            0, 0,\r\n\t            -0.2\r\n\t        ];\r\n\t        var effectParticles = this.createCenterCircleParticles(positionOffset, radius, radius, channelMagicEffectSettings, false, offset, strength, 200, -offset, 2);\r\n\t        return effectParticles;\r\n\t    };\r\n\t    ParticleHandler.prototype.addParticles = function (renderCall, particles, color) {\r\n\t        for (var _i = 0, particles_1 = particles; _i < particles_1.length; _i++) {\r\n\t            var particle = particles_1[_i];\r\n\t            (_a = renderCall.vertecies).push.apply(_a, [particle.area.x, particle.area.y]);\r\n\t            renderCall.pointSize.push(particle.area.width);\r\n\t            renderCall.color = color;\r\n\t            renderCall.itemCount = particles.length;\r\n\t        }\r\n\t        return renderCall;\r\n\t        var _a;\r\n\t    };\r\n\t    ParticleHandler.prototype.updateEffectParticles = function (particleCollection, delta) {\r\n\t        var removeCollection = [];\r\n\t        for (var _i = 0, particleCollection_1 = particleCollection; _i < particleCollection_1.length; _i++) {\r\n\t            var particle = particleCollection_1[_i];\r\n\t            this.updateParticle(particle, delta);\r\n\t            var collisionSize = particle.area.width / 2;\r\n\t            if (particle.lifeTime <= 0 || particle.area.width < 0 || particle.dead) {\r\n\t                removeCollection.push(particle);\r\n\t            }\r\n\t        }\r\n\t        this.removeParticles(removeCollection, particleCollection);\r\n\t    };\r\n\t    ParticleHandler.prototype.updateParticles = function (particleCollection, gravity, delta, enemies, spelltype) {\r\n\t        var removeCollection = [];\r\n\t        for (var _i = 0, particleCollection_2 = particleCollection; _i < particleCollection_2.length; _i++) {\r\n\t            var particle = particleCollection_2[_i];\r\n\t            gravity.apply(particle.velocity, delta);\r\n\t            this.updateParticle(particle, delta);\r\n\t            var collisionSize = particle.area.width / 2;\r\n\t            var collisionRectangle = new model_1.Rectangle(particle.area.x, particle.area.y, collisionSize, collisionSize);\r\n\t            if (!particle.dead) {\r\n\t                for (var _a = 0, enemies_1 = enemies; _a < enemies_1.length; _a++) {\r\n\t                    var enemy = enemies_1[_a];\r\n\t                    if (this.collisionDetection.aabbCheck(collisionRectangle, enemy.getCollisionArea())) {\r\n\t                        if (spelltype == model_1.SpellType.frostBlast) {\r\n\t                            enemy.freeze();\r\n\t                        }\r\n\t                        else {\r\n\t                            enemy.burn();\r\n\t                        }\r\n\t                        particle.dead = true;\r\n\t                        particle.lifeTime = particle.lifeTime > 10 ? this.rand(10, 20) : particle.lifeTime;\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            if (particle.lifeTime <= 0 || particle.area.width < 0) {\r\n\t                removeCollection.push(particle);\r\n\t            }\r\n\t        }\r\n\t        this.removeParticles(removeCollection, particleCollection);\r\n\t    };\r\n\t    ParticleHandler.prototype.removeParticles = function (removeCollection, particleCollection) {\r\n\t        for (var _i = 0, removeCollection_1 = removeCollection; _i < removeCollection_1.length; _i++) {\r\n\t            var particle = removeCollection_1[_i];\r\n\t            var index = particleCollection.indexOf(particle);\r\n\t            if (index != -1) {\r\n\t                particleCollection.splice(index, 1);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    ParticleHandler.prototype.updateParticle = function (particle, delta) {\r\n\t        particle.area.x += particle.velocity.x * delta;\r\n\t        particle.area.y += particle.velocity.y * delta;\r\n\t        particle.lifeTime -= delta;\r\n\t        particle.area.width += particle.growth;\r\n\t        particle.area.height += particle.growth;\r\n\t    };\r\n\t    ParticleHandler.prototype.createParticles = function (position, inverse, settings, particleNumber) {\r\n\t        var newParticles = [];\r\n\t        for (var i = 0; i < particleNumber; i++) {\r\n\t            var particleSize = this.rand(settings[0], settings[1]);\r\n\t            var velocity = void 0;\r\n\t            var area = void 0;\r\n\t            var deltaX = void 0;\r\n\t            if (inverse) {\r\n\t                velocity = new model_1.Vector(-this.rand(settings[4], settings[5]), this.rand(settings[6], settings[7]));\r\n\t                area = new model_1.Rectangle(position.x, position.y, particleSize, particleSize);\r\n\t                deltaX = this.collisionDetection.getClosestX(new model_1.Rectangle(area.x - settings[3], area.y - 8, settings[3], 1), this.tiles, inverse) - area.x;\r\n\t            }\r\n\t            else {\r\n\t                velocity = new model_1.Vector(this.rand(settings[4], settings[5]), this.rand(settings[6], settings[7]));\r\n\t                area = new model_1.Rectangle(position.x, position.y, particleSize, particleSize);\r\n\t                deltaX = this.collisionDetection.getClosestX(new model_1.Rectangle(area.x, area.y - 8, settings[3], 1), this.tiles, inverse) - area.x;\r\n\t            }\r\n\t            var lifeTime = void 0;\r\n\t            var collTime = Math.abs((deltaX / velocity.x));\r\n\t            if (collTime < settings[3]) {\r\n\t                if (collTime < settings[2]) {\r\n\t                    lifeTime = this.rand(collTime, collTime + 10);\r\n\t                }\r\n\t                else {\r\n\t                    lifeTime = this.rand(settings[2], collTime + 10);\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                lifeTime = this.rand(settings[2], settings[3]);\r\n\t            }\r\n\t            var growth = settings[8];\r\n\t            var particle = new particle_1.Particle(area, lifeTime, velocity, growth);\r\n\t            newParticles.push(particle);\r\n\t        }\r\n\t        return newParticles;\r\n\t    };\r\n\t    ParticleHandler.prototype.createCenterCircleParticles = function (position, radiusX, radiusY, settings, inward, centerOffsetValue, centerSize, centerLifeTime, centerGrowth, particleNumber) {\r\n\t        var newParticles = [];\r\n\t        var centerOffSetX = this.rand(-centerOffsetValue, centerOffsetValue);\r\n\t        var centerOffSetY = this.rand(-centerOffsetValue, centerOffsetValue);\r\n\t        var centerParticle = new particle_1.Particle(new model_1.Rectangle(position.x + centerOffSetX, position.y + centerOffSetY, centerSize, centerSize), centerLifeTime, new model_1.Vector(0, 0), centerGrowth);\r\n\t        newParticles.push(centerParticle);\r\n\t        newParticles.push.apply(newParticles, this.createCircleParticles(position, radiusX, radiusY, inward, settings, particleNumber));\r\n\t        return newParticles;\r\n\t    };\r\n\t    ParticleHandler.prototype.createCircleParticles = function (position, radiusX, radiusY, inward, settings, particleNumber) {\r\n\t        var particles = [];\r\n\t        for (var i = 0; i < particleNumber; i++) {\r\n\t            var particleSize = this.rand(settings[0], settings[1]);\r\n\t            var lifeTime = this.rand(settings[2], settings[3]);\r\n\t            var offSet = this.rand(settings[4], settings[5]);\r\n\t            var x = void 0;\r\n\t            var y = void 0;\r\n\t            var velocity = void 0;\r\n\t            var angle = this.rand(settings[9], settings[10]);\r\n\t            x = position.x + ((radiusX + offSet) * Math.cos(angle));\r\n\t            y = position.y + ((radiusY + offSet) * Math.sin(angle));\r\n\t            if (inward) {\r\n\t                velocity = new model_1.Vector(-(x - position.x), -(y - position.y));\r\n\t            }\r\n\t            else {\r\n\t                velocity = new model_1.Vector(x - position.x, y - position.y);\r\n\t            }\r\n\t            velocity.normalize();\r\n\t            velocity.multiply(this.rand(settings[6], settings[7]));\r\n\t            var particle = new particle_1.Particle(new model_1.Rectangle(x, y, particleSize, particleSize), lifeTime, velocity, settings[8]);\r\n\t            particles.push(particle);\r\n\t        }\r\n\t        ;\r\n\t        return particles;\r\n\t    };\r\n\t    ParticleHandler.prototype.rand = function (min, max) {\r\n\t        return min + (Math.random() * (max - min));\r\n\t    };\r\n\t    return ParticleHandler;\r\n\t}());\r\n\texports.ParticleHandler = ParticleHandler;\r\n\n\n/***/ }),\n/* 429 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Particle = (function () {\r\n\t    function Particle(area, lifeTime, velocity, growth) {\r\n\t        this.area = area;\r\n\t        this.lifeTime = lifeTime;\r\n\t        this.velocity = velocity;\r\n\t        this.growth = growth;\r\n\t    }\r\n\t    return Particle;\r\n\t}());\r\n\texports.Particle = Particle;\r\n\n\n/***/ }),\n/* 430 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar SimpleParticleRenderCall = (function () {\r\n\t    function SimpleParticleRenderCall() {\r\n\t        this.vertecies = [];\r\n\t        this.pointSize = [];\r\n\t        this.color = [];\r\n\t        this.itemCount = 0;\r\n\t        this.textureType = model_1.TextureType.particleTexture;\r\n\t    }\r\n\t    return SimpleParticleRenderCall;\r\n\t}());\r\n\texports.SimpleParticleRenderCall = SimpleParticleRenderCall;\r\n\n\n/***/ }),\n/* 431 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar SimpleParticleRenderer = (function () {\r\n\t    function SimpleParticleRenderer(context) {\r\n\t        this.context = context;\r\n\t        this.gl = this.context.gl;\r\n\t        this.shaderProgram = this.context.simpleParticleProgram;\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 1, \"a_pointSize\");\r\n\t        this.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t        this.sizeAttributeLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_pointSize\");\r\n\t        this.resolutionLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_resolution\");\r\n\t        this.cameraLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_camera\");\r\n\t        this.colorUniformLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n\t        this.vertexBuffer = this.gl.createBuffer();\r\n\t        this.pointSizeBuffer = this.gl.createBuffer();\r\n\t    }\r\n\t    SimpleParticleRenderer.prototype.render = function (renderCalls, camera) {\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        for (var _i = 0, renderCalls_1 = renderCalls; _i < renderCalls_1.length; _i++) {\r\n\t            var renderCall = renderCalls_1[_i];\r\n\t            if (renderCall.itemCount > 1) {\r\n\t                this.gl.enableVertexAttribArray(this.positionLocation);\r\n\t                this.gl.enableVertexAttribArray(this.sizeAttributeLocation);\r\n\t                this.gl.uniform2f(this.resolutionLocation, this.context.gl.canvas.width, this.context.gl.canvas.height);\r\n\t                this.gl.uniform2f(this.cameraLocation, camera[0], camera[1]);\r\n\t                this.gl.uniform4f(this.colorUniformLocation, renderCall.color[0], renderCall.color[1], renderCall.color[2], renderCall.color[3]);\r\n\t                if (renderCall.textureType == model_1.TextureType.particleTexture) {\r\n\t                    this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.genericParticleTexture);\r\n\t                }\r\n\t                else if (renderCall.textureType == model_1.TextureType.frostTexture) {\r\n\t                    this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.frostParticelTexture);\r\n\t                }\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\t                this.gl.enableVertexAttribArray(this.positionLocation);\r\n\t                this.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointSizeBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.pointSize), this.gl.STATIC_DRAW);\r\n\t                this.gl.enableVertexAttribArray(this.sizeAttributeLocation);\r\n\t                this.gl.vertexAttribPointer(this.sizeAttributeLocation, 1, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.drawArrays(this.gl.POINTS, 0, renderCall.itemCount);\r\n\t                this.gl.disableVertexAttribArray(this.positionLocation);\r\n\t                this.gl.disableVertexAttribArray(this.sizeAttributeLocation);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return SimpleParticleRenderer;\r\n\t}());\r\n\texports.SimpleParticleRenderer = SimpleParticleRenderer;\r\n\n\n/***/ }),\n/* 432 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar swordman_1 = __webpack_require__(407);\r\n\tvar _1 = __webpack_require__(403);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar deathType_1 = __webpack_require__(406);\r\n\tvar EnemyHandler = (function () {\r\n\t    function EnemyHandler(context, projectileHandler, animationHandler, particleHandler) {\r\n\t        this.enemies = [];\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.context = context;\r\n\t        this.projectileHandler = projectileHandler;\r\n\t        this.animationHandler = animationHandler;\r\n\t        this.particleHandler = particleHandler;\r\n\t    }\r\n\t    EnemyHandler.prototype.update = function (delta, tiles, player) {\r\n\t        for (var _i = 0, _a = this.enemies; _i < _a.length; _i++) {\r\n\t            var enemy = _a[_i];\r\n\t            enemy.update(delta, tiles, player);\r\n\t            this.enemyCollisionCheck(delta);\r\n\t            this.checkBurn(enemy);\r\n\t            this.checkEnemyDeath(enemy);\r\n\t        }\r\n\t    };\r\n\t    EnemyHandler.prototype.createRenderCall = function (renderCall) {\r\n\t        for (var _i = 0, _a = this.enemies; _i < _a.length; _i++) {\r\n\t            var enemy = _a[_i];\r\n\t            if (enemy.inverse) {\r\n\t                renderCall.vertecies = this.renderHelper.getInverseVertecies(enemy.position.x, enemy.position.y, enemy.width, enemy.height, renderCall.vertecies);\r\n\t            }\r\n\t            else {\r\n\t                renderCall.vertecies = this.renderHelper.getVertecies(enemy.position.x, enemy.position.y, enemy.width, enemy.height, renderCall.vertecies);\r\n\t            }\r\n\t            renderCall.textureCoords.push.apply(renderCall.textureCoords, enemy.currentAnimation.getCurrentFrame());\r\n\t            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t            renderCall.color = this.renderHelper.getColor(renderCall.color, enemy.color);\r\n\t        }\r\n\t        return renderCall;\r\n\t    };\r\n\t    EnemyHandler.prototype.remove = function (enemy) {\r\n\t        var index = this.enemies.indexOf(enemy);\r\n\t        if (index >= 0) {\r\n\t            this.enemies.splice(index, 1);\r\n\t        }\r\n\t    };\r\n\t    EnemyHandler.prototype.checkBurn = function (enemy) {\r\n\t        if (enemy.burnValue > 0) {\r\n\t            var collarea = enemy.getCollisionArea();\r\n\t            var pos = new model_1.Vector(collarea.x, collarea.y);\r\n\t            this.particleHandler.createBurn(pos);\r\n\t        }\r\n\t    };\r\n\t    EnemyHandler.prototype.checkEnemyDeath = function (enemy) {\r\n\t        if (enemy.dead) {\r\n\t            if (enemy.deathType == deathType_1.DeathType.freezeDeath) {\r\n\t                if (enemy instanceof swordman_1.Swordman) {\r\n\t                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\t                    this.projectileHandler.createFrozenSwordManDeath(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse, enemy.color);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Archer) {\r\n\t                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\t                    this.projectileHandler.createFrozenArcherDeath(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse, enemy.color);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Shadow) {\r\n\t                    this.projectileHandler.createShadow_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Apprentice) {\r\n\t                    this.projectileHandler.createApprentice_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Screamer) {\r\n\t                    this.projectileHandler.createScreamer_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.MasterSorcerer) {\r\n\t                    this.projectileHandler.createMasterSorcerer_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                this.remove(enemy);\r\n\t            }\r\n\t            else if (enemy.deathType == deathType_1.DeathType.fireDeath) {\r\n\t                if (enemy instanceof swordman_1.Swordman) {\r\n\t                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\t                    this.animationHandler.fireDeathSwordman(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Archer) {\r\n\t                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\t                    this.animationHandler.fireDeathArcher(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Shadow) {\r\n\t                    this.projectileHandler.createShadow_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Apprentice) {\r\n\t                    this.projectileHandler.createApprentice_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Screamer) {\r\n\t                    this.projectileHandler.createScreamer_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.MasterSorcerer) {\r\n\t                    this.projectileHandler.createMasterSorcerer_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                this.remove(enemy);\r\n\t            }\r\n\t            else if (enemy.deathType == deathType_1.DeathType.swordDeath) {\r\n\t                if (enemy instanceof _1.Archer) {\r\n\t                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\t                    this.animationHandler.createArcherDeath(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Shadow) {\r\n\t                    this.projectileHandler.createShadow_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Apprentice) {\r\n\t                    this.projectileHandler.createApprentice_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.Screamer) {\r\n\t                    this.projectileHandler.createScreamer_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                else if (enemy instanceof _1.MasterSorcerer) {\r\n\t                    this.projectileHandler.createMasterSorcerer_death(new model_1.Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n\t                }\r\n\t                this.remove(enemy);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    EnemyHandler.prototype.enemyCollisionCheck = function (delta) {\r\n\t        for (var _i = 0, _a = this.projectileHandler.projectiles; _i < _a.length; _i++) {\r\n\t            var projectile = _a[_i];\r\n\t            if (projectile instanceof model_1.ParticleProjectile) {\r\n\t                var removeEnemy = [];\r\n\t                for (var _b = 0, _c = this.enemies; _b < _c.length; _b++) {\r\n\t                    var enemy = _c[_b];\r\n\t                    var velocityDelta = new model_1.Vector((projectile.velocity.x * delta) - (enemy.toMove.x), (projectile.velocity.y * delta) - (enemy.toMove.y));\r\n\t                    var collisionData = this.collisionDetection.checkProjectileCollisionX([enemy.getCollisionArea()], projectile, velocityDelta, false, true);\r\n\t                    if (collisionData.wallCollision) {\r\n\t                        enemy.takeDamage(projectile.area.width, model_1.SpellType.fireball);\r\n\t                        if (projectile.inverse) {\r\n\t                            this.animationHandler.bloodAnimation_B_Left(new model_1.Vector(enemy.position.x + enemy.width / 2, projectile.area.y + (projectile.area.height / 2) - 30), 75);\r\n\t                        }\r\n\t                        else {\r\n\t                            this.animationHandler.bloodAnimation_B_Right(new model_1.Vector(enemy.position.x + enemy.width / 2, projectile.area.y + (projectile.area.height / 2) - 30), 75);\r\n\t                        }\r\n\t                        this.projectileHandler.destroyProjectile(projectile, this.projectileHandler.projectiles);\r\n\t                        if (enemy.dead) {\r\n\t                            if (enemy instanceof swordman_1.Swordman) {\r\n\t                                this.projectileHandler.createSwordman_death(enemy.position, enemy.inverse, this.projectileHandler.calculateDirection(projectile.area, enemy));\r\n\t                                removeEnemy.push(enemy);\r\n\t                            }\r\n\t                        }\r\n\t                    }\r\n\t                }\r\n\t                for (var _d = 0, removeEnemy_1 = removeEnemy; _d < removeEnemy_1.length; _d++) {\r\n\t                    var enemy = removeEnemy_1[_d];\r\n\t                    this.remove(enemy);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return EnemyHandler;\r\n\t}());\r\n\texports.EnemyHandler = EnemyHandler;\r\n\n\n/***/ }),\n/* 433 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Camera = (function () {\r\n\t    function Camera(position, sceneSize, gameSize) {\r\n\t        this.position = position;\r\n\t        this.sceneSize = sceneSize;\r\n\t        this.gameSize = gameSize;\r\n\t        this.cameraOffset = [800, 500];\r\n\t        this.position = position;\r\n\t        this.sceneSize = sceneSize;\r\n\t        this.maxX = 100 + (this.sceneSize[0] - this.cameraOffset[0]);\r\n\t        this.maxXCameraPosition = this.gameSize[0] - (this.maxX + this.cameraOffset[0] - 100);\r\n\t        this.maxY = (this.sceneSize[1] - this.cameraOffset[1]);\r\n\t        this.maxYCameraPosition = this.gameSize[1] - (this.maxY + this.cameraOffset[1]);\r\n\t    }\r\n\t    Camera.prototype.update = function (focusPosition) {\r\n\t        if (focusPosition.x - this.position[0] > this.cameraOffset[0] - 100) {\r\n\t            this.position[0] = focusPosition.x - this.cameraOffset[0] + 100;\r\n\t            if ((focusPosition.x + this.maxX) > this.gameSize[0]) {\r\n\t                this.position[0] = this.maxXCameraPosition;\r\n\t            }\r\n\t        }\r\n\t        else if (focusPosition.x - this.position[0] < this.sceneSize[0] - this.cameraOffset[0]) {\r\n\t            this.position[0] = focusPosition.x - (this.sceneSize[0] - this.cameraOffset[0]);\r\n\t            if (this.position[0] < 0) {\r\n\t                this.position[0] = 0;\r\n\t            }\r\n\t        }\r\n\t        if (focusPosition.y - this.position[1] > this.cameraOffset[1]) {\r\n\t            this.position[1] = focusPosition.y - this.cameraOffset[1];\r\n\t            if ((focusPosition.y + this.maxY) > this.gameSize[1]) {\r\n\t                this.position[1] = this.maxYCameraPosition;\r\n\t            }\r\n\t        }\r\n\t        else if (focusPosition.y - this.position[1] < this.sceneSize[1] - this.cameraOffset[1]) {\r\n\t            this.position[1] = focusPosition.y - (this.sceneSize[1] - this.cameraOffset[1]);\r\n\t            if (this.position[1] < 0) {\r\n\t                this.position[1] = 0;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return Camera;\r\n\t}());\r\n\texports.Camera = Camera;\r\n\n\n/***/ }),\n/* 434 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar DynamicRenderer = (function () {\r\n\t    function DynamicRenderer(context) {\r\n\t        this.context = context;\r\n\t        this.gl = this.context.gl;\r\n\t        this.shaderProgram = this.context.dynamicVertecyProgram;\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 1, \"a_texture_coord\");\r\n\t        this.gl.bindAttribLocation(this.shaderProgram, 2, \"a_matrix\");\r\n\t        this.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t        this.textureCoordAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_texture_coord\");\r\n\t        this.matrixAttributeLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_matrix\");\r\n\t        this.vertexBuffer = this.gl.createBuffer();\r\n\t        this.textureCoordBuffer = this.gl.createBuffer();\r\n\t        this.indeciesBuffer = this.gl.createBuffer();\r\n\t        this.matricesBuffer = this.gl.createBuffer();\r\n\t    }\r\n\t    DynamicRenderer.prototype.render = function (renderCalls) {\r\n\t        this.gl.useProgram(this.shaderProgram);\r\n\t        for (var _i = 0, renderCalls_1 = renderCalls; _i < renderCalls_1.length; _i++) {\r\n\t            var renderCall = renderCalls_1[_i];\r\n\t            if (renderCall.vertecies.length > 0) {\r\n\t                this.gl.enableVertexAttribArray(this.positionLocation);\r\n\t                this.gl.enableVertexAttribArray(this.textureCoordAttribute);\r\n\t                this.gl.enableVertexAttribArray(this.matrixAttributeLocation);\r\n\t                this.gl.enableVertexAttribArray(this.matrixAttributeLocation + 1);\r\n\t                this.gl.enableVertexAttribArray(this.matrixAttributeLocation + 2);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.textureCoords), this.gl.STATIC_DRAW);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.matricesBuffer);\r\n\t                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.matrices), this.gl.STATIC_DRAW);\r\n\t                this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t                this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(renderCall.indecies), this.gl.STATIC_DRAW);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t                this.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t                this.gl.vertexAttribPointer(this.textureCoordAttribute, 2, this.gl.FLOAT, false, 0, 0);\r\n\t                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.matricesBuffer);\r\n\t                for (var i = 0; i < 3; i++) {\r\n\t                    this.gl.vertexAttribPointer(this.matrixAttributeLocation + i, 3, this.gl.FLOAT, false, 36, i * 12);\r\n\t                }\r\n\t                this.gl.activeTexture(this.gl.TEXTURE0);\r\n\t                this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.glTexture);\r\n\t                this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t                this.gl.drawElements(this.gl.TRIANGLES, renderCall.indecies.length, this.gl.UNSIGNED_SHORT, 0);\r\n\t                this.gl.disableVertexAttribArray(this.positionLocation);\r\n\t                this.gl.disableVertexAttribArray(this.textureCoordAttribute);\r\n\t                this.gl.disableVertexAttribArray(this.matrixAttributeLocation);\r\n\t                this.gl.disableVertexAttribArray(this.matrixAttributeLocation + 1);\r\n\t                this.gl.disableVertexAttribArray(this.matrixAttributeLocation + 2);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return DynamicRenderer;\r\n\t}());\r\n\texports.DynamicRenderer = DynamicRenderer;\r\n\n\n/***/ }),\n/* 435 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar bar_1 = __webpack_require__(436);\r\n\tvar UI = (function () {\r\n\t    function UI(maxHp, maxMana) {\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.bars = [];\r\n\t        this.hpBar = new bar_1.ProgressBar();\r\n\t        this.manaBar = new bar_1.ProgressBar();\r\n\t        this.hudTextureCoords = this.renderHelper.getTextureCoordinates([], 198);\r\n\t        this.hpBar.bar = new bar_1.Bar(new model_1.Rectangle(100, 8, 298, 16), 298, new model_1.Rectangle(1632, 96, 200, 12), 200);\r\n\t        this.hpBar.maxValue = maxHp;\r\n\t        this.manaBar.bar = new bar_1.Bar(new model_1.Rectangle(100, 34, 298, 16), 298, new model_1.Rectangle(1632, 128, 200, 12), 200);\r\n\t        this.manaBar.maxValue = maxMana;\r\n\t        this.bars.push(this.hpBar.bar);\r\n\t        this.bars.push(this.manaBar.bar);\r\n\t    }\r\n\t    UI.prototype.update = function (hp, mana) {\r\n\t        var hpFactor = hp / this.hpBar.maxValue;\r\n\t        this.hpBar.bar.area.width = (hpFactor * this.hpBar.bar.maxWidth);\r\n\t        this.hpBar.bar.textureArea.width = (hpFactor * this.hpBar.bar.maxTextureWidth);\r\n\t        var manaFactor = mana / this.manaBar.maxValue;\r\n\t        this.manaBar.bar.area.width = (manaFactor * this.manaBar.bar.maxWidth);\r\n\t        this.manaBar.bar.textureArea.width = (manaFactor * this.manaBar.bar.maxTextureWidth);\r\n\t    };\r\n\t    UI.prototype.createRenderCall = function (renderCall, camera) {\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(0 + camera[0], 0 + camera[1], 405, 96, renderCall.vertecies);\r\n\t        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.hudTextureCoords);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        for (var _i = 0, _a = this.bars; _i < _a.length; _i++) {\r\n\t            var bar = _a[_i];\r\n\t            renderCall.vertecies = this.renderHelper.getVertecies(bar.area.x + camera[0], bar.area.y + camera[1], bar.area.width, bar.area.height, renderCall.vertecies);\r\n\t            renderCall.textureCoords.push.apply(renderCall.textureCoords, this.renderHelper.getMainTextureCoords(bar.textureArea));\r\n\t            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        }\r\n\t        return renderCall;\r\n\t    };\r\n\t    return UI;\r\n\t}());\r\n\texports.UI = UI;\r\n\n\n/***/ }),\n/* 436 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Bar = (function () {\r\n\t    function Bar(area, maxWidth, textureArea, maxTextureWidth) {\r\n\t        this.area = area;\r\n\t        this.maxWidth = maxWidth;\r\n\t        this.textureArea = textureArea;\r\n\t        this.maxTextureWidth = maxTextureWidth;\r\n\t    }\r\n\t    return Bar;\r\n\t}());\r\n\texports.Bar = Bar;\r\n\tvar ProgressBar = (function () {\r\n\t    function ProgressBar() {\r\n\t    }\r\n\t    return ProgressBar;\r\n\t}());\r\n\texports.ProgressBar = ProgressBar;\r\n\n\n/***/ }),\n/* 437 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar sceneIndex_1 = __webpack_require__(438);\r\n\tvar menu_1 = __webpack_require__(439);\r\n\tvar clickable_1 = __webpack_require__(442);\r\n\tvar powerSelector_1 = __webpack_require__(443);\r\n\tvar active_1 = __webpack_require__(444);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar loadHelper_1 = __webpack_require__(346);\r\n\tvar localStorageHelper_1 = __webpack_require__(441);\r\n\tvar assetsLoader_1 = __webpack_require__(2);\r\n\tvar powerSelectionMenu_1 = __webpack_require__(445);\r\n\tvar newGameMenu_1 = __webpack_require__(447);\r\n\tvar restartMenu_1 = __webpack_require__(448);\r\n\tvar creditMenu_1 = __webpack_require__(449);\r\n\tvar SceneHandler = (function () {\r\n\t    function SceneHandler(renderer, canvasSize, canvas, game) {\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.canvas = canvas;\r\n\t        this.game = game;\r\n\t        this.started = false;\r\n\t        this.currentScene = sceneIndex_1.SceneIndex.StartMenu;\r\n\t        this.lastCurrentScene = sceneIndex_1.SceneIndex.StartMenu;\r\n\t        this.scenes = new Map();\r\n\t        this.mousePosition = [-100, 0];\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.click = false;\r\n\t        this.clicked = false;\r\n\t        this.importClicked = false;\r\n\t        this.playerlist = document.getElementById(\"playerlist\");\r\n\t        this.textInput = document.getElementById(\"textinput\");\r\n\t        this.textArea = document.getElementById(\"textarea\");\r\n\t        this.fileUploadButton = document.getElementById(\"fileupload\");\r\n\t        this.fileUploadButtonHighlight = document.getElementById(\"fileuploadHighlight\");\r\n\t        this.uploadInput = document.getElementById(\"importLink\");\r\n\t        this.modal = document.getElementById(\"modal\");\r\n\t        this.loadHelper = loadHelper_1.LoadHelper.getInstance();\r\n\t        this.localStorageHelper = localStorageHelper_1.LocalStorageHelper.getInstance();\r\n\t        this.assetLoader = new assetsLoader_1.AssetsLoader();\r\n\t        var startMenu = new menu_1.Menu([\r\n\t            this.createNewGameButton(),\r\n\t            this.createContinueButton(),\r\n\t            this.createLoadButton(),\r\n\t            this.createCreditsButton()\r\n\t        ], [], this, this.textArea, renderer, canvasSize, 100, [512, 512], true);\r\n\t        startMenu.load();\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.StartMenu, startMenu);\r\n\t        var loadMenu = new menu_1.Menu([\r\n\t            this.createToStartMenuBack(new model_1.Rectangle((this.canvasSize[0] / 2) - 150, 235, 300, 50))\r\n\t        ], [], this, this.textArea, renderer, canvasSize, 100, [512, 512], true);\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.LoadMenu, loadMenu);\r\n\t        this.loadLevelSelectionScreen();\r\n\t        this.loadLevelFinishedScreen();\r\n\t        this.loadNewGameMenu();\r\n\t        this.loadRestartMenu();\r\n\t        this.loadCreditMenu();\r\n\t        this.createEventListerners();\r\n\t    }\r\n\t    SceneHandler.prototype.update = function () {\r\n\t        var currentScene = this.scenes.get(this.currentScene);\r\n\t        if (this.currentScene != this.lastCurrentScene) {\r\n\t            this.textArea.style.visibility = \"hidden\";\r\n\t            currentScene.load();\r\n\t        }\r\n\t        this.lastCurrentScene = this.currentScene;\r\n\t        if (this.click && !this.clicked) {\r\n\t            this.clicked = true;\r\n\t            currentScene.click(this.mousePosition);\r\n\t        }\r\n\t        currentScene.mouseOver(this.mousePosition);\r\n\t    };\r\n\t    SceneHandler.prototype.render = function () {\r\n\t        this.scenes.get(this.currentScene).render();\r\n\t        this.renderer.render(this.createMouseRenderCall(), [0, 0]);\r\n\t    };\r\n\t    SceneHandler.prototype.setCurrentLevel = function (level) {\r\n\t        var scene = this.scenes.get(sceneIndex_1.SceneIndex.RestartMenu);\r\n\t        if (!isNaN(+level)) {\r\n\t            scene.currentLevel = +level;\r\n\t        }\r\n\t    };\r\n\t    SceneHandler.prototype.createMouseRenderCall = function () {\r\n\t        var renderCalls = new Map();\r\n\t        var renderCall = new render_1.RenderCall();\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(this.mousePosition[0], this.mousePosition[1], 32, 32, renderCall.vertecies);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        renderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, 180);\r\n\t        renderCalls.set(-1, renderCall);\r\n\t        return renderCalls;\r\n\t    };\r\n\t    SceneHandler.prototype.loadLevelFinishedScreen = function () {\r\n\t        var levelFinishedScene = new powerSelectionMenu_1.PowerSelectionMenu(this, this.textArea, this.renderer, this.canvasSize, 100, [512, 512], false, [\r\n\t            this.createNextLevelButton(false),\r\n\t            this.createToStartMenuBack(new model_1.Rectangle(this.canvasSize[0] / 2 - 450, 650, 250, 42))\r\n\t        ], [], [\r\n\t            this.newPowerSelector(150, 100, 150, [105, 102, 106, 103, 107, 104]),\r\n\t            this.newPowerSelector(350, 100, 150, [111, 108, 112, 109, 113, 110]),\r\n\t            this.newPowerSelector(550, 100, 150, [117, 114, 118, 115, 119, 116])\r\n\t        ]);\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.LevelFinished, levelFinishedScene);\r\n\t    };\r\n\t    SceneHandler.prototype.loadRestartMenu = function () {\r\n\t        var restartMenu = new restartMenu_1.RestartMenu([\r\n\t            this.createToStartMenuBack(new model_1.Rectangle(this.canvasSize[0] / 2 - 450, 650, 250, 42))\r\n\t        ], [], this, this.textArea, this.renderer, this.canvasSize, 100, [512, 512], false, this.game);\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.RestartMenu, restartMenu);\r\n\t    };\r\n\t    SceneHandler.prototype.loadCreditMenu = function () {\r\n\t        var creditMenu = new creditMenu_1.CreditMenu([\r\n\t            this.createToStartMenuBackFromLevelMenu()\r\n\t        ], [], this, this.textArea, this.renderer, this.canvasSize, 100, [512, 512], false, this.game);\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.CreditsMenu, creditMenu);\r\n\t    };\r\n\t    SceneHandler.prototype.loadNewGameMenu = function () {\r\n\t        var newGameMenu = new newGameMenu_1.NewGameMenu([\r\n\t            this.createToStartMenuBack(new model_1.Rectangle(this.canvasSize[0] / 2 - 450, 650, 250, 42)),\r\n\t            this.createToPowerSelectorMenuButton(true),\r\n\t        ], [], this, this.textArea, this.renderer, this.canvasSize, 100, [512, 512], false, this.textInput, this.playerlist);\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.NewGameMenu, newGameMenu);\r\n\t    };\r\n\t    SceneHandler.prototype.newPowerSelector = function (x, y, offset, assets) {\r\n\t        var active1 = new active_1.Active(0, 1, false, new model_1.Rectangle(x, y, 100, 100), assets[0], assets[1], [100, 100]);\r\n\t        var active2 = new active_1.Active(0, 2, false, new model_1.Rectangle(x, y + offset, 100, 100), assets[2], assets[3], [100, 100]);\r\n\t        var active3 = new active_1.Active(0, 3, false, new model_1.Rectangle(x, y + offset * 2, 100, 100), assets[4], assets[5], [100, 100]);\r\n\t        return new powerSelector_1.PowerSelector([active1, active2, active3]);\r\n\t    };\r\n\t    SceneHandler.prototype.loadLevelSelectionScreen = function () {\r\n\t        var _this = this;\r\n\t        var onLoad = function () {\r\n\t            levelSelectionMenu.clickables = _this.createLevelMenuButtons().concat([\r\n\t                _this.createToStartMenuBackFromLevelMenu()\r\n\t            ]);\r\n\t        };\r\n\t        var levelSelectionMenu = new menu_1.Menu(this.createLevelMenuButtons().concat([\r\n\t            this.createToStartMenuBackFromLevelMenu()\r\n\t        ]), [], this, this.textArea, this.renderer, this.canvasSize, 100, [512, 512], false, onLoad);\r\n\t        this.scenes.set(sceneIndex_1.SceneIndex.LevelSelection, levelSelectionMenu);\r\n\t        return levelSelectionMenu;\r\n\t    };\r\n\t    SceneHandler.prototype.createEventListerners = function () {\r\n\t        var _this = this;\r\n\t        window.addEventListener(\"mousemove\", function (event) {\r\n\t            var relativeElement = _this.canvas.getBoundingClientRect();\r\n\t            var x = event.clientX - relativeElement.left;\r\n\t            var y = event.clientY - relativeElement.top;\r\n\t            _this.mousePosition = [x, y];\r\n\t        });\r\n\t        window.addEventListener(\"mousedown\", function (event) {\r\n\t            _this.click = true;\r\n\t        });\r\n\t        window.addEventListener(\"mouseup\", function (event) {\r\n\t            _this.clicked = false;\r\n\t            _this.click = false;\r\n\t        });\r\n\t        this.uploadInput.addEventListener(\"change\", function () {\r\n\t            var fileReader = new FileReader();\r\n\t            fileReader.onload = function (evt) {\r\n\t                _this.uploadInput.value = \"\";\r\n\t                var target = evt.target;\r\n\t                try {\r\n\t                    var leveldata = JSON.parse(target.result);\r\n\t                    if (_this.loadHelper.validateLevelData(leveldata)) {\r\n\t                        _this.game.loadLevel(leveldata);\r\n\t                        var restartMenu = _this.scenes.get(sceneIndex_1.SceneIndex.RestartMenu);\r\n\t                        restartMenu.tempLevel = leveldata;\r\n\t                        _this.started = true;\r\n\t                        _this.fileUploadButton.style.visibility = \"hidden\";\r\n\t                        _this.fileUploadButtonHighlight.style.visibility = \"hidden\";\r\n\t                    }\r\n\t                    else {\r\n\t                        _this.modal.style.display = \"block\";\r\n\t                        _this.modal.innerHTML += \"Invalid level data!\";\r\n\t                    }\r\n\t                }\r\n\t                catch (e) {\r\n\t                    _this.modal.style.display = \"block\";\r\n\t                    _this.modal.innerHTML += \"Error loading level!\";\r\n\t                }\r\n\t            };\r\n\t            fileReader.readAsText(_this.uploadInput.files[0], \"UTF-8\");\r\n\t        });\r\n\t    };\r\n\t    SceneHandler.prototype.levelCompleted = function (level) {\r\n\t        this.started = false;\r\n\t        this.localStorageHelper.setCurrentProgress((+level + 1));\r\n\t        this.currentScene = sceneIndex_1.SceneIndex.LevelFinished;\r\n\t        this.scenes.get(this.currentScene).load();\r\n\t    };\r\n\t    SceneHandler.prototype.createLoadButton = function () {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.LoadMenu;\r\n\t            _this.fileUploadButton.style.visibility = \"visible\";\r\n\t        };\r\n\t        return new clickable_1.Clickable(new model_1.Rectangle((this.canvasSize[0] / 2) - 150, 295, 300, 50), 179, 181, 183, onClick);\r\n\t    };\r\n\t    SceneHandler.prototype.createCreditsButton = function () {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.CreditsMenu;\r\n\t        };\r\n\t        return new clickable_1.Clickable(new model_1.Rectangle((this.canvasSize[0] / 2) - 150, 355, 300, 50), 179, 181, 624, onClick);\r\n\t    };\r\n\t    SceneHandler.prototype.createNextLevelButton = function (disabled) {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.textInput.style.visibility = \"hidden\";\r\n\t            _this.textArea.style.visibility = \"hidden\";\r\n\t            _this.playerlist.style.visibility = \"hidden\";\r\n\t            var progress = _this.localStorageHelper.getCurrentProgress();\r\n\t            _this.assetLoader.getLevel(progress.completedLevels.toString()).subscribe(function (it) {\r\n\t                _this.game.loadLevel(it);\r\n\t                _this.started = true;\r\n\t            });\r\n\t        };\r\n\t        var clickable;\r\n\t        if (disabled) {\r\n\t            clickable = new clickable_1.Clickable(new model_1.Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick, 554);\r\n\t        }\r\n\t        else {\r\n\t            clickable = new clickable_1.Clickable(new model_1.Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick);\r\n\t        }\r\n\t        return clickable;\r\n\t    };\r\n\t    SceneHandler.prototype.createToPowerSelectorMenuButton = function (disabled) {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.textInput.style.visibility = \"hidden\";\r\n\t            _this.textArea.style.visibility = \"hidden\";\r\n\t            _this.playerlist.style.visibility = \"hidden\";\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.LevelFinished;\r\n\t        };\r\n\t        var clickable;\r\n\t        if (disabled) {\r\n\t            clickable = new clickable_1.Clickable(new model_1.Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick, 554);\r\n\t        }\r\n\t        else {\r\n\t            clickable = new clickable_1.Clickable(new model_1.Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick);\r\n\t        }\r\n\t        return clickable;\r\n\t    };\r\n\t    SceneHandler.prototype.createNewGameButton = function () {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.NewGameMenu;\r\n\t        };\r\n\t        return new clickable_1.Clickable(new model_1.Rectangle((this.canvasSize[0] / 2) - 150, 175, 300, 50), 179, 181, 182, onClick);\r\n\t    };\r\n\t    SceneHandler.prototype.createContinueButton = function () {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.LevelSelection;\r\n\t        };\r\n\t        return new clickable_1.Clickable(new model_1.Rectangle((this.canvasSize[0] / 2) - 150, 235, 300, 50), 179, 181, 184, onClick, 554);\r\n\t    };\r\n\t    SceneHandler.prototype.createToStartMenuBack = function (area) {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.StartMenu;\r\n\t            _this.fileUploadButton.style.visibility = \"hidden\";\r\n\t            _this.fileUploadButtonHighlight.style.visibility = \"hidden\";\r\n\t            _this.textArea.style.visibility = \"hidden\";\r\n\t            _this.textInput.style.visibility = \"hidden\";\r\n\t            _this.playerlist.style.visibility = \"hidden\";\r\n\t        };\r\n\t        return new clickable_1.Clickable(area, 179, 181, 186, onClick);\r\n\t    };\r\n\t    SceneHandler.prototype.createToStartMenuBackFromLevelMenu = function () {\r\n\t        var _this = this;\r\n\t        var onClick = function () {\r\n\t            _this.currentScene = sceneIndex_1.SceneIndex.StartMenu;\r\n\t        };\r\n\t        return new clickable_1.Clickable(new model_1.Rectangle((this.canvasSize[0] / 2) - 150, 700, 300, 50), 179, 181, 186, onClick);\r\n\t    };\r\n\t    SceneHandler.prototype.createLevelMenuButtons = function () {\r\n\t        var progress = this.localStorageHelper.getCurrentProgress();\r\n\t        var clickables = [];\r\n\t        var collumns = 5;\r\n\t        for (var i = 0; i < 10; i++) {\r\n\t            var y = Math.floor(i / collumns);\r\n\t            var x = i % collumns;\r\n\t            var disabled = !(progress.completedLevels >= i);\r\n\t            clickables.push(this.createLevelButton(x, y, i, disabled));\r\n\t        }\r\n\t        return clickables;\r\n\t    };\r\n\t    SceneHandler.prototype.createLevelButton = function (x, y, level, disabled) {\r\n\t        var _this = this;\r\n\t        var onClick;\r\n\t        if (disabled) {\r\n\t            onClick = function () {\r\n\t            };\r\n\t        }\r\n\t        else {\r\n\t            onClick = function () {\r\n\t                _this.assetLoader.getLevel(level.toString()).subscribe(function (it) {\r\n\t                    _this.game.loadLevel(it);\r\n\t                    _this.started = true;\r\n\t                });\r\n\t            };\r\n\t        }\r\n\t        var buttonTexture;\r\n\t        if (disabled) {\r\n\t            buttonTexture = 187;\r\n\t        }\r\n\t        else {\r\n\t            buttonTexture = 550;\r\n\t        }\r\n\t        return new clickable_1.Clickable(new model_1.Rectangle(100 + (x * 200), 100 + (y * 200), 200, 100), buttonTexture, buttonTexture, 188 + level, onClick);\r\n\t    };\r\n\t    return SceneHandler;\r\n\t}());\r\n\texports.SceneHandler = SceneHandler;\r\n\n\n/***/ }),\n/* 438 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\r\n\t(function (SceneIndex) {\r\n\t    SceneIndex[SceneIndex[\"StartMenu\"] = 1] = \"StartMenu\";\r\n\t    SceneIndex[SceneIndex[\"LoadMenu\"] = 2] = \"LoadMenu\";\r\n\t    SceneIndex[SceneIndex[\"LevelFinished\"] = 3] = \"LevelFinished\";\r\n\t    SceneIndex[SceneIndex[\"NewGameMenu\"] = 4] = \"NewGameMenu\";\r\n\t    SceneIndex[SceneIndex[\"LevelSelection\"] = 5] = \"LevelSelection\";\r\n\t    SceneIndex[SceneIndex[\"RestartMenu\"] = 6] = \"RestartMenu\";\r\n\t    SceneIndex[SceneIndex[\"CreditsMenu\"] = 7] = \"CreditsMenu\";\r\n\t})(exports.SceneIndex || (exports.SceneIndex = {}));\r\n\tvar SceneIndex = exports.SceneIndex;\r\n\n\n/***/ }),\n/* 439 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar scene_1 = __webpack_require__(440);\r\n\tvar sceneIndex_1 = __webpack_require__(438);\r\n\tvar localStorageHelper_1 = __webpack_require__(441);\r\n\tvar Menu = (function (_super) {\r\n\t    __extends(Menu, _super);\r\n\t    function Menu(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu, onLoad) {\r\n\t        _super.call(this, sceneHandler, renderer, canvasSize, background, tileSize, menu);\r\n\t        this.clickables = clickables;\r\n\t        this.text = text;\r\n\t        this.sceneHandler = sceneHandler;\r\n\t        this.textArea = textArea;\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.background = background;\r\n\t        this.tileSize = tileSize;\r\n\t        this.menu = menu;\r\n\t        this.onLoad = onLoad;\r\n\t        this.createRenderCalls();\r\n\t    }\r\n\t    Menu.prototype.update = function () {\r\n\t    };\r\n\t    Menu.prototype.load = function () {\r\n\t        if (this.onLoad) {\r\n\t            this.onLoad();\r\n\t        }\r\n\t        if (this.sceneHandler.currentScene == sceneIndex_1.SceneIndex.StartMenu) {\r\n\t            if (localStorageHelper_1.LocalStorageHelper.getInstance().getProgression().length > 0) {\r\n\t                this.clickables[1].disabled = false;\r\n\t            }\r\n\t            else {\r\n\t                this.clickables[1].disabled = true;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Menu.prototype.render = function () {\r\n\t        var rendercall = new render_1.RenderCall();\r\n\t        for (var _i = 0, _a = this.clickables; _i < _a.length; _i++) {\r\n\t            var clickable = _a[_i];\r\n\t            rendercall = clickable.createRenderCall(rendercall);\r\n\t        }\r\n\t        for (var _b = 0, _c = this.text; _b < _c.length; _b++) {\r\n\t            var t = _c[_b];\r\n\t            rendercall.vertecies = this.renderHelper.getVertecies(t.x, t.y, t.width, t.height, rendercall.vertecies);\r\n\t            rendercall.indecies = this.renderHelper.getIndecies(rendercall.indecies);\r\n\t            rendercall.textureCoords = this.renderHelper.getTextureCoordinates(rendercall.textureCoords, t.key);\r\n\t        }\r\n\t        this.renderCalls.set(-1, rendercall);\r\n\t        this.renderer.render(this.renderCalls, [0, 0]);\r\n\t        _super.prototype.render.call(this);\r\n\t    };\r\n\t    Menu.prototype.click = function (mousePosition) {\r\n\t        for (var _i = 0, _a = this.clickables; _i < _a.length; _i++) {\r\n\t            var clickable = _a[_i];\r\n\t            clickable.click(mousePosition);\r\n\t        }\r\n\t    };\r\n\t    Menu.prototype.mouseOver = function (mousePosition) {\r\n\t        for (var _i = 0, _a = this.clickables; _i < _a.length; _i++) {\r\n\t            var clickable = _a[_i];\r\n\t            clickable.mouseOver(mousePosition);\r\n\t        }\r\n\t    };\r\n\t    Menu.prototype.createRenderCalls = function () {\r\n\t        _super.prototype.createRenderCalls.call(this);\r\n\t    };\r\n\t    return Menu;\r\n\t}(scene_1.Scene));\r\n\texports.Menu = Menu;\r\n\n\n/***/ }),\n/* 440 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar renderHelper_1 = __webpack_require__(361);\r\n\tvar Scene = (function () {\r\n\t    function Scene(sceneHandler, renderer, canvasSize, background, tileSize, menu) {\r\n\t        this.sceneHandler = sceneHandler;\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.background = background;\r\n\t        this.tileSize = tileSize;\r\n\t        this.menu = menu;\r\n\t        this.renderCalls = new Map();\r\n\t        this.renderHelper = renderHelper_1.RenderHelper.getInstance();\r\n\t    }\r\n\t    Scene.prototype.update = function () {\r\n\t    };\r\n\t    Scene.prototype.render = function () {\r\n\t        this.renderCalls = new Map();\r\n\t        this.createRenderCalls();\r\n\t    };\r\n\t    Scene.prototype.load = function () {\r\n\t    };\r\n\t    Scene.prototype.click = function (mousePosition) {\r\n\t    };\r\n\t    Scene.prototype.mouseOver = function (mousePosition) {\r\n\t    };\r\n\t    Scene.prototype.createRenderCalls = function () {\r\n\t        this.renderCalls = this.createBackGround(this.renderCalls);\r\n\t        if (this.menu) {\r\n\t            this.renderCalls = this.createMenu(this.renderCalls);\r\n\t        }\r\n\t    };\r\n\t    Scene.prototype.createMenu = function (renderCalls) {\r\n\t        var menu = new render_1.RenderCall();\r\n\t        menu.vertecies = this.renderHelper.getVertecies((this.canvasSize[0] / 2) - 256, 50, 512, 700, menu.vertecies);\r\n\t        menu.indecies = this.renderHelper.getIndecies(menu.indecies);\r\n\t        menu.textureCoords = this.renderHelper.getTiledTextureCoordinates(new model_1.Rectangle(0, 0, 288, 295), menu.textureCoords, [512, 512]);\r\n\t        menu.key = 101;\r\n\t        renderCalls.set(menu.key, menu);\r\n\t        return renderCalls;\r\n\t    };\r\n\t    Scene.prototype.createBackGround = function (renderCalls) {\r\n\t        var background = new render_1.RenderCall();\r\n\t        background.vertecies = this.renderHelper.getVertecies(0, 0, this.canvasSize[0], this.canvasSize[1], background.vertecies);\r\n\t        background.indecies = this.renderHelper.getIndecies(background.indecies);\r\n\t        background.textureCoords = this.renderHelper.getTiledTextureCoordinates(new model_1.Rectangle(0, 0, this.canvasSize[0], this.canvasSize[0]), background.textureCoords, this.tileSize);\r\n\t        background.key = this.background;\r\n\t        renderCalls.set(background.key, background);\r\n\t        return renderCalls;\r\n\t    };\r\n\t    return Scene;\r\n\t}());\r\n\texports.Scene = Scene;\r\n\n\n/***/ }),\n/* 441 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar LocalStorageHelper = (function () {\r\n\t    function LocalStorageHelper() {\r\n\t        this.progressionKey = \"progression\";\r\n\t    }\r\n\t    LocalStorageHelper.prototype.constrcuctor = function () {\r\n\t        if (LocalStorageHelper.instance) {\r\n\t            throw new Error('Static class cant be instanced!');\r\n\t        }\r\n\t        LocalStorageHelper.instance = this;\r\n\t    };\r\n\t    LocalStorageHelper.getInstance = function () {\r\n\t        return LocalStorageHelper.instance;\r\n\t    };\r\n\t    LocalStorageHelper.prototype.newPlayer = function (name) {\r\n\t        var progression = this.getProgression();\r\n\t        for (var _i = 0, progression_1 = progression; _i < progression_1.length; _i++) {\r\n\t            var p = progression_1[_i];\r\n\t            p.active = false;\r\n\t            this.saveProgress(p);\r\n\t        }\r\n\t        var progress = new model_1.Progress();\r\n\t        progress.playerName = name;\r\n\t        progress.active = true;\r\n\t        progress.completedLevels = 0;\r\n\t        progress.fire = 0;\r\n\t        progress.frost = 0;\r\n\t        progress.defence = 0;\r\n\t        progress.hp = 0;\r\n\t        progress.mana = 0;\r\n\t        this.saveProgress(progress);\r\n\t    };\r\n\t    LocalStorageHelper.prototype.setPowers = function (fire, frost, defence) {\r\n\t        var progress = this.getCurrentProgress();\r\n\t        progress.fire = fire;\r\n\t        progress.frost = frost;\r\n\t        progress.defence = defence;\r\n\t        this.saveProgress(progress);\r\n\t    };\r\n\t    LocalStorageHelper.prototype.setCurrentProgress = function (level) {\r\n\t        var progress = this.getCurrentProgress();\r\n\t        if (progress.completedLevels < level) {\r\n\t            progress.completedLevels = level;\r\n\t        }\r\n\t        this.saveProgress(progress);\r\n\t    };\r\n\t    LocalStorageHelper.prototype.getProgression = function () {\r\n\t        var progression = this.getItem(this.progressionKey);\r\n\t        if (progression == null) {\r\n\t            progression = [];\r\n\t        }\r\n\t        return progression;\r\n\t    };\r\n\t    LocalStorageHelper.prototype.getCurrentProgress = function () {\r\n\t        var progression = this.getItem(this.progressionKey);\r\n\t        if (!progression) {\r\n\t            progression = [this.defaultProgress()];\r\n\t        }\r\n\t        return progression.find(function (it) { return it.active === true; });\r\n\t    };\r\n\t    LocalStorageHelper.prototype.saveProgress = function (progress) {\r\n\t        var progression = this.getItem(this.progressionKey);\r\n\t        if (!progression) {\r\n\t            progression = [];\r\n\t        }\r\n\t        var prg = progression.find(function (it) { return it.playerName == progress.playerName; });\r\n\t        if (prg) {\r\n\t            var index = progression.indexOf(prg);\r\n\t            if (index != -1) {\r\n\t                progression.splice(index, 1);\r\n\t            }\r\n\t            progression.push(progress);\r\n\t        }\r\n\t        else {\r\n\t            progression.push(progress);\r\n\t        }\r\n\t        this.setItem(this.progressionKey, progression);\r\n\t    };\r\n\t    LocalStorageHelper.prototype.setActive = function (name) {\r\n\t        var progression = this.getProgression();\r\n\t        for (var _i = 0, progression_2 = progression; _i < progression_2.length; _i++) {\r\n\t            var progress = progression_2[_i];\r\n\t            if (progress.playerName == name) {\r\n\t                progress.active = true;\r\n\t            }\r\n\t            else {\r\n\t                progress.active = false;\r\n\t            }\r\n\t            this.saveProgress(progress);\r\n\t        }\r\n\t    };\r\n\t    LocalStorageHelper.prototype.defaultProgress = function () {\r\n\t        var progress = new model_1.Progress();\r\n\t        progress.playerName = \"nouser\";\r\n\t        progress.active = true;\r\n\t        progress.completedLevels = 0;\r\n\t        progress.fire = 0;\r\n\t        progress.frost = 0;\r\n\t        progress.defence = 0;\r\n\t        progress.hp = 0;\r\n\t        progress.mana = 0;\r\n\t        return progress;\r\n\t    };\r\n\t    LocalStorageHelper.prototype.getItem = function (key) {\r\n\t        return JSON.parse(localStorage.getItem(key));\r\n\t    };\r\n\t    LocalStorageHelper.prototype.setItem = function (key, value) {\r\n\t        localStorage.setItem(key, JSON.stringify(value));\r\n\t    };\r\n\t    LocalStorageHelper.instance = new LocalStorageHelper();\r\n\t    return LocalStorageHelper;\r\n\t}());\r\n\texports.LocalStorageHelper = LocalStorageHelper;\r\n\n\n/***/ }),\n/* 442 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar Clickable = (function () {\r\n\t    function Clickable(area, buttonTexture, hoverTexture, textTexture, onClick, disabledTexture) {\r\n\t        this.area = area;\r\n\t        this.buttonTexture = buttonTexture;\r\n\t        this.hoverTexture = hoverTexture;\r\n\t        this.textTexture = textTexture;\r\n\t        this.onClick = onClick;\r\n\t        this.disabledTexture = disabledTexture;\r\n\t        this.disabled = false;\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t        this.hover = false;\r\n\t        this.baseTextureCoords = this.renderHelper.getTextureCoordinates([], buttonTexture);\r\n\t        this.hoverTextureCoords = this.renderHelper.getTextureCoordinates([], hoverTexture);\r\n\t        this.textTextureCoords = this.renderHelper.getTextureCoordinates([], textTexture);\r\n\t        if (disabledTexture != null) {\r\n\t            this.disabledTextureCoords = this.renderHelper.getTextureCoordinates([], disabledTexture);\r\n\t        }\r\n\t    }\r\n\t    Clickable.prototype.click = function (mouseposition) {\r\n\t        if (this.isWithinArea(mouseposition)) {\r\n\t            if (!this.disabled) {\r\n\t                this.onClick();\r\n\t            }\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    Clickable.prototype.mouseOver = function (mouseposition) {\r\n\t        if (this.isWithinArea(mouseposition)) {\r\n\t            this.hover = true;\r\n\t        }\r\n\t        else {\r\n\t            this.hover = false;\r\n\t        }\r\n\t    };\r\n\t    Clickable.prototype.createRenderCall = function (renderCall) {\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.getTexture());\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.textTextureCoords);\r\n\t        return renderCall;\r\n\t    };\r\n\t    Clickable.prototype.isWithinArea = function (mouseposition) {\r\n\t        return this.collisionDetection.aabbCheck(new model_1.Rectangle(mouseposition[0], mouseposition[1], 1, 1), this.area);\r\n\t    };\r\n\t    Clickable.prototype.getTexture = function () {\r\n\t        if (this.disabled && this.disabledTexture != null) {\r\n\t            return this.disabledTextureCoords;\r\n\t        }\r\n\t        if (this.hover) {\r\n\t            return this.hoverTextureCoords;\r\n\t        }\r\n\t        else {\r\n\t            return this.baseTextureCoords;\r\n\t        }\r\n\t    };\r\n\t    return Clickable;\r\n\t}());\r\n\texports.Clickable = Clickable;\r\n\n\n/***/ }),\n/* 443 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar PowerSelector = (function () {\r\n\t    function PowerSelector(actives) {\r\n\t        this.actives = actives;\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t    }\r\n\t    PowerSelector.prototype.render = function (renderCalls) {\r\n\t        for (var _i = 0, _a = this.actives; _i < _a.length; _i++) {\r\n\t            var active = _a[_i];\r\n\t            active.createRenderCall(renderCalls);\r\n\t        }\r\n\t        return renderCalls;\r\n\t    };\r\n\t    PowerSelector.prototype.click = function (mouseposition) {\r\n\t        for (var _i = 0, _a = this.actives; _i < _a.length; _i++) {\r\n\t            var active = _a[_i];\r\n\t            if (!this.actives[0].active) {\r\n\t                this.actives[0].click(mouseposition);\r\n\t                break;\r\n\t            }\r\n\t            else if (!this.actives[1].active) {\r\n\t                this.actives[1].click(mouseposition);\r\n\t                break;\r\n\t            }\r\n\t            else if (!this.actives[2].active) {\r\n\t                this.actives[2].click(mouseposition);\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    PowerSelector.prototype.getPoints = function () {\r\n\t        return this.actives[0].value + this.actives[1].value + this.actives[2].value;\r\n\t    };\r\n\t    PowerSelector.prototype.fill = function (points) {\r\n\t        var active1 = this.actives[0];\r\n\t        var active2 = this.actives[1];\r\n\t        var active3 = this.actives[2];\r\n\t        active1.reset();\r\n\t        active2.reset();\r\n\t        active3.reset();\r\n\t        for (var i = 0; i < points; i++) {\r\n\t            if (!active1.active) {\r\n\t                active1.addPoint();\r\n\t            }\r\n\t            else if (!active2.active) {\r\n\t                active2.addPoint();\r\n\t            }\r\n\t            else if (!active3.active) {\r\n\t                active3.addPoint();\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return PowerSelector;\r\n\t}());\r\n\texports.PowerSelector = PowerSelector;\r\n\n\n/***/ }),\n/* 444 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar Active = (function () {\r\n\t    function Active(value, maxValue, active, area, asset, activeAsset, size) {\r\n\t        this.value = value;\r\n\t        this.maxValue = maxValue;\r\n\t        this.active = active;\r\n\t        this.area = area;\r\n\t        this.asset = asset;\r\n\t        this.activeAsset = activeAsset;\r\n\t        this.size = size;\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t    }\r\n\t    Active.prototype.createRenderCall = function (renderCalls) {\r\n\t        renderCalls = this.addRenderCall(renderCalls, this.asset, false);\r\n\t        renderCalls = this.addRenderCall(renderCalls, this.activeAsset, true);\r\n\t        return renderCalls;\r\n\t    };\r\n\t    Active.prototype.click = function (mouseposition) {\r\n\t        if (this.isWithinArea(mouseposition)) {\r\n\t            this.addPoint();\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    Active.prototype.addPoint = function () {\r\n\t        this.value++;\r\n\t        if (this.value == this.maxValue) {\r\n\t            this.active = true;\r\n\t        }\r\n\t    };\r\n\t    Active.prototype.reset = function () {\r\n\t        this.value = 0;\r\n\t        this.active = false;\r\n\t    };\r\n\t    Active.prototype.addRenderCall = function (renderCalls, asset, partial) {\r\n\t        var renderCall;\r\n\t        if (renderCalls.has(asset)) {\r\n\t            renderCall = renderCalls.get(asset);\r\n\t        }\r\n\t        else {\r\n\t            renderCall = new render_1.RenderCall();\r\n\t        }\r\n\t        if (partial) {\r\n\t            var area = new model_1.Rectangle(this.area.x, this.area.y, this.area.width, this.area.height * (this.value / this.maxValue));\r\n\t            renderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(area, renderCall.textureCoords, this.size);\r\n\t            renderCall.vertecies = this.renderHelper.getVertecies(area.x, area.y, area.width, area.height, renderCall.vertecies);\r\n\t        }\r\n\t        else {\r\n\t            renderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(this.area, renderCall.textureCoords, this.size);\r\n\t            renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n\t        }\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        renderCalls.set(asset, renderCall);\r\n\t        return renderCalls;\r\n\t    };\r\n\t    Active.prototype.isWithinArea = function (mouseposition) {\r\n\t        return this.collisionDetection.aabbCheck(new model_1.Rectangle(mouseposition[0], mouseposition[1], 1, 1), this.area);\r\n\t    };\r\n\t    return Active;\r\n\t}());\r\n\texports.Active = Active;\r\n\n\n/***/ }),\n/* 445 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar menu_1 = __webpack_require__(439);\r\n\tvar localStorageHelper_1 = __webpack_require__(441);\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar simpleClickable_1 = __webpack_require__(446);\r\n\tvar PowerSelectionMenu = (function (_super) {\r\n\t    __extends(PowerSelectionMenu, _super);\r\n\t    function PowerSelectionMenu(sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu, clickables, text, powerSelectors) {\r\n\t        _super.call(this, clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n\t        this.sceneHandler = sceneHandler;\r\n\t        this.textArea = textArea;\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.background = background;\r\n\t        this.tileSize = tileSize;\r\n\t        this.menu = menu;\r\n\t        this.clickables = clickables;\r\n\t        this.text = text;\r\n\t        this.powerSelectors = powerSelectors;\r\n\t        this.localStorageHelper = localStorageHelper_1.LocalStorageHelper.getInstance();\r\n\t        this.load();\r\n\t        this.textArea.style.visibility = \"hidden\";\r\n\t    }\r\n\t    PowerSelectionMenu.prototype.render = function () {\r\n\t        for (var _i = 0, _a = this.powerSelectors; _i < _a.length; _i++) {\r\n\t            var powerSelector = _a[_i];\r\n\t            this.renderCalls = powerSelector.render(this.renderCalls);\r\n\t        }\r\n\t        for (var _b = 0, _c = this.simpleClickables; _b < _c.length; _b++) {\r\n\t            var simpleClickable = _c[_b];\r\n\t            this.renderCalls = simpleClickable.createRenderCall(this.renderCalls);\r\n\t        }\r\n\t        _super.prototype.render.call(this);\r\n\t    };\r\n\t    PowerSelectionMenu.prototype.click = function (mousePosition) {\r\n\t        _super.prototype.click.call(this, mousePosition);\r\n\t        for (var _i = 0, _a = this.powerSelectors; _i < _a.length; _i++) {\r\n\t            var powerSelector = _a[_i];\r\n\t            if (this.getAvailablePoints() > 0) {\r\n\t                powerSelector.click(mousePosition);\r\n\t            }\r\n\t        }\r\n\t        for (var _b = 0, _c = this.simpleClickables; _b < _c.length; _b++) {\r\n\t            var simpleClickable = _c[_b];\r\n\t            if (this.getAvailablePoints() > 0) {\r\n\t                simpleClickable.click(mousePosition);\r\n\t            }\r\n\t        }\r\n\t        this.progress.fire = this.powerSelectors[0].getPoints();\r\n\t        this.progress.frost = this.powerSelectors[1].getPoints();\r\n\t        this.progress.defence = this.powerSelectors[2].getPoints();\r\n\t        this.textArea.innerHTML = \"Skillpoints:\" + this.getAvailablePoints();\r\n\t        this.localStorageHelper.saveProgress(this.progress);\r\n\t    };\r\n\t    PowerSelectionMenu.prototype.load = function () {\r\n\t        var _this = this;\r\n\t        this.progress = this.localStorageHelper.getCurrentProgress();\r\n\t        var onHpClick = function () {\r\n\t            _this.progress.hp++;\r\n\t        };\r\n\t        var hpClickable = new simpleClickable_1.SimpleClickable(new model_1.Rectangle(750, 100, 100, 100), 120, [100, 100], onHpClick);\r\n\t        var onManaClick = function () {\r\n\t            _this.progress.mana++;\r\n\t        };\r\n\t        var manaClickable = new simpleClickable_1.SimpleClickable(new model_1.Rectangle(950, 100, 100, 100), 121, [256, 256], onManaClick);\r\n\t        this.simpleClickables = [hpClickable, manaClickable];\r\n\t        this.powerSelectors[0].fill(this.progress.fire);\r\n\t        this.powerSelectors[1].fill(this.progress.frost);\r\n\t        this.powerSelectors[2].fill(this.progress.defence);\r\n\t        this.textArea.style.visibility = \"visible\";\r\n\t        this.textArea.innerHTML = \"Skillpoints:\" + this.getAvailablePoints();\r\n\t    };\r\n\t    PowerSelectionMenu.prototype.getAvailablePoints = function () {\r\n\t        return (((this.progress.completedLevels + 1) * 2) - (this.progress.fire + this.progress.frost + this.progress.defence + this.progress.hp + this.progress.mana));\r\n\t    };\r\n\t    return PowerSelectionMenu;\r\n\t}(menu_1.Menu));\r\n\texports.PowerSelectionMenu = PowerSelectionMenu;\r\n\n\n/***/ }),\n/* 446 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar render_1 = __webpack_require__(356);\r\n\tvar collisionDetection_1 = __webpack_require__(366);\r\n\tvar SimpleClickable = (function () {\r\n\t    function SimpleClickable(area, textureKey, size, onClick) {\r\n\t        this.area = area;\r\n\t        this.textureKey = textureKey;\r\n\t        this.size = size;\r\n\t        this.onClick = onClick;\r\n\t        this.renderHelper = render_1.RenderHelper.getInstance();\r\n\t        this.collisionDetection = collisionDetection_1.CollisionDetection.getInstance();\r\n\t    }\r\n\t    SimpleClickable.prototype.click = function (mouseposition) {\r\n\t        if (this.isWithinArea(mouseposition)) {\r\n\t            this.onClick();\r\n\t        }\r\n\t        ;\r\n\t    };\r\n\t    SimpleClickable.prototype.createRenderCall = function (renderCalls) {\r\n\t        var renderCall;\r\n\t        if (renderCalls.has(this.textureKey)) {\r\n\t            renderCall = renderCalls.get(this.textureKey);\r\n\t        }\r\n\t        else {\r\n\t            renderCall = new render_1.RenderCall();\r\n\t        }\r\n\t        renderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(this.area, renderCall.textureCoords, this.size);\r\n\t        renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n\t        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t        renderCalls.set(this.textureKey, renderCall);\r\n\t        return renderCalls;\r\n\t    };\r\n\t    SimpleClickable.prototype.isWithinArea = function (mouseposition) {\r\n\t        return this.collisionDetection.aabbCheck(new model_1.Rectangle(mouseposition[0], mouseposition[1], 1, 1), this.area);\r\n\t    };\r\n\t    return SimpleClickable;\r\n\t}());\r\n\texports.SimpleClickable = SimpleClickable;\r\n\n\n/***/ }),\n/* 447 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar menu_1 = __webpack_require__(439);\r\n\tvar clickable_1 = __webpack_require__(442);\r\n\tvar localStorageHelper_1 = __webpack_require__(441);\r\n\tvar NewGameMenu = (function (_super) {\r\n\t    __extends(NewGameMenu, _super);\r\n\t    function NewGameMenu(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu, textInput, playerlist) {\r\n\t        var _this = this;\r\n\t        _super.call(this, clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n\t        this.clickables = clickables;\r\n\t        this.text = text;\r\n\t        this.sceneHandler = sceneHandler;\r\n\t        this.textArea = textArea;\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.background = background;\r\n\t        this.tileSize = tileSize;\r\n\t        this.menu = menu;\r\n\t        this.textInput = textInput;\r\n\t        this.playerlist = playerlist;\r\n\t        this.text.push(new model_1.Tile(75, 70, 200, 33, 557));\r\n\t        var onClick = function () {\r\n\t            var name = _this.textInput.value;\r\n\t            if (name.length > 0) {\r\n\t                localStorageHelper_1.LocalStorageHelper.getInstance().newPlayer(name);\r\n\t                _this.checkProgressionExists();\r\n\t                _this.reDrawPlayerList();\r\n\t            }\r\n\t        };\r\n\t        clickables.push(new clickable_1.Clickable(new model_1.Rectangle(150, 150, 200, 33), 179, 181, 555, onClick));\r\n\t    }\r\n\t    NewGameMenu.prototype.load = function () {\r\n\t        this.textInput.style.visibility = \"visible\";\r\n\t        this.playerlist.style.visibility = \"visible\";\r\n\t        this.reDrawPlayerList();\r\n\t        this.checkProgressionExists();\r\n\t    };\r\n\t    NewGameMenu.prototype.reDrawPlayerList = function () {\r\n\t        var _this = this;\r\n\t        while (this.playerlist.firstChild) {\r\n\t            this.playerlist.removeChild(this.playerlist.firstChild);\r\n\t        }\r\n\t        this.playerlist.children;\r\n\t        var progression = localStorageHelper_1.LocalStorageHelper.getInstance().getProgression();\r\n\t        var _loop_1 = function(progress) {\r\n\t            var item = document.createElement(\"div\");\r\n\t            item.style.setProperty(\"color\", \"#ac9478\", \"important\");\r\n\t            item.style.textShadow = \"-2px 0 #5d392c, 0 2px #5d392c, 2px 0 #5d392c, 0 -2px #5d392c\";\r\n\t            item.style.padding = \"5px\";\r\n\t            item.innerHTML = progress.playerName;\r\n\t            if (progress.active) {\r\n\t                item.innerHTML = \"➣ \" + item.innerHTML;\r\n\t            }\r\n\t            item.onclick = function () {\r\n\t                localStorageHelper_1.LocalStorageHelper.getInstance().setActive(progress.playerName);\r\n\t                _this.reDrawPlayerList();\r\n\t            };\r\n\t            this_1.playerlist.appendChild(item);\r\n\t        };\r\n\t        var this_1 = this;\r\n\t        for (var _i = 0, progression_1 = progression; _i < progression_1.length; _i++) {\r\n\t            var progress = progression_1[_i];\r\n\t            _loop_1(progress);\r\n\t        }\r\n\t    };\r\n\t    NewGameMenu.prototype.checkProgressionExists = function () {\r\n\t        if (localStorageHelper_1.LocalStorageHelper.getInstance().getProgression().length > 0) {\r\n\t            this.clickables[1].disabled = false;\r\n\t        }\r\n\t        else {\r\n\t            this.clickables[1].disabled = true;\r\n\t        }\r\n\t    };\r\n\t    return NewGameMenu;\r\n\t}(menu_1.Menu));\r\n\texports.NewGameMenu = NewGameMenu;\r\n\n\n/***/ }),\n/* 448 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar menu_1 = __webpack_require__(439);\r\n\tvar clickable_1 = __webpack_require__(442);\r\n\tvar assetsLoader_1 = __webpack_require__(2);\r\n\tvar RestartMenu = (function (_super) {\r\n\t    __extends(RestartMenu, _super);\r\n\t    function RestartMenu(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu, game) {\r\n\t        _super.call(this, clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n\t        this.clickables = clickables;\r\n\t        this.text = text;\r\n\t        this.sceneHandler = sceneHandler;\r\n\t        this.textArea = textArea;\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.background = background;\r\n\t        this.tileSize = tileSize;\r\n\t        this.menu = menu;\r\n\t        this.game = game;\r\n\t        this.currentLevel = 0;\r\n\t        this.assetLoader = new assetsLoader_1.AssetsLoader();\r\n\t        this.load();\r\n\t    }\r\n\t    RestartMenu.prototype.load = function () {\r\n\t        this.clickables[1] = new clickable_1.Clickable(new model_1.Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 558, this.getClickCall());\r\n\t    };\r\n\t    RestartMenu.prototype.getClickCall = function () {\r\n\t        var _this = this;\r\n\t        return function () {\r\n\t            if (_this.tempLevel != null) {\r\n\t                _this.game.loadLevel(_this.tempLevel);\r\n\t                _this.sceneHandler.started = true;\r\n\t            }\r\n\t            else {\r\n\t                _this.assetLoader.getLevel(_this.currentLevel.toString()).subscribe(function (it) {\r\n\t                    _this.game.loadLevel(it);\r\n\t                    _this.sceneHandler.started = true;\r\n\t                });\r\n\t            }\r\n\t        };\r\n\t    };\r\n\t    return RestartMenu;\r\n\t}(menu_1.Menu));\r\n\texports.RestartMenu = RestartMenu;\r\n\n\n/***/ }),\n/* 449 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar model_1 = __webpack_require__(347);\r\n\tvar menu_1 = __webpack_require__(439);\r\n\tvar index_1 = __webpack_require__(356);\r\n\tvar assetsLoader_1 = __webpack_require__(2);\r\n\tvar CreditMenu = (function (_super) {\r\n\t    __extends(CreditMenu, _super);\r\n\t    function CreditMenu(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu, game) {\r\n\t        _super.call(this, clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n\t        this.clickables = clickables;\r\n\t        this.text = text;\r\n\t        this.sceneHandler = sceneHandler;\r\n\t        this.textArea = textArea;\r\n\t        this.renderer = renderer;\r\n\t        this.canvasSize = canvasSize;\r\n\t        this.background = background;\r\n\t        this.tileSize = tileSize;\r\n\t        this.menu = menu;\r\n\t        this.game = game;\r\n\t        this.currentLevel = 0;\r\n\t        this.assetLoader = new assetsLoader_1.AssetsLoader();\r\n\t    }\r\n\t    CreditMenu.prototype.render = function () {\r\n\t        var creditsCall = new index_1.RenderCall();\r\n\t        creditsCall.vertecies = this.renderHelper.getVertecies(0, 0, this.canvasSize[0], this.canvasSize[1], creditsCall.vertecies);\r\n\t        creditsCall.indecies = this.renderHelper.getIndecies(creditsCall.indecies);\r\n\t        creditsCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(new model_1.Rectangle(0, 0, this.canvasSize[0], this.canvasSize[0]), creditsCall.textureCoords, [1600, 1800]);\r\n\t        creditsCall.key = 122;\r\n\t        this.renderCalls.set(creditsCall.key, creditsCall);\r\n\t        _super.prototype.render.call(this);\r\n\t    };\r\n\t    return CreditMenu;\r\n\t}(menu_1.Menu));\r\n\texports.CreditMenu = CreditMenu;\r\n\n\n/***/ }),\n/* 450 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar index_1 = __webpack_require__(347);\r\n\tvar AudioHandler = (function () {\r\n\t    function AudioHandler(audioAsset) {\r\n\t        var _this = this;\r\n\t        this.audioAsset = audioAsset;\r\n\t        this.audioContext = new AudioContext();\r\n\t        this.sources = new Map();\r\n\t        this.continiousAudio = [];\r\n\t        audioAsset.bufferDatas.forEach(function (data, key) {\r\n\t            _this.audioContext.decodeAudioData(data).then(function (it) {\r\n\t                _this.sources.set(key, it);\r\n\t            });\r\n\t        });\r\n\t    }\r\n\t    AudioHandler.prototype.createContinuos = function (name, duration, offset, volume) {\r\n\t        var continious = new index_1.ContinuousAudio(this.audioContext, this.sources.get(name), duration, offset, volume);\r\n\t        this.continiousAudio.push(continious);\r\n\t        return continious;\r\n\t    };\r\n\t    AudioHandler.prototype.update = function (delta) {\r\n\t        for (var _i = 0, _a = this.continiousAudio; _i < _a.length; _i++) {\r\n\t            var continious = _a[_i];\r\n\t            continious.update();\r\n\t        }\r\n\t    };\r\n\t    AudioHandler.prototype.playSound = function (key, duration, offset, volume) {\r\n\t        var bufferData = this.sources.get(key);\r\n\t        if (bufferData) {\r\n\t            var gainNode = this.audioContext.createGain();\r\n\t            var source = this.audioContext.createBufferSource();\r\n\t            gainNode.connect(this.audioContext.destination);\r\n\t            gainNode.gain.value = volume;\r\n\t            source.buffer = bufferData;\r\n\t            source.connect(gainNode);\r\n\t            source.start(0, offset, duration);\r\n\t        }\r\n\t    };\r\n\t    AudioHandler.prototype.reset = function () {\r\n\t        for (var _i = 0, _a = this.continiousAudio; _i < _a.length; _i++) {\r\n\t            var continious = _a[_i];\r\n\t            continious.reset();\r\n\t        }\r\n\t    };\r\n\t    return AudioHandler;\r\n\t}());\r\n\texports.AudioHandler = AudioHandler;\r\n\n\n/***/ })\n]);\n\n\n// WEBPACK FOOTER //\n// app.355a744495cb97bf990f.js","import { Loader } from './app/game/loader';\r\n\r\n(() => {\r\n  new Loader().initialize();\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import { AssetsLoader } from './service/assetsLoader';\r\nimport { Observable } from 'rxjs';\r\nimport { Asset, Level, Vector, AudioAsset } from './model';\r\nimport { Game } from './game';\r\nimport { LoadHelper } from './service/loadHelper';\r\nimport { Swordman } from './character/swordman';\r\nimport { Enemy } from './character/enemy';\r\nimport { LevelData, TileAsset } from './map/model';\r\nimport { Constants } from \"./service/constants\";\r\n\r\nexport class Loader {\r\n    private loadHelper = LoadHelper.getInstance();\r\n    private asset: Asset = new Asset();\r\n    private audioAsset = new AudioAsset();\r\n    private assetsLoader = new AssetsLoader();\r\n    private level: LevelData;\r\n    private game: Game;\r\n\r\n    private canvas: HTMLCanvasElement;\r\n    private importLink: HTMLElement;\r\n\r\n    constructor() {\r\n        \r\n        Observable.forkJoin(\r\n            this.assetsLoader.getShader(\"vertexShader.c\"),\r\n            this.assetsLoader.getShader(\"fragmentShader.c\"),\r\n            this.assetsLoader.getShader(\"simpleParticleVertexShader.c\"),\r\n            this.assetsLoader.getShader(\"simpleParticleFragmentShader.c\"),\r\n            this.assetsLoader.getShader(\"dynamicVertexShader.c\"),\r\n            this.assetsLoader.getShader(\"dynamicFragmentShader.c\"),\r\n            this.assetsLoader.getShader(\"colorVertexShader.c\"),\r\n            this.assetsLoader.getShader(\"colorFragmentShader.c\"),\r\n            this.assetsLoader.getTexture(\"tiles.png\"),\r\n            this.assetsLoader.getTexture(\"particleSprites.png\"),\r\n            this.assetsLoader.getTexture(\"genericParticle.png\"),\r\n            this.assetsLoader.getTileTextures(\"tile\"),\r\n            this.assetsLoader.getUiTextures(\"ui\"),\r\n            this.assetsLoader.getLevel(\"0\"),\r\n            this.assetsLoader.getAudio(Constants.getInstance().audioResources)\r\n\r\n        ).subscribe(data => {\r\n            this.asset.vertexShader = data[0] as string;\r\n            this.asset.fragmentShader = data[1] as string;\r\n            this.asset.simpleParticleVertexShader = data[2] as string;\r\n            this.asset.simpleParticleFragmentShader = data[3] as string;\r\n            this.asset.dynamicVertexShader = data[4] as string;\r\n            this.asset.dynamicFragmentShader = data[5] as string;\r\n            this.asset.colorVertexShader = data[6] as string;\r\n            this.asset.colorFragmentShader = data[7] as string;\r\n\r\n            this.asset.texture = data[8] as HTMLImageElement;\r\n            this.asset.particleTexture = data[9] as HTMLImageElement;\r\n            this.asset.genericParticleTexture = data[10] as HTMLImageElement;\r\n            this.asset.tileAssets = data[11];\r\n            this.asset.tileAssets = this.addToTileAssets(this.asset.tileAssets, data[12]);\r\n            this.level = data[13] as LevelData;\r\n\r\n            this.audioAsset.bufferDatas = data[14] as Map<string, ArrayBuffer>;\r\n\r\n            this.canvas = document.getElementById(\"gameCanvas\") as HTMLCanvasElement;\r\n\r\n            this.game = new Game(this.asset, this.audioAsset, this.canvas, this.level);\r\n        });\r\n    }\r\n\r\n    private addToTileAssets(tileAssets: Map<number, TileAsset>, newTileAssets: Map<number, TileAsset>) {\r\n        newTileAssets.forEach((value: TileAsset, key: number) => {\r\n            tileAssets.set(key, value);\r\n        });\r\n\r\n        return tileAssets;\r\n    }\r\n\r\n    public initialize() {\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/loader.ts","import { Observable, Observer } from 'rxjs';\r\nimport { LoadHelper } from './loadHelper';\r\nimport { Constants } from './constants';\r\nimport { TextureResource, TileAsset } from '../map/model/';\r\n\r\nexport class AssetsLoader {\r\n  private shaderUrl = 'src/shader/';\r\n  private textureUrl = \"src/assets/texture/\";\r\n  private levelUrl = \"src/maps/\";\r\n  private audioUrl = \"src/assets/audio/\"\r\n  private constants = Constants.getInstance();\r\n\r\n\r\n  constructor() { }\r\n\r\n  public getShader(fileName: string) {\r\n    return this.httpGet(this.shaderUrl + fileName)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  public getTexture(fileName: string) {\r\n    return Observable.create((observer: Observer<any>) => {\r\n      var texture = new Image();\r\n      texture.src = this.textureUrl + fileName;\r\n      texture.onload = function () {\r\n        observer.next(texture);\r\n        observer.complete();\r\n      }\r\n    });\r\n  }\r\n\r\n  public getLevel(level: string) {\r\n    return this.httpGet(this.levelUrl + level + \".json\")\r\n      .map(this.extractLevel)\r\n      .catch(this.handleError);\r\n  }\r\n\r\n  private httpGet(url: string): Observable<string> {\r\n    return Observable.create((observer: Observer<string>) => {\r\n      let xmlHttp = new XMLHttpRequest();\r\n\r\n      xmlHttp.onreadystatechange = () => {\r\n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n          observer.next(xmlHttp.responseText);\r\n          observer.complete();\r\n        };\r\n      };\r\n\r\n      xmlHttp.onerror = () => {\r\n        observer.error(xmlHttp.responseText);\r\n      };\r\n\r\n      xmlHttp.open(\"GET\", url, true);\r\n      xmlHttp.send(null);\r\n    });\r\n  }\r\n\r\n  private httpGetBinary(url: string): Observable<ArrayBuffer> {\r\n    return Observable.create((observer: Observer<ArrayBuffer>) => {\r\n      let xmlHttp = new XMLHttpRequest();\r\n\r\n      xmlHttp.responseType = 'arraybuffer';\r\n\r\n      xmlHttp.onreadystatechange = () => {\r\n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {\r\n          observer.next(xmlHttp.response);\r\n          observer.complete();\r\n        };\r\n      };\r\n\r\n      xmlHttp.onerror = () => {\r\n        observer.error(xmlHttp.responseText);\r\n      };\r\n\r\n      xmlHttp.open(\"GET\", url, true);\r\n      xmlHttp.send(null);\r\n    });\r\n  }\r\n\r\n  public getTileTextures(name: string): Observable<Map<number, TileAsset>> {\r\n    return this.getTextures(name, this.constants.tileResources);\r\n  }\r\n\r\n  public getUiTextures(name: string) {\r\n    return this.getTextures(name, this.constants.uiResources);\r\n  }\r\n\r\n  private getAudioData(name: string) {\r\n    return this.httpGetBinary(this.audioUrl + name);\r\n  }\r\n\r\n  public getAudio(audioResources: string[]) {\r\n    return Observable.create((obs: Observer<Map<string, ArrayBuffer>>) => {\r\n      let map = new Map<string, ArrayBuffer>()\r\n\r\n      let count = 0;\r\n      for (let auidoResource of audioResources) {\r\n        this.getAudioData(auidoResource).subscribe(it => {\r\n          count++;\r\n          map.set(auidoResource, it);\r\n\r\n          if (count >= audioResources.length) {\r\n            obs.next(map);\r\n            obs.complete();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private getTextures(name: string, textureResources: TextureResource[]) {\r\n    return Observable.create((obs: Observer<Map<number, TileAsset>>) => {\r\n      let textures = new Map<number, TileAsset>();\r\n      let count = 0;\r\n      for (let textureResource of textureResources) {\r\n        let texture = new Image();\r\n        texture.src = this.textureUrl + textureResource.name;\r\n        texture.onload = () => {\r\n          count++;\r\n          let key = +textureResource.name.split(name)[0];\r\n          textures.set(key, new TileAsset(key, texture, textureResource.size));\r\n\r\n          if (count >= textureResources.length) {\r\n            obs.next(textures);\r\n            obs.complete();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private extractLevel(responseText: string) {\r\n    let loadHelper = LoadHelper.getInstance();\r\n    let body = JSON.parse(responseText);\r\n\r\n    try {\r\n      let valid = loadHelper.validateLevelData(body)\r\n      if(!valid) {\r\n        throw new Error(\"Validation error\")\r\n      }\r\n    } catch (e) {\r\n      console.log(\"Invalid level: \" + e);\r\n      return  {};\r\n    }\r\n\r\n    return body;\r\n  }\r\n\r\n  private handleError(error: any) {\r\n    let errMsg: string;\r\n    errMsg = error.message ? error.message : error.toString();\r\n    console.error(errMsg);\r\n    return Observable.throw(errMsg);\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/service/assetsLoader.ts","import { LevelData } from '../map/model';\r\nimport { Level, Tile, DynamicTile, Rectangle, Vector } from '../model';\r\nimport { Enemy, Swordman, Archer, Shadow, Apprentice, Screamer, MasterSorcerer, IEnemy } from '../character';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { ShapeShifter } from \"../character/shapeshifter\";\r\nimport { Game } from \"../game\";\r\n\r\nexport class LoadHelper {\r\n\r\n\tprivate static instance: LoadHelper = new LoadHelper();\r\n\r\n\tconstrcuctor() {\r\n\t\tif (LoadHelper.instance) {\r\n\t\t\tthrow new Error(\"Static class cant be instanced!\");\r\n\t\t}\r\n\r\n\t\tLoadHelper.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance() {\r\n\t\treturn LoadHelper.instance;\r\n\t}\r\n\r\n\tpublic levelDataToLevel(levelData: LevelData, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler, particleHandler: ParticleHandler, game: Game) {\r\n\r\n\t\tlet level = new Level();\r\n\r\n\t\tlevel.name = levelData.name;\r\n\t\tlevel.end = new Rectangle(levelData.end[0], levelData.end[1], 256, 128);\r\n\t\tlevel.player = [levelData.player[0], levelData.player[1]];\r\n\t\tlevel.gameSize = [levelData.gameSize[0], levelData.gameSize[1]];\r\n\t\tlevel.camera = [levelData.camera[0], levelData.camera[1]];\r\n\r\n\r\n\t\tlevel.tiles = levelData.tiles.map(it => { return new Tile(it.area.x, it.area.y, it.area.width, it.area.height, it.key) });\r\n\t\tlevel.decorativeTiles = levelData.decorativeTiles.map(it => { return new Tile(it.area.x, it.area.y, it.area.width, it.area.height, it.key) });\r\n\t\r\n\t\tif(levelData.background) {\r\n\t\t\tlet background = levelData.background;\r\n\t\t\tlevel.decorativeTiles.unshift(new Tile(background.area.x, background.area.y, background.area.width, background.area.height, background.key));\r\n\t\t}\r\n\r\n\t\tlevel.dynamicTiles =  levelData.dynamicTiles.map(it => {\r\n\r\n\t\t\tlet velocity: Vector;\r\n\t\t\tif (it.vertical) {\r\n\t\t\t\tif (it.inverse) {\r\n\t\t\t\t\tvelocity = new Vector(0, -it.velocity);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvelocity = new Vector(0, it.velocity);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (it.inverse) {\r\n\t\t\t\t\tvelocity = new Vector(-it.velocity, 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvelocity = new Vector(it.velocity, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn new DynamicTile(new Tile(it.tile.x, it.tile.y, it.tile.width, it.tile.height, it.key), velocity, it.vertical, it.distance)\r\n\t\t});\r\n\r\n\t\tlevel.dynamicTiles.sort((a: DynamicTile, b: DynamicTile) => {\r\n\t\t\treturn a.tile.key - b.tile.key;\r\n\t\t});\r\n\r\n\t\tlevel.enemies = levelData.enemies.map(it => {\r\n\t\t\tlet enemy: IEnemy;\r\n\t\t\t\r\n\t\t\tif(it.key == 50) {\r\n\t\t\t\tenemy = new Swordman(new Vector(it.area.x, it.area.y), it.area.width, it.area.height, projectileHandler, animationHandler);\r\n\t\t\t} else if(it.key == 51) {\r\n\t\t\t\tenemy = new Archer(new Vector(it.area.x, it.area.y), it.area.width, it.area.height, projectileHandler, animationHandler);\r\n\t\t\t} else if(it.key == 52) {\r\n\t\t\t\tenemy = new Shadow(new Vector(it.area.x, it.area.y), 85, 85, projectileHandler, animationHandler);\r\n\t\t\t} else if (it.key == 53) {\r\n\t\t\t\tenemy = new MasterSorcerer(new Vector(it.area.x, it.area.y), 128, 96, projectileHandler, animationHandler, particleHandler);\r\n\t\t\t} else if(it.key == 54) { \r\n\t\t\t\tenemy = new Apprentice(new Vector(it.area.x, it.area.y), it.area.width, it.area.height, projectileHandler, animationHandler, particleHandler);\r\n\t\t\t} else if(it.key == 55){\r\n\t\t\t\tenemy = new Screamer(new Vector(it.area.x, it.area.y), 64, 96, projectileHandler, animationHandler, particleHandler);\r\n\t\t\t} else if(it.key == 56){\r\n\t\t\t\tenemy = new ShapeShifter(new Vector(it.area.x, it.area.y), 128, 128, projectileHandler, animationHandler, particleHandler, game);\r\n\t\t\t} \r\n\r\n\t\t\treturn enemy;\r\n\t\t});\r\n\r\n\t\treturn level;\r\n\r\n\t}\r\n\r\n\tpublic validateLevelData(levelData: LevelData) {\r\n\r\n\t\tlet valid = (this.checkDoubleNumberTouple(levelData, \"camera\")\r\n\t\t\t&& this.checkPropertyExists(levelData, \"dynamicTiles\")\r\n\t\t\t&& this.checkPropertyExists(levelData, \"enemies\")\r\n\t\t\t&& this.checkPropertyExists(levelData, \"tiles\")\r\n\t\t\t&& this.checkPropertyExists(levelData, \"decorativeTiles\")\r\n\t\t\t&& this.checkPropertyExists(levelData, \"background\")\r\n\t\t\t&& this.checkDoubleNumberTouple(levelData, \"player\")\r\n\t\t\t&& this.checkDoubleNumberTouple(levelData, \"gameSize\")\r\n\t\t\t&& this.checkDoubleNumberTouple(levelData, \"end\"));\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tprivate checkDoubleNumberTouple(levelData: LevelData, property: string) {\r\n\t\tlet value = (this.checkPropertyExists(levelData, property) && levelData[property].length == 2 && this.isNumber(levelData[property][0]) && this.isNumber(levelData[property][1]));\r\n\t\treturn value;\r\n\t}\r\n\r\n\tprivate isNumber(number: string) {\r\n\t\treturn (!isNaN(+number));\r\n\t}\r\n\r\n\tprivate checkPropertyExists(levelData: LevelData, property: string) {\r\n\t\tlet value = (levelData[property] !== undefined)\r\n\t\treturn value;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/service/loadHelper.ts","import { Tile } from './tile'\r\nimport { Vector } from './vector';\r\nimport { Rectangle } from './rectangle';\r\nimport { Sprite } from './sprite';\r\nimport { Level } from './level';\r\nimport { Asset } from './assets';\r\nimport { Projectile } from './animation/projectile';\r\nimport { Animation } from './animation/animation';\r\nimport { FrameAnimation } from './animation/frameAnimation';\r\nimport { SpellType } from './enum/spellType';\r\nimport { Spell } from './animation/spell';\r\nimport { PhysicalProjectile } from './animation/physicalProjectile';\r\nimport { Meele } from './animation/meele';\r\nimport { DebugElement } from './debug';\r\nimport { TextureType } from './enum/textureType';\r\nimport { StickyAnimation } from './animation/stickyAnimation';\r\nimport { RotationAnimation } from './animation/rotationAnimation';\r\nimport { StaticRotationAnimation } from './animation/staticRotationAnimation';\r\nimport { CollisionProjectile } from './animation/collisionProjectile';\r\nimport { ProjectileType } from './animation/projectileType';\r\nimport { Cast } from './casts/cast';\r\nimport { InstantCast } from './casts/instantCast';\r\nimport { ChannelCast } from './casts/channelCast';\r\nimport { SpellCast } from './casts/spellCast';\r\nimport { ParticleProjectile } from './animation/particleProjectile';\r\nimport { DynamicTile } from './dynamicTile';\r\nimport { DynamicTileData } from './dynamicTileData';\r\nimport { RenderableData } from './renderable-data';\r\nimport { Progress } from './progress';\r\nimport { AudioAsset } from \"./audioAsset\";\r\nimport { ContinuousAudio } from \"./audio/continousAudio\";\r\nimport { ShaderType } from './enum/shaderType';\r\n\r\nexport {\r\n    ShaderType,\r\n    Tile,\r\n    Vector,\r\n    Rectangle,\r\n    Sprite,\r\n    Level,\r\n    Asset,\r\n    Projectile,\r\n    Animation,\r\n    SpellType,\r\n    Spell,\r\n    PhysicalProjectile,\r\n    Meele,\r\n    DebugElement,\r\n    TextureType,\r\n    FrameAnimation,\r\n    StickyAnimation,\r\n    RotationAnimation,\r\n    CollisionProjectile,\r\n    ProjectileType,\r\n    Cast,\r\n    InstantCast,\r\n    ChannelCast,\r\n    SpellCast,\r\n    ParticleProjectile,\r\n    StaticRotationAnimation,\r\n    DynamicTile,\r\n    DynamicTileData,\r\n    RenderableData,\r\n    Progress,\r\n    AudioAsset,\r\n    ContinuousAudio\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/index.ts","export class Tile\r\n{\r\n\tpublic x: number;\r\n\tpublic y: number;\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\tpublic key: number;\r\n\r\n\tconstructor(x: number, y: number, width: number, height: number, key: number){\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.key = key;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/tile.ts","export class Vector {\r\n\r\n\tpublic x:number;\r\n\tpublic y: number;\r\n\r\n\tconstructor(x: number, y: number) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tpublic add(vector: Vector) {\r\n\t\tif(vector) {\r\n\t\t\tthis.x += vector.x;\r\n\t\t\tthis.y += vector.y;\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic copy(vector: Vector) {\r\n\t\treturn new Vector(vector.x, vector.y);\r\n\t}\r\n\r\n\tpublic normalize() {\r\n\t\tlet mag = this.magnitude();\r\n\t\tthis.x = this.x/mag;\r\n\t\tthis.y = this.y/mag;\r\n\t}\r\n\r\n\tpublic magnitude() {\r\n\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\r\n\t}\r\n\r\n\tpublic multiply(factor: number) {\r\n\t\tthis.x = this.x * factor;\r\n\t\tthis.y = this.y * factor;\r\n\t}\r\n\r\n\tpublic invert() {\r\n\t\tthis.x = -this.x;\r\n\t\tthis.y = -this.y;\r\n\r\n\t\treturn this;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/vector.ts","export class Rectangle {\r\n\tpublic x: number;\r\n\tpublic y: number;\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\r\n\tconstructor(x:number, y:number, width: number, height: number) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/rectangle.ts","import { Rectangle, Vector } from './'\r\n\r\nexport class Sprite {\r\n\tpublic position: Rectangle;\r\n\tpublic size: Vector;\r\n\r\n\tconstructor(position: Rectangle) {\r\n\t\tthis.position = position;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/sprite.ts","import { Tile, Vector, Rectangle, DynamicTile } from './'\r\nimport { Enemy } from '../character/enemy';\r\nimport { IEnemy } from \"../character/index\";\r\n\r\nexport class Level {\r\n\tpublic name: string;\r\n    public tiles: Tile[] = [];\r\n\tpublic decorativeTiles: Tile[] = [];\r\n\tpublic dynamicTiles: DynamicTile[] = [];\r\n\tpublic enemies: IEnemy[] = [];\r\n\tpublic player: [number, number];\r\n\tpublic gameSize: [number, number];\r\n\tpublic camera: [number, number];\r\n\tpublic end: Rectangle;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/level.ts","import { TileAsset } from '../map/model';\r\n\r\nexport class Asset {\r\n\tpublic vertexShader: string;\r\n\tpublic fragmentShader: string;\r\n\tpublic simpleParticleVertexShader: string;\r\n\tpublic simpleParticleFragmentShader: string;\r\n\tpublic dynamicVertexShader: string;\r\n\tpublic dynamicFragmentShader: string;\r\n\tpublic colorVertexShader: string;\r\n\tpublic colorFragmentShader: string;\r\n\tpublic texture: HTMLImageElement;\r\n\tpublic particleTexture: HTMLImageElement;\r\n\tpublic genericParticleTexture: HTMLImageElement;\r\n\tpublic tileAssets: Map<number, TileAsset>;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/assets.ts","import { Vector, Rectangle, Animation, SpellType, ProjectileType } from '../';\r\n\r\nexport abstract class Projectile {\r\n    public velocity: Vector;\r\n    public area: Rectangle;\r\n    public collisionArea: Rectangle;\r\n    public animation: Animation;\r\n    public projectileType: ProjectileType = ProjectileType.None;\r\n    public damage: number = 0;\r\n\r\n    constructor(velocity: Vector, area: Rectangle, animation: Animation, collisionRatio: number, collisionArea?: Rectangle) {\r\n        this.velocity = velocity;\r\n        this.area = area;\r\n        this.animation = animation;\r\n        if(collisionArea) {\r\n            this.collisionArea = collisionArea;\r\n        } else {\r\n            this.collisionArea = new Rectangle(this.area.x + (this.area.width/2) - ((this.area.width * collisionRatio)/2), this.area.y + (this.area.height/2) - ((this.area.height * collisionRatio)/2), this.area.width * collisionRatio, this.area.height * collisionRatio);\r\n        }\r\n    }\r\n\r\n    public update(travelDistanceX: number, travelDistanceY: number, delta: number) {\r\n\r\n        this.area.x += travelDistanceX;\r\n        this.area.y += travelDistanceY;\r\n\r\n        this.collisionArea.x += travelDistanceX;\r\n        this.collisionArea.y += travelDistanceY;\r\n\r\n        this.animation.areaToRender.x = this.area.x;\r\n        this.animation.areaToRender.y = this.area.y;\r\n    }\r\n\r\n    public updateForces(delta: number) {\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/projectile.ts","import { Rectangle } from '../';\r\nimport { RenderHelper } from '../../render';\r\n\r\nexport class Animation {\r\n\r\n\tpublic timeToChange: number = 100;\r\n\tpublic areaToRender: Rectangle;\r\n\tpublic repetitions: number;\r\n\tpublic inverse = false;\r\n\tpublic delay = 0;\r\n\tpublic frameIndex: number = 0;\r\n\tpublic color: number[];\r\n\tpublic onCompletion: () => void;\r\n\tpublic lastChange: number = 0;\r\n\tpublic textureCoords: number[][] = [];\r\n\r\n\tconstructor(textureNumbers: number[]) {\r\n\t\tfor (let textureNumber of textureNumbers) {\r\n\t\t\tthis.textureCoords.push(RenderHelper.getInstance().getTextureCoordinates([], textureNumber));\r\n\t\t}\r\n\t}\r\n\r\n\tpublic next(delta: number) {\r\n\r\n\t\tthis.lastChange += delta;\r\n\r\n\t\tif (this.lastChange >= this.timeToChange) {\r\n\t\t\tthis.lastChange = 0;\r\n\t\t\tif (this.delay > 0) {\r\n\t\t\t\tthis.delay--;\r\n\t\t\t}\r\n\t\t\tthis.frameIndex++;\r\n\t\t\tif (this.repetitions) {\r\n\t\t\t\tthis.repetitions--;\r\n\t\t\t}\r\n\t\t\tif (this.frameIndex >= this.textureCoords.length) {\r\n\t\t\t\tthis.frameIndex = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getCurrentFrame() {\r\n\t\treturn this.textureCoords[this.frameIndex];\r\n\t}\r\n\r\n\tpublic reset() {\r\n\t\tthis.frameIndex = 0;\r\n\t\tthis.lastChange = 0;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/animation.ts","import { Renderer } from './renderer';\r\nimport { RenderCall } from './renderCall';\r\nimport { ColorRenderCall } from './colorRenderCall';\r\nimport { ColorRenderer } from './colorRenderer';\r\nimport { RenderHelper } from './renderHelper';\r\nimport { DynamicRenderCall } from './dynamicRenderCall';\r\nimport { TextureMapper } from './textureMapper';\r\nimport { ParticleRenderer } from './particleRenderer';\r\nimport { Matrix3 } from './matrix3';\r\n\r\nexport { Renderer, RenderCall, RenderHelper, TextureMapper, ParticleRenderer, Matrix3, DynamicRenderCall, ColorRenderCall, ColorRenderer };\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/index.ts","import { Context } from '../context';\r\nimport { RenderCall } from './renderCall';\r\nimport { TextureType, Vector } from '../model';\r\nimport { Matrix3 } from './matrix3';\r\n\r\nexport class Renderer {\r\n\r\n\tprivate context: Context;\r\n\tprivate gl: WebGLRenderingContext;\r\n\tprivate shaderProgram: WebGLShader;\r\n\r\n\tprivate vertexBuffer: WebGLBuffer;\r\n\tprivate textureCoordBuffer: WebGLBuffer;\r\n\tprivate indeciesBuffer: WebGLBuffer;\r\n\r\n\tprivate positionLocation: number;\r\n\tprivate textureCoordAttribute: number;\r\n\tprivate resolutionLocation: WebGLUniformLocation;\r\n\tprivate cameraLocation: WebGLUniformLocation;\r\n\r\n\tprivate projectionMatrix: number[];\r\n\r\n\tprivate resolution: Vector;\r\n\r\n\tconstructor(context: Context) {\r\n\t\tthis.context = context;\r\n\t\tthis.gl = this.context.gl;\r\n\t\tthis.shaderProgram = this.context.shaderProgram;\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 1, \"a_texture_coord\");\r\n\r\n\t\tthis.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t\tthis.textureCoordAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_texture_coord\");\r\n\r\n\t\tthis.resolutionLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_resolution\");\r\n\t\tthis.cameraLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_camera\");\r\n\r\n\t\tthis.resolution = new Vector(this.context.gl.canvas.width, this.context.gl.canvas.height);\r\n\r\n\t\tthis.vertexBuffer = this.gl.createBuffer();\r\n\t\tthis.textureCoordBuffer = this.gl.createBuffer();\r\n\t\tthis.indeciesBuffer = this.gl.createBuffer();\r\n\t}\r\n\r\n\tpublic render(renderCalls: Map<number, RenderCall>, camera: [number, number]) {\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\r\n\t\trenderCalls.forEach((renderCall: RenderCall, key: number) => {\r\n\t\t\tthis.gl.enableVertexAttribArray(this.positionLocation);\r\n\t\t\tthis.gl.enableVertexAttribArray(this.textureCoordAttribute);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.textureCoords), this.gl.STATIC_DRAW);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(renderCall.indecies), this.gl.STATIC_DRAW);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t\t\tthis.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t\t\tthis.gl.vertexAttribPointer(this.textureCoordAttribute, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\tthis.gl.uniform2f(this.resolutionLocation, this.resolution.x, this.resolution.y);\r\n\t\t\tthis.gl.uniform2f(this.cameraLocation, camera[0], camera[1]);\r\n\r\n\t\t\tthis.gl.activeTexture(this.gl.TEXTURE0);\r\n\t\t\tif (key != -1) {\r\n\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.tileTextures.get(key));\r\n\t\t\t} else {\r\n\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.glTexture);\r\n\t\t\t}\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t\t\tthis.gl.drawElements(this.gl.TRIANGLES, renderCall.indecies.length, this.gl.UNSIGNED_SHORT, 0)\r\n\r\n\t\t\tthis.gl.disableVertexAttribArray(this.positionLocation);\r\n\t\t\tthis.gl.disableVertexAttribArray(this.textureCoordAttribute);\r\n\t\t});\r\n\t}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/renderer.ts","import { Context } from '../';\r\nimport { TextureType } from '../model';\r\n\r\nexport class RenderCall {\r\n\tpublic vertecies: number[];\r\n\tpublic textureCoords: number[];\r\n\tpublic indecies: number[];\r\n\tpublic key: number;\r\n\r\n\tconstructor() {\r\n\t\tthis.vertecies = [];\r\n\t\tthis.indecies = [];\r\n\t\tthis.textureCoords = [];\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/renderCall.ts","import { Context } from '../';\r\nimport { TextureType } from '../model';\r\n\r\nexport class ColorRenderCall {\r\n\tpublic vertecies: number[];\r\n\tpublic textureCoords: number[];\r\n\tpublic indecies: number[];\r\n\tpublic color: number[];\r\n\r\n\tconstructor() {\r\n\t\tthis.vertecies = [];\r\n\t\tthis.indecies = [];\r\n\t\tthis.textureCoords = [];\r\n\t\tthis.color = [];\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/colorRenderCall.ts","import { Context } from '../context';\r\nimport { ColorRenderCall } from './';\r\nimport { TextureType, Vector } from '../model';\r\n\r\nexport class ColorRenderer {\r\n\r\n\tprivate context: Context;\r\n\tprivate gl: WebGLRenderingContext;\r\n\tprivate shaderProgram: WebGLShader;\r\n\r\n\tprivate vertexBuffer: WebGLBuffer;\r\n\tprivate textureCoordBuffer: WebGLBuffer;\r\n\tprivate indeciesBuffer: WebGLBuffer;\r\n\tprivate colorBuffer: WebGLBuffer;\r\n\r\n\tprivate colorAttributeLocation: number;\r\n\tprivate positionLocation: number;\r\n\tprivate textureCoordAttribute: number;\r\n\tprivate resolutionLocation : WebGLUniformLocation;\r\n\tprivate cameraLocation: WebGLUniformLocation;\r\n\r\n\tprivate projectionMatrix: number[];\r\n\r\n\tprivate resolution: Vector;\r\n\r\n\tconstructor(context: Context) {\r\n\t\tthis.context = context;\r\n\t\tthis.gl = this.context.gl;\r\n\t\tthis.shaderProgram = this.context.colorShaderProgram;\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 1, \"a_color\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 2, \"a_texture_coord\");\r\n\r\n\t\tthis.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t\tthis.colorAttributeLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_color\");\r\n\t\tthis.textureCoordAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_texture_coord\");\r\n\t\t\r\n\t\tthis.resolutionLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_resolution\");\r\n\t\tthis.cameraLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_camera\");\r\n\r\n\t\tthis.resolution = new Vector(this.context.gl.canvas.width, this.context.gl.canvas.height);\r\n\r\n\t\tthis.colorBuffer = this.gl.createBuffer();\r\n\t\tthis.vertexBuffer = this.gl.createBuffer();\r\n\t\tthis.textureCoordBuffer = this.gl.createBuffer();\r\n\t\tthis.indeciesBuffer = this.gl.createBuffer();\r\n\t}\r\n\r\n\tpublic render(renderCalls: ColorRenderCall[], camera: [number, number]) {\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\t\tfor(let renderCall of renderCalls) {\r\n\t\t\t\r\n\t\t\tthis.gl.enableVertexAttribArray(this.positionLocation);\r\n\t\t\tthis.gl.enableVertexAttribArray(this.textureCoordAttribute);\r\n\t\t\tthis.gl.enableVertexAttribArray(this.colorAttributeLocation);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.textureCoords), this.gl.STATIC_DRAW);\r\n\t\t\t\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.color), this.gl.STATIC_DRAW);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t\t\tthis.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(renderCall.indecies), this.gl.STATIC_DRAW);\r\n\t\t\t\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t\t\tthis.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n\t\t\tthis.gl.vertexAttribPointer(this.textureCoordAttribute, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.colorBuffer);\r\n\t\t\tthis.gl.vertexAttribPointer(this.colorAttributeLocation, 4, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\tthis.gl.uniform2f(this.resolutionLocation, this.resolution.x, this.resolution.y);\r\n\t\t\tthis.gl.uniform2f(this.cameraLocation, camera[0], camera[1]);\r\n\r\n\t\t\tthis.gl.activeTexture(this.gl.TEXTURE0);\r\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.glTexture);\r\n\t\t\t\r\n\t\t\tthis.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n\t\t\tthis.gl.drawElements(this.gl.TRIANGLES, renderCall.indecies.length, this.gl.UNSIGNED_SHORT, 0)\r\n\r\n\t\t\tthis.gl.disableVertexAttribArray(this.positionLocation);\r\n\t\t\tthis.gl.disableVertexAttribArray(this.textureCoordAttribute);\r\n\t\t\tthis.gl.disableVertexAttribArray(this.colorAttributeLocation);\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/colorRenderer.ts","import { TextureMapper } from './textureMapper';\r\nimport { Vector, Rectangle, Tile } from '../model';\r\nimport { Matrix3 } from './matrix3';\r\n\r\nexport class RenderHelper {\r\n\r\n\tprivate static instance: RenderHelper = new RenderHelper();\r\n\tprivate textureMapper = TextureMapper.getInstance();\r\n\tprivate static textureSize = 2048;\r\n\tprivate canvasWidth = 1200;\r\n\tprivate canvasHeight = 800;\r\n\tprivate projectionMatrix = Matrix3.createProjectionMatrix(this.canvasWidth, this.canvasHeight);\r\n\r\n\tconstrcuctor() {\r\n\t\tif (RenderHelper.instance) {\r\n\t\t\tthrow new Error(\"Static class cant be instanced!\");\r\n\t\t}\r\n\r\n\t\tRenderHelper.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance() {\r\n\t\treturn RenderHelper.instance;\r\n\t}\r\n\r\n\tpublic getRelativeValue(x: number, y: number) {\r\n\r\n\t\tlet relativePosition = new Vector(0, 0);\r\n\t\trelativePosition.x = x / (this.canvasWidth / 2) - 1;\r\n\t\trelativePosition.y = -y / (this.canvasHeight / 2) + 1;\r\n\r\n\t\treturn relativePosition;\r\n\t}\r\n\r\n\tpublic getVertecies(x: number, y: number, width: number, height: number, currentVertecies: number[]) {\r\n\t\tvar x1 = x;\r\n\t\tvar x2 = x + width;\r\n\t\tvar y1 = y;\r\n\t\tvar y2 = y + height;\r\n\r\n\t\tvar newVertecies = [\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx2, y1,\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx1, y2\r\n\t\t]\r\n\r\n\t\tcurrentVertecies.push.apply(currentVertecies, newVertecies);\r\n\r\n\t\treturn currentVertecies;\r\n\t}\r\n\r\n\tpublic getInverseVertecies(x: number, y: number, width: number, height: number, currentVertecies: number[]) {\r\n\r\n\t\tlet x1 = x + width;\r\n\t\tlet x2 = x;\r\n\t\tlet y1 = y;\r\n\t\tlet y2 = y + height;\r\n\r\n\t\tlet newVertecies = [\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx2, y1,\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx1, y2\r\n\t\t]\r\n\r\n\t\tcurrentVertecies.push.apply(currentVertecies, newVertecies);\r\n\r\n\t\treturn currentVertecies;\r\n\t}\r\n\r\n\tpublic getColor(currentColors: number[], color?: number[]) {\r\n\r\n\t\tlet col: number[] = [];\r\n\r\n\t\tif (color) {\r\n\t\t\tcol = color;\r\n\t\t} else {\r\n\t\t\tcol = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\t\t}\r\n\r\n\t\tcurrentColors.push.apply(currentColors, col);\r\n\r\n\t\treturn currentColors;\r\n\t}\r\n\r\n\tpublic getMatrices(x: number, y: number, width: number, height: number, angle: number, currentMatrices: number[]) {\r\n\r\n\t\tlet rotationPointX = x + width / 2;\r\n\t\tlet rotationPointY = y + height / 2;\r\n\r\n\t\tlet moveToRotationPointMatrix = Matrix3.createTranslationMatrix(-rotationPointX, -rotationPointY);\r\n\t\tlet rotationMatrix = Matrix3.createRotationMatrix(angle);\r\n\t\tlet moveBackMatrix = Matrix3.createTranslationMatrix(rotationPointX, rotationPointY);\r\n\r\n\t\tlet matrix = Matrix3.multiply(moveToRotationPointMatrix, rotationMatrix);\r\n\t\tmatrix = Matrix3.multiply(matrix, moveBackMatrix);\r\n\t\tmatrix = Matrix3.multiply(matrix, this.projectionMatrix);\r\n\r\n\t\tmatrix = this.getIndeciesAttribute(matrix);\r\n\r\n\t\tcurrentMatrices.push.apply(currentMatrices, matrix);\r\n\r\n\t\treturn currentMatrices;\r\n\t}\r\n\r\n\tpublic getIndeciesAttribute(attribute: number[]) {\r\n\r\n\t\tlet copy = attribute.slice(0, attribute.length);\r\n\r\n\t\tfor (let i = 0; i < 5; i++) {\r\n\t\t\tattribute.push(...copy);\r\n\t\t}\r\n\r\n\t\treturn attribute;\r\n\t}\r\n\r\n\tpublic getIndecies(currentIndecies: number[]) {\r\n\r\n\t\tvar vertexIndices = [\r\n\t\t\tcurrentIndecies.length, currentIndecies.length + 1, currentIndecies.length + 2, currentIndecies.length + 3, currentIndecies.length + 4, currentIndecies.length + 5\r\n\t\t];\r\n\r\n\t\tcurrentIndecies.push.apply(currentIndecies, vertexIndices);\r\n\r\n\t\treturn currentIndecies;\r\n\t}\r\n\r\n\tpublic addTextureCoordinates(currentTextureCoordinates: number[], textureCoords: number[]) {\r\n\t\tcurrentTextureCoordinates.push.apply(currentTextureCoordinates, textureCoords);\r\n\r\n\t\treturn currentTextureCoordinates;\r\n\t}\r\n\r\n\tpublic getTextureCoordinates(currentTextureCoordinates: number[], textureType: number) {\r\n\r\n\t\tvar rect = this.textureMapper.mapTexture(textureType);\r\n\r\n\t\tlet textureCoordinates = this.getCoords(rect, RenderHelper.textureSize);\r\n\r\n\t\tcurrentTextureCoordinates.push.apply(currentTextureCoordinates, textureCoordinates);\r\n\r\n\t\treturn currentTextureCoordinates;\r\n\t}\r\n\r\n\tpublic getTiledTextureCoordinates(tile: Rectangle, currentTextureCoordinates: number[], size: [number, number]) {\r\n\r\n\t\tlet x1 = 0;\r\n\t\tlet x2 = tile.width / size[0];\r\n\t\tlet y1 = 0;\r\n\t\tlet y2 = tile.height / size[1];\r\n\r\n\t\tlet textureCoordinates = [\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx2, y1,\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx1, y2\r\n\t\t];\r\n\r\n\t\tcurrentTextureCoordinates.push.apply(currentTextureCoordinates, textureCoordinates);\r\n\r\n\t\treturn currentTextureCoordinates;\r\n\t}\r\n\r\n\tpublic getMainTextureCoords(rect: Rectangle) {\r\n\t\treturn this.getCoords(rect, RenderHelper.textureSize);\r\n\t}\r\n\r\n\tprivate getCoords(rect: Rectangle, size: number) {\r\n\t\tlet x1 = rect.x / size;\r\n\t\tlet y1 = rect.y / size;\r\n\t\tlet x2 = (rect.x + rect.width) / size;\r\n\t\tlet y2 = (rect.y + rect.height) / size;\r\n\r\n\t\tvar textureCoordinates = [\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx2, y1,\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx1, y2\r\n\t\t];\r\n\r\n\t\treturn textureCoordinates;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/renderHelper.ts","import { Vector, Rectangle } from '../model';\r\n\r\nexport class TextureMapper {\r\n\r\n\tprivate static instance: TextureMapper = new TextureMapper();\r\n\r\n\tprivate texture0 = new Rectangle(0, 0, 0, 0);\r\n\tprivate texture1 = new Rectangle(0, 0, 51.2, 51.2);\r\n\tprivate texture2 = new Rectangle(51.2, 0, 51.2, 51.2);\r\n\tprivate texture3 = new Rectangle(102.4, 0, 51.2, 51.2);\r\n\tprivate texture4 = new Rectangle(153.6, 0, 51.2, 51.2);\r\n\tprivate texture5 = new Rectangle(204.8, 0, 51.2, 51.2);\r\n\tprivate texture6 = new Rectangle(0, 51.2, 51.2, 51.2);\r\n\tprivate texture7 = new Rectangle(51.2, 51.2, 51.2, 51.2);\r\n\tprivate texture8 = new Rectangle(102.4, 51.2, 51.2, 51.2);\r\n\tprivate texture9 = new Rectangle(153.6, 51.2, 51.2, 51.2);\r\n\tprivate texture10 = new Rectangle(204.8, 51.2, 51.2, 51.2);\r\n\tprivate texture11 = new Rectangle(0, 102.4, 51.2, 51.2);\r\n\tprivate texture12 = new Rectangle(51.2, 102.4, 51.2, 51.2);\r\n\tprivate texture13 = new Rectangle(102.4, 102.4, 51.2, 51.2);\r\n\tprivate texture14 = new Rectangle(153.6, 102.4, 51.2, 51.2);\r\n\tprivate texture15 = new Rectangle(204.8, 102.4, 51.2, 50);\r\n\tprivate texture16 = new Rectangle(0, 153.6, 51.2, 51.2);\r\n\tprivate texture17 = new Rectangle(51.2, 153.6, 51.2, 51.2);\r\n\tprivate texture18 = new Rectangle(102.4, 153.6, 51.2, 51.2);\r\n\tprivate texture19 = new Rectangle(153.6, 153.6, 50, 50);\r\n\tprivate texture20 = new Rectangle(204.8, 153.6, 51.2, 51.2);\r\n\tprivate texture21 = new Rectangle(0, 204.8, 51.2, 51.2);\r\n\tprivate texture22 = new Rectangle(51.2, 204.8, 51.2, 51.2);\r\n\tprivate texture23 = new Rectangle(102.4, 204.8, 50, 51.2);\r\n\tprivate texture24 = new Rectangle(153.6, 204.8, 51.2, 51.2);\r\n\tprivate texture25 = new Rectangle(234, 220, 20, 36);\r\n\tprivate texture26 = new Rectangle(128, 320, 86, 128);\r\n\r\n\tprivate texture50 = new Rectangle(0, 368, 128, 16);\r\n\tprivate texture51 = new Rectangle(32, 1280, 290, 32);\r\n\tprivate texture52 = new Rectangle(32, 1440, 64, 8);\r\n\tprivate texture53 = new Rectangle(33, 1448, 8, 8);\r\n\tprivate texture54 = new Rectangle(33, 1456, 8, 8);\r\n\r\n\tprivate texture55 = new Rectangle(384, 1024, 128, 128);\r\n\tprivate texture56 = new Rectangle(512, 1024, 128, 128);\r\n\tprivate texture57 = new Rectangle(640, 1024, 128, 128);\r\n\tprivate texture58 = new Rectangle(768, 1024, 128, 128);\r\n\tprivate texture59 = new Rectangle(896, 1024, 128, 128);\r\n\r\n\tprivate texture60 = new Rectangle(1760, 1248, 32, 64);\r\n\tprivate texture61 = new Rectangle(1792, 1248, 32, 64);\r\n\tprivate texture62 = new Rectangle(1824, 1248, 32, 64);\r\n\tprivate texture63 = new Rectangle(1856, 1248, 32, 64);\r\n\r\n\tprivate texture100 = new Rectangle(258, 2, 55, 50);\r\n\tprivate texture101 = new Rectangle(311, 2, 64, 55);\r\n\tprivate texture102 = new Rectangle(375, 2, 72, 64);\r\n\tprivate texture103 = new Rectangle(257, 64, 75, 64);\r\n\tprivate texture104 = new Rectangle(336, 64, 78, 72);\r\n\tprivate texture105 = new Rectangle(416, 64, 82, 75);\r\n\tprivate texture106 = new Rectangle(256, 192, 128, 128);\r\n\tprivate texture107 = new Rectangle(384, 192, 128, 128);\r\n\tprivate texture108 = new Rectangle(512, 192, 128, 128);\r\n\tprivate texture109 = new Rectangle(256, 320, 128, 128);\r\n\tprivate texture110 = new Rectangle(384, 320, 128, 128);\r\n\tprivate texture111 = new Rectangle(512, 320, 128, 128);\r\n\tprivate texture112 = new Rectangle(512, 0, 128, 128);\r\n\tprivate texture113 = new Rectangle(640, 0, 128, 128);\r\n\tprivate texture114 = new Rectangle(768, 0, 128, 128);\r\n\tprivate texture115 = new Rectangle(896, 0, 128, 128);\r\n\tprivate texture116 = new Rectangle(704, 128, 128, 128);\r\n\tprivate texture117 = new Rectangle(832, 128, 128, 128);\r\n\r\n\tprivate texture118 = new Rectangle(1870, 340, 85, 85);\r\n\tprivate texture119 = new Rectangle(1955, 340, 85, 85);\r\n\tprivate texture120 = new Rectangle(1700, 425, 85, 85);\r\n\tprivate texture121 = new Rectangle(1785, 425, 85, 85);\r\n\tprivate texture122 = new Rectangle(1870, 425, 85, 85);\r\n\tprivate texture123 = new Rectangle(1955, 425, 85, 85);\r\n\tprivate texture124 = new Rectangle(1700, 510, 85, 85);\r\n\tprivate texture125 = new Rectangle(1785, 510, 85, 85);\r\n\tprivate texture126 = new Rectangle(1870, 510, 85, 85);\r\n\tprivate texture127 = new Rectangle(1955, 510, 85, 85);\r\n\tprivate texture128 = new Rectangle(1700, 595, 85, 85);\r\n\tprivate texture129 = new Rectangle(1785, 595, 85, 85);\r\n\tprivate texture130 = new Rectangle(1870, 595, 85, 85);\r\n\tprivate texture131 = new Rectangle(1955, 595, 85, 85);\r\n\tprivate texture132 = new Rectangle(1700, 680, 85, 85);\r\n\tprivate texture133 = new Rectangle(1785, 680, 85, 85);\r\n\tprivate texture134 = new Rectangle(1870, 680, 85, 85);\r\n\tprivate texture135 = new Rectangle(1955, 680, 85, 85);\r\n\r\n\tprivate texture136 = new Rectangle(1700, 765, 85, 85);\r\n\tprivate texture137 = new Rectangle(1785, 765, 85, 85);\r\n\tprivate texture138 = new Rectangle(1870, 765, 85, 85);\r\n\r\n\tprivate texture139 = new Rectangle(1408, 448, 64, 64);\r\n\tprivate texture140 = new Rectangle(1472, 448, 64, 64);\r\n\tprivate texture141 = new Rectangle(1536, 448, 64, 64);\r\n\tprivate texture142 = new Rectangle(1600, 448, 64, 64);\r\n\tprivate texture143 = new Rectangle(1408, 512, 64, 64);\r\n\tprivate texture144 = new Rectangle(1472, 512, 64, 64);\r\n\tprivate texture145 = new Rectangle(1536, 512, 64, 64);\r\n\tprivate texture146 = new Rectangle(1600, 512, 64, 64);\r\n\t\r\n\t\r\n\r\n\tprivate texture147 = new Rectangle(0, 896, 128, 128);\r\n\tprivate texture148 = new Rectangle(128, 896, 128, 128);\r\n\tprivate texture149 = new Rectangle(256, 896, 128, 128);\r\n\tprivate texture150 = new Rectangle(0, 1024, 128, 128);\r\n\tprivate texture151 = new Rectangle(128, 1024, 128, 128);\r\n\tprivate texture152 = new Rectangle(256, 1024, 128, 128);\r\n\r\n\tprivate texture153 = new Rectangle(1408, 576, 64, 64);\r\n\tprivate texture154 = new Rectangle(1472, 576, 64, 64);\r\n\tprivate texture155 = new Rectangle(1536, 576, 64, 64);\r\n\r\n\tprivate texture156 = new Rectangle(32, 608, 32, 64);\r\n\tprivate texture157 = new Rectangle(96, 608, 32, 64);\r\n\tprivate texture158 = new Rectangle(160, 608, 32, 64);\r\n\tprivate texture159 = new Rectangle(224, 608, 32, 64);\r\n\r\n\r\n\tprivate texture160 = new Rectangle(1056, 1248, 32, 64);\r\n\tprivate texture161 = new Rectangle(1088, 1248, 32, 64);\r\n\r\n\tprivate texture162 = new Rectangle(992, 1248, 32, 64);\r\n\tprivate texture163 = new Rectangle(1024, 1248, 32, 64);\r\n\r\n\tprivate texture165 = new Rectangle(1152, 1248, 32, 64);\r\n\tprivate texture166 = new Rectangle(1184, 1248, 32, 64);\r\n\tprivate texture167 = new Rectangle(1216, 1248, 32, 64);\r\n\tprivate texture168 = new Rectangle(1280, 1248, 32, 64);\r\n\tprivate texture169 = new Rectangle(1312, 1248, 32, 64);\r\n\r\n\tprivate texture170 = new Rectangle(1344, 1248, 32, 64);\r\n\tprivate texture171 = new Rectangle(1376, 1248, 32, 64);\r\n\tprivate texture172 = new Rectangle(1408, 1248, 32, 64);\r\n\tprivate texture173 = new Rectangle(1472, 1248, 32, 64);\r\n\tprivate texture174 = new Rectangle(1504, 1248, 32, 64);\r\n\tprivate texture175 = new Rectangle(1536, 1248, 32, 64);\r\n\tprivate texture176 = new Rectangle(1568, 1248, 32, 64);\r\n\tprivate texture177 = new Rectangle(1600, 1248, 32, 64);\r\n\tprivate texture178 = new Rectangle(1632, 1248, 32, 64);\r\n\r\n\tprivate texture179 = new Rectangle(1248, 32, 164, 27);\r\n\tprivate texture180 = new Rectangle(1248, 96, 32, 32);\r\n\tprivate texture181 = new Rectangle(1248, 64, 164, 27);\r\n\tprivate texture182 = new Rectangle(1248, 0, 164, 27);\r\n\tprivate texture183 = new Rectangle(1440, 0, 164, 27);\r\n\tprivate texture184 = new Rectangle(1440, 32, 164, 27);\r\n\tprivate texture185 = new Rectangle(1440, 64, 164, 27);\r\n\tprivate texture186 = new Rectangle(1440, 96, 164, 27);\r\n\r\n\tprivate texture187 = new Rectangle(1088, 96, 128, 64);\r\n\r\n\tprivate texture188 = new Rectangle(1088, 192, 128, 64);\r\n\tprivate texture189 = new Rectangle(1088, 256, 128, 64);\r\n\tprivate texture190 = new Rectangle(1088, 320, 128, 64);\r\n\tprivate texture191 = new Rectangle(1088, 384, 128, 64);\r\n\tprivate texture192 = new Rectangle(1088, 448, 128, 64);\r\n\tprivate texture193 = new Rectangle(1088, 512, 128, 64);\r\n\tprivate texture194 = new Rectangle(1088, 576, 128, 64);\r\n\tprivate texture195 = new Rectangle(1088, 640, 128, 64);\r\n\tprivate texture196 = new Rectangle(1088, 704, 128, 64);\r\n\tprivate texture197 = new Rectangle(1088, 768, 128, 64);\r\n\r\n\tprivate texture198 = new Rectangle(1632, 0, 270, 64);\r\n\r\n\tprivate texture199 = new Rectangle(64, 1664, 128, 128);\r\n\r\n\r\n\tprivate texture200 = new Rectangle(28, 293, 28, 26);\r\n\tprivate texture201 = new Rectangle(56, 293, 28, 26);\r\n\tprivate texture202 = new Rectangle(84, 293, 28, 26);\r\n\tprivate texture203 = new Rectangle(0, 290, 28, 29);\r\n\tprivate texture204 = new Rectangle(112, 290, 28, 29);\r\n\tprivate texture205 = new Rectangle(140, 290, 28, 29);\r\n\tprivate texture206 = new Rectangle(168, 290, 28, 29);\r\n\tprivate texture207 = new Rectangle(196, 290, 28, 29);\r\n\tprivate texture208 = new Rectangle(224, 290, 28, 29);\r\n\r\n\tprivate texture209 = new Rectangle(0, 480, 28, 29);\r\n\tprivate texture210 = new Rectangle(28, 480, 28, 29);\r\n\tprivate texture211 = new Rectangle(56, 480, 28, 29);\r\n\tprivate texture212 = new Rectangle(84, 480, 28, 29);\r\n\r\n\tprivate texture214 = new Rectangle(0, 448, 28, 29);\r\n\tprivate texture215 = new Rectangle(28, 448, 28, 29);\r\n\tprivate texture216 = new Rectangle(56, 448, 28, 29);\r\n\tprivate texture217 = new Rectangle(84, 448, 28, 29);\r\n\tprivate texture218 = new Rectangle(112, 448, 28, 29);\r\n\tprivate texture219 = new Rectangle(140, 448, 28, 29);\r\n\r\n\tprivate texture220 = new Rectangle(0, 416, 28, 29);\r\n\tprivate texture221 = new Rectangle(28, 416, 28, 29);\r\n\tprivate texture222 = new Rectangle(56, 416, 28, 29);\r\n\tprivate texture223 = new Rectangle(84, 416, 28, 29);\r\n\r\n\tprivate texture224 = new Rectangle(0, 384, 28, 29);\r\n\tprivate texture225 = new Rectangle(28, 384, 28, 29);\r\n\tprivate texture226 = new Rectangle(56, 384, 28, 29);\r\n\r\n\tprivate texture227 = new Rectangle(112, 480, 28, 29);\r\n\tprivate texture228 = new Rectangle(140, 480, 28, 29);\r\n\tprivate texture229 = new Rectangle(168, 480, 28, 29);\r\n\r\n\tprivate texture230 = new Rectangle(196, 480, 28, 29);\r\n\tprivate texture231 = new Rectangle(224, 480, 28, 29);\r\n\tprivate texture232 = new Rectangle(252, 480, 28, 29);\r\n\r\n\tprivate texture233 = new Rectangle(32, 1152, 32, 32);\r\n\tprivate texture234 = new Rectangle(64, 1152, 32, 32);\r\n\tprivate texture235 = new Rectangle(96, 1152, 32, 32);\r\n\tprivate texture236 = new Rectangle(128, 1152, 32, 32);\r\n\r\n\tprivate texture237 = new Rectangle(160, 1152, 32, 32);\r\n\tprivate texture238 = new Rectangle(192, 1152, 32, 32);\r\n\tprivate texture239 = new Rectangle(224, 1152, 32, 32);\r\n\tprivate texture240 = new Rectangle(256, 1152, 32, 32);\r\n\tprivate texture241 = new Rectangle(288, 1152, 32, 32);\r\n\tprivate texture242 = new Rectangle(320, 1152, 32, 32);\r\n\r\n\tprivate texture243 = new Rectangle(32, 1216, 32, 32);\r\n\tprivate texture244 = new Rectangle(64, 1216, 32, 32);\r\n\tprivate texture245 = new Rectangle(96, 1216, 32, 32);\r\n\tprivate texture246 = new Rectangle(128, 1216, 32, 32);\r\n\tprivate texture247 = new Rectangle(160, 1216, 32, 32);\r\n\tprivate texture248 = new Rectangle(192, 1216, 32, 32);\r\n\r\n\tprivate texture249 = new Rectangle(0, 320, 28, 32);\r\n\r\n\tprivate texture250 = new Rectangle(224, 1216, 32, 32);\r\n\tprivate texture251 = new Rectangle(256, 1216, 32, 32);\r\n\tprivate texture252 = new Rectangle(288, 1216, 32, 32);\r\n\tprivate texture253 = new Rectangle(320, 1216, 32, 32);\r\n\tprivate texture254 = new Rectangle(352, 1216, 32, 32);\r\n\tprivate texture255 = new Rectangle(384, 1216, 32, 32);\r\n\tprivate texture256 = new Rectangle(416, 1216, 32, 32);\r\n\tprivate texture257 = new Rectangle(448, 1216, 32, 32);\r\n\r\n\tprivate texture262 = new Rectangle(32, 1344, 32, 32);\r\n\tprivate texture263 = new Rectangle(64, 1344, 32, 32);\r\n\tprivate texture264 = new Rectangle(96, 1344, 32, 32);\r\n\tprivate texture265 = new Rectangle(160, 1344, 32, 32);\r\n\tprivate texture266 = new Rectangle(192, 1344, 32, 32);\r\n\tprivate texture267 = new Rectangle(224, 1344, 32, 32);\r\n\r\n\tprivate texture268 = new Rectangle(32, 1401, 24, 7);\r\n\tprivate texture269 = new Rectangle(64, 1401, 15, 7);\r\n\r\n\tprivate texture270 = new Rectangle(288, 1344, 32, 32);\r\n\tprivate texture271 = new Rectangle(320, 1344, 32, 32);\r\n\tprivate texture272 = new Rectangle(352, 1344, 32, 32);\r\n\tprivate texture273 = new Rectangle(384, 1344, 32, 32);\r\n\tprivate texture274 = new Rectangle(416, 1344, 32, 32);\r\n\tprivate texture275 = new Rectangle(448, 1344, 32, 32);\r\n\r\n\tprivate texture276 = new Rectangle(288, 1376, 32, 32);\r\n\tprivate texture277 = new Rectangle(320, 1376, 32, 32);\r\n\tprivate texture278 = new Rectangle(352, 1376, 32, 32);\r\n\tprivate texture279 = new Rectangle(384, 1376, 32, 32);\r\n\tprivate texture280 = new Rectangle(416, 1376, 32, 32);\r\n\tprivate texture281 = new Rectangle(448, 1376, 32, 32);\r\n\r\n\tprivate texture282 = new Rectangle(512, 1344, 32, 32);\r\n\tprivate texture283 = new Rectangle(544, 1344, 32, 32);\r\n\tprivate texture284 = new Rectangle(576, 1344, 32, 32);\r\n\tprivate texture285 = new Rectangle(608, 1344, 32, 32);\r\n\tprivate texture286 = new Rectangle(640, 1344, 32, 32);\r\n\tprivate texture287 = new Rectangle(672, 1344, 32, 32);\r\n\tprivate texture288 = new Rectangle(704, 1344, 32, 32);\r\n\tprivate texture289 = new Rectangle(736, 1344, 32, 32);\r\n\r\n\tprivate texture290 = new Rectangle(800, 1344, 32, 32);\r\n\tprivate texture291 = new Rectangle(832, 1344, 32, 32);\r\n\tprivate texture292 = new Rectangle(864, 1344, 32, 32);\r\n\tprivate texture293 = new Rectangle(896, 1344, 32, 32);\r\n\r\n\tprivate texture294 = new Rectangle(480, 1376, 28, 32);\r\n\tprivate texture295 = new Rectangle(512, 1376, 28, 32);\r\n\tprivate texture296 = new Rectangle(544, 1376, 28, 32);\r\n\r\n\tprivate texture297 = new Rectangle(480, 1440, 20, 20);\r\n\tprivate texture298 = new Rectangle(512, 1440, 20, 20);\r\n\tprivate texture299 = new Rectangle(544, 1440, 20, 20);\r\n\r\n\tprivate texture300 = new Rectangle(32, 1664, 128, 128);\r\n\r\n\tprivate texture301 = new Rectangle(1344, 1184, 64, 64);\r\n\tprivate texture302 = new Rectangle(1408, 1184, 64, 64);\r\n\tprivate texture303 = new Rectangle(1472, 1184, 64, 64);\r\n\tprivate texture304 = new Rectangle(1536, 1184, 64, 64);\r\n\tprivate texture305 = new Rectangle(1600, 1184, 64, 64);\r\n\tprivate texture306 = new Rectangle(1664, 1184, 64, 64);\r\n\r\n\r\n\r\n\tprivate texture500 = new Rectangle(0, 1536, 96, 64);\r\n\r\n\tprivate texture550 = new Rectangle(1088, 0, 128, 64);\r\n\tprivate texture551 = new Rectangle(1632, 96, 111, 12);\r\n\tprivate texture552 = new Rectangle(1632, 128, 111, 12);\r\n\r\n\tprivate texture553 = new Rectangle(1440, 128, 164, 27);\r\n\r\n\tprivate texture554 = new Rectangle(1248, 128, 164, 27);\r\n\r\n\tprivate texture555 = new Rectangle(1440, 160, 164, 27);\r\n\tprivate texture556 = new Rectangle(1440, 192, 164, 27);\r\n\tprivate texture557 = new Rectangle(1440, 224, 164, 27);\r\n\tprivate texture558 = new Rectangle(1440, 256, 164, 27);\r\n\r\n\tprivate texture560 = new Rectangle(1344, 704, 64, 96);\r\n\tprivate texture561 = new Rectangle(1408, 704, 64, 96);\r\n\tprivate texture562 = new Rectangle(1472, 704, 64, 96);\r\n\tprivate texture563 = new Rectangle(1536, 704, 64, 96);\r\n\tprivate texture564 = new Rectangle(1600, 704, 64, 96);\r\n\tprivate texture565 = new Rectangle(1344, 800, 64, 96);\r\n\tprivate texture566 = new Rectangle(1408, 800, 64, 96);\r\n\tprivate texture567 = new Rectangle(1472, 800, 64, 96);\r\n\r\n\tprivate texture568 = new Rectangle(1536, 800, 64, 96);\r\n\tprivate texture569 = new Rectangle(1600, 800, 64, 96);\r\n\tprivate texture570 = new Rectangle(1344, 896, 64, 96);\r\n\tprivate texture571 = new Rectangle(1408, 896, 64, 96);\r\n\tprivate texture572 = new Rectangle(1472, 896, 64, 96);\r\n\tprivate texture573 = new Rectangle(1536, 896, 64, 96);\r\n\tprivate texture574 = new Rectangle(1600, 896, 64, 96);\r\n\tprivate texture575 = new Rectangle(1344, 992, 64, 96);\r\n\tprivate texture576 = new Rectangle(1408, 992, 64, 96);\r\n\tprivate texture577 = new Rectangle(1472, 992, 64, 96);\r\n\tprivate texture578 = new Rectangle(1536, 992, 64, 96);\r\n\tprivate texture579 = new Rectangle(1600, 992, 64, 96);\r\n\r\n\tprivate texture580 = new Rectangle(1408, 1440, 128, 96);\r\n\tprivate texture581 = new Rectangle(1536, 1440, 128, 96);\r\n\tprivate texture582 = new Rectangle(1664, 1440, 128, 96);\r\n\tprivate texture583 = new Rectangle(1792, 1440, 128, 96);\r\n\tprivate texture584 = new Rectangle(1408, 1568, 128, 96);\r\n\tprivate texture585 = new Rectangle(1536, 1568, 128, 96);\r\n\tprivate texture586 = new Rectangle(1664, 1568, 128, 96);\r\n\tprivate texture587 = new Rectangle(1792, 1568, 128, 96);\r\n\tprivate texture588 = new Rectangle(1408, 1696, 128, 96);\r\n\tprivate texture589 = new Rectangle(1536, 1696, 128, 96);\r\n\tprivate texture590 = new Rectangle(1664, 1696, 128, 96);\r\n\tprivate texture591 = new Rectangle(1792, 1696, 128, 96);\r\n\tprivate texture592 = new Rectangle(1408, 1824, 128, 96);\r\n\tprivate texture593 = new Rectangle(1536, 1824, 128, 96);\r\n\tprivate texture594 = new Rectangle(1664, 1824, 128, 96);\r\n\tprivate texture595 = new Rectangle(1792, 1824, 128, 96);\r\n\tprivate texture596 = new Rectangle(1408, 1952, 128, 96);\r\n\tprivate texture597 = new Rectangle(1664, 1952, 128, 96);\r\n\tprivate texture598 = new Rectangle(1792, 1952, 128, 96);\r\n\r\n\tprivate texture600 = new Rectangle(448, 736, 128, 128);\r\n\tprivate texture601 = new Rectangle(576, 736, 128, 128);\r\n\tprivate texture602 = new Rectangle(704, 736, 128, 128);\r\n\tprivate texture603 = new Rectangle(832, 736, 128, 128);\r\n\tprivate texture604 = new Rectangle(448, 864, 128, 128);\r\n\tprivate texture605 = new Rectangle(576, 864, 128, 128);\r\n\tprivate texture606 = new Rectangle(704, 864, 128, 128);\r\n\tprivate texture607 = new Rectangle(832, 864, 128, 128);\r\n\r\n\tprivate texture608 = new Rectangle(448, 480, 128, 128);\r\n\tprivate texture609 = new Rectangle(576, 480, 128, 128);\r\n\tprivate texture610 = new Rectangle(704, 480, 128, 128);\r\n\tprivate texture611 = new Rectangle(832, 480, 128, 128);\r\n\tprivate texture612 = new Rectangle(448, 608, 128, 128);\r\n\tprivate texture613 = new Rectangle(576, 608, 128, 128);\r\n\tprivate texture614 = new Rectangle(704, 608, 128, 128);\r\n\tprivate texture615 = new Rectangle(832, 608, 128, 128);\r\n\r\n\tprivate texture616 = new Rectangle(32, 512, 128, 128);\r\n\tprivate texture617 = new Rectangle(160, 512, 128, 128);\r\n\tprivate texture618 = new Rectangle(288, 512, 128, 128);\r\n\tprivate texture619 = new Rectangle(32, 640, 128, 128);\r\n\tprivate texture620 = new Rectangle(160, 640, 128, 128);\r\n\tprivate texture621 = new Rectangle(288, 640, 128, 128);\r\n\tprivate texture622 = new Rectangle(32, 768, 128, 128);\r\n\tprivate texture623 = new Rectangle(160, 768, 128, 128);\r\n\tprivate texture624 = new Rectangle(1440, 288, 164, 27);\r\n\r\n\tconstrcuctor() {\r\n\t\tif (TextureMapper.instance) {\r\n\t\t\tthrow new Error(\"Static class cant be instanced!\");\r\n\t\t}\r\n\r\n\t\tTextureMapper.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance() {\r\n\t\treturn TextureMapper.instance;\r\n\t}\r\n\r\n\r\n\r\n\tpublic mapTexture(textureType: number) {\r\n\r\n\t\tswitch (textureType) {\r\n\t\t\tcase 0: return this.texture0;\r\n\t\t\tcase 1: return this.texture1;\r\n\t\t\tcase 2: return this.texture2;\r\n\t\t\tcase 3: return this.texture3;\r\n\t\t\tcase 4: return this.texture4;\r\n\t\t\tcase 5: return this.texture5;\r\n\t\t\tcase 6: return this.texture6;\r\n\t\t\tcase 7: return this.texture7;\r\n\t\t\tcase 8: return this.texture8;\r\n\t\t\tcase 9: return this.texture9;\r\n\t\t\tcase 10: return this.texture10;\r\n\t\t\tcase 11: return this.texture11;\r\n\t\t\tcase 12: return this.texture12;\r\n\t\t\tcase 13: return this.texture13;\r\n\t\t\tcase 14: return this.texture14;\r\n\t\t\tcase 15: return this.texture15;\r\n\t\t\tcase 16: return this.texture16;\r\n\t\t\tcase 17: return this.texture17;\r\n\t\t\tcase 18: return this.texture18;\r\n\t\t\tcase 19: return this.texture19;\r\n\t\t\tcase 20: return this.texture20;\r\n\t\t\tcase 21: return this.texture21;\r\n\t\t\tcase 22: return this.texture22;\r\n\t\t\tcase 23: return this.texture23;\r\n\t\t\tcase 24: return this.texture24;\r\n\t\t\tcase 25: return this.texture25;\r\n\t\t\tcase 26: return this.texture26;\r\n\r\n\t\t\tcase 50: return this.texture50;\r\n\t\t\tcase 51: return this.texture51;\r\n\t\t\tcase 52: return this.texture52;\r\n\t\t\tcase 53: return this.texture53;\r\n\t\t\tcase 54: return this.texture54;\r\n\r\n\t\t\tcase 55: return this.texture55;\r\n\t\t\tcase 56: return this.texture56;\r\n\t\t\tcase 57: return this.texture57;\r\n\t\t\tcase 58: return this.texture58;\r\n\t\t\tcase 59: return this.texture59;\r\n\r\n\t\t\tcase 60: return this.texture60;\r\n\t\t\tcase 61: return this.texture61;\r\n\t\t\tcase 62: return this.texture62;\t\t\t\r\n\t\t\tcase 63: return this.texture63;\r\n\r\n\t\t\tcase 100: return this.texture100;\r\n\t\t\tcase 101: return this.texture101;\r\n\t\t\tcase 102: return this.texture102;\r\n\t\t\tcase 103: return this.texture103;\r\n\t\t\tcase 104: return this.texture104;\r\n\t\t\tcase 105: return this.texture105;\r\n\t\t\tcase 106: return this.texture106;\r\n\t\t\tcase 107: return this.texture107;\r\n\t\t\tcase 108: return this.texture108;\r\n\t\t\tcase 109: return this.texture109;\r\n\t\t\tcase 110: return this.texture110;\r\n\t\t\tcase 111: return this.texture111;\r\n\t\t\tcase 112: return this.texture112;\r\n\t\t\tcase 113: return this.texture113;\r\n\t\t\tcase 114: return this.texture114;\r\n\t\t\tcase 115: return this.texture115;\r\n\t\t\tcase 116: return this.texture116;\r\n\t\t\tcase 117: return this.texture117;\r\n\t\t\tcase 118: return this.texture118;\r\n\t\t\tcase 119: return this.texture119;\r\n\t\t\tcase 120: return this.texture120;\r\n\t\t\tcase 121: return this.texture121;\r\n\t\t\tcase 122: return this.texture122;\r\n\t\t\tcase 123: return this.texture123;\r\n\t\t\tcase 124: return this.texture124;\r\n\t\t\tcase 125: return this.texture125;\r\n\t\t\tcase 126: return this.texture126;\r\n\t\t\tcase 127: return this.texture127;\r\n\t\t\tcase 128: return this.texture128;\r\n\t\t\tcase 129: return this.texture129;\r\n\t\t\tcase 130: return this.texture130;\r\n\t\t\tcase 131: return this.texture131;\r\n\t\t\tcase 132: return this.texture132;\r\n\t\t\tcase 133: return this.texture133;\r\n\t\t\tcase 134: return this.texture134;\r\n\t\t\tcase 135: return this.texture135;\r\n\r\n\t\t\tcase 136: return this.texture136;\r\n\t\t\tcase 137: return this.texture137;\r\n\t\t\tcase 138: return this.texture138;\r\n\r\n\t\t\tcase 139: return this.texture139;\r\n\t\t\tcase 140: return this.texture140;\r\n\t\t\tcase 141: return this.texture141;\r\n\t\t\tcase 142: return this.texture142;\r\n\t\t\tcase 143: return this.texture143;\r\n\t\t\tcase 144: return this.texture144;\r\n\t\t\tcase 145: return this.texture145;\r\n\t\t\tcase 146: return this.texture146;\r\n\r\n\t\t\tcase 147: return this.texture147;\r\n\t\t\tcase 148: return this.texture148;\r\n\t\t\tcase 149: return this.texture149;\r\n\t\t\tcase 150: return this.texture150;\r\n\t\t\tcase 151: return this.texture151;\r\n\t\t\tcase 152: return this.texture152;\r\n\r\n\t\t\tcase 153: return this.texture153;\r\n\t\t\tcase 154: return this.texture154;\r\n\t\t\tcase 155: return this.texture155;\r\n\r\n\t\t\tcase 156: return this.texture156;\r\n\t\t\tcase 157: return this.texture157;\r\n\t\t\tcase 158: return this.texture158;\r\n\t\t\tcase 159: return this.texture159;\r\n\r\n\t\t\tcase 160: return this.texture160;\r\n\t\t\tcase 161: return this.texture161;\r\n\r\n\t\t\tcase 162: return this.texture162;\r\n\t\t\tcase 163: return this.texture163;\r\n\r\n\t\t\tcase 165: return this.texture165;\r\n\t\t\tcase 166: return this.texture166;\r\n\t\t\tcase 167: return this.texture167;\r\n\t\t\tcase 168: return this.texture168;\r\n\t\t\tcase 169: return this.texture169;\r\n\r\n\t\t\tcase 170: return this.texture170;\r\n\t\t\tcase 171: return this.texture171;\r\n\t\t\tcase 172: return this.texture172;\r\n\t\t\tcase 173: return this.texture173;\r\n\t\t\tcase 174: return this.texture174;\r\n\t\t\tcase 175: return this.texture175;\r\n\t\t\tcase 176: return this.texture176;\r\n\t\t\tcase 177: return this.texture177;\r\n\t\t\tcase 178: return this.texture178;\r\n\t\t\tcase 179: return this.texture179;\r\n\t\t\tcase 180: return this.texture180;\r\n\r\n\t\t\tcase 181: return this.texture181;\r\n\t\t\tcase 182: return this.texture182;\r\n\t\t\tcase 183: return this.texture183;\r\n\t\t\tcase 184: return this.texture184;\r\n\t\t\tcase 185: return this.texture185;\r\n\t\t\tcase 186: return this.texture186;\r\n\t\t\tcase 187: return this.texture187;\r\n\t\t\tcase 188: return this.texture188;\r\n\t\t\tcase 189: return this.texture189;\r\n\t\t\tcase 190: return this.texture190;\r\n\t\t\tcase 191: return this.texture191;\r\n\t\t\tcase 192: return this.texture192;\r\n\t\t\tcase 193: return this.texture193;\r\n\t\t\tcase 194: return this.texture194;\r\n\t\t\tcase 195: return this.texture195;\r\n\t\t\tcase 196: return this.texture196;\r\n\t\t\tcase 197: return this.texture197;\r\n\r\n\t\t\tcase 198: return this.texture198;\r\n\t\t\tcase 199: return this.texture199;\r\n\r\n\r\n\t\t\tcase 200: return this.texture200;\r\n\t\t\tcase 201: return this.texture201;\r\n\t\t\tcase 202: return this.texture202;\r\n\t\t\tcase 203: return this.texture203;\r\n\t\t\tcase 204: return this.texture204;\r\n\t\t\tcase 205: return this.texture205;\r\n\t\t\tcase 206: return this.texture206;\r\n\t\t\tcase 207: return this.texture207;\r\n\t\t\tcase 208: return this.texture208;\r\n\r\n\t\t\tcase 209: return this.texture209;\r\n\t\t\tcase 210: return this.texture210;\r\n\t\t\tcase 211: return this.texture211;\r\n\t\t\tcase 212: return this.texture212;\r\n\r\n\t\t\tcase 214: return this.texture214;\r\n\t\t\tcase 215: return this.texture215;\r\n\t\t\tcase 216: return this.texture216;\r\n\t\t\tcase 217: return this.texture217;\r\n\t\t\tcase 218: return this.texture218;\r\n\t\t\tcase 219: return this.texture219;\r\n\r\n\t\t\tcase 220: return this.texture220;\r\n\t\t\tcase 221: return this.texture221;\r\n\t\t\tcase 222: return this.texture222;\r\n\t\t\tcase 223: return this.texture223;\r\n\r\n\t\t\tcase 224: return this.texture224;\r\n\t\t\tcase 225: return this.texture225;\r\n\t\t\tcase 226: return this.texture226;\r\n\r\n\t\t\tcase 227: return this.texture227;\r\n\t\t\tcase 228: return this.texture228;\r\n\t\t\tcase 229: return this.texture229;\r\n\r\n\t\t\tcase 230: return this.texture230;\r\n\t\t\tcase 231: return this.texture231;\r\n\t\t\tcase 232: return this.texture232;\r\n\r\n\t\t\tcase 233: return this.texture233;\r\n\t\t\tcase 234: return this.texture234;\r\n\t\t\tcase 235: return this.texture235;\r\n\t\t\tcase 236: return this.texture236;\r\n\r\n\t\t\tcase 237: return this.texture237;\r\n\t\t\tcase 238: return this.texture238;\r\n\t\t\tcase 239: return this.texture239;\r\n\t\t\tcase 240: return this.texture240;\r\n\t\t\tcase 241: return this.texture241;\r\n\t\t\tcase 242: return this.texture242;\r\n\r\n\t\t\tcase 243: return this.texture243;\r\n\t\t\tcase 244: return this.texture244;\r\n\t\t\tcase 245: return this.texture245;\r\n\t\t\tcase 246: return this.texture246;\r\n\t\t\tcase 247: return this.texture247;\r\n\t\t\tcase 248: return this.texture248;\r\n\r\n\t\t\tcase 249: return this.texture249;\r\n\r\n\t\t\tcase 250: return this.texture250;\r\n\t\t\tcase 251: return this.texture251;\r\n\t\t\tcase 252: return this.texture252;\r\n\t\t\tcase 253: return this.texture253;\r\n\t\t\tcase 254: return this.texture254;\r\n\t\t\tcase 255: return this.texture255;\r\n\t\t\tcase 256: return this.texture256;\r\n\t\t\tcase 257: return this.texture257;\r\n\r\n\t\t\tcase 262: return this.texture262;\r\n\t\t\tcase 263: return this.texture263;\r\n\t\t\tcase 264: return this.texture264;\r\n\t\t\tcase 265: return this.texture265;\r\n\t\t\tcase 266: return this.texture266;\r\n\t\t\tcase 267: return this.texture267;\r\n\r\n\t\t\tcase 268: return this.texture268;\r\n\t\t\tcase 269: return this.texture269;\r\n\r\n\t\t\tcase 270: return this.texture270;\r\n\t\t\tcase 271: return this.texture271;\r\n\t\t\tcase 272: return this.texture272;\r\n\t\t\tcase 273: return this.texture273;\r\n\t\t\tcase 274: return this.texture274;\r\n\t\t\tcase 275: return this.texture275;\r\n\r\n\t\t\tcase 276: return this.texture276;\r\n\t\t\tcase 277: return this.texture277;\r\n\t\t\tcase 278: return this.texture278;\r\n\t\t\tcase 279: return this.texture279;\r\n\t\t\tcase 280: return this.texture280;\r\n\t\t\tcase 281: return this.texture281;\r\n\r\n\t\t\tcase 282: return this.texture282;\r\n\t\t\tcase 283: return this.texture283;\r\n\t\t\tcase 284: return this.texture284;\r\n\t\t\tcase 285: return this.texture285;\r\n\t\t\tcase 286: return this.texture286;\r\n\t\t\tcase 287: return this.texture287;\r\n\t\t\tcase 288: return this.texture288;\r\n\t\t\tcase 289: return this.texture289;\r\n\r\n\t\t\tcase 290: return this.texture290;\r\n\t\t\tcase 291: return this.texture291;\r\n\t\t\tcase 292: return this.texture292;\r\n\t\t\tcase 293: return this.texture293;\r\n\r\n\t\t\tcase 294: return this.texture294;\r\n\t\t\tcase 295: return this.texture295;\r\n\t\t\tcase 296: return this.texture296;\r\n\r\n\t\t\tcase 297: return this.texture297;\r\n\t\t\tcase 298: return this.texture298;\r\n\t\t\tcase 299: return this.texture299;\r\n\r\n\t\t\tcase 300: return this.texture300;\r\n\r\n\t\t\tcase 301: return this.texture301;\r\n\t\t\tcase 302: return this.texture302;\r\n\t\t\tcase 303: return this.texture303;\r\n\t\t\tcase 304: return this.texture304;\r\n\t\t\tcase 305: return this.texture305;\r\n\t\t\tcase 306: return this.texture306;\r\n\r\n\t\t\tcase 500: return this.texture500;\r\n\r\n\t\t\tcase 550: return this.texture550;\r\n\t\t\tcase 551: return this.texture551;\r\n\t\t\tcase 552: return this.texture552;\r\n\r\n\t\t\tcase 553: return this.texture553;\r\n\t\t\tcase 554: return this.texture554;\r\n\r\n\t\t\tcase 555: return this.texture555;\r\n\t\t\tcase 556: return this.texture556;\r\n\t\t\tcase 557: return this.texture557;\r\n\t\t\tcase 558: return this.texture558;\r\n\r\n\t\t\tcase 560: return this.texture560;\r\n\t\t\tcase 561: return this.texture561;\r\n\t\t\tcase 562: return this.texture562;\r\n\t\t\tcase 563: return this.texture563;\r\n\t\t\tcase 564: return this.texture564;\r\n\t\t\tcase 565: return this.texture565;\r\n\t\t\tcase 566: return this.texture566;\r\n\t\t\tcase 567: return this.texture567;\r\n\t\t\tcase 568: return this.texture568;\r\n\t\t\tcase 569: return this.texture569;\r\n\t\t\tcase 570: return this.texture570;\r\n\t\t\tcase 571: return this.texture571;\r\n\t\t\tcase 572: return this.texture572;\r\n\t\t\tcase 573: return this.texture573;\r\n\t\t\tcase 574: return this.texture574;\r\n\t\t\tcase 575: return this.texture575;\r\n\r\n\t\t\tcase 576: return this.texture576;\r\n\t\t\tcase 577: return this.texture577;\r\n\t\t\tcase 578: return this.texture578;\r\n\t\t\tcase 579: return this.texture579;\r\n\r\n\t\t\tcase 580: return this.texture580;\r\n\t\t\tcase 581: return this.texture581;\r\n\t\t\tcase 582: return this.texture582;\r\n\t\t\tcase 583: return this.texture583;\r\n\t\t\tcase 584: return this.texture584;\r\n\t\t\tcase 585: return this.texture585;\r\n\t\t\tcase 586: return this.texture586;\r\n\t\t\tcase 587: return this.texture587;\r\n\t\t\tcase 588: return this.texture588;\r\n\t\t\tcase 589: return this.texture589;\r\n\t\t\tcase 590: return this.texture590;\r\n\t\t\tcase 591: return this.texture591;\r\n\t\t\tcase 592: return this.texture592;\r\n\t\t\tcase 593: return this.texture593;\r\n\t\t\tcase 594: return this.texture594;\r\n\t\t\tcase 595: return this.texture595;\r\n\t\t\tcase 596: return this.texture596;\r\n\t\t\tcase 597: return this.texture597;\r\n\t\t\tcase 598: return this.texture598;\r\n\r\n\t\t\tcase 600: return this.texture600;\r\n\t\t\tcase 601: return this.texture601;\r\n\t\t\tcase 602: return this.texture602;\r\n\t\t\tcase 603: return this.texture603;\r\n\t\t\tcase 604: return this.texture604;\r\n\t\t\tcase 605: return this.texture605;\r\n\t\t\tcase 606: return this.texture606;\r\n\t\t\tcase 607: return this.texture607;\r\n\r\n\t\t\tcase 608: return this.texture608;\r\n\t\t\tcase 609: return this.texture609;\r\n\t\t\tcase 610: return this.texture610;\r\n\t\t\tcase 611: return this.texture611;\r\n\t\t\tcase 612: return this.texture612;\r\n\t\t\tcase 613: return this.texture613;\r\n\t\t\tcase 614: return this.texture614;\r\n\t\t\tcase 615: return this.texture615;\r\n\r\n\t\t\tcase 616: return this.texture616;\r\n\t\t\tcase 617: return this.texture617;\r\n\t\t\tcase 618: return this.texture618;\r\n\t\t\tcase 619: return this.texture619;\r\n\t\t\tcase 620: return this.texture620;\r\n\t\t\tcase 621: return this.texture621;\r\n\t\t\tcase 622: return this.texture622;\r\n\t\t\tcase 623: return this.texture623;\r\n\t\t\tcase 624: return this.texture624;\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/textureMapper.ts","export class Matrix3 {\r\n\r\n    public createIdentityMatrix() {\r\n        return [\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            0, 0, 1\r\n        ];\r\n    }\r\n\r\n    public static createProjectionMatrix(width: number, height: number) {\r\n\t\treturn [\r\n\t\t\t2 / width, 0, 0,\r\n\t\t\t0, -2 / height, 0,\r\n\t\t\t-1, 1, 1\r\n\t\t];\r\n\t}\r\n\r\n\tpublic static createTranslationMatrix(tx: number, ty: number) {\r\n\t\treturn [\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\ttx, ty, 1\r\n\t\t];\r\n\t}\r\n\r\n\tpublic static createRotationMatrix(angleInRadians: number) {\r\n\t\tlet c = Math.cos(angleInRadians);\r\n\t\tlet s = Math.sin(angleInRadians);\r\n\t\treturn [\r\n\t\t\tc, -s, 0,\r\n\t\t\ts, c, 0,\r\n\t\t\t0, 0, 1\r\n\t\t];\r\n\t}\r\n\r\n\tpublic static createScaleMatrix(sx: number, sy: number) {\r\n\t\treturn [\r\n\t\t\tsx, 0, 0,\r\n\t\t\t0, sy, 0,\r\n\t\t\t0, 0, 1\r\n\t\t];\r\n\t}\r\n\r\n\tpublic static multiply(a: number[], b: number[]) {\r\n\t\tvar a00 = a[0 * 3 + 0];\r\n\t\tvar a01 = a[0 * 3 + 1];\r\n\t\tvar a02 = a[0 * 3 + 2];\r\n\t\tvar a10 = a[1 * 3 + 0];\r\n\t\tvar a11 = a[1 * 3 + 1];\r\n\t\tvar a12 = a[1 * 3 + 2];\r\n\t\tvar a20 = a[2 * 3 + 0];\r\n\t\tvar a21 = a[2 * 3 + 1];\r\n\t\tvar a22 = a[2 * 3 + 2];\r\n\t\tvar b00 = b[0 * 3 + 0];\r\n\t\tvar b01 = b[0 * 3 + 1];\r\n\t\tvar b02 = b[0 * 3 + 2];\r\n\t\tvar b10 = b[1 * 3 + 0];\r\n\t\tvar b11 = b[1 * 3 + 1];\r\n\t\tvar b12 = b[1 * 3 + 2];\r\n\t\tvar b20 = b[2 * 3 + 0];\r\n\t\tvar b21 = b[2 * 3 + 1];\r\n\t\tvar b22 = b[2 * 3 + 2];\r\n\t\treturn [a00 * b00 + a01 * b10 + a02 * b20,\r\n\t\ta00 * b01 + a01 * b11 + a02 * b21,\r\n\t\ta00 * b02 + a01 * b12 + a02 * b22,\r\n\t\ta10 * b00 + a11 * b10 + a12 * b20,\r\n\t\ta10 * b01 + a11 * b11 + a12 * b21,\r\n\t\ta10 * b02 + a11 * b12 + a12 * b22,\r\n\t\ta20 * b00 + a21 * b10 + a22 * b20,\r\n\t\ta20 * b01 + a21 * b11 + a22 * b21,\r\n\t\ta20 * b02 + a21 * b12 + a22 * b22];\r\n\t}\r\n\r\n    public static positionConvertion(x: number, y: number, matrix: number[]) {\r\n        x = x * matrix[0] + y * matrix[3] + 1 * matrix[6];\r\n        y = x * matrix[1] + y * matrix[4] + 1 * matrix[7];\r\n\r\n        return [x, y];\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/matrix3.ts","import { Context } from '../';\r\nimport { TextureType } from '../model';\r\n\r\nexport class DynamicRenderCall {\r\n\tpublic vertecies: number[];\r\n\tpublic textureCoords: number[];\r\n\tpublic indecies: number[];\r\n\tpublic matrices: number[];\r\n\r\n\tconstructor() {\r\n\t\tthis.vertecies = [];\r\n\t\tthis.indecies = [];\r\n\t\tthis.textureCoords = [];\r\n\t\tthis.matrices = [];\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/dynamicRenderCall.ts","import { Context } from '../context';\r\nimport { ParticleRenderCall } from './particleRenderCall';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { Particle } from '../particle/particle';\r\nimport { Enemy } from '../character/enemy';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { Rectangle, SpellType } from '../model';\r\n\r\nexport class ParticleRenderer {\r\n\r\n\tprivate context: Context;\r\n\tprivate gl: WebGLRenderingContext;\r\n\tprivate shaderProgram: WebGLShader;\r\n\tprivate collisionDetection = CollisionDetection.getInstance();\r\n\r\n\tprivate pointRelativeTimeBuffer: any;\r\n\tprivate pointLifetimesBuffer: any;\r\n\tprivate pointStartPositionsBuffer: any;\r\n\tprivate pointEndPositionsBuffer: any;\r\n\r\n\tprivate startPositionLocation: number;\r\n\tprivate endPositionLocation: number;\r\n\tprivate lifeTimeAttribute: number;\r\n\tprivate relativeTimeAttribute: number;\r\n\r\n\tprivate particleTexture: WebGLUniformLocation;\r\n\tprivate genericParticle: WebGLUniformLocation;\r\n\tprivate colorLocation: WebGLUniformLocation;\r\n\r\n\tprivate elapsed: number;\r\n\tprivate centerPos: number[];\r\n\tprivate color: number[];\r\n\r\n\tprivate particleHandler: ParticleHandler;\r\n\r\n\tconstructor(context: Context, particleHandler: ParticleHandler) {\r\n\t\tthis.context = context;\r\n\t\tthis.particleHandler = particleHandler;\r\n\t\tthis.gl = this.context.gl;\r\n\t\t//this.shaderProgram = this.context.particleProgram;\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 0, \"a_relativeTime\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 1, \"a_lifetime\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 2, \"a_startPosition\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 3, \"a_endPosition\");\r\n\r\n\t\tthis.relativeTimeAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_relativeTime\");\r\n\t\tthis.lifeTimeAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_lifetime\");\r\n\t\tthis.startPositionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_startPosition\");\r\n\t\tthis.endPositionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_endPosition\");\r\n\r\n\t\tthis.particleTexture = this.gl.getUniformLocation(this.shaderProgram, \"u_particleTexture\");\r\n\t\tthis.colorLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n\r\n\t\tthis.pointEndPositionsBuffer = this.gl.createBuffer() as any;\r\n\t\tthis.pointStartPositionsBuffer = this.gl.createBuffer() as any;\r\n\t\tthis.pointLifetimesBuffer = this.gl.createBuffer() as any;\r\n\t\tthis.pointRelativeTimeBuffer = this.gl.createBuffer() as any;\r\n\t}\r\n\r\n\tpublic render(renderCalls: ParticleRenderCall[]) {\r\n\r\n\t\tfor (let call of renderCalls) {\r\n\t\t\tif (call.length > 0) {\r\n\t\t\t\tthis.gl.useProgram(this.shaderProgram);\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointRelativeTimeBuffer);\r\n\t\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.relativeTime), this.gl.STATIC_DRAW);\r\n\t\t\t\tthis.pointRelativeTimeBuffer.itemSize = 1;\r\n\t\t\t\tthis.pointRelativeTimeBuffer.numItems = call.length;\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointLifetimesBuffer);\r\n\t\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.lifetimes), this.gl.STATIC_DRAW);\r\n\t\t\t\tthis.pointLifetimesBuffer.itemSize = 1;\r\n\t\t\t\tthis.pointLifetimesBuffer.numItems = call.length;\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointStartPositionsBuffer);\r\n\t\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.startPositions), this.gl.STATIC_DRAW);\r\n\t\t\t\tthis.pointStartPositionsBuffer.itemSize = 3;\r\n\t\t\t\tthis.pointStartPositionsBuffer.numItems = call.length;\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointEndPositionsBuffer);\r\n\t\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(call.endPositions), this.gl.STATIC_DRAW);\r\n\t\t\t\tthis.pointEndPositionsBuffer.itemSize = 3;\r\n\t\t\t\tthis.pointEndPositionsBuffer.numItems = call.length;\r\n\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.lifeTimeAttribute);\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.relativeTimeAttribute);\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.startPositionLocation);\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.endPositionLocation);\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointRelativeTimeBuffer);\r\n\t\t\t\tthis.gl.vertexAttribPointer(this.relativeTimeAttribute, this.pointRelativeTimeBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointLifetimesBuffer);\r\n\t\t\t\tthis.gl.vertexAttribPointer(this.lifeTimeAttribute, this.pointLifetimesBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointStartPositionsBuffer);\r\n\t\t\t\tthis.gl.vertexAttribPointer(this.startPositionLocation, this.pointStartPositionsBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointEndPositionsBuffer);\r\n\t\t\t\tthis.gl.vertexAttribPointer(this.endPositionLocation, this.pointEndPositionsBuffer.itemSize, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t\tthis.gl.activeTexture(this.gl.TEXTURE0);\r\n\r\n\t\t\t\tif(call.type == SpellType.frostBlast) {\r\n\t\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.frostParticelTexture);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.genericParticleTexture);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.gl.uniform1i(this.particleTexture, 0);\r\n\r\n\t\t\t\tthis.gl.uniform4f(this.colorLocation, call.color[0], call.color[1], call.color[2], call.color[3]);\r\n\r\n\t\t\t\tthis.gl.drawArrays(this.gl.POINTS, 0, this.pointLifetimesBuffer.numItems);\r\n\r\n\t\t\t\tthis.gl.disableVertexAttribArray(this.lifeTimeAttribute);\r\n\t\t\t\tthis.gl.disableVertexAttribArray(this.relativeTimeAttribute);\r\n\t\t\t\tthis.gl.disableVertexAttribArray(this.startPositionLocation);\r\n\t\t\t\tthis.gl.disableVertexAttribArray(this.endPositionLocation);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/particleRenderer.ts","import { Vector, Tile, Rectangle, Projectile, DynamicTile } from '../model';\r\nimport { CollisionData, Grid } from './';\r\nimport { Character } from '../character/character';\r\nimport { Enemy } from '../character/enemy';\r\n\r\nexport class CollisionDetection {\r\n\r\n\tprivate static instance: CollisionDetection = new CollisionDetection();\r\n\tprivate grid: Grid;\r\n\tprivate gameSize: Vector;\r\n\tprivate gridItemSize: number;\r\n\r\n\r\n\tconstructor() {\r\n\t\tif (CollisionDetection.instance) {\r\n\t\t\tthrow new Error(\"Static class cant be instanced!\");\r\n\t\t}\r\n\r\n\t\tCollisionDetection.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance() {\r\n\t\treturn CollisionDetection.instance;\r\n\t}\r\n\r\n\tpublic createGrid(gameSize: Vector, collidables: Rectangle[]) {\r\n\t\tthis.gameSize = gameSize;\r\n\t\tthis.grid = new Grid(25, this.gameSize);\r\n\r\n\t\tfor (let collidable of collidables) {\r\n\t\t\tthis.grid.insert(collidable);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic collisionDetection(tiles: Tile[], dynamicTiles: DynamicTile[], character: Character, frameVelocity: Vector, delta: number) {\r\n\r\n\t\tlet collisionData = this.checkCollision(tiles, dynamicTiles, character, frameVelocity, delta);\r\n\r\n\t\treturn collisionData;\r\n\t}\r\n\r\n\tpublic fastCheckEnviroment(rect: Rectangle, tiles: Tile[]) {\r\n\t\tlet clear = true;\r\n\r\n\t\tlet possibleColls = this.grid.get(rect);\r\n\r\n\t\tfor (let tile of possibleColls) {\r\n\t\t\tif (this.aabbCheck(rect, tile)) {\r\n\t\t\t\tclear = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn clear;\r\n\t}\r\n\r\n\tpublic checkProjectileCollisionX(collidables: Rectangle[], projectile: Projectile, frameVelocity: Vector, staticCollisions: boolean, checkClose: boolean) {\r\n\r\n\t\tlet broadphasebox = this.getSweptBroadphaseBoxX(projectile.collisionArea, frameVelocity);\r\n\r\n\t\tlet possibleColls: Rectangle[];\r\n\r\n\t\tif (staticCollisions) {\r\n\t\t\tpossibleColls = this.grid.get(broadphasebox);\r\n\t\t} else {\r\n\t\t\tpossibleColls = collidables;\r\n\t\t}\r\n\r\n\t\tlet collisionData: CollisionData = new CollisionData();\r\n\r\n\t\tfor (let collidable of possibleColls) {\r\n\t\t\tif (this.aabbCheck(broadphasebox, collidable)) {\r\n\t\t\t\tcollisionData = this.aabbCollisionX(projectile.collisionArea, collidable, frameVelocity, collisionData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (checkClose) {\r\n\t\t\tfor (let collidable of possibleColls) {\r\n\t\t\t\tif (this.aabbCheck(projectile.collisionArea, collidable)) {\r\n\t\t\t\t\tcollisionData.wallCollision = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn collisionData;\r\n\t}\r\n\r\n\tpublic checkProjectileCollisionY(collidables: Rectangle[], projectile: Projectile, frameVelocity: Vector, staticCollisions: boolean) {\r\n\t\tlet broadphasebox = this.getSweptBroadphaseBoxY(projectile.collisionArea, frameVelocity);\r\n\r\n\t\tlet possibleColls: Rectangle[];\r\n\r\n\t\tif (staticCollisions) {\r\n\t\t\tpossibleColls = this.grid.get(broadphasebox);\r\n\t\t} else {\r\n\t\t\tpossibleColls = collidables;\r\n\t\t}\r\n\r\n\t\tlet collisionData: CollisionData = new CollisionData();\r\n\r\n\t\tfor (let collidable of possibleColls) {\r\n\t\t\tif (this.aabbCheck(broadphasebox, collidable)) {\r\n\t\t\t\tcollisionData = this.aabbCollisionY(projectile.collisionArea, collidable, frameVelocity, collisionData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn collisionData;\r\n\t}\r\n\r\n\tpublic checkCollision(tiles: Tile[], dynamicTiles: DynamicTile[], character: Character, frameVelocity: Vector, delta: number) {\r\n\r\n\t\tlet tilesToCheck = tiles;\r\n\t\tlet collisionData: CollisionData = new CollisionData();\r\n\t\tlet dynamicCollisionData = new CollisionData();\r\n\t\tlet rect1 = character.getCollisionArea();\r\n\t\tlet broadphasebox = this.getSweptBroadphaseBoxY(rect1, frameVelocity);\r\n\r\n\t\tlet possibleColls = this.grid.get(broadphasebox) as Tile[];\r\n\r\n\t\tfor (let dynamicTile of dynamicTiles) {\r\n\t\t\tlet deltaVelocity = new Vector(frameVelocity.x - dynamicTile.velocity.x * delta, frameVelocity.y - dynamicTile.velocity.y * delta);\r\n\t\t\tdynamicCollisionData = this.checkDynamicTileY(dynamicTile, rect1, character, deltaVelocity, dynamicCollisionData, delta);\r\n\t\t}\r\n\r\n\t\tfor (let tile of possibleColls) {\r\n\t\t\tif (this.aabbCheck(broadphasebox, tile)) {\r\n\t\t\t\tcollisionData = this.aabbCollisionY(rect1, tile, frameVelocity, collisionData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dynamicCollisionData.groundCollision) {\r\n\t\t\tcollisionData = dynamicCollisionData;\r\n\t\t\tframeVelocity.y = dynamicCollisionData.velocityY;\r\n\t\t}\r\n\r\n\t\tcharacter.position.y += frameVelocity.y * collisionData.collisionTimeY;\r\n\r\n\t\trect1 = character.getCollisionArea();\r\n\t\tbroadphasebox = this.getSweptBroadphaseBoxX(rect1, frameVelocity);\r\n\r\n\t\tfor (let dynamicTile of dynamicTiles) {\r\n\t\t\tlet deltaVelocity = new Vector(frameVelocity.x - dynamicTile.velocity.x * delta, frameVelocity.y - dynamicTile.velocity.y * delta);\r\n\t\t\tdynamicCollisionData = this.checkDynamicTileX(dynamicTile, rect1, character, deltaVelocity, dynamicCollisionData, delta);\r\n\t\t}\r\n\r\n\t\tfor (let tile of tilesToCheck) {\r\n\t\t\tif (this.aabbCheck(broadphasebox, tile)) {\r\n\t\t\t\tcollisionData = this.aabbCollisionX(character.getCollisionArea(), tile, frameVelocity, collisionData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (dynamicCollisionData.wallCollision) {\r\n\t\t\tcollisionData.wallCollision = dynamicCollisionData.wallCollision;\r\n\t\t\tcollisionData.collisionTimeX = dynamicCollisionData.collisionTimeX;\r\n\t\t\tframeVelocity.x = dynamicCollisionData.velocityX;\r\n\t\t}\r\n\r\n\t\tcharacter.position.x += frameVelocity.x * collisionData.collisionTimeX;\r\n\r\n\t\tcollisionData.remainingTime = 1 - collisionData.collisionTimeY;\r\n\r\n\t\treturn collisionData;\r\n\t}\r\n\r\n\tpublic getClosestX(rect: Rectangle, tiles: Rectangle[], inverse: boolean) {\r\n\t\tlet closestX: number = inverse ? 0 : this.gameSize.x;\r\n\r\n\t\tlet possibleColls = this.grid.get(rect);\r\n\r\n\t\tfor (let tile of possibleColls) {\r\n\t\t\tif (this.aabbCheck(rect, tile)) {\r\n\t\t\t\tif (inverse) {\r\n\t\t\t\t\tlet tileVal = tile.x + tile.width;\r\n\t\t\t\t\tif (tileVal > closestX) {\r\n\t\t\t\t\t\tclosestX = tileVal;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet tileVal = tile.x;\r\n\t\t\t\t\tif (tileVal < closestX) {\r\n\t\t\t\t\t\tclosestX = tileVal;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn closestX;\r\n\t}\r\n\r\n\tpublic checkCoutOfBounds(character: Character, area: [number, number]) {\r\n\t\tlet rect = new Rectangle(0, 0, area[0], area[1]);\r\n\t\tif (!this.aabbCheck(character.getCollisionArea(), rect)) {\r\n\t\t\tcharacter.dead = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic aabbCheck(rect1: Rectangle, rect2: Rectangle) {\r\n\t\treturn (rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.height + rect1.y > rect2.y)\r\n\t}\r\n\r\n\tpublic aabbCheckS(rect1: Rectangle, areas: Rectangle[]) {\r\n\t\tfor (let rect2 of areas) {\r\n\t\t\tif ((rect1.x < rect2.x + rect2.width && rect1.x + rect1.width > rect2.x && rect1.y < rect2.y + rect2.height && rect1.height + rect1.y > rect2.y)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate checkDynamicTileY(dynamicTile: DynamicTile, characterCollisionArea: Rectangle, character: Character, frameVelocity: Vector, dynamicCollisionData: CollisionData, delta: number) {\r\n\r\n\t\tlet broadphasebox = this.getSweptBroadphaseBoxY(characterCollisionArea, frameVelocity);\r\n\r\n\t\tif (this.aabbCheck(broadphasebox, dynamicTile.tile)) {\r\n\t\t\tdynamicCollisionData = this.aabbCollisionY(characterCollisionArea, dynamicTile.tile, frameVelocity, dynamicCollisionData);\r\n\t\t\tif (dynamicCollisionData.groundCollision) {\r\n\t\t\t\tdynamicCollisionData.lift = dynamicTile;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn dynamicCollisionData;\r\n\t}\r\n\r\n\tprivate checkDynamicTileX(dynamicTile: DynamicTile, characterCollisionArea: Rectangle, character: Character, frameVelocity: Vector, dynamicCollisionData: CollisionData, delta: number) {\r\n\r\n\t\tlet broadphasebox = this.getSweptBroadphaseBoxX(characterCollisionArea, frameVelocity);\r\n\r\n\t\tif (this.aabbCheck(broadphasebox, dynamicTile.tile)) {\r\n\t\t\tdynamicCollisionData = this.aabbCollisionX(characterCollisionArea, dynamicTile.tile, frameVelocity, dynamicCollisionData);\r\n\t\t}\r\n\r\n\t\treturn dynamicCollisionData;\r\n\t}\r\n\r\n\tprivate getSweptBroadphaseBoxX(rect: Rectangle, velocity: Vector) {\r\n\t\tlet x = rect.x + velocity.x;\r\n\t\tlet y = rect.y;\r\n\t\tlet width = rect.width + Math.abs(velocity.x);\r\n\t\tlet height = rect.height;\r\n\r\n\t\treturn new Rectangle(x, y, width, height);\r\n\t}\r\n\r\n\tprivate getSweptBroadphaseBoxY(rect: Rectangle, velocity: Vector) {\r\n\t\tlet x = rect.x;\r\n\t\tlet y = rect.y + velocity.y;\r\n\t\tlet width = rect.width;\r\n\t\tlet height = rect.height + Math.abs(velocity.y);\r\n\r\n\t\treturn new Rectangle(x, y, width, height);\r\n\t}\r\n\r\n\tprivate aabbCollisionY(rect1: Rectangle, rect2: Rectangle, velocity: Vector, collisionData: CollisionData) {\r\n\t\tlet yInvEntry: number;\r\n\t\tlet yInvExit: number;\r\n\r\n\t\tif (velocity.y > 0) {\r\n\t\t\tyInvEntry = (rect2.y) - (rect1.y + rect1.height);\r\n\t\t\tyInvExit = (rect2.y + rect2.height) - (rect1.y);\r\n\t\t} else {\r\n\t\t\tyInvEntry = (rect2.y + rect2.height) - (rect1.y);\r\n\t\t\tyInvExit = (rect2.y) - (rect1.y + rect1.height);\r\n\t\t}\r\n\r\n\t\tlet yEntry: number;\r\n\t\tlet yExit: number;\r\n\r\n\t\tif (velocity.y == 0) {\r\n\t\t\tyEntry = -Number.MAX_SAFE_INTEGER;\r\n\t\t\tyExit = Number.MAX_SAFE_INTEGER;\r\n\t\t} else {\r\n\t\t\tyEntry = yInvEntry / velocity.y;\r\n\t\t\tyExit = yInvExit / velocity.y;\r\n\t\t}\r\n\r\n\t\tlet entryTime = yEntry;\r\n\t\tlet exitTime = yExit;\r\n\r\n\t\tif (entryTime > exitTime || yEntry < 0 || yEntry > 1) {\r\n\t\t\treturn collisionData;\r\n\t\t} else {\r\n\t\t\tif (velocity.y < 0) {\r\n\t\t\t\tcollisionData.normalY = 1;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcollisionData.normalY = -1;\r\n\t\t\t}\r\n\r\n\t\t\tif (collisionData.collisionTimeY > entryTime) {\r\n\t\t\t\tcollisionData.collisionTimeY = entryTime;\r\n\t\t\t\tcollisionData.velocityY = velocity.y;\r\n\t\t\t}\r\n\r\n\t\t\tif (velocity.y > 28) {\r\n\t\t\t\tcollisionData.fallDeath = true;\r\n\t\t\t}\r\n\r\n\t\t\tcollisionData.groundCollision = true;\r\n\r\n\t\t}\r\n\t\treturn collisionData;\r\n\t}\r\n\r\n\tprivate aabbCollisionX(rect1: Rectangle, rect2: Rectangle, velocity: Vector, collisionData: CollisionData) {\r\n\t\tlet xInvEntry: number;\r\n\t\tlet xInvExit: number;\r\n\r\n\t\tif (velocity.x > 0) {\r\n\t\t\txInvEntry = (rect2.x) - (rect1.x + rect1.width);\r\n\t\t\txInvExit = (rect2.x + rect2.width) - (rect1.x);\r\n\t\t} else {\r\n\t\t\txInvEntry = (rect2.x + rect2.width) - (rect1.x);\r\n\t\t\txInvExit = (rect2.x) - (rect1.x + rect1.width);\r\n\t\t}\r\n\r\n\t\tlet xEntry: number;\r\n\t\tlet xExit: number;\r\n\r\n\t\tif (velocity.x == 0) {\r\n\t\t\txEntry = -Number.MAX_SAFE_INTEGER;\r\n\t\t\txExit = Number.MAX_SAFE_INTEGER;\r\n\t\t} else {\r\n\t\t\txEntry = xInvEntry / velocity.x;\r\n\t\t\txExit = xInvExit / velocity.x;\r\n\t\t}\r\n\r\n\t\tlet entryTime = xEntry;\r\n\t\tlet exitTime = xExit;\r\n\r\n\t\tif (entryTime > exitTime || xEntry < 0 || xEntry > 1) {\r\n\t\t\treturn collisionData;\r\n\t\t} else {\r\n\t\t\tif (xInvEntry < 0) {\r\n\t\t\t\tcollisionData.normalX = 1;\r\n\t\t\t} else {\r\n\t\t\t\tcollisionData.normalX = -1;\r\n\t\t\t}\r\n\r\n\t\t\tif (collisionData.collisionTimeX > entryTime) {\r\n\t\t\t\tcollisionData.collisionTimeX = entryTime;\r\n\t\t\t\tcollisionData.velocityX = velocity.x;\r\n\t\t\t}\r\n\r\n\t\t\tcollisionData.wallCollision = true;\r\n\t\t}\r\n\r\n\t\treturn collisionData;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/collision/collisionDetection.ts","import { CollisionData } from './collisionData';\r\nimport { CollisionDetection } from './collisionDetection';\r\nimport { Grid } from './grid';\r\n\r\nexport { CollisionData, CollisionDetection, Grid };\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/collision/index.ts","import { DynamicTile } from '../model';\r\n\r\nexport class CollisionData {\r\n\tnormalX: number = 0;\r\n\tnormalY: number = 0;\r\n\tcollisionTimeY: number = 1;\r\n\tcollisionTimeX: number = 1;\r\n\tvelocityY: number;\r\n\tvelocityX: number;\r\n\tremainingTime: number = 0;\r\n\twallCollision: boolean = false;\r\n\tgroundCollision: boolean = false;\r\n\tlift: DynamicTile = null;\r\n\tfallDeath: boolean = false;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/collision/collisionData.ts","import { Rectangle, Tile, Vector } from '../model';\r\n\r\nexport class Grid {\r\n\r\n    public grid: Rectangle[][][] = [];\r\n    private gridSize: number;\r\n    private maxX: number;\r\n    private maxY: number;\r\n\r\n    constructor(size: number, canvasSize: Vector) {\r\n        this.gridSize = size;\r\n        this.maxX = canvasSize.x/this.gridSize;\r\n        this.maxY = canvasSize.y/this.gridSize;\r\n\r\n        for(let i = 0; i < this.maxX; i++)  {\r\n            this.grid[i] = [];\r\n            for(let j = 0; j < this.maxY; j++) {\r\n                this.grid[i][j] = [];\r\n            }\r\n        }\r\n    }\r\n\r\n    public insert(rect: Rectangle) {\r\n        \r\n        let coords = this.getGridCoordinates(rect);\r\n\r\n        for(let i = 0; i < coords[2]; i++) {\r\n            for(let j = 0; j < coords[3]; j++) {\r\n                this.grid[coords[0] + i][coords[1] + j].push(rect);\r\n            }\r\n        }\r\n    }\r\n\r\n    public get(rect: Rectangle) {\r\n        let result: Rectangle[] = []\r\n\r\n        let coords = this.getGridCoordinates(rect);\r\n\r\n        for(let i = 0; i < coords[2]; i++) {\r\n            for(let j = 0; j < coords[3]; j++) {\r\n                result.push(...this.grid[coords[0] + i][coords[1] + j]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private getGridCoordinates(rect: Rectangle) {\r\n\r\n        let x = Math.floor(rect.x/this.gridSize);\r\n        let y = Math.floor(rect.y/this.gridSize);\r\n        let xi = Math.ceil(rect.width/this.gridSize) + 1;\r\n        let yi = Math.ceil(rect.height/this.gridSize) + 1;\r\n\r\n        if(x < 0) {\r\n            x = 0;\r\n        }\r\n\r\n        if(y < 0) {\r\n            y = 0;\r\n        }\r\n\r\n        if(x+xi > this.maxX) {\r\n            xi = this.maxX - x ;\r\n        }\r\n\r\n        if(y+yi > this.maxY) {\r\n            yi = this.maxY - y;\r\n        }\r\n\r\n        return [x, y, xi, yi];\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/collision/grid.ts","import { Rectangle, Animation, Vector } from '../'\r\n\r\nexport class FrameAnimation extends Animation {\r\n\r\n    private lastFrameIndex: number;\r\n    private growthX: number;\r\n    private growthY: number;\r\n    private offsetY: number = 20;\r\n    private offsetX: number = 10;\r\n    private particleFunction: (position: Vector) => void;\r\n\r\n\tconstructor(growthX: number, growthY: number, offsetX: number, offsetY: number, particleFunction: (position: Vector) => void, texturenumbers: number[]) {\r\n        super(texturenumbers);\r\n\r\n        this.particleFunction = particleFunction;\r\n        this.growthX = growthX;\r\n        this.growthY = growthY;\r\n        this.offsetX = offsetX;\r\n        this.offsetY = offsetY;\r\n\r\n        this.lastFrameIndex = this.frameIndex;\r\n\t}\r\n\r\n\tpublic next(delta: number) {\r\n        if(this.lastFrameIndex != this.frameIndex) {\r\n            this.lastFrameIndex = this.frameIndex;\r\n            this.offsetX += this.growthX;\r\n            this.offsetY += this.growthY;\r\n        }\r\n        \r\n        this.particleFunction(new Vector(this.areaToRender.x + this.offsetX, this.areaToRender.y - this.offsetY));\r\n\r\n        super.next(delta);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/frameAnimation.ts","export enum SpellType{\r\n    fireball = 1,\r\n    electricbolt = 2,\r\n    frostBlast = 3,\r\n    fireBlast = 4,\r\n    shield = 5,\r\n    channelmagic = 6\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/enum/spellType.ts","import { Projectile, Vector, Rectangle, Animation, SpellType } from '../'\r\n\r\nexport class Spell extends Projectile {\r\n\r\n    public distance: number;\r\n    public type: SpellType;\r\n\r\n    constructor(velocity: Vector, area: Rectangle, animation: Animation, collisionRatio: number, distance: number, type: SpellType) {\r\n        super(velocity, area, animation, collisionRatio);\r\n\r\n        this.distance = distance;\r\n        this.type = type;\r\n    }\r\n\r\n    public update(travelDistanceX: number, travelDistanceY: number, delta: number) {\r\n\r\n        super.update(travelDistanceX, travelDistanceY, delta);\r\n\r\n        this.distance -= Math.abs(travelDistanceX); \r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/spell.ts","import { Projectile, Rectangle, Vector, Animation, DebugElement, RotationAnimation, StaticRotationAnimation } from '../';\r\nimport { Gravity } from '../../forces/gravity';\r\nimport { Drag } from '../../forces/drag';\r\nimport { DebugHandler } from '../../handler/debugHandler';\r\n\r\nexport class PhysicalProjectile extends Projectile {\r\n\r\n    public gravityStrength: number = 0.0025;\r\n    public gravity: Gravity = new Gravity(this.gravityStrength);\r\n    private dragStrength = 0.0005;\r\n    public drag: Drag = new Drag(this.dragStrength);\r\n    public extendedOnGroundCollision: () => void;\r\n\r\n    private angle: boolean;\r\n\r\n    constructor(velocity: Vector, area: Rectangle, animation: Animation, collisionRatio: number, collisionArea?: Rectangle, angle?: boolean) {\r\n        super(velocity, area, animation, collisionRatio, collisionArea);\r\n\r\n        this.angle = angle;\r\n    }\r\n\r\n    public update(travelDistanceX: number, travelDistanceY: number, delta: number) {\r\n        super.update(travelDistanceX, travelDistanceY, delta); \r\n    }\r\n\r\n    public updateForces(delta: number) {\r\n        this.gravity.apply(this.velocity, delta);\r\n        this.drag.apply(this.velocity, delta);\r\n    }\r\n\r\n    public onGroundCollision() {\r\n        if(this.animation instanceof StaticRotationAnimation) {\r\n            if(this.animation.inverse) {\r\n                this.animation.angle = 0;\r\n            } else {\r\n                this.animation.angle = Math.PI * 2;\r\n            }\r\n        }\r\n\r\n        if(this.extendedOnGroundCollision) {\r\n            this.extendedOnGroundCollision();\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/physicalProjectile.ts","import { Vector } from '../model';\r\n\r\nexport class Gravity {\r\n\tprivate strength = 0;\r\n\r\n\tconstructor(strength: number) {\r\n\t\tthis.strength = strength;\r\n\t}\r\n\r\n\tpublic apply(vector: Vector, delta: number) {\r\n\t\tvector.y += this.strength * delta;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/forces/gravity.ts","import { Vector } from '../model';\r\n\r\nexport class Drag {\r\n    private strength = 0;\r\n\r\n    constructor(strength: number) {\r\n        this.strength = strength;\r\n    }\r\n\r\n    public apply(vector: Vector, delta: number) {\r\n\r\n        let deltaDrag = delta * this.strength;\r\n\r\n        if (vector.x > 0) {\r\n            vector.x -= deltaDrag;\r\n            if (vector.x < deltaDrag) {\r\n                vector.x = 0;\r\n            }\r\n        } else if (vector.x < 0) {\r\n            vector.x += deltaDrag;\r\n            if (vector.x > deltaDrag) {\r\n                vector.x = 0;\r\n            }\r\n        }\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/forces/drag.ts","import { Projectile, Vector, Rectangle, Animation } from '../'\r\n\r\nexport class Meele extends Projectile{\r\n    constructor(velocity: Vector, area: Rectangle, animation: Animation, collisionRatio: number) {\r\n        super(velocity, area, animation, collisionRatio);\r\n    }\r\n\r\n    update(travelDistanceX: number, travelDistanceY: number, delta: number) {\r\n        super.update(travelDistanceX, travelDistanceY, delta);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/meele.ts","import { Rectangle } from './';\r\n\r\nexport class DebugElement {\r\n\r\n    area: Rectangle;\r\n    inverse: boolean;\r\n\r\n    constructor(area: Rectangle, inverse: boolean) {\r\n        this.area = area;\r\n        this.inverse = inverse;\r\n    }\r\n\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/debug.ts","export enum TextureType {\r\n    tileTexture = 1,\r\n    particleTexture = 2,\r\n    frostTexture = 3\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/enum/textureType.ts","import { Animation } from './animation';\r\nimport { Vector } from '../';\r\n\r\nexport class StickyAnimation {\r\n    public animation: Animation;\r\n    public offset: Vector;\r\n\r\n    constructor(animation: Animation, offset: Vector) {\r\n        this.animation = animation;\r\n        this.offset = offset;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/stickyAnimation.ts","import { Rectangle, Animation, Vector } from '../'\r\n\r\nexport class RotationAnimation extends Animation {\r\n\r\n    private vec: Vector;\r\n    public angle: number;\r\n\r\n    constructor(vec: Vector, texturenumbers: number[]) {\r\n        super(texturenumbers);\r\n        this.vec = vec;\r\n    }\r\n\r\n    public next(delta: number) {\r\n        this.angle = Math.atan2(this.vec.x, this.vec.y);\r\n        \r\n        if(this.inverse) {\r\n            this.angle = this.angle + Math.PI * 0.5;\r\n        } else {\r\n            this.angle = this.angle + Math.PI * 1.5;\r\n        }\r\n\r\n        super.next(delta);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/rotationAnimation.ts","import { Rectangle, Animation, Vector } from '../'\r\n\r\nexport class StaticRotationAnimation extends Animation {\r\n\r\n    private vec: Vector;\r\n    public angle: number;\r\n\r\n    constructor(vec: Vector, inverse: boolean, texturenumbers: number[]) {\r\n        super(texturenumbers);\r\n        this.vec = vec;\r\n        this.inverse = inverse;\r\n        this.angle = Math.atan2(this.vec.x, this.vec.y);\r\n        if(this.inverse) {\r\n            this.angle = this.angle + Math.PI * 0.5;\r\n        } else {\r\n            this.angle = this.angle + Math.PI * 1.5;\r\n        }\r\n    }\r\n\r\n    public next(delta: number) {\r\n        super.next(delta);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/staticRotationAnimation.ts","import { Projectile, Vector, Rectangle, Animation, SpellType } from '../'\r\n\r\nexport class CollisionProjectile extends Projectile {\r\n\r\n    public distance: number;\r\n\r\n    constructor(velocity: Vector, area: Rectangle, distance: number, animation: Animation, damage: number) {\r\n        super(velocity, area, animation, 1);\r\n        this.damage = damage;\r\n        this.distance = distance;\r\n    }\r\n\r\n    public update(travelDistanceX: number, travelDistanceY: number, delta: number) {\r\n        super.update(travelDistanceX, travelDistanceY, delta);\r\n\r\n        this.distance -= Math.abs(travelDistanceX); \r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/collisionProjectile.ts","export enum ProjectileType {\r\n    None = 0,\r\n    Arrow = 1,\r\n    Sword = 2,\r\n    NecroBall = 3,\r\n    BlueBall = 4\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/projectileType.ts","import { Animation } from '../../model';\r\n\r\nexport abstract class Cast {\r\n\r\n    public done: boolean = false;\r\n    public currentAnimation: Animation;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public update(delta: number) {\r\n    }\r\n\r\n    public cancel() {\r\n    }\r\n\r\n    public reset() {\r\n        this.done = false;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/casts/cast.ts","import { Animation, Cast } from '../../model';\r\n\r\nexport class InstantCast extends Cast{\r\n\r\n    private onCast: (animation: Animation) => Animation;\r\n\r\n    constructor(animation: Animation, onCast: (animation: Animation) => Animation) {\r\n        super();\r\n        this.currentAnimation = animation;\r\n        this.onCast = onCast;\r\n    }\r\n\r\n    public update(delta: number) {\r\n        this.currentAnimation = this.onCast(this.currentAnimation);\r\n        this.currentAnimation.next(delta);\r\n            \r\n        if (this.currentAnimation.repetitions <= 0) {\r\n            this.done = true;\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        this.currentAnimation.reset();\r\n        this.currentAnimation.repetitions = 1;\r\n        super.reset();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/casts/instantCast.ts","import { Animation, Cast } from '../../model';\r\n\r\nexport class ChannelCast extends Cast {\r\n\r\n    public channeling: boolean = false;\r\n    public currentValue: number;\r\n    public lowerCurrentAnimation: Animation;\r\n    private onChannel: () => void;\r\n    private onCancel: () => void;\r\n    private defaultValue: number;\r\n    private maxValue: number;\r\n    private growth: number;\r\n    private delay: number;\r\n\r\n    constructor(channelAnimation: Animation, lowerChannelAnimation: Animation, onChannel: () => void, onCancel: () => void, defaultValue: number, maxValue: number, growth: number) {\r\n        super();\r\n        this.onChannel = onChannel;\r\n        this.onCancel = onCancel;\r\n        this.currentAnimation = channelAnimation;\r\n        this.lowerCurrentAnimation = lowerChannelAnimation;\r\n        this.defaultValue = defaultValue;\r\n        this.maxValue = maxValue;\r\n        this.growth = growth;\r\n        this.currentValue = this.defaultValue;\r\n    }\r\n\r\n    public update(delta: number) {\r\n\r\n        if(this.channeling) {\r\n            this.delay = 150;\r\n        }\r\n\r\n        if (this.delay > 0) {\r\n\r\n            this.currentAnimation.next(delta);\r\n            \r\n            if (this.currentValue >= this.maxValue) {\r\n                this.currentValue = this.maxValue;\r\n            } else {\r\n                this.currentValue += (delta * this.growth);\r\n            }\r\n\r\n            this.onChannel();\r\n\r\n        } else {\r\n            this.done = true;\r\n        }\r\n\r\n        this.delay -= delta;\r\n        this.channeling = false;\r\n    }\r\n\r\n    public resetValue() {\r\n        this.currentValue = this.defaultValue;\r\n    }\r\n\r\n    public cancel() {\r\n        this.onCancel();\r\n    }\r\n\r\n    public reset() {\r\n        \r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/casts/channelCast.ts","import { Animation, Cast } from '../../model';\r\n\r\nexport class SpellCast extends Cast{\r\n\r\n    public size: number = 20;\r\n    public hasCast: boolean;\r\n    private onCast: (animation: Animation, size: number) => Animation;\r\n    private mainRepetion: number;\r\n\r\n    constructor(animation: Animation, mainRepetion: number, onCast: (animation: Animation, size: number) => Animation) {\r\n        super();\r\n        this.currentAnimation = animation;\r\n        this.onCast = onCast;\r\n        this.mainRepetion = mainRepetion;\r\n        this.hasCast = false;\r\n    }\r\n\r\n    public update(delta: number) {\r\n        \r\n        if(this.currentAnimation.repetitions == this.mainRepetion && !this.hasCast) {\r\n            this.currentAnimation = this.onCast(this.currentAnimation, this.size);\r\n            this.hasCast = true;\r\n        }\r\n        \r\n        this.currentAnimation.next(delta);\r\n        \r\n        if (this.currentAnimation.repetitions <= 0) {\r\n            this.done = true;\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        this.hasCast = false;\r\n        this.currentAnimation.repetitions = 4;\r\n        this.currentAnimation.reset();\r\n        super.reset();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/casts/spellCast.ts","import { Projectile, Vector, Rectangle, Animation, SpellType } from '../'\r\n\r\nexport class ParticleProjectile extends Projectile {\r\n\r\n    public distance: number;\r\n    public inverse: boolean;\r\n    private onUpdate: (area: Rectangle, inverse: boolean, offsetX: number) => void;\r\n    private offset: number;\r\n\r\n    constructor(velocity: Vector, area: Rectangle, animation: Animation, collisionRatio: number, distance: number, inverse: boolean, offset: number, onUpdate: (area: Rectangle, inverse: boolean, offsetX: number) => void, collisionArea?: Rectangle) {\r\n        super(velocity, area, animation, collisionRatio, collisionArea);\r\n\r\n        this.onUpdate = onUpdate;\r\n        this.distance = distance;\r\n        this.inverse = inverse;\r\n        this.offset = offset;\r\n    }\r\n\r\n    public update(travelDistanceX: number, travelDistanceY: number, delta: number) {\r\n\r\n        super.update(travelDistanceX, travelDistanceY, delta);\r\n\r\n        this.onUpdate(this.area, this.inverse, this.offset);\r\n        this.distance -= Math.abs(travelDistanceX); \r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/animation/particleProjectile.ts","import { RenderHelper } from '../render';\r\nimport { Constants } from '../service/constants';\r\nimport { Tile, Vector } from './';\r\n\r\nexport class DynamicTile {\r\n\tpublic tile: Tile;\r\n\tpublic velocity: Vector;\r\n\tpublic verticalAxis: boolean;\r\n\tpublic textureCoordinates: number[];\r\n\tprivate inverse: boolean = false;\r\n\tprivate distance: number = 0;\r\n\tprivate maxDistance: number;\r\n\tprivate initialDown: boolean;\r\n\tprivate initialRight: boolean;\r\n\tprivate renderHelper = RenderHelper.getInstance();\r\n\tprivate constants = Constants.getInstance();\r\n\r\n\tprivate initialPosition: Vector;\r\n\r\n\tconstructor(tile: Tile, velocity: Vector, verticalAxis: boolean, maxDistance: number) {\r\n\t\tthis.tile = tile;\r\n\t\tthis.velocity = velocity;\r\n\t\tthis.verticalAxis = verticalAxis;\r\n\t\tthis.maxDistance = maxDistance;\r\n\r\n\t\tif(this.velocity.y > 0) {\r\n\t\t\tthis.initialDown = true;\r\n\t\t} else {\r\n\t\t\tthis.initialDown = false;\r\n\t\t}\r\n\r\n\t\tif(this.velocity.x > 0) {\r\n\t\t\tthis.initialRight = true;\r\n\t\t} else {\r\n\t\t\tthis.initialRight = false;\r\n\t\t}\r\n\r\n\t\tthis.textureCoordinates = this.renderHelper.getTiledTextureCoordinates(this.tile, [], this.constants.tileSize);\r\n\r\n\t\tthis.initialPosition = new Vector(tile.x, tile.y);\r\n\t}\r\n\r\n\tupdate(delta: number, travelDistance: number) {\r\n\t\tif (this.verticalAxis) {\r\n\t\t\tthis.calculateVerticalMovement(delta, travelDistance);\r\n\t\t} else {\r\n\t\t\tthis.calculateHorizontalMovement(delta, travelDistance);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate calculateVerticalMovement(delta: number, travelDistance: number) {\r\n\t\tthis.distance += Math.abs(travelDistance);\r\n\r\n\t\tif (this.distance >= this.maxDistance) {\r\n\t\t\tthis.distance = this.maxDistance;\r\n\t\t\tif(this.inverse) {\r\n\t\t\t\tthis.tile.y = this.initialPosition.y;\r\n\t\t\t} else {\r\n\t\t\t\tif(this.initialDown) {\r\n\t\t\t\t\tthis.tile.y = this.initialPosition.y + this.maxDistance;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.tile.y = this.initialPosition.y - this.maxDistance;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.turn();\r\n\t\t} else {\r\n\t\t\tthis.tile.y += travelDistance;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate calculateHorizontalMovement(delta: number, travelDistance: number) {\r\n\t\tthis.distance += Math.abs(travelDistance);\r\n\r\n\t\tif (this.distance >= this.maxDistance) {\r\n\t\t\tthis.distance = this.maxDistance;\r\n\t\t\tif(this.inverse) {\r\n\t\t\t\tthis.tile.x = this.initialPosition.x;\r\n\t\t\t} else {\r\n\t\t\t\tif(this.initialRight) {\r\n\t\t\t\t\tthis.tile.x = this.initialPosition.x + this.maxDistance;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.tile.x = this.initialPosition.x - this.maxDistance;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.turn();\r\n\t\t} else {\r\n\t\t\tthis.tile.x += travelDistance;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate turn() {\r\n\t\tthis.distance = 0;\r\n\t\tthis.inverse = !this.inverse;\r\n\t\tthis.velocity.invert();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/dynamicTile.ts","import { TextureResource } from '../map/model/';\r\n\r\nexport class Constants {\r\n\r\n    private static instance: Constants = new Constants();\r\n\r\n    constrcuctor() {\r\n        if (Constants.instance) {\r\n            throw new Error(\"Static class cant be instanced!\");\r\n        }\r\n\r\n        Constants.instance = this;\r\n    }\r\n\r\n    public static getInstance() {\r\n        return Constants.instance;\r\n    }\r\n\r\n    public tileResources: TextureResource[] = [\r\n        new TextureResource(\"1tile.png\", [32, 32]),\r\n        new TextureResource(\"2tile.png\", [32, 32]),\r\n        new TextureResource(\"3tile.png\", [32, 32]),\r\n        new TextureResource(\"4tile.png\", [32, 32]),\r\n        new TextureResource(\"5tile.png\", [32, 32]),\r\n        new TextureResource(\"6tile.png\", [32, 32]),\r\n        new TextureResource(\"7tile.png\", [32, 32]),\r\n        new TextureResource(\"8tile.png\", [32, 32]),\r\n        new TextureResource(\"9tile.png\", [32, 32])\r\n    ];\r\n\r\n    public uiResources: TextureResource[] = [\r\n        new TextureResource(\"100ui.png\", [256, 128]),\r\n        new TextureResource(\"101ui.png\", [512, 512]),\r\n        new TextureResource(\"102ui.png\", [256, 256]),\r\n        new TextureResource(\"103ui.png\", [256, 256]),\r\n        new TextureResource(\"104ui.png\", [256, 256]),\r\n        new TextureResource(\"105ui.png\", [256, 256]),\r\n        new TextureResource(\"106ui.png\", [256, 256]),\r\n        new TextureResource(\"107ui.png\", [256, 256]),\r\n        new TextureResource(\"108ui.png\", [256, 256]),\r\n        new TextureResource(\"109ui.png\", [256, 256]),\r\n        new TextureResource(\"110ui.png\", [256, 256]),\r\n        new TextureResource(\"111ui.png\", [256, 256]),\r\n        new TextureResource(\"112ui.png\", [256, 256]),\r\n        new TextureResource(\"113ui.png\", [256, 256]),\r\n        new TextureResource(\"114ui.png\", [256, 256]),\r\n        new TextureResource(\"115ui.png\", [256, 256]),\r\n        new TextureResource(\"116ui.png\", [256, 256]),\r\n        new TextureResource(\"117ui.png\", [256, 256]),\r\n        new TextureResource(\"118ui.png\", [256, 256]),\r\n        new TextureResource(\"119ui.png\", [256, 256]),\r\n        new TextureResource(\"120ui.png\", [256, 256]),\r\n        new TextureResource(\"121ui.png\", [256, 256]),\r\n        new TextureResource(\"122ui.png\", [1024, 1024])\r\n    ];\r\n\r\n    public audioResources: string[] = [\r\n        \"explosion1.wav\",\r\n        \"explosion2.wav\",\r\n        \"flamethrower.ogg\",\r\n        \"freeze.ogg\",\r\n        \"shield.ogg\",\r\n        \"foom.wav\",\r\n        \"fireloop.ogg\",\r\n        \"jump.ogg\",\r\n        \"bow.wav\",\r\n        \"arrowhit.wav\",\r\n        \"playerhit.wav\",\r\n        \"swordmanhit.wav\",\r\n        \"swing3.wav\",\r\n        \"shade9.wav\",\r\n        \"shade15.wav\",\r\n        \"shade2.wav\",\r\n        \"swordmandeath.wav\",\r\n        \"shade13.wav\",\r\n        \"soundseffects.ogg\",\r\n        \"shot2.ogg\",\r\n        \"forcepush.ogg\",\r\n        \"explode4.ogg\",\r\n        \"ogre2.wav\",\r\n        \"mnstr3.wav\",\r\n        \"mnstr5.wav\",\r\n        \"magic1.wav\",\r\n        \"spellend.wav\",\r\n        \"fireplace.wav\",\r\n        \"shade11.wav\",\r\n        \"shade12.wav\",\r\n        \"step.flac\"\r\n    ];\r\n\r\n    public tileSize: [number, number] = [32, 32];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/service/constants.ts","import { EnemyData } from './enemyData';\r\nimport { LevelData } from './levelData';\r\nimport { EnemyType } from './enemyType';\r\nimport { TextureResource } from './texture-resource';\r\nimport { TileAsset } from './tile-asset';\r\n\r\n\r\nexport { EnemyData, LevelData, EnemyType, TextureResource, TileAsset };\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/map/model/index.ts","import { Rectangle } from '../../model';\r\nimport { EnemyType } from './enemyType';\r\n\r\nexport class EnemyData {\r\n    area: Rectangle;\r\n    type: EnemyType;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/map/model/enemyData.ts","import { Rectangle, DynamicTileData, RenderableData } from '../../model';\r\n\r\nexport class LevelData {\r\n\t\r\n\tpublic name: string;\r\n\tpublic tiles: RenderableData[];\r\n\tpublic decorativeTiles: RenderableData[];\r\n\tpublic background: RenderableData;\r\n\tpublic dynamicTiles: DynamicTileData[];\r\n\tpublic enemies: RenderableData[];\r\n\tpublic player: [number, number];\r\n\tpublic camera: [number, number];\r\n\tpublic gameSize: [number, number];\r\n\tpublic end: [number, number];\r\n\t\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/map/model/levelData.ts","export enum EnemyType {\r\n    swordman = 1\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/map/model/enemyType.ts","export class TextureResource {\r\n    constructor(public name: string, public size: [number, number]) {}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/map/model/texture-resource.ts","export class TileAsset {\r\n    \r\n    constructor(\r\n        public key: number,\r\n        public image: HTMLImageElement,\r\n        public size: [number, number],\r\n    ) {\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/map/model/tile-asset.ts","import { Rectangle } from './';\r\n\r\nexport class DynamicTileData\r\n{\r\n\tpublic tile: Rectangle;\r\n\tpublic key: number;\r\n\tpublic velocity: number;\r\n\tpublic inverse: boolean;\r\n\tpublic vertical: boolean;\r\n\tpublic distance: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/dynamicTileData.ts","import { Rectangle } from './';\r\n\r\nexport class RenderableData {\r\n    public area: Rectangle;\r\n    public key: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/renderable-data.ts","export class Progress {\r\n    public playerName: string;\r\n    public active = false;\r\n    public completedLevels: number;\r\n    public fire: number;\r\n    public frost: number;\r\n    public defence: number;\r\n    public hp: number;\r\n    public mana: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/progress.ts","export class AudioAsset {\r\n    public bufferDatas: Map<string, ArrayBuffer>;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/audioAsset.ts","export class ContinuousAudio {\r\n\r\n    private continue = false;\r\n    private playing = false;\r\n    private source: AudioBufferSourceNode;\r\n    private gainNode = this.audioContext.createGain();\r\n\r\n    constructor(private audioContext: AudioContext, private data: AudioBuffer, private duration: number, private offset: number, private gainValue: number) {\r\n        this.gainNode.connect(this.audioContext.destination);\r\n    }\r\n\r\n    public update() {\r\n        if (!this.continue) {\r\n            if (this.source) {\r\n                this.stop();\r\n            }\r\n        }\r\n\r\n        this.continue = false;\r\n    }\r\n\r\n    public play() {\r\n        this.continue = true;\r\n        if (!this.playing) {\r\n            this.gainNode.gain.value = this.gainValue;\r\n            this.source = this.audioContext.createBufferSource();\r\n            this.source.buffer = this.data;\r\n            this.source.connect(this.gainNode);\r\n            this.source.start(0, this.offset, this.duration);\r\n            this.source.loop = true;\r\n            this.source.onended = () => {\r\n                this.playing = false;\r\n            };\r\n            this.playing = true;\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        this.stop();\r\n    }\r\n\r\n    private stop() {\r\n        if (this.playing) {\r\n            this.gainNode.gain.value = 0;\r\n            this.source.stop(this.audioContext.currentTime + 0.01);\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/audio/continousAudio.ts","export enum ShaderType\r\n{\r\n\tVertex = 1,\r\n    Fragment = 2\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/model/enum/shaderType.ts","import { Enemy } from './enemy';\r\nimport { Swordman } from './swordman';\r\nimport { Archer } from './archer';\r\nimport { Character } from './character';\r\nimport { Player } from './player';\r\nimport { Shadow } from './shadow';\r\nimport { State } from './state';\r\nimport { Apprentice } from './apprentice';\r\nimport { Screamer } from './screamer';\r\nimport { MasterSorcerer } from './masterSorcerer';\r\nimport { IEnemy } from \"./iEnemy\";\r\nimport { ShapeShifterState } from \"./shapeShifterState\";\r\n\r\nexport {\r\n    Enemy,\r\n    Swordman,\r\n    Archer,\r\n    Character,\r\n    Player,\r\n    Shadow,\r\n    State,\r\n    ShapeShifterState,\r\n    Apprentice,\r\n    Screamer,\r\n    MasterSorcerer,\r\n    IEnemy\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/index.ts","import { Vector, Tile, Rectangle, Animation, SpellType, ContinuousAudio } from '../model'\r\nimport { Character } from './character';\r\nimport { Player } from './player';\r\nimport { State, IEnemy } from './';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { CollisionData } from '../collision/collisionData';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { DeathType } from './deathType';\r\n\r\nexport class Enemy extends Character implements IEnemy {\r\n\r\n    public color = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n    public burnValue = 0;\r\n    protected direction = true;\r\n    protected oldDirection = true;\r\n    protected collisionDetection = CollisionDetection.getInstance();\r\n    protected nextToEdge: boolean;\r\n    protected idleAnimation: Animation;\r\n    protected idleToTrackingAnimation: Animation;\r\n    protected trackingAnimation: Animation;\r\n    protected trackingToInRangeTransitionAnimation: Animation;\r\n    protected trackingToIdleTransitionAnimation: Animation;\r\n    protected hitAnimation: Animation;\r\n    protected collisionData: CollisionData;\r\n    protected hitDamage = 0;\r\n    protected hp: number = 100;\r\n    protected freezeDamage: number = 0.08;\r\n    protected flameDamage: number = 0.12;\r\n    protected maxFreeze = this.hp / this.freezeDamage;\r\n    protected freezeValue = 0;\r\n    protected burnDamage = 0.2;\r\n    protected cinderValue = 0;\r\n    protected burnDurationFactor = 3;\r\n    protected hitAreaOffset = 40;\r\n    protected minDistance = 5;\r\n    protected searchAreaOffset = 150;\r\n    protected trackingTime = 0;\r\n    protected trackingMaxTime = 3000;\r\n    protected trackingSpeed = 0;\r\n    protected idleSpeed = 0;\r\n    protected hitting = false;\r\n    protected collisionArea: Rectangle;\r\n    protected damageAudioTimerValue = 500;\r\n    protected damageAudioTimer = 0;\r\n\r\n    protected currentState = State.Idle;\r\n\r\n    constructor(position: Vector, width: number, height: number) {\r\n        super(position, width, height);\r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType) {\r\n        this.hp = this.hp - damage;\r\n        if (this.hp <= 0) {\r\n            if (type == SpellType.frostBlast) {\r\n                this.deathType = DeathType.freezeDeath;\r\n            } else if (type == SpellType.fireBlast) {\r\n                this.deathType = DeathType.fireDeath;\r\n            } else {\r\n                this.deathType = DeathType.swordDeath;\r\n            }\r\n\r\n            this.dead = true;\r\n        }\r\n    }\r\n\r\n    public burn() {\r\n\r\n        this.cinderValue += this.burnDurationFactor;\r\n        this.takeDamage(this.flameDamage, SpellType.fireBlast);\r\n\r\n        if (this.cinderValue > 300) {\r\n            this.burnValue += this.burnDurationFactor;\r\n        }\r\n    }\r\n\r\n    public setFreezeSpeed() {\r\n        this.actualSpeed = this.maxSpeed * Math.pow(0.997, this.freezeValue);\r\n\r\n        if (this.actualSpeed < this.maxSpeed * 0.3) {\r\n            this.actualSpeed = this.maxSpeed * 0.3;\r\n        }\r\n    }\r\n\r\n    public freeze() {\r\n        this.freezeValue++;\r\n        if (this.actualSpeed > this.maxSpeed * 0.3) {\r\n            this.actualSpeed = this.actualSpeed * 0.997;\r\n        }\r\n\r\n        this.takeDamage(this.freezeDamage, SpellType.frostBlast);\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player): void {\r\n        this.toMove.x = this.velocity.x * delta;\r\n        this.toMove.y = this.velocity.y * delta;\r\n        this.nextToEdge = false;\r\n\r\n        if (this.actualSpeed < this.maxSpeed) {\r\n            this.actualSpeed = this.actualSpeed * 1.005;\r\n        }\r\n\r\n        this.collisionData = this.collisionDetection.collisionDetection(tiles, [], this, this.toMove, delta);\r\n\r\n        this.fall(delta);\r\n\r\n        let collisionArea = this.getCollisionArea();\r\n\r\n        let leftEdge = this.collisionDetection.fastCheckEnviroment(new Rectangle(collisionArea.x, collisionArea.y + collisionArea.height, 1, 30), tiles);\r\n        let rightEdge = this.collisionDetection.fastCheckEnviroment(new Rectangle(collisionArea.x + collisionArea.width, collisionArea.y + collisionArea.height, 1, 30), tiles);\r\n\r\n        if (leftEdge && rightEdge) {\r\n            this.nextToEdge = true;\r\n        } else {\r\n            if (this.inverse) {\r\n                if (leftEdge) {\r\n                    this.direction = false;\r\n                    this.nextToEdge = true;\r\n                }\r\n            } else {\r\n                if (rightEdge) {\r\n                    this.direction = true;\r\n                    this.nextToEdge = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.collisionData.groundCollision) {\r\n            this.velocity.y = 0;\r\n        }\r\n\r\n        if (this.collisionData.wallCollision) {\r\n            if (this.collisionData.normalX == 1) {\r\n                this.nextToEdge = true;\r\n                this.direction = !this.direction;\r\n            } else {\r\n                this.nextToEdge = true;\r\n                this.direction = !this.direction;\r\n            }\r\n            this.velocity.x = 0;\r\n        }\r\n\r\n        let freezePercent = this.freezeValue / this.maxFreeze;\r\n        this.updateColor([1.0 + (freezePercent * 1.0), 1.0 + (freezePercent * 2.0), 1.0 + (freezePercent * 2.0), 1.0]);\r\n\r\n        this.updateBurnDamage();\r\n\r\n        if(this.damageAudioTimer > 0) {\r\n            this.damageAudioTimer -= delta;\r\n        }\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea = new Rectangle(0, 0, 0, 0);\r\n        return collisionArea;\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        this.currentAnimation = this.idleAnimation;\r\n        this.maxSpeed = this.idleSpeed;\r\n        if (this.inRange(player, this.searchAreaOffset, tiles)) {\r\n            this.currentState = State.IdleToTrackingTransition;\r\n        }\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n\r\n    }\r\n\r\n    protected patrol(delta: number) {\r\n        if (this.oldDirection != this.direction) {\r\n            this.oldDirection = this.direction;\r\n        }\r\n\r\n        if (this.oldDirection) {\r\n            this.moveLeft(delta);\r\n        } else {\r\n            this.moveRight(delta);\r\n        }\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        this.currentAnimation = this.hitAnimation;\r\n        if (!this.inRange(player, this.hitAreaOffset, tiles) && this.hitAnimation.frameIndex == 0) {\r\n            this.currentState = State.Tracking;\r\n        }\r\n\r\n        this.moveToPlayer(delta, player, tiles, 10);\r\n    }\r\n\r\n    protected npcAction(delta: number, player: Player, tiles: Tile[]) {\r\n\r\n        switch (this.currentState) {\r\n            case State.Idle: this.idle(delta, player, tiles);\r\n                break;\r\n\r\n            case State.IdleToTrackingTransition: this.idleToTrackingTransition(delta);\r\n                break;\r\n\r\n            case State.TrackingToIdleTransition: this.trackingToIdleTransition(delta);\r\n                break;\r\n\r\n            case State.Tracking: this.track(player, delta, tiles, 10);\r\n                break;\r\n\r\n            case State.TrackingToInRangeTransition: this.trackingToInRangeTransition(delta);\r\n                break;\r\n\r\n            case State.InHitRange: this.hit(delta, player, tiles);\r\n                break;\r\n        }\r\n    }\r\n\r\n    protected checkStop(player: Player, tiles: Tile[]) {\r\n        if (this.nextToEdge || this.inRange(player, this.minDistance, tiles)) {\r\n            this.stop();\r\n        }\r\n    }\r\n\r\n    protected stop() {\r\n        this.velocity.x = 0;\r\n    }\r\n\r\n    protected track(player: Player, delta: number, tiles: Tile[], gapSize: number) {\r\n        this.currentAnimation = this.trackingAnimation;\r\n        this.maxSpeed = this.trackingSpeed;\r\n\r\n        this.trackingTime -= delta;\r\n        if (this.trackingTime <= 0) {\r\n            this.currentState = State.TrackingToIdleTransition;\r\n        }\r\n\r\n        if (this.inRange(player, this.searchAreaOffset, tiles)) {\r\n            this.trackingTime = this.trackingMaxTime;\r\n        }\r\n\r\n        if (this.inRange(player, this.hitAreaOffset, tiles)) {\r\n            this.currentState = State.TrackingToInRangeTransition;\r\n        }\r\n\r\n        this.moveToPlayer(delta, player, tiles, gapSize);\r\n    }\r\n\r\n    protected moveToPlayer(delta: number, player: Player, tiles: Tile[], gapSize: number) {\r\n        if (Math.abs(player.position.x - this.position.x) > gapSize) {\r\n            if (player.position.x < this.position.x) {\r\n                this.moveLeft(delta);\r\n\r\n                this.checkStop(player, tiles);\r\n            } else if (player.position.x > this.position.x) {\r\n                this.moveRight(delta);\r\n\r\n                this.checkStop(player, tiles);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n    }\r\n\r\n    protected rand(min: number, max: number) {\r\n        return min + (Math.random() * (max - min))\r\n    }\r\n\r\n    protected getDeltaPosition(player: Player, offsetX: number, offsetY: number) {\r\n        return new Vector(player.middlePosition.x - offsetX - this.position.x, player.middlePosition.y - offsetY - this.position.y);\r\n    }\r\n\r\n    protected getPathBlocks(deltaPos: Vector) {\r\n\r\n        let blocksize = 20;\r\n        let magnitude = deltaPos.magnitude();\r\n        let direction = deltaPos.copy(deltaPos);\r\n        let bowPosition = new Vector(this.position.x, this.position.y + 10);\r\n\r\n        direction.normalize();\r\n\r\n        let blocks: Rectangle[] = [];\r\n\r\n        for (let i = 0; i < Math.floor(magnitude / blocksize); i++) {\r\n\r\n            let newMagnitude = magnitude - (i * blocksize);\r\n\r\n            blocks.push(new Rectangle(bowPosition.x + direction.x * newMagnitude, bowPosition.y + direction.y * newMagnitude, blocksize, 17));\r\n        }\r\n\r\n        return blocks;\r\n    }\r\n\r\n    protected clearShoot(deltaPos: Vector, tiles: Tile[]) {\r\n        let clear = true;\r\n        let pathBlocks = this.getPathBlocks(deltaPos);\r\n\r\n        for (let block of pathBlocks) {\r\n            if (!this.collisionDetection.fastCheckEnviroment(block, tiles)) {\r\n                clear = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return clear;\r\n    }\r\n\r\n    private updateBurnDamage() {\r\n        if (this.burnValue > 0) {\r\n            this.takeDamage(this.burnDamage, SpellType.fireBlast);\r\n            this.burnValue--;\r\n        }\r\n    }\r\n\r\n    private updateColor(color: number[]) {\r\n        let colorColl: number[] = [];\r\n\r\n        for (let i = 0; i < 6; i++) {\r\n            colorColl.push(...color);\r\n        }\r\n\r\n        this.color = colorColl;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/enemy.ts","import { Vector, Animation, Rectangle } from '../model';\r\nimport { Gravity } from '../forces/gravity';\r\nimport { DeathType } from './deathType';\r\n\r\nexport abstract class Character {\r\n    public position: Vector;\r\n\tpublic toMove: Vector = new Vector(0, 0);\r\n    public dead: boolean = false;\r\n\tpublic deathType: DeathType;\r\n\tpublic inverse: boolean = false;\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n    public currentAnimation: Animation;\r\n\tprotected velocity: Vector = new Vector(0, 0);\r\n    protected maxSpeed: number = 0.3;\r\n\tprotected actualSpeed: number = 0.3;\r\n    protected acceleration: number = 0.009;\r\n\tprotected moving: boolean = false;\r\n    protected gravityStrength: number = 0.0025;\r\n    protected gravity: Gravity = new Gravity(this.gravityStrength);\r\n\r\n    constructor(position: Vector, width: number, height: number) {\r\n        this.position = position;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    public moveRight(delta: number) {\r\n\r\n\t\tif (this.velocity.x < this.actualSpeed) {\r\n\t\t\tthis.velocity.x += this.acceleration * delta;\r\n\t\t}\r\n\r\n\t\tif (this.velocity.x > this.actualSpeed) {\r\n\t\t\tthis.velocity.x = this.actualSpeed;\r\n\t\t}\r\n\r\n\t\tthis.inverse = false;\r\n\t\tthis.moving = true;\r\n\t}\r\n\r\n    public moveLeft(delta: number) {\r\n        if (this.velocity.x > -this.actualSpeed) {\r\n\t\t\tthis.velocity.x -= this.acceleration * delta;\r\n\t\t}\r\n\r\n\t\tif (this.velocity.x < -this.actualSpeed) {\r\n\t\t\tthis.velocity.x = -this.actualSpeed;\r\n\t\t}\r\n\r\n\t\tthis.inverse = true;\r\n\t\tthis.moving = true;\r\n    }\r\n\r\n    public fall(delta: number) {\r\n\t\tthis.gravity.apply(this.velocity, delta);\r\n\t}\r\n\r\n\tpublic getCollisionArea() {\r\n\t\tvar collisionArea = new Rectangle(this.position.x, this.position.y, this.width, this.height);\r\n\r\n\t\treturn collisionArea;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/character.ts","export enum DeathType {\r\n    fallDeath = 0,\r\n    swordDeath = 1,\r\n    freezeDeath = 2,\r\n    fireDeath = 3\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/deathType.ts","import { Enemy } from './enemy';\r\nimport { Player } from './player';\r\nimport { Context } from '../context';\r\nimport { Vector, Rectangle, Tile, Meele, Animation, SpellType } from '../model';\r\nimport { TextureMapper } from '../render/textureMapper';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { DeathType } from './deathType';\r\nimport { State } from './state';\r\nimport { DebugHandler } from \"../handler/debugHandler\";\r\n\r\nexport class Swordman extends Enemy {\r\n\r\n    public hitCollisionAreas: Rectangle[] = [];\r\n    protected hitAreaOffset: number = 100;\r\n    protected searchAreaOffset: number = 600;\r\n    protected hitting = false;\r\n    protected trackingSpeed = 0.2;\r\n    protected idleSpeed = 0.1;\r\n    protected minDistance = 5;\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    private meeleAnimation: Animation;\r\n    private hitOffset = 40;\r\n    \r\n\r\n    constructor(position: Vector, width: number, height: number, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler) {\r\n        super(position, width, height);\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n        this.maxSpeed = 0.1;\r\n        this.actualSpeed = this.maxSpeed;\r\n\r\n        this.idleAnimation = new Animation([228, 227, 229, 227]);\r\n\r\n        this.idleAnimation.timeToChange = 150;\r\n\r\n        this.hitAnimation = new Animation([231, 231, 232, 230, 212]);\r\n        \r\n        this.trackingAnimation = new Animation([211, 209, 211, 210]);\r\n\r\n        \r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType) {\r\n        super.takeDamage(damage, type);\r\n        if(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"swordmanhit.wav\", 1, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        \r\n        super.update(delta, tiles, player);\r\n        this.npcAction(delta, player, tiles);\r\n\r\n        if (this.currentAnimation == this.hitAnimation) {\r\n            this.currentAnimation.next(delta);\r\n        } else {\r\n            if (this.velocity.x != 0 || this.collisionData.wallCollision) {\r\n                this.currentAnimation.next(delta);\r\n            }\r\n        }\r\n\r\n        this.setHitAnimation();\r\n        this.checkHitCollisionAreas(player);\r\n\r\n        \r\n    }\r\n\r\n    private checkHitCollisionAreas(player: Player) {\r\n        if (this.hitAnimation) {\r\n            if (this.hitAnimation.frameIndex == 1 && !this.hitting) {\r\n                this.hitting = true;\r\n                this.projectileHandler.createCollisionProjectile(this.position, this.width, this.inverse, 30, new Vector(0.5, 0.6));\r\n            }\r\n\r\n            if (this.hitAnimation.frameIndex == 0) {\r\n                this.hitting = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        super.idle(delta, player, tiles);\r\n        this.patrol(delta);\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n        this.currentState = State.Tracking;\r\n        this.maxSpeed = this.trackingSpeed;\r\n        this.actualSpeed = this.maxSpeed;\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n        this.currentState = State.InHitRange;\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n        this.maxSpeed = this.idleSpeed;\r\n        this.actualSpeed = this.maxSpeed;\r\n        this.currentState = State.Idle;\r\n    }\r\n\r\n    protected track(player: Player, delta: number, tiles: Tile[], gapSize: number) {\r\n        this.actualSpeed = this.trackingSpeed;\r\n        super.track(player, delta, tiles, gapSize);\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n        \r\n        let deltaPos: Vector;\r\n        if(this.inverse) {\r\n            deltaPos = this.getDeltaPosition(player, 50, 0);\r\n        } else {\r\n            deltaPos = this.getDeltaPosition(player, 0, 0);\r\n        }\r\n        \r\n        let magnitude = deltaPos.magnitude();\r\n\r\n        if (magnitude < offset) {\r\n            if (this.clearShoot(deltaPos, tiles)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        this.actualSpeed = 0;\r\n        super.hit(delta, player, tiles);\r\n        if (this.meeleAnimation) {\r\n            if (this.meeleAnimation.repetitions <= 0) {\r\n                this.createHit(player);\r\n            }\r\n        } else {\r\n            this.createHit(player);\r\n        }\r\n    }\r\n\r\n    private createHit(player: Player) {\r\n        this.animationHandler.audioHandler.playSound(\"swing3.wav\", 1, 0, 0.1);\r\n        if (!this.inverse) {\r\n            this.meeleAnimation = this.animationHandler.swordscut_a(new Vector(this.position.x + this.hitOffset, this.position.y), 50, !this.inverse);\r\n        } else {\r\n            this.meeleAnimation = this.animationHandler.swordscut_a(new Vector(this.position.x - this.hitOffset, this.position.y), 50, !this.inverse);\r\n        }\r\n    }\r\n\r\n    private setHitAnimation() {\r\n        if (this.meeleAnimation) {\r\n            if (!this.inverse) {\r\n                this.meeleAnimation.areaToRender.x = this.position.x + this.hitOffset;\r\n                this.meeleAnimation.areaToRender.y = this.position.y;\r\n            } else {\r\n                this.meeleAnimation.areaToRender.x = this.position.x - this.hitOffset;\r\n                this.meeleAnimation.areaToRender.y = this.position.y;\r\n            }\r\n        }\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea = new Rectangle(this.position.x + 10, this.position.y, this.width - 20, 55);\r\n\r\n        return collisionArea;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/swordman.ts","export enum State {\r\n    Idle,\r\n    IdleToTrackingTransition,\r\n    TrackingToIdleTransition,\r\n    Tracking,\r\n    TrackingToInRangeTransition,\r\n    InHitRange\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/state.ts","import { Enemy } from './enemy';\r\nimport { Player } from './player';\r\nimport { Context } from '../context';\r\nimport { Vector, Rectangle, Tile, Meele, Animation, SpellType, DebugElement } from '../model';\r\nimport { TextureMapper } from '../render/textureMapper';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { DebugHandler } from '../handler/debugHandler';\r\nimport { DeathType } from './deathType';\r\nimport { State } from './';\r\n\r\nexport class Archer extends Enemy {\r\n\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    protected hitAreaOffset: number = 600;\r\n    protected searchAreaOffset: number = 800;\r\n    protected hp = 50;\r\n    private arrowVelocity = 0.5;\r\n    private shoot = false;\r\n    public debugHandler = DebugHandler.getInstance();\r\n\r\n    constructor(position: Vector, width: number, height: number, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler) {\r\n        super(position, width, height);\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n\r\n        this.maxSpeed = 0.1;\r\n        this.actualSpeed = this.maxSpeed;\r\n\r\n        this.idleAnimation = new Animation([267, 266, 267, 265]);\r\n\r\n        this.hitAnimation = new Animation([262, 264, 263, 264]);\r\n\r\n        this.trackingAnimation = new Animation([267, 266, 267, 265]);\r\n\r\n        this.trackingAnimation.timeToChange = 175;\r\n\r\n        this.hitAnimation.timeToChange = 300;\r\n\r\n        this.currentAnimation = this.hitAnimation;\r\n\r\n        this.idleAnimation.timeToChange = 175;\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        this.npcAction(delta, player, tiles);\r\n        super.update(delta, tiles, player);\r\n\r\n        this.currentAnimation.next(delta);\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea = new Rectangle(this.position.x + 10, this.position.y - 5, this.width - 20, 55);\r\n\r\n        return collisionArea;\r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType) {\r\n        super.takeDamage(damage, type);\r\n        if(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"swordmanhit.wav\", 1, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        super.idle(delta, player, tiles);\r\n        this.patrol(delta);\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        super.hit(delta, player, tiles);\r\n\r\n        if(this.hitAnimation.frameIndex == 3) {\r\n            if(!this.shoot) {\r\n                this.shoot = true;\r\n                let velocity = this.calculatePath(player, this.inverse);\r\n                let bowPosition = new Vector(this.position.x, this.position.y + 20); \r\n                this.projectileHandler.createArrow(bowPosition, this.inverse, velocity);\r\n            }\r\n        } else {\r\n            this.shoot = false;\r\n        }\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n        this.currentState = State.Tracking;\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n        this.currentState = State.InHitRange;\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n        this.currentState = State.Idle;\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n        let deltaPos = this.getDeltaPosition(player, 10, 0);\r\n        let magnitude = deltaPos.magnitude();\r\n        \r\n        if(magnitude < this.searchAreaOffset) {\r\n            if(this.clearShoot(deltaPos, tiles)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    private getDeltaVelocity(player: Player, deltaPos: Vector) {\r\n        \r\n        let velocity = player.getVelocity();\r\n        let deltaVelocity = velocity.x * velocity.x * 800;\r\n        if(deltaPos.x < 0) {\r\n            if(velocity.x > 0) {\r\n                return -deltaVelocity;\r\n            } else {\r\n                return deltaVelocity;\r\n            }\r\n        } else {\r\n            if(velocity.x > 0) {\r\n                return deltaVelocity;\r\n            } else {\r\n                return -deltaVelocity;\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    private calculatePath(player: Player, inverse: boolean) {\r\n        let deltaPos = this.getDeltaPosition(player, 10, 0);\r\n\r\n        deltaPos.y = deltaPos.y - ((deltaPos.x * deltaPos.x * 0.00063) + this.getDeltaVelocity(player, deltaPos));\r\n        \r\n        let velocity = new Vector(deltaPos.x, deltaPos.y * this.rand(0.85, 1.15));\r\n        velocity.normalize();\r\n        velocity.multiply(this.arrowVelocity);\r\n        return velocity;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/archer.ts","import { Particle } from '../particle/particle'\r\nimport { Vector, Tile, Rectangle, DebugElement } from '../model';\r\nimport { RenderHelper } from '../render/renderHelper';\r\nimport { RenderCall } from '../render/renderCall';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\n\r\nexport class DebugHandler {\r\n\r\n    public debugRects: Rectangle[] = [];\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private static instance: DebugHandler = new DebugHandler();\r\n\r\n    constructor() {\r\n\t\tif (DebugHandler.instance) {\r\n\t\t\tthrow new Error(\"Static class cant be instanced!\");\r\n\t\t}\r\n\r\n\t\tDebugHandler.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance() {\r\n\t\treturn DebugHandler.instance;\r\n\t}\r\n\r\n    createRenderCall(renderCall: RenderCall) {\r\n\r\n        for(let rect of this.debugRects) {\r\n            renderCall.vertecies = this.renderHelper.getVertecies(rect.x, rect.y, rect.width, rect.height, renderCall.vertecies);\r\n            renderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, 1);\r\n\t\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t\t}\r\n        \r\n        return renderCall;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/debugHandler.ts","import { Vector, Rectangle, Sprite, Animation, SpellType, StickyAnimation, DebugElement, Tile, DynamicTile, ChannelCast, Progress, ContinuousAudio } from '../model';\r\nimport { RenderCall, ColorRenderCall, RenderHelper } from '../render';\r\nimport { Context } from '../';\r\nimport { CollisionData } from '../collision';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { SpellHandler } from '../handler/spellHandler';\r\nimport { Drag } from '../forces/drag';\r\nimport { Character } from './character';\r\nimport { DeathType } from './deathType';\r\nimport { DebugHandler } from '../handler/debugHandler';\r\n\r\nexport class Player extends Character {\r\n\r\n\tpublic defaultJumpSpeed: number = -0.8;\r\n\tpublic jumpSpeed: number = this.defaultJumpSpeed;\r\n\tpublic damageAnimations: StickyAnimation[] = [];\r\n\tpublic hp: number;\r\n\tpublic mana: number;\r\n\tpublic stunned = false;\r\n\tpublic lift: DynamicTile = null;\r\n\tpublic liftVelocity = new Vector(0, 0);\r\n\tpublic middlePosition = new Vector(0, 0);\r\n\tprotected acceleration: number = 0.003;\r\n\tprivate collisionDetection = CollisionDetection.getInstance();\r\n\tprivate projectileHandler: ProjectileHandler;\r\n\tprivate animationHandler: AnimationHandler;\r\n\tprivate particleHandler: ParticleHandler;\r\n\tprivate spellHandler: SpellHandler;\r\n\tprivate drag: number = 0.0015;\r\n\tprivate externalDragForce: number = 0.0005;\r\n\tprivate dragForce: Drag = new Drag(this.drag);\r\n\tprivate externalDrag = new Drag(this.externalDragForce);\r\n\r\n\tprivate stunnedAnimation: Animation;\r\n\tprivate idleTime = 3000;\r\n\tprivate idleTimeChange = 3000;\r\n\tprivate jumping: boolean = false;\r\n\tprivate inJump = false;\r\n\tprivate renderHelper = RenderHelper.getInstance();\r\n\tprivate context: Context;\r\n\tprivate manaRegen = 1;\r\n\tprivate maxMana: number;\r\n\tprivate externalVelocity: Vector = new Vector(0, 0);\r\n\r\n\tprivate lowerAnimation: Animation;\r\n\tprivate upperAnimation: Animation;\r\n\r\n\tprivate lowerIdleAnimation: Animation;\r\n\tprivate upperIdleAnimation: Animation;\r\n\r\n\tprivate lowerJumpAnimation: Animation;\r\n\tprivate upperJumpAnimation: Animation;\r\n\r\n\tprivate lowerRunningAnimation: Animation;\r\n\tprivate upperRunningAnimation: Animation;\r\n\r\n\tprivate lowerStillAnimation: Animation;\r\n\tprivate upperStillAnimation: Animation;\r\n\r\n\tprivate onGroundTimer = 0;\r\n\tprivate shieldTextureCoords = this.renderHelper.getTextureCoordinates([], 199);\r\n\r\n\tprivate stepAudio: ContinuousAudio;\r\n\tprotected damageAudioTimerValue = 500;\r\n    protected damageAudioTimer = 0;\r\n\r\n\tprivate debugHandler = DebugHandler.getInstance();\r\n\r\n\tconstructor(position: Vector, context: Context, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler, particleHandler: ParticleHandler, width: number, height: number, hp: number, mana: number, progress: Progress, fireLevel: number, frostLevel: number, shieldLevel: number) {\r\n\t\tsuper(position, width, height);\r\n\t\tthis.context = context;\r\n\t\tthis.projectileHandler = projectileHandler;\r\n\t\tthis.animationHandler = animationHandler;\r\n\t\tthis.particleHandler = particleHandler;\r\n\t\tthis.spellHandler = new SpellHandler(this.animationHandler, this.projectileHandler, this.particleHandler, this, fireLevel, frostLevel, shieldLevel);\r\n\r\n\t\tthis.lowerIdleAnimation = new Animation([162]);\r\n\t\tthis.upperIdleAnimation = new Animation([163]);\r\n\r\n\t\tthis.upperRunningAnimation = new Animation([170, 171, 172, 170, 173, 174]);\r\n\t\tthis.upperRunningAnimation.timeToChange = 150;\r\n\r\n\t\tthis.lowerRunningAnimation = new Animation([165, 166, 167, 165, 168, 169]);\r\n\t\tthis.lowerRunningAnimation.timeToChange = 150;\r\n\r\n\t\tthis.stunnedAnimation = new Animation([60, 61, 62, 63]);\r\n\t\tthis.stunnedAnimation.timeToChange = 200;\r\n\r\n\t\tthis.lowerJumpAnimation = new Animation([160]);\r\n\r\n\t\tthis.upperJumpAnimation = new Animation([161]);\r\n\r\n\t\tthis.lowerStillAnimation = new Animation([165]);\r\n\r\n\t\tthis.upperStillAnimation = new Animation([170]);\r\n\r\n\t\tthis.hp = hp;\r\n\t\tthis.mana = mana;\r\n\t\tthis.maxMana = this.mana;\r\n\r\n\t\tthis.lowerAnimation = this.lowerIdleAnimation;\r\n\t\tthis.upperAnimation = this.upperIdleAnimation;\r\n\r\n\t\tthis.stepAudio = this.animationHandler.audioHandler.createContinuos(\"step.flac\", 2, 0, 0.05);\r\n\t}\r\n\r\n\tpublic takeDamage(damage: number) {\r\n\t\tthis.hp -= damage;\r\n\t\t\r\n\t\tif (this.hp <= 0) {\r\n\t\t\tthis.hp = 0;\r\n\t\t\tthis.deathType = DeathType.swordDeath;\r\n\t\t}\r\n\r\n\t\tif(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"playerhit.wav\", 1, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n\t}\r\n\r\n\tpublic hardHit(inverse: boolean, x: number) {\r\n\t\tthis.stun();\r\n\t\tthis.velocity.x = 0;\r\n\t\tif (inverse) {\r\n\t\t\tthis.externalVelocity.x += x;\r\n\t\t} else {\r\n\t\t\tthis.externalVelocity.x -= x;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic useMana(mana: number) {\r\n\r\n\t\tif (this.mana - mana <= 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.mana -= mana;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic regenMana() {\r\n\t\tthis.mana += this.manaRegen;\r\n\r\n\t\tif (this.mana > this.maxMana) {\r\n\t\t\tthis.mana = this.maxMana;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getVelocity() {\r\n\t\treturn new Vector(this.velocity.x + this.externalVelocity.x + this.liftVelocity.x, this.velocity.y + this.externalVelocity.y + this.liftVelocity.y);\r\n\t}\r\n\r\n\tpublic isMoving() {\r\n\t\treturn this.velocity.x == 0 && this.velocity.y == 0;\r\n\t}\r\n\r\n\tpublic createRenderCall(renderCall: RenderCall) {\r\n\r\n\r\n\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n\t\tif(this.inverse) {\r\n\t\t\trenderCall.vertecies = this.renderHelper.getInverseVertecies(this.position.x, this.position.y, this.width, this.height, renderCall.vertecies);\r\n\t\t} else {\r\n\t\t\trenderCall.vertecies = this.renderHelper.getVertecies(this.position.x, this.position.y, this.width, this.height, renderCall.vertecies);\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif (this.stunned) {\r\n\t\t\trenderCall.textureCoords.push.apply(renderCall.textureCoords, this.stunnedAnimation.getCurrentFrame());\r\n\t\t} else {\r\n\t\t\trenderCall.textureCoords.push.apply(renderCall.textureCoords, this.upperAnimation.getCurrentFrame());\r\n\r\n\t\t\tthis.renderLower(renderCall);\r\n\r\n\t\t\tif (this.spellHandler.castingShield) {\r\n\t\t\t\tthis.renderShield(renderCall);\r\n\t\t\t\tthis.spellHandler.castingShield = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn renderCall;\r\n\t}\r\n\r\n\tpublic shieldExplosion(inverse: boolean) {\r\n\t\tthis.animationHandler.audioHandler.playSound(\"magic1.wav\", 2, 0, 0.1);\r\n\t\tthis.particleHandler.createShieldExplosionEffect(this.getCalculatedPos(this.position, 0), this.inverse);\r\n\t\tthis.hardHit(inverse, 0.7);\r\n\t}\r\n\r\n\tpublic getShieldCollidables() {\r\n\t\tif (this.spellHandler.castingShield) {\r\n\t\t\treturn this.spellHandler.shieldCollidables;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic renderLower(renderCall: RenderCall) {\r\n\r\n\t\tlet call = new RenderCall();\r\n\t\tlet x: number = this.position.x;\r\n\t\tlet x1: number;\r\n\t\tlet x2: number;\r\n\r\n\t\tif (this.inverse) {\r\n\t\t\tx2 = x;\r\n\t\t\tx1 = x + (this.width);\r\n\t\t} else {\r\n\t\t\tx2 = x + (this.width);\r\n\t\t\tx1 = x;\r\n\t\t}\r\n\r\n\t\tlet y1 = this.position.y;\r\n\t\tlet y2 = this.position.y + (this.height);\r\n\r\n\t\tcall.vertecies = [\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx2, y1,\r\n\t\t\tx1, y1,\r\n\t\t\tx2, y2,\r\n\t\t\tx1, y2\r\n\t\t];\r\n\r\n\t\trenderCall.textureCoords.push.apply(renderCall.textureCoords, this.lowerAnimation.getCurrentFrame());\r\n\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t\trenderCall.vertecies.push.apply(renderCall.vertecies, call.vertecies);\r\n\r\n\t}\r\n\r\n\tpublic update(tiles: Tile[], dynamicTiles: DynamicTile[], delta: number) {\r\n\r\n\t\tlet collisionData = this.collisionDetection.collisionDetection(tiles, dynamicTiles, this, this.toMove, delta);\r\n\r\n\t\tthis.middlePosition.x = (this.position.x + this.width/2);\r\n\t\tthis.middlePosition.y = this.position.y;\r\n\r\n\t\tif (this.lift == null) {\r\n\t\t\tthis.fall(delta);\r\n\t\t} else {\r\n\t\t\tif (collisionData.groundCollision) {\r\n\t\t\t\tthis.liftVelocity = new Vector(0, 0)\r\n\t\t\t\tthis.lift = null;\r\n\t\t\t}\r\n\t\t\tcollisionData.groundCollision = true;\r\n\t\t\tcollisionData.normalY = -1;\r\n\t\t}\r\n\r\n\t\tif (collisionData.lift != null && collisionData.groundCollision && collisionData.normalY == -1) {\r\n\t\t\tthis.lift = collisionData.lift;\r\n\t\t}\r\n\r\n\t\tif (this.deathType) {\r\n\t\t\tif (this.deathType == DeathType.swordDeath) {\r\n\t\t\t\tthis.dead = true;\r\n\t\t\t\tthis.projectileHandler.createPlayerSword_death(this.position, this.inverse);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (collisionData.groundCollision) {\r\n\t\t\tthis.velocity.y = 0;\r\n\r\n\t\t\tif (collisionData.normalY == -1) {\r\n\t\t\t\tthis.inJump = false;\r\n\t\t\t\tif (this.jumping) {\r\n\t\t\t\t\tthis.liftVelocity = new Vector(0, 0)\r\n\t\t\t\t\tthis.lift = null;\r\n\t\t\t\t\tthis.idleTime = 0;\r\n\t\t\t\t\tthis.velocity.y = this.jumpSpeed;\r\n\t\t\t\t\tthis.inJump = true;\r\n\t\t\t\t\tthis.animationHandler.audioHandler.playSound(\"jump.ogg\", 1, 0, 0.1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.onGroundTimer = 50;\r\n\r\n\t\t\t} else if (this.onGroundTimer >= 0) {\r\n\t\t\t\tcollisionData.fallDeath = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (collisionData.fallDeath) {\r\n\t\t\tthis.dead = true;\r\n\t\t\tthis.animationHandler.fallDeath(this.position);\r\n\t\t}\r\n\r\n\t\tif (collisionData.wallCollision) {\r\n\t\t\tthis.velocity.x = 0;\r\n\t\t\tthis.externalVelocity.x = 0;\r\n\t\t}\r\n\r\n\t\tif (this.velocity.x != 0 || collisionData.wallCollision) {\r\n\t\t\tthis.idleTime = 0;\r\n\t\t} else {\r\n\t\t\tthis.idleTime += delta;\r\n\t\t\tthis.lowerRunningAnimation.reset();\r\n\t\t\tthis.upperRunningAnimation.reset();\r\n\t\t}\r\n\r\n\t\tif (!this.moving) {\r\n\t\t\tif (this.externalVelocity.x != 0) {\r\n\t\t\t\tthis.externalDrag.apply(this.externalVelocity, delta);\r\n\t\t\t} else {\r\n\t\t\t\tthis.dragForce.apply(this.velocity, delta);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.spellHandler.update(delta);\r\n\r\n\t\tif (this.inJump) {\r\n\t\t\tthis.lowerAnimation = this.lowerJumpAnimation;\r\n\t\t} else if (this.moving || this.velocity.x != 0) {\r\n\t\t\tthis.lowerAnimation = this.lowerRunningAnimation;\r\n\t\t\tthis.stepAudio.play();\r\n\t\t} else {\r\n\t\t\tthis.lowerAnimation = this.lowerStillAnimation;\r\n\t\t}\r\n\r\n\t\tif (this.stunned) {\r\n\t\t\tthis.stunnedAnimation.next(delta);\r\n\t\t\tthis.spellHandler.castingShield = false;\r\n\t\t\tif (this.stunnedAnimation.repetitions == 0) {\r\n\t\t\t\tthis.stunned = false;\r\n\t\t\t}\r\n\t\t} else if (this.spellHandler.currentCast) {\r\n\t\t\tif (this.spellHandler.currentCast instanceof ChannelCast) {\r\n\t\t\t\tthis.lowerAnimation = this.spellHandler.currentCast.lowerCurrentAnimation;\r\n\t\t\t}\r\n\r\n\t\t\tthis.upperAnimation = this.spellHandler.currentCast.currentAnimation;\r\n\t\t} else if (this.inJump) {\r\n\t\t\tthis.upperAnimation = this.upperJumpAnimation;\r\n\t\t} else if (this.idleTime >= this.idleTimeChange) {\r\n\t\t\tthis.lowerAnimation = this.lowerIdleAnimation;\r\n\t\t\tthis.upperAnimation = this.upperIdleAnimation;\r\n\t\t} else if (this.moving || this.velocity.x != 0) {\r\n\t\t\tthis.upperRunningAnimation.frameIndex = this.lowerRunningAnimation.frameIndex;\r\n\t\t\tthis.upperRunningAnimation.lastChange = this.lowerRunningAnimation.lastChange;\r\n\r\n\t\t\tthis.upperAnimation = this.upperRunningAnimation;\r\n\t\t\tthis.lowerAnimation = this.lowerRunningAnimation;\r\n\r\n\t\t} else {\r\n\t\t\tthis.upperAnimation = this.upperStillAnimation;\r\n\t\t\tthis.lowerAnimation = this.lowerStillAnimation;\r\n\t\t}\r\n\r\n\t\tthis.lowerAnimation.next(delta);\r\n\t\tthis.upperAnimation.next(delta);\r\n\r\n\t\tthis.jumping = false;\r\n\t\tthis.moving = false;\r\n\r\n\t\tlet totalVelocity = this.getVelocity();\r\n\t\tthis.toMove.x = totalVelocity.x * delta;\r\n\t\tthis.toMove.y = totalVelocity.y * delta;\r\n\r\n\t\tthis.updateDamageAnimations();\r\n\r\n\t\tthis.onGroundTimer -= delta;\r\n\r\n\t\tif(this.damageAudioTimer > 0) {\r\n            this.damageAudioTimer -= delta;\r\n        }\r\n\t}\r\n\r\n\tpublic moveRight(delta: number) {\r\n\t\tsuper.moveRight(delta);\r\n\t}\r\n\r\n\tpublic moveLeft(delta: number) {\r\n\t\tsuper.moveLeft(delta);\r\n\t}\r\n\r\n\tpublic getCollisionArea() {\r\n\t\tvar collisionArea = new Rectangle(this.position.x + 8, this.position.y + 14, 32, 68);\r\n\r\n\t\treturn collisionArea;\r\n\t}\r\n\r\n\tpublic getProjectileCollisionArea() {\r\n\t\tvar collisionArea = new Rectangle(this.position.x + 14, this.position.y + 14, 20, 72);\r\n\r\n\t\treturn collisionArea;\r\n\t}\r\n\r\n\tpublic getCalculatedPos(position: Vector, size: number) {\r\n\t\treturn new Vector(this.calcPos(position.x, size, 25), this.calcPos(position.y, size, 43))\r\n\t}\r\n\r\n\tpublic calcPos(value: number, size: number, offset: number) {\r\n\t\treturn value - (size / 2 - offset);\r\n\t}\r\n\r\n\tpublic jump() {\r\n\t\tif (!this.jumping) {\r\n\t\t\tthis.jumping = true;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic cast(type: SpellType) {\r\n\t\tthis.spellHandler.cast(type);\r\n\t}\r\n\r\n\tprivate renderShield(renderCall: RenderCall) {\r\n\r\n\t\trenderCall.vertecies = this.renderHelper.getVertecies(this.position.x - 18, this.position.y - 5, 80, 100, renderCall.vertecies);\r\n\t\trenderCall.textureCoords.push.apply(renderCall.textureCoords, this.shieldTextureCoords);\r\n\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n\t\treturn renderCall;\r\n\t}\r\n\r\n\tprivate stun() {\r\n\t\tthis.stunned = true;\r\n\t\tthis.stunnedAnimation.repetitions = 10;\r\n\t\tthis.stunnedAnimation.reset();\r\n\t}\r\n\r\n\tprivate updateDamageAnimations() {\r\n\t\tlet removeItems: StickyAnimation[] = [];\r\n\r\n\t\tfor (let stickyAnimation of this.damageAnimations) {\r\n\t\t\tstickyAnimation.animation.areaToRender.x = this.position.x - stickyAnimation.offset.x;\r\n\t\t\tstickyAnimation.animation.areaToRender.y = this.position.y - stickyAnimation.offset.y;\r\n\r\n\t\t\tif (stickyAnimation.animation.repetitions <= 0) {\r\n\t\t\t\tremoveItems.push(stickyAnimation);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let remove of removeItems) {\r\n\t\t\tlet index = this.damageAnimations.indexOf(remove);\r\n\r\n\t\t\tif (index != -1) {\r\n\t\t\t\tthis.damageAnimations.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/player.ts","import { SpellType, Cast, Animation, InstantCast, ChannelCast, Vector, Rectangle, SpellCast, Progress, ContinuousAudio } from '../model';\r\nimport { AnimationHandler } from './animationHandler';\r\nimport { ProjectileHandler } from './projectileHandler';\r\nimport { ParticleHandler } from './particleHandler';\r\nimport { Player } from '../character/player';\r\nimport { AudioHandler } from \"./audioHandler\";\r\n\r\nexport class SpellHandler {\r\n\r\n    public currentCast: Cast;\r\n    public shieldCollidables: Rectangle[] = [];\r\n    public castingShield = false;\r\n\r\n    private animationHandler: AnimationHandler;\r\n    private projectileHandler: ProjectileHandler;\r\n    private particleHandler: ParticleHandler;\r\n    private player: Player;\r\n\r\n    private fireBlastCast: InstantCast;\r\n    private frostBlastCast: InstantCast;\r\n    private fireBallCast: SpellCast;\r\n\r\n    private channelMagicCast: ChannelCast;\r\n\r\n    private break: number = 0;\r\n    private refShieldCollidables: Rectangle[] = [];\r\n    private maxMagicValue = 50 + (20 * this.fireLevel);\r\n    private minMagicValue = 25 + (5 * this.fireLevel);\r\n\r\n    private flameThrowerAudio: ContinuousAudio;\r\n    private freezeAudio: ContinuousAudio;\r\n    private shieldAudio: ContinuousAudio;\r\n    private magicChannelAudio: ContinuousAudio;\r\n    private maxMagicAudio: ContinuousAudio;\r\n\r\n\r\n    constructor(animationHandler: AnimationHandler, projectileHandler: ProjectileHandler, particleHandler: ParticleHandler, player: Player, private fireLevel: number, private frostLevel: number, private shieldLevel: number) {\r\n        this.animationHandler = animationHandler;\r\n        this.projectileHandler = projectileHandler;\r\n        this.particleHandler = particleHandler;\r\n        this.player = player;\r\n\r\n        this.createShieldCollidables();\r\n\r\n        this.initCasts();\r\n\r\n        this.flameThrowerAudio = this.animationHandler.audioHandler.createContinuos(\"flamethrower.ogg\", 3.5, 0, 0.1);\r\n        this.freezeAudio = this.animationHandler.audioHandler.createContinuos(\"freeze.ogg\", 6, 0, 0.1);\r\n        this.shieldAudio = this.animationHandler.audioHandler.createContinuos(\"shield.ogg\", 2.4, 0, 0.03);\r\n        this.magicChannelAudio = this.animationHandler.audioHandler.createContinuos(\"fireloop.ogg\", 1, 0, 0.02);\r\n        this.maxMagicAudio = this.animationHandler.audioHandler.createContinuos(\"fireloop.ogg\", 2.5, 1, 0.01);   \r\n    }\r\n\r\n    public update(delta: number) {\r\n\r\n        if (this.currentCast && this.break == 0) {\r\n            this.currentCast.update(delta);\r\n\r\n            if (this.currentCast.done) {\r\n                this.currentCast.cancel();\r\n                this.currentCast = null;\r\n            }\r\n        } else {\r\n            if (!this.castingShield) {\r\n                this.player.regenMana();\r\n            }\r\n        }\r\n\r\n        if (this.channelMagicCast.currentValue >= this.maxMagicValue) {\r\n            this.particleHandler.createMagicEffect(this.player.position, this.player.inverse);\r\n            this.maxMagicAudio.play();\r\n        }\r\n\r\n        if (this.castingShield) {\r\n\r\n            this.shieldCollidables = [];\r\n            for (let collidable of this.refShieldCollidables) {\r\n                this.shieldCollidables.push(new Rectangle(collidable.x + this.player.position.x, collidable.y + this.player.position.y, collidable.width, collidable.height));\r\n            }\r\n            this.shieldAudio.play();\r\n            this.particleHandler.createShieldEffect(this.player.getCalculatedPos(this.player.position, 0), this.player.inverse, this.shieldLevel);\r\n        }\r\n\r\n        this.updateBreak(delta);\r\n    }\r\n\r\n    public cast(spellType: SpellType) {\r\n        switch (spellType) {\r\n            case SpellType.fireball: this.castFireBall();\r\n                break;\r\n\r\n            case SpellType.electricbolt: this.castElectricBall();\r\n                break;\r\n\r\n            case SpellType.fireBlast: this.castFireBlast();\r\n                break;\r\n\r\n            case SpellType.frostBlast: this.castFrostBlast();\r\n                break;\r\n\r\n            case SpellType.shield: this.castShield();\r\n                break;\r\n\r\n            case SpellType.channelmagic: this.castChannelMagic();\r\n                break;\r\n        }\r\n    }\r\n\r\n    private createShieldCollidables() {\r\n        this.refShieldCollidables = [];\r\n        let posx = 17;\r\n        let posy = 40;\r\n\r\n        for (let i = 0; i < 20; i++) {\r\n            let angle: number;\r\n            let x: number;\r\n            angle = Math.PI * (i * 0.1 + 0.6);\r\n            x = posx + (30 * Math.cos(angle));\r\n\r\n            let y = posy + (40 * Math.sin(angle));\r\n            this.refShieldCollidables.push(new Rectangle(x, y, 12, 12));\r\n        }\r\n    }\r\n\r\n    private castShield() {\r\n        if (this.player.useMana(0.1)) {\r\n            if (this.break == 0) {\r\n                this.castingShield = true;\r\n            }\r\n        } else {\r\n            this.break = 500;\r\n            this.player.shieldExplosion(this.player.inverse);\r\n        }\r\n    }\r\n\r\n    private updateBreak(delta: number) {\r\n        this.break -= delta;\r\n\r\n        if (this.break < 0) {\r\n            this.break = 0;\r\n        }\r\n    }\r\n\r\n    private castFireBall() {\r\n        if (!this.currentCast || (this.currentCast == this.fireBallCast && this.fireBallCast.currentAnimation.repetitions == 1)) {\r\n            if (this.player.useMana(20)) {\r\n                this.fireBallCast.reset();\r\n                this.fireBallCast.size = this.channelMagicCast.currentValue;\r\n                this.channelMagicCast.resetValue();\r\n                this.currentCast = this.fireBallCast;\r\n            } else {\r\n                this.break = 500;\r\n                if (this.castingShield) {\r\n                    this.player.shieldExplosion(this.player.inverse);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private castElectricBall() {\r\n\r\n    }\r\n\r\n    private castChannelMagic() {\r\n        if ((!this.currentCast || this.currentCast == this.channelMagicCast) && this.player.isMoving()) {\r\n            this.channelMagicCast.channeling = true;\r\n            this.channelMagicCast.done = false;\r\n            this.currentCast = this.channelMagicCast;\r\n        }\r\n    }\r\n\r\n    private castFireBlast() {\r\n        if (!this.currentCast || this.currentCast == this.fireBlastCast) {\r\n            if (this.player.useMana(0.5)) {\r\n                this.fireBlastCast.reset();\r\n                this.currentCast = this.fireBlastCast;\r\n            } else {\r\n                this.break = 500;\r\n                if (this.castingShield) {\r\n                    this.player.shieldExplosion(this.player.inverse);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private castFrostBlast() {\r\n        if (!this.currentCast || this.currentCast == this.frostBlastCast) {\r\n            if (this.player.useMana(0.5)) {\r\n                this.frostBlastCast.reset();\r\n                this.currentCast = this.frostBlastCast;\r\n            } else {\r\n                this.break = 500;\r\n                if (this.castingShield) {\r\n                    this.player.shieldExplosion(this.player.inverse);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private initCasts() {\r\n    \r\n        let fireblastAnimation = new Animation([178]);\r\n        fireblastAnimation.repetitions = 1;\r\n\r\n        let onFireCast = this.getOnCastFireBlast(this.fireLevel);\r\n\r\n        this.fireBlastCast = new InstantCast(fireblastAnimation, onFireCast);\r\n\r\n        let frostBlastAnimation = new Animation([178]);\r\n        frostBlastAnimation.repetitions = 1;\r\n\r\n        let onFrostCast = this.getOnCastFrostBlast(this.frostLevel);\r\n\r\n        this.frostBlastCast = new InstantCast(frostBlastAnimation, onFrostCast);\r\n\r\n        let channelAnimation = new Animation([175]);\r\n\r\n        let channelLowerAnimation = new Animation([162]);\r\n\r\n        let onChannelMagic = () => {\r\n            this.particleHandler.createChannelMagic(this.player.position, this.player.inverse);\r\n            this.magicChannelAudio.play();\r\n        };\r\n\r\n        let onCancelChannelMagic = () => {\r\n        }\r\n\r\n        this.channelMagicCast = new ChannelCast(channelAnimation, channelLowerAnimation, onChannelMagic, onCancelChannelMagic, 25 + (5 * this.fireLevel), this.maxMagicValue, 0.03);\r\n\r\n        let castAnimation = new Animation([170, 176, 177, 176]);\r\n        castAnimation.repetitions = 3;\r\n        castAnimation.timeToChange = 170;\r\n\r\n        let onFireBallUpdate = (area: Rectangle, inverse: boolean, offsetX: number) => {\r\n            this.particleHandler.createFireBall(new Vector(area.x, area.y), area.width, inverse, offsetX);\r\n        };\r\n\r\n        let onFireBallCast = (animation: Animation, size: number) => {\r\n\r\n            this.projectileHandler.createFireBall(this.player.getCalculatedPos(this.player.position, size), this.player.inverse, 0.6, size, 11, onFireBallUpdate);\r\n            this.animationHandler.audioHandler.playSound(\"foom.wav\", 1, 0, 0.03)\r\n            return animation;\r\n        };\r\n\r\n        this.fireBallCast = new SpellCast(castAnimation, 2, onFireBallCast);\r\n    }\r\n\r\n    private getOnCastFireBlast(fireLevel: number) {\r\n        if (fireLevel == 0) {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFireBlast(this.player.position, this.player.inverse, 0);\r\n                this.flameThrowerAudio.play();\r\n                return animation;\r\n            };\r\n        } else if (fireLevel == 1) {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFireBlast(this.player.position, this.player.inverse, 1);\r\n                this.flameThrowerAudio.play();\r\n                return animation;\r\n            };\r\n        } else if (fireLevel == 2) {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFireBlast(this.player.position, this.player.inverse, 2);\r\n                this.flameThrowerAudio.play();\r\n                return animation;\r\n            };\r\n        } else {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFireBlast(this.player.position, this.player.inverse, 3);\r\n                this.flameThrowerAudio.play();\r\n                return animation;\r\n            };\r\n        }\r\n    }\r\n\r\n    private getOnCastFrostBlast(frostLevel: number) {\r\n        if (frostLevel == 0) {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFrostBlast(this.player.position, this.player.inverse, 0);\r\n                this.freezeAudio.play();\r\n                return animation;\r\n            };\r\n        } else if (frostLevel == 1) {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFrostBlast(this.player.position, this.player.inverse, 1);\r\n                this.freezeAudio.play();\r\n                return animation;\r\n            };\r\n        } else if (frostLevel == 2) {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFrostBlast(this.player.position, this.player.inverse, 2);\r\n                this.freezeAudio.play();\r\n                return animation;\r\n            };\r\n        } else {\r\n            return (animation: Animation) => {\r\n                this.particleHandler.createFrostBlast(this.player.position, this.player.inverse, 3);\r\n                this.freezeAudio.play();\r\n                return animation;\r\n            }\r\n        };\r\n    }\r\n\r\n    \r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/spellHandler.ts","import { Enemy } from './enemy';\r\nimport { Player } from './player';\r\nimport { Context } from '../context';\r\nimport { Vector, Rectangle, Tile, Meele, Animation, SpellType, DebugElement, ContinuousAudio } from '../model';\r\nimport { TextureMapper } from '../render/textureMapper';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { DebugHandler } from '../handler/debugHandler';\r\nimport { DeathType } from './deathType';\r\nimport { State } from './state';\r\n\r\nexport class Shadow extends Enemy {\r\n\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    protected hitAreaOffset: number = 50;\r\n    protected searchAreaOffset: number = 100;\r\n    protected hp = 300;\r\n    protected trackingSpeed = 0.2;\r\n    protected idleSpeed = 0;\r\n    protected minDistance = 30;\r\n\r\n    private spotted = false;\r\n\r\n    constructor(position: Vector, width: number, height: number, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler) {\r\n        super(position, width, height);\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n\r\n        this.idleAnimation = new Animation([118])\r\n\r\n        this.idleToTrackingAnimation = new Animation([119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132]);\r\n\r\n        this.idleToTrackingAnimation.repetitions = 13;\r\n        this.idleToTrackingAnimation.timeToChange = 50;\r\n\r\n        this.trackingToIdleTransitionAnimation = new Animation([132, 130, 127, 124, 119]);\r\n\r\n        this.trackingToIdleTransitionAnimation.repetitions = 4;\r\n\r\n        this.trackingAnimation = new Animation([133, 134, 135]);\r\n\r\n        this.hitAnimation = new Animation([136, 136, 137, 137, 138, 138]);\r\n\r\n        this.hitAnimation.timeToChange = 150;\r\n\r\n        this.currentAnimation = this.hitAnimation;\r\n\r\n        this.idleAnimation.timeToChange = 175;\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        super.update(delta, tiles, player);\r\n\r\n        this.currentAnimation.next(delta);\r\n\r\n        this.npcAction(delta, player, tiles);\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea: Rectangle;\r\n\r\n        if (this.currentState != State.Tracking && this.currentState != State.InHitRange) {\r\n            collisionArea = new Rectangle(this.position.x + this.width/2, this.position.y - 5 + this.height, 0, 0);\r\n        } else {\r\n            collisionArea = new Rectangle(this.position.x, this.position.y - 5, this.width, this.height);\r\n        }\r\n\r\n        return collisionArea;\r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType) {\r\n        super.takeDamage(damage, type);\r\n        if(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"shade15.wav\", 2, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        super.hit(delta, player, tiles);\r\n        if (this.hitAnimation.frameIndex == 2 && !this.hitting) {\r\n            this.hitting = true;\r\n            \r\n            let pos: Vector;\r\n            if(this.inverse) {\r\n                pos = new Vector(this.position.x + 30, this.position.y + 20);\r\n            } else {\r\n                pos = new Vector(this.position.x - 50, this.position.y + 20);\r\n            }\r\n            this.animationHandler.audioHandler.playSound(\"shade2.wav\", 1, 0, 0.1);\r\n            this.projectileHandler.createCollisionProjectile(pos, this.width, this.inverse, 60, new Vector(1, 0.8));\r\n        }\r\n\r\n        if (this.hitAnimation.frameIndex == 0) {\r\n            this.hitting = false;\r\n        }\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        super.idle(delta, player, tiles);\r\n        this.stop();\r\n        this.burnValue = 0;\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n        this.currentAnimation = this.idleToTrackingAnimation;\r\n        this.stop();\r\n\r\n        if(!this.spotted) {\r\n            this.animationHandler.audioHandler.playSound(\"shade9.wav\", 3, 0, 0.5);\r\n            this.spotted = true;\r\n        }\r\n\r\n        if (this.idleToTrackingAnimation.repetitions == 0) {\r\n            this.trackingTime = this.trackingMaxTime;\r\n            this.currentState = State.Tracking;\r\n            this.currentAnimation = this.trackingAnimation;\r\n            this.maxSpeed = this.trackingSpeed;\r\n            this.actualSpeed = this.maxSpeed;\r\n            this.idleToTrackingAnimation.reset();\r\n            this.idleToTrackingAnimation.repetitions = 13;\r\n        }\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n        this.currentState = State.InHitRange;\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n        this.currentAnimation = this.trackingToIdleTransitionAnimation;\r\n        this.stop();\r\n\r\n        if (this.trackingToIdleTransitionAnimation.repetitions == 0) {\r\n            this.currentState = State.Idle;\r\n            this.currentAnimation = this.idleAnimation;\r\n            this.maxSpeed = this.idleSpeed;\r\n            this.actualSpeed = this.maxSpeed;\r\n            this.trackingToIdleTransitionAnimation.reset();\r\n            this.trackingToIdleTransitionAnimation.repetitions = 4;\r\n        }\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n        let deltaPos: Vector;\r\n        if(this.inverse) {\r\n            deltaPos = this.getDeltaPosition(player, 0, 0);\r\n        } else {\r\n            deltaPos = this.getDeltaPosition(player, 50, 0);\r\n        }\r\n\r\n        let magnitude = deltaPos.magnitude();\r\n\r\n        if (magnitude < offset) {\r\n            if (this.clearShoot(deltaPos, tiles)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/shadow.ts","import { Enemy } from './enemy';\r\nimport { Player } from './player';\r\nimport { Context } from '../context';\r\nimport { Vector, Rectangle, Tile, Meele, Animation, SpellType, DebugElement, ProjectileType } from '../model';\r\nimport { TextureMapper } from '../render/textureMapper';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { DebugHandler } from '../handler/debugHandler';\r\nimport { DeathType } from './deathType';\r\nimport { State } from './state';\r\n\r\nexport class Apprentice extends Enemy {\r\n\r\n    protected hitAreaOffset: number = 500;\r\n    protected searchAreaOffset: number = 500;\r\n    protected hp = 50;\r\n    protected trackingSpeed = 0.05;\r\n    protected idleSpeed = 0.05;\r\n    protected minDistance = 30;\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    private projectileVelocity = 0.5;\r\n    private shoot = false;\r\n    private onBlackFireUpdate = (area: Rectangle, inverse: boolean, offsetX: number) => {\r\n         this.particleHandler.createNecroFireBall(new Vector(area.x, area.y), area.width, inverse, offsetX);\r\n    };\r\n\r\n    public debugHandler = DebugHandler.getInstance();\r\n\r\n    constructor(position: Vector, width: number, height: number, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler, private particleHandler: ParticleHandler) {\r\n        super(position, width, height);\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n\r\n        this.idleAnimation = new Animation([139, 140, 141, 142, 143]);\r\n        this.idleAnimation.timeToChange = 175;\r\n\r\n        this.trackingAnimation = new Animation([139, 140, 141, 142, 143]);\r\n\r\n        this.trackingAnimation.timeToChange = 175;\r\n\r\n        this.hitAnimation = new Animation([139, 140, 141, 142, 143]);\r\n\r\n        this.hitAnimation.timeToChange = 250;\r\n\r\n        this.currentAnimation = this.hitAnimation;\r\n\r\n\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        super.update(delta, tiles, player);\r\n\r\n        this.currentAnimation.next(delta);\r\n\r\n        this.npcAction(delta, player, tiles);\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea: Rectangle;\r\n\r\n        collisionArea = new Rectangle(this.position.x + 25, this.position.y + 15, this.width - 50, this.height - 20);\r\n\r\n        return collisionArea;\r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType) {\r\n        super.takeDamage(damage, type);\r\n        if(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"ogre2.wav\", 1, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        super.hit(delta, player, tiles);\r\n        if (this.hitAnimation.frameIndex == 3) {\r\n            if (!this.shoot) {\r\n                let velocity = this.getDeltaPosition(player, 0, 0);\r\n                velocity.y = velocity.y + 20; \r\n                velocity.normalize();\r\n                velocity.multiply(this.projectileVelocity);\r\n                let pos = new Vector(this.position.x, this.position.y);\r\n                this.projectileHandler.createNecroBall(pos, 40, this.inverse, velocity, 100, 40, ProjectileType.NecroBall, this.onBlackFireUpdate);\r\n                this.shoot = true;\r\n            }\r\n\r\n        } else {\r\n            this.shoot = false;\r\n        }\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        super.idle(delta, player, tiles);\r\n        this.actualSpeed = this.maxSpeed;\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n        this.currentState = State.Tracking;\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n        this.currentState = State.InHitRange;\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n        this.currentState = State.Idle;\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n        let deltaPos = this.getDeltaPosition(player, 10, 0);\r\n        let magnitude = deltaPos.magnitude();\r\n\r\n        if (magnitude < offset) {\r\n            if (this.clearShoot(deltaPos, tiles)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/apprentice.ts","import { Enemy } from './enemy';\r\nimport { Player } from './player';\r\nimport { Context } from '../context';\r\nimport { Vector, Rectangle, Tile, Meele, Animation, SpellType, DebugElement } from '../model';\r\nimport { TextureMapper } from '../render/textureMapper';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { DebugHandler } from '../handler/debugHandler';\r\nimport { DeathType } from './deathType';\r\nimport { State } from './state';\r\n\r\nexport class Screamer extends Enemy {\r\n\r\n    protected hitAreaOffset: number = 500;\r\n    protected searchAreaOffset: number = 500;\r\n    protected hp = 300;\r\n    protected hitDamage = 50;\r\n    protected trackingSpeed = 0.4;\r\n    protected idleSpeed = 0.1;\r\n    protected minDistance = 30;\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    private projectileVelocity = 0.5;\r\n    private onBlackFireUpdate = (area: Rectangle, inverse: boolean, offsetX: number) => {\r\n        this.particleHandler.createNecroFireBall(new Vector(area.x, area.y), area.width, inverse, offsetX);\r\n    };\r\n    private hitTimer: number = 0;\r\n    private chargeTimer: number = 1000;\r\n\r\n\r\n    public debugHandler = DebugHandler.getInstance();\r\n\r\n    constructor(position: Vector, width: number, height: number, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler, private particleHandler: ParticleHandler) {\r\n        super(position, width, height);\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n\r\n        this.acceleration = 0.1;\r\n\r\n        this.idleAnimation = new Animation([560, 561, 562, 563, 564, 565, 566, 567]);\r\n        this.idleAnimation.timeToChange = 175;\r\n\r\n        this.trackingAnimation = new Animation([568, 569, 570, 571, 572, 573, 574, 575]);\r\n\r\n        this.trackingAnimation.timeToChange = 175;\r\n\r\n        this.hitAnimation = new Animation([568, 569, 570, 571, 572, 573, 574, 575]);\r\n\r\n        this.hitAnimation.timeToChange = 250;\r\n\r\n        this.currentAnimation = this.hitAnimation;\r\n\r\n\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        super.update(delta, tiles, player);\r\n\r\n        this.currentAnimation.next(delta);\r\n\r\n        if(this.hitTimer > 0){\r\n            this.hitTimer -= delta;\r\n        }\r\n\r\n        this.npcAction(delta, player, tiles);\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea: Rectangle;\r\n\r\n        collisionArea = new Rectangle(this.position.x + 15, this.position.y, this.width - 30, this.height - 10);\r\n\r\n        return collisionArea;\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        super.hit(delta, player, tiles);\r\n        if (this.hitTimer <= 0) {\r\n            if (this.collisionDetection.aabbCheck(this.getCollisionArea(), player.getCollisionArea())) {\r\n                this.hitTimer = 500;\r\n                this.chargeTimer = 1000;\r\n                this.currentState = State.Idle;\r\n                player.takeDamage(this.hitDamage);\r\n                if (player.position.x < this.position.x) {\r\n                    player.hardHit(false, 0.8);\r\n                } else {\r\n                    player.hardHit(true, 0.8);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        super.idle(delta, player, tiles);\r\n        this.actualSpeed = this.maxSpeed;\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n        this.currentAnimation = this.trackingAnimation;\r\n\r\n        if (this.chargeTimer > 0) {\r\n            this.chargeTimer -= delta;\r\n        } else {\r\n            this.currentState = State.Tracking;\r\n            this.animationHandler.audioHandler.playSound(\"soundseffects.ogg\", 2, 0.5, 0.8);\r\n        }\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n        this.currentState = State.InHitRange;\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n        this.currentState = State.Idle;\r\n    }\r\n\r\n    protected track(player: Player, delta: number, tiles: Tile[]) {\r\n        super.track(player, delta, tiles, 30);\r\n        this.setFreezeSpeed();\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n        let deltaPos = this.getDeltaPosition(player, 10, 0);\r\n        let magnitude = deltaPos.magnitude();\r\n\r\n        if (magnitude < offset) {\r\n            if (this.clearShoot(deltaPos, tiles)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    protected moveToPlayer(delta: number, player: Player, tiles: Tile[], gapSize: number) {\r\n        let positionMiddle = this.position.x + (this.width / 2);\r\n        if (Math.abs(player.middlePosition.x - positionMiddle) > gapSize) {\r\n            if (player.middlePosition.x < positionMiddle) {\r\n                this.moveLeft(delta);\r\n            } else if (player.middlePosition.x > positionMiddle) {\r\n                this.moveRight(delta);\r\n            }\r\n        } else {\r\n            this.currentState = State.Idle;\r\n            this.chargeTimer = 1000;\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/screamer.ts","import { Enemy } from './enemy';\r\nimport { Player } from './player';\r\nimport { Context } from '../context';\r\nimport { Vector, Rectangle, Tile, Meele, Animation, SpellType, DebugElement, ProjectileType } from '../model';\r\nimport { TextureMapper } from '../render/textureMapper';\r\nimport { AnimationHandler } from '../handler/animationHandler';\r\nimport { ProjectileHandler } from '../handler/projectileHandler';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { DebugHandler } from '../handler/debugHandler';\r\nimport { DeathType } from './deathType';\r\nimport { State } from './state';\r\n\r\nexport class MasterSorcerer extends Enemy {\r\n\r\n    protected hitAreaOffset: number = 400;\r\n    protected searchAreaOffset: number = 800;\r\n    protected hp = 500;\r\n    protected trackingSpeed = 0.1;\r\n    protected idleSpeed = 0.1;\r\n    protected minDistance = 30;\r\n    private channelAnimation: Animation;\r\n    private channelHitTransitionAnimation: Animation;\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    private projectileVelocity = 0.5;\r\n    private shoot = false;\r\n    private onBlackFireUpdate = (area: Rectangle, inverse: boolean, offsetX: number) => {\r\n        this.particleHandler.createNecroFireBall(new Vector(area.x, area.y), area.width, inverse, offsetX);\r\n    };\r\n    private defaultChannelTime = 1500;\r\n    private shootDefaultCooldown = 100;\r\n    private shootCooldown = this.shootDefaultCooldown;\r\n    private channelTimer = this.defaultChannelTime;\r\n    private shootsFired = 0;\r\n    private maxShoots = 10;\r\n\r\n    public debugHandler = DebugHandler.getInstance();\r\n\r\n    constructor(position: Vector, width: number, height: number, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler, private particleHandler: ParticleHandler) {\r\n        super(position, width, height);\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n\r\n        this.idleAnimation = new Animation([580, 581, 582, 583, 584, 585]);\r\n        this.idleAnimation.timeToChange = 175;\r\n\r\n        this.trackingAnimation = new Animation([580, 581, 582, 583, 584, 585]);\r\n\r\n        this.trackingAnimation.timeToChange = 175;\r\n\r\n        this.channelHitTransitionAnimation = new Animation([585, 597, 598]);\r\n\r\n        this.channelHitTransitionAnimation.timeToChange = 150;\r\n\r\n        this.hitAnimation = new Animation([598]);\r\n\r\n        this.hitAnimation.timeToChange = 150;\r\n\r\n        this.channelAnimation = new Animation([585]);\r\n\r\n        this.currentAnimation = this.hitAnimation;\r\n\r\n\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        super.update(delta, tiles, player);\r\n\r\n        this.currentAnimation.next(delta);\r\n\r\n        this.npcAction(delta, player, tiles);\r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType) {\r\n        super.takeDamage(damage, type);\r\n        if(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"mnstr3.wav\", 2, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n    }\r\n\r\n    public getCollisionArea() {\r\n        let collisionArea: Rectangle;\r\n\r\n        collisionArea = new Rectangle(this.position.x + 25, this.position.y + 35, this.width - 50, this.height - 40);\r\n\r\n        return collisionArea;\r\n    }\r\n\r\n    protected track(player: Player, delta: number, tiles: Tile[], gapSize: number) {\r\n        super.track(player, delta, tiles, gapSize);\r\n        this.setFreezeSpeed();\r\n    }\r\n\r\n    protected hit(delta: number, player: Player, tiles: Tile[]) {\r\n        if (!this.inRange(player, this.hitAreaOffset, tiles) && this.hitAnimation.frameIndex == 0) {\r\n            this.currentState = State.Tracking;\r\n        }\r\n\r\n        this.moveToPlayer(delta, player, tiles, 10);\r\n        this.actualSpeed = 0;\r\n\r\n        if (this.channel(delta)) {\r\n            this.currentAnimation = this.channelAnimation;\r\n            this.particleHandler.createNecroChannelMagic(this.position, this.inverse, 101, 10, 27, 10);\r\n        } else if (this.channelHitTransitionAnimation.frameIndex != 2) {\r\n            this.currentAnimation = this.channelHitTransitionAnimation;\r\n        } else {\r\n            this.currentAnimation = this.hitAnimation;\r\n\r\n            if (this.shootCooldown <= 0) {\r\n                if (this.shootsFired < this.maxShoots) {\r\n                    this.shootsFired++;\r\n                    let velocity = this.getDeltaPosition(player, 0, this.rand(0, 50));\r\n                    velocity.y = velocity.y + 20;\r\n                    velocity.normalize();\r\n                    velocity.multiply(this.projectileVelocity);\r\n                    let pos: Vector\r\n                    if(this.inverse) {\r\n                        pos = new Vector(this.position.x - 18, this.position.y + 20);\r\n                    } else {\r\n                        pos = new Vector(this.position.x + 80, this.position.y + 20);\r\n                    }\r\n                    \r\n                    this.projectileHandler.createNecroBall(pos, 25, this.inverse, velocity, 10, 40, ProjectileType.NecroBall, this.onBlackFireUpdate);\r\n                } else {\r\n                    this.shootsFired = 0;\r\n                    this.channelTimer = this.defaultChannelTime;\r\n                    this.channelHitTransitionAnimation.reset();\r\n                }\r\n\r\n                this.shootCooldown = this.shootDefaultCooldown;\r\n            } else {\r\n                this.shootCooldown -= delta;\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n    protected idle(delta: number, player: Player, tiles: Tile[]) {\r\n        super.idle(delta, player, tiles);\r\n        this.actualSpeed = this.maxSpeed;\r\n        this.patrol(delta);\r\n    }\r\n\r\n    protected idleToTrackingTransition(delta: number) {\r\n        this.currentState = State.Tracking;\r\n    }\r\n\r\n    protected trackingToInRangeTransition(delta: number) {\r\n        this.currentState = State.InHitRange;\r\n    }\r\n\r\n    protected trackingToIdleTransition(delta: number) {\r\n        this.currentState = State.Idle;\r\n    }\r\n\r\n    protected inRange(player: Player, offset: number, tiles: Tile[]) {\r\n\r\n        let deltaPos = this.getDeltaPosition(player, 10, 0);\r\n        let magnitude = deltaPos.magnitude();\r\n\r\n        if (magnitude < offset) {\r\n            if (this.clearShoot(deltaPos, tiles)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    private channel(delta: number) {\r\n\r\n        this.channelTimer -= delta;\r\n\r\n        if (this.channelTimer <= 0) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/masterSorcerer.ts","export enum ShapeShifterState {\r\n    Idle,\r\n    Phase1,\r\n    Phase1To2,\r\n    Phase2,\r\n    Phase2To3,\r\n    Phase3\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/shapeShifterState.ts","import { RenderCall, RenderHelper } from \"../render/\";\r\nimport { Animation, SpellType, Vector, Rectangle, Tile, ProjectileType } from \"../model\";\r\nimport { IEnemy, Character, Player, ShapeShifterState } from \"./index\";\r\nimport { DeathType } from \"./deathType\";\r\nimport { ProjectileHandler } from \"../handler/projectileHandler\";\r\nimport { AnimationHandler } from \"../handler/animationHandler\";\r\nimport { ParticleHandler } from \"../handler/particleHandler\";\r\nimport { DebugHandler } from \"../handler/debugHandler\";\r\nimport { CollisionData } from \"../collision\";\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { Game } from \"../game\";\r\n\r\nexport class ShapeShifter extends Character implements IEnemy {\r\n    public toMove: Vector;\r\n    public dead: boolean;\r\n    public burnValue: number = 0;\r\n    public currentAnimation: Animation;\r\n    public deathType: DeathType;\r\n    public inverse: boolean;\r\n    public color = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n    public collisionData: CollisionData;\r\n    protected velocity: Vector;\r\n    protected gravityStrength: number = 0;\r\n    protected damageAudioTimerValue = 500;\r\n    protected damageAudioTimer = 0;\r\n    private currentState = ShapeShifterState.Idle;\r\n    private collisionArea: Rectangle;\r\n    private hp: number = 1500;\r\n    private sorcererAnimation: Animation;\r\n    private sorcererAnimationP2: Animation;\r\n    private sorcererAnimationP3: Animation;\r\n    private moveTimer = 0;\r\n    private up = true;\r\n    private ammunition = 10;\r\n    private elevated = false;\r\n    private leveledYCorrds: number;\r\n    private leveled = false;\r\n    private elevateTime = 0;\r\n    private projectileVelocity = 0.5;\r\n    private p1FireCd = 1000;\r\n    private p2FireCd = 2000;\r\n    private p3FireCd = 1000;\r\n    private p2BurstCd = 70;\r\n    private fireSingle = false;\r\n    private p2BeamCd = 300;\r\n    private p2Beam2Cd = 1500;\r\n    private burstTimer = 0;\r\n    private burstTimer2 = 0;\r\n    private fireCdTimer = 0;\r\n    private patrolTimer = 0;\r\n    private patrolMax = 5000;\r\n    private direction = true;\r\n    private currentSpell = 0;\r\n    private freezeDamage: number = 0.08;\r\n    private burnDamage = 0.2;\r\n    private cinderValue = 0;\r\n    private burnDurationFactor = 1;\r\n    private flameDamage: number = 0.12;\r\n    private magicChannelAudio = this.animationHandler.audioHandler.createContinuos(\"fireloop.ogg\", 1, 0, 0.01);\r\n\r\n    private renderHalper = RenderHelper.getInstance();\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n\r\n    private onBlackFireUpdate = (area: Rectangle, inverse: boolean, offsetX: number) => {\r\n        this.particleHandler.createBlueFireBall(new Vector(area.x, area.y), area.width, inverse, offsetX);\r\n    };\r\n\r\n    private onNecroUpdate = (area: Rectangle, inverse: boolean, offsetX: number) => {\r\n        this.particleHandler.createNecroFireBall(new Vector(area.x, area.y), area.width, inverse, offsetX);\r\n    };\r\n\r\n    constructor(public position: Vector, public width: number, public height: number, private projectileHandler: ProjectileHandler, private animationHandler: AnimationHandler, private particleHandler: ParticleHandler, private game: Game) {\r\n        super(position, width, height);\r\n        this.sorcererAnimation = new Animation([600, 601, 602, 603, 604, 605, 606, 607]);\r\n        this.sorcererAnimationP2 = new Animation([608, 609, 610, 611, 612, 613, 614, 615]);\r\n        this.sorcererAnimationP3 = new Animation([616, 617, 618, 619, 620, 621, 622, 623]);\r\n        this.currentAnimation = this.sorcererAnimation;\r\n        this.collisionArea = new Rectangle(0, 0, this.width - 64, this.height - 40);\r\n        this.velocity = new Vector(0, 0);\r\n        this.toMove = new Vector(0, 0);\r\n    }\r\n\r\n    public getCollisionArea(): Rectangle {\r\n        return this.collisionArea;\r\n    }\r\n\r\n    public takeDamage(damage: number, type: SpellType): void {\r\n        this.hp = this.hp - damage;\r\n        if (this.hp <= 0) {\r\n            if (type == SpellType.frostBlast) {\r\n                this.deathType = DeathType.freezeDeath;\r\n            } else if (type == SpellType.fireBlast) {\r\n                this.deathType = DeathType.fireDeath;\r\n            } else {\r\n                this.deathType = DeathType.swordDeath;\r\n            }\r\n\r\n            this.dead = true;\r\n            this.game.levelCompleted = true;\r\n        }\r\n\r\n        if (this.hp < 1000 && this.currentState == ShapeShifterState.Phase1) {\r\n            this.animationHandler.audioHandler.playSound(\"shade12.wav\", 2, 0, 0.1);\r\n            this.currentState = ShapeShifterState.Phase1To2;\r\n        } else if (this.hp < 500 && this.currentState == ShapeShifterState.Phase2) {\r\n            this.animationHandler.audioHandler.playSound(\"shade12.wav\", 2, 0, 0.1);\r\n            this.currentState = ShapeShifterState.Phase2To3;\r\n        }\r\n\r\n        if(this.damageAudioTimer <= 0) {\r\n            this.animationHandler.audioHandler.playSound(\"shade11.wav\", 2, 0, 0.1);\r\n            this.damageAudioTimer = this.damageAudioTimerValue;\r\n        }\r\n    }\r\n\r\n    public freeze(): void {\r\n        this.takeDamage(this.freezeDamage, SpellType.frostBlast);\r\n    }\r\n\r\n    public burn() {\r\n        this.cinderValue += this.burnDurationFactor;\r\n        this.takeDamage(this.flameDamage, SpellType.fireBlast);\r\n\r\n        if (this.cinderValue > 300) {\r\n            this.burnValue += this.burnDurationFactor;\r\n        }\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        this.currentAnimation.next(delta);\r\n        this.toMove.x = this.velocity.x * delta;\r\n        this.toMove.y = this.velocity.y * delta;\r\n        this.collisionArea.x = this.position.x + 32;\r\n        this.collisionArea.y = this.position.y + 40;\r\n\r\n        this.collisionData = this.collisionDetection.collisionDetection(tiles, [], this, this.toMove, delta);\r\n\r\n        switch (this.currentState) {\r\n\r\n            case ShapeShifterState.Idle: this.idle(delta, player);\r\n                break;\r\n\r\n            case ShapeShifterState.Phase1: this.phase1(delta, player);\r\n                break;\r\n\r\n            case ShapeShifterState.Phase1To2: this.phase1To2();\r\n                break;\r\n\r\n            case ShapeShifterState.Phase2: this.phase2(delta, player);\r\n                break;\r\n\r\n            case ShapeShifterState.Phase2To3: this.phase2To3();\r\n                break;\r\n\r\n            case ShapeShifterState.Phase3: this.phase3(delta, player);\r\n                break;\r\n        }\r\n\r\n        this.updateBurnDamage();\r\n\r\n        if(this.damageAudioTimer > 0) {\r\n            this.damageAudioTimer -= delta;\r\n        }\r\n    }\r\n\r\n    public createRenderCall(rendercall: RenderCall) {\r\n\r\n    }\r\n\r\n    public fall(delta: number) {\r\n    }\r\n\r\n    private updateBurnDamage() {\r\n        if (this.burnValue > 0) {\r\n            this.takeDamage(this.burnDamage, SpellType.fireBlast);\r\n            this.burnValue--;\r\n        }\r\n    }\r\n\r\n    private idle(delta: number, player: Player) {\r\n        this.move(delta, 500, 0.0005, 0.01);\r\n\r\n        if (Math.abs(this.position.x - player.position.x) < 400) {\r\n            this.currentState = ShapeShifterState.Phase1;\r\n        }\r\n    }\r\n\r\n    private phase1(delta: number, player: Player) {\r\n        this.turnToPlayer(player);\r\n\r\n        if (!this.elevated) {\r\n            this.velocity.y = -0.2;\r\n            this.elevateTime += delta;\r\n\r\n            if (this.elevateTime > 700) {\r\n                this.leveledYCorrds = this.position.y;\r\n                this.elevated = true;\r\n                this.elevateTime = 0;\r\n                this.velocity.y = 0;\r\n            } else {\r\n\r\n            }\r\n        } else {\r\n            this.move(delta, 500, 0.0005, 0.1);\r\n            this.patrol(delta);\r\n            this.fireCdTimer += delta;\r\n            if (this.fireCdTimer > this.p1FireCd) {\r\n                this.p1Fire(player);\r\n                this.fireCdTimer = 0;\r\n            } else {\r\n                this.magicChannelAudio.play();\r\n                this.particleHandler.createBlueChannelMagic(this.position, this.inverse, 105, 75, 20, 75);\r\n            }\r\n        }\r\n    }\r\n\r\n    private phase1To2() {\r\n        this.currentAnimation = this.sorcererAnimationP2;\r\n\r\n        this.currentState = ShapeShifterState.Phase2;\r\n    }\r\n\r\n    private phase2To3() {\r\n        this.currentAnimation = this.sorcererAnimationP3;\r\n        this.currentState = ShapeShifterState.Phase3;\r\n    }\r\n\r\n    private phase3(delta: number, player: Player) {\r\n        this.velocity.x = 0;\r\n        this.turnToPlayer(player);\r\n\r\n        if (!this.leveled) {\r\n            this.velocity.y = 0;\r\n            if (this.position.y < this.leveledYCorrds) {\r\n                this.velocity.y = 0.2;\r\n            } else {\r\n                this.velocity.y = -0.2;\r\n            }\r\n\r\n            if (this.position.y < this.leveledYCorrds && (this.position.y + 5) > this.leveledYCorrds) {\r\n                this.leveled = true;\r\n                this.moveReset();\r\n                this.velocity.y = 0.1;\r\n            }\r\n        } else {\r\n            this.patrol(delta);\r\n            this.move(delta, 1500, 0.003, 0.1);\r\n        }\r\n\r\n        this.fireMixedP3(delta, player);\r\n    }\r\n\r\n    private phase2(delta: number, player: Player) {\r\n        this.velocity.x = 0;\r\n        this.turnToPlayer(player);\r\n        this.move(delta, 500, 0.0005, 0.05);\r\n        this.fireMixed(delta, player);\r\n    }\r\n\r\n    private fireMixedP3(delta: number, player: Player) {\r\n        this.fireCdTimer += delta;\r\n        this.burstTimer += delta;\r\n        this.burstTimer2 += delta;\r\n\r\n        if (this.fireCdTimer > this.p3FireCd) {\r\n            this.currentSpell = Math.floor(this.rand(0, 3.99));\r\n            this.fireCdTimer = 0;\r\n            this.burstTimer = 0;\r\n            this.burstTimer2 = 0;\r\n            this.fireSingle = false;\r\n        }\r\n\r\n        switch (this.currentSpell) {\r\n            case 0: this.hail(player, 140, 15, 5, 15);\r\n                break;\r\n\r\n            case 1: this.beam(player, 130, 35, 0, 35);\r\n                break;\r\n\r\n            case 2: this.necroBall(player, 50, 0, 65, 0);\r\n                break;\r\n\r\n            case 3: this.hail2(player, 65, 35, 80, 35);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private fireMixed(delta: number, player: Player) {\r\n        this.fireCdTimer += delta;\r\n        this.burstTimer += delta;\r\n        this.burstTimer2 += delta;\r\n\r\n        if (this.fireCdTimer > this.p2FireCd) {\r\n            this.currentSpell = Math.floor(this.rand(0, 3.99));\r\n            this.fireCdTimer = 0;\r\n            this.burstTimer = 0;\r\n            this.burstTimer2 = 0;\r\n            this.fireSingle = false;\r\n        }\r\n\r\n        switch (this.currentSpell) {\r\n            case 0: this.hail(player, 150, 30, 10, 30);\r\n                break;\r\n\r\n            case 1: this.beam(player, 140, 70, 0, 70);\r\n                break;\r\n\r\n            case 2: this.necroBall(player, 40, 20, 70, 20);\r\n                break;\r\n\r\n            case 3: this.hail2(player, 30, 50, 110, 50);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private necroBall(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        if (!this.fireSingle) {\r\n            this.fireSingle = true;\r\n            this.p2FireBall(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n        };\r\n    }\r\n\r\n    private p2FireBall(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        let velocity = this.getProjectileVelocity(player, 50, 70);\r\n        let pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\r\n        this.projectileHandler.createNecroBall(pos, 50, this.inverse, velocity, 100, -40, ProjectileType.NecroBall, this.onNecroUpdate);\r\n    }\r\n\r\n    private hail2(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        if (this.burstTimer < this.p2BurstCd) {\r\n            this.p2Fire2(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n        };\r\n    }\r\n\r\n    private hail(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        if (this.burstTimer < this.p2BurstCd) {\r\n            this.p2Fire(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n        };\r\n    }\r\n\r\n    private p2FireBeam(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        let velocity = this.getProjectileVelocity(player, 50, 120);\r\n        let pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\r\n        this.projectileHandler.createNecroBall(pos, 30, this.inverse, velocity, 25, -40, ProjectileType.BlueBall, this.onBlackFireUpdate);\r\n    }\r\n\r\n    private p2Fire(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        let velocity = this.getProjectileVelocity(player, 0, 100);\r\n        let pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\r\n        this.projectileHandler.createNecroBall(pos, 10, this.inverse, velocity, 10, -40, ProjectileType.BlueBall, this.onBlackFireUpdate);\r\n    }\r\n\r\n    private p2Fire2(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        let velocity = this.getProjectileVelocity(player, 0, 100);\r\n        let pos = this.getPos(offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n\r\n        this.projectileHandler.createNecroBall(pos, 20, this.inverse, velocity, 15, -40, ProjectileType.NecroBall, this.onNecroUpdate);\r\n    }\r\n\r\n    private beam(player: Player, offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        if (this.burstTimer > this.p2BeamCd) {\r\n            this.burstTimer = 0;\r\n            this.p2FireBeam(player, offsetX, offsetY, inverseOffsetX, inverseOffsetY);\r\n        };\r\n    }\r\n\r\n    private patrol(delta: number) {\r\n        this.patrolTimer += delta;\r\n        if (this.patrolTimer > this.patrolMax) {\r\n            this.direction = !this.direction;\r\n            this.patrolTimer = 0;\r\n        }\r\n\r\n        if (this.direction) {\r\n            this.velocity.x = 0.1;\r\n        } else {\r\n            this.velocity.x = -0.1;\r\n        }\r\n    }\r\n\r\n    private getProjectileVelocity(player: Player, startSpread: number, endSpread: number) {\r\n        let velocity = this.getDeltaPosition(player, 0, this.rand(startSpread, endSpread));\r\n        velocity.y = velocity.y + 20;\r\n        velocity.normalize();\r\n        velocity.multiply(this.projectileVelocity);\r\n\r\n        return velocity;\r\n    }\r\n\r\n    private getPos(offsetX: number, offsetY: number, inverseOffsetX: number, inverseOffsetY: number) {\r\n        let pos: Vector\r\n        if (this.inverse) {\r\n            pos = new Vector(this.position.x + inverseOffsetX, this.position.y + inverseOffsetY);\r\n        } else {\r\n            pos = new Vector(this.position.x + offsetX, this.position.y + offsetY);\r\n        }\r\n\r\n        return pos;\r\n    }\r\n\r\n    private p1Fire(player: Player) {\r\n\r\n        let velocity = this.getProjectileVelocity(player, 0, 100);\r\n        let pos = this.getPos(120, 40, -10, 40);\r\n\r\n        this.projectileHandler.createNecroBall(pos, 60, this.inverse, velocity, 50, -40, ProjectileType.BlueBall, this.onBlackFireUpdate);\r\n    }\r\n\r\n    private rand(min: number, max: number) {\r\n        return min + (Math.random() * (max - min))\r\n    }\r\n\r\n    private turnToPlayer(player: Player) {\r\n        let deltaX = this.position.x - player.position.x;\r\n\r\n        if (deltaX > 0) {\r\n            this.inverse = true;\r\n        } else {\r\n            this.inverse = false;\r\n        }\r\n    }\r\n\r\n    private moveReset() {\r\n        this.moveTimer = 0;\r\n        this.up = true;\r\n    }\r\n\r\n    private move(delta: number, amount: number, aceleration: number, smother: number) {\r\n\r\n        this.moveTimer += delta;\r\n        if (this.moveTimer > amount) {\r\n            this.moveTimer = 0;\r\n            if (this.up) {\r\n                this.velocity.y = -smother;\r\n            } else {\r\n                this.velocity.y = smother;\r\n            }\r\n            this.up = !this.up;\r\n        }\r\n\r\n        if (this.up) {\r\n            this.velocity.y -= aceleration;\r\n        } else {\r\n            this.velocity.y += aceleration;\r\n        }\r\n    }\r\n\r\n    protected getDeltaPosition(player: Player, offsetX: number, offsetY: number) {\r\n        if (this.inverse) {\r\n            return new Vector(player.middlePosition.x - offsetX - this.position.x, player.middlePosition.y - offsetY - this.position.y);\r\n        } else {\r\n            return new Vector(player.middlePosition.x - offsetX - (this.position.x + this.width), player.middlePosition.y - offsetY - this.position.y);\r\n        }\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/character/shapeshifter.ts","import { Context, TileMap } from './';\r\nimport { RenderCall, ParticleRenderer, DynamicRenderCall, ColorRenderCall, ColorRenderer, Renderer } from './render';\r\nimport { Player } from './character/player';\r\nimport { Enemy } from './character/enemy';\r\nimport { Swordman } from './character/swordman';\r\nimport { Vector, Rectangle, Asset, SpellType, Level, Tile, Animation, DynamicTile, AudioAsset } from './model';\r\nimport { CollisionDetection } from './collision/collisionDetection';\r\nimport { Gravity } from './forces/gravity';\r\nimport { TextRenderer } from './text/textRenderer';\r\nimport { Observable } from 'rxjs';\r\nimport { AnimationHandler } from './handler/animationHandler';\r\nimport { ProjectileHandler } from './handler/projectileHandler';\r\nimport { DynamicTileHandler } from './handler/dynamicTileHandler';\r\nimport { ParticleHandler } from './handler/particleHandler';\r\nimport { SimpleParticleRenderer } from './render/simpleParticleRenderer';\r\nimport { SimpleParticleRenderCall } from './render/simpleParticleRenderCall';\r\nimport { DebugHandler } from './handler/debugHandler';\r\nimport { EnemyHandler } from './handler/enemyHandler';\r\nimport { LevelData, EnemyType } from './map/model';\r\nimport { Camera } from './camera';\r\nimport { Archer, Shadow, Apprentice } from './character';\r\nimport { DynamicRenderer } from './render/dynamicRenderer';\r\nimport { UI } from './UI/ui';\r\nimport { SceneHandler } from './UI/sceneHandler';\r\nimport { LoadHelper } from './service/loadHelper';\r\nimport { LocalStorageHelper } from './service/localStorageHelper';\r\nimport { SceneIndex } from './UI/sceneIndex';\r\nimport { Screamer } from \"./character/screamer\";\r\nimport { AudioHandler } from \"./handler/audioHandler\";\r\n\r\nexport class Game {\r\n\tpublic canvasWidth = 1200;\r\n\tpublic canvasHeight = 800;\r\n\tpublic context: Context;\r\n\tpublic levelCompleted = false;\r\n\r\n\tprivate fps = 60;\r\n\tprivate tileMap: TileMap;\r\n\tprivate renderer: Renderer;\r\n\tprivate colorRenderer: ColorRenderer;\r\n\tprivate simpleParticleRenderer: SimpleParticleRenderer;\r\n\tprivate dynamicRenderer: DynamicRenderer;\r\n\tprivate collision: CollisionDetection = CollisionDetection.getInstance();\r\n\tprivate loadHelper = LoadHelper.getInstance();\r\n\tprivate player: Player;\r\n\tprivate leftKeyPress: boolean;\r\n\tprivate rightKeyPress: boolean;\r\n\tprivate jumpKeyPress: boolean;\r\n\tprivate fireballKeyPress: boolean;\r\n\tprivate channelMagicKeyPress: boolean;\r\n\tprivate frostKeyPress: boolean;\r\n\tprivate fireKeyPress: boolean;\r\n\tprivate shieldPress: boolean;\r\n\tprivate lastUpdate: number;\r\n\tprivate textRenderer: TextRenderer;\r\n\tprivate intevalTimer: any;\r\n\tprivate gameArea = new Rectangle(-50, -50, this.canvasWidth + 100, this.canvasHeight + 100);\r\n\tprivate startElement: HTMLElement;\r\n\tprivate restartElement: HTMLElement;\r\n\tprivate level: Level = new Level();\r\n\tprivate levelData: LevelData;\r\n\tprivate animationHandler: AnimationHandler;\r\n\tprivate projectileHandler: ProjectileHandler;\r\n\tprivate dynamicTileHandler: DynamicTileHandler;\r\n\tprivate UI: UI;\r\n\tprivate enemyHandler: EnemyHandler;\r\n\tprivate particleHandler: ParticleHandler;\r\n\tprivate debugHandler = DebugHandler.getInstance();\r\n\tprivate camera: Camera;\r\n\tprivate deathTimer = 0;\r\n\tprivate levelCompletedTimer = 3000;\r\n\tprivate renderCalls: Map<number, RenderCall> = new Map<number, RenderCall>();\r\n\tprivate sceneHandler: SceneHandler;\r\n\tprivate collisionAreaEnd: Rectangle;\r\n\tprivate audioHandler: AudioHandler;\r\n\r\n\r\n\tconstructor(private asset: Asset, audioAsset: AudioAsset, canvas: HTMLCanvasElement, level: LevelData) {\r\n\r\n\t\tthis.context = new Context(asset, this.canvasWidth, this.canvasHeight, canvas);\r\n\t\tthis.renderer = new Renderer(this.context);\r\n\t\tthis.sceneHandler = new SceneHandler(this.renderer, [this.canvasWidth, this.canvasHeight], canvas, this);\r\n\t\tthis.colorRenderer = new ColorRenderer(this.context);\r\n\t\tthis.simpleParticleRenderer = new SimpleParticleRenderer(this.context);\r\n\t\tthis.dynamicRenderer = new DynamicRenderer(this.context);\r\n\t\tthis.audioHandler = new AudioHandler(audioAsset);\r\n\t\tthis.levelData = level;\r\n\r\n\t\tthis.initKeyBindings();\r\n\t\tthis.reset(this.levelData);\r\n\t\tthis.initLoop();\r\n\t}\r\n\r\n\tpublic reset(levelData: LevelData) {\r\n\t\tthis.loadLevel(levelData);\r\n\t}\r\n\r\n\tprivate initLoop() {\r\n\t\tthis.intevalTimer = setInterval(this.run(), 0);\r\n\t}\r\n\r\n\tprivate run() {\r\n\t\tthis.lastUpdate = (new Date).getTime();\r\n\t\tlet loops = 0, skipTicks = 1000 / this.fps,\r\n\t\t\tmaxFrameSkip = 3,\r\n\t\t\tnextGameTick = (new Date).getTime();\r\n\r\n\t\treturn () => {\r\n\t\t\tloops = 0;\r\n\r\n\t\t\twhile ((new Date).getTime() > nextGameTick && loops < maxFrameSkip) {\r\n\t\t\t\tlet delta = nextGameTick - this.lastUpdate;\r\n\t\t\t\tthis.lastUpdate = nextGameTick;\r\n\t\t\t\t//this.debugHandler.debugRects = [];\r\n\r\n\t\t\t\tif (this.sceneHandler.started) {\r\n\t\t\t\t\tif (!this.player.dead && !this.levelCompleted) {\r\n\t\t\t\t\t\tthis.checkGoal();\r\n\t\t\t\t\t\tthis.checkKeys(delta);\r\n\t\t\t\t\t\tthis.audioHandler.update(delta);\r\n\t\t\t\t\t\tthis.collision.checkCoutOfBounds(this.player, this.level.gameSize);\r\n\t\t\t\t\t\tthis.player.update(this.level.tiles, this.dynamicTileHandler.dynamicTiles, delta);\r\n\t\t\t\t\t\tthis.dynamicTileHandler.update(this.player, delta);\r\n\t\t\t\t\t\tthis.enemyHandler.update(delta, this.level.tiles, this.player);\r\n\t\t\t\t\t\tthis.animationHandler.update(delta);\r\n\t\t\t\t\t\tthis.projectileHandler.update(delta, this.level.tiles, this.player, this.dynamicTileHandler.dynamicTiles);\r\n\t\t\t\t\t\tthis.UI.update(this.player.hp, this.player.mana);\r\n\t\t\t\t\t\tthis.camera.update(this.player.position);\r\n\t\t\t\t\t\tthis.particleHandler.update(delta, this.enemyHandler.enemies);\r\n\t\t\t\t\t} else if(this.levelCompleted) {\r\n\t\t\t\t\t\tthis.audioHandler.reset();\r\n\t\t\t\t\t\tthis.levelCompletedTimer -= delta;\r\n\t\t\t\t\t\tthis.enemyHandler.update(delta, this.level.tiles, this.player);\r\n\t\t\t\t\t\tthis.animationHandler.update(delta);\r\n\t\t\t\t\t\tthis.projectileHandler.update(delta, this.level.tiles, this.player, this.dynamicTileHandler.dynamicTiles);\r\n\t\t\t\t\t\tthis.particleHandler.update(delta, this.enemyHandler.enemies);\r\n\t\t\t\t\t\tif (this.levelCompletedTimer < 0) {\r\n\t\t\t\t\t\t\tthis.audioHandler.reset();\r\n\t\t\t\t\t\t\tthis.sceneHandler.levelCompleted(this.level.name);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.deathTimer < 3000) {\r\n\t\t\t\t\t\tthis.deathTimer += delta;\r\n\t\t\t\t\t\tthis.player.position.x = -1000;\r\n\t\t\t\t\t\tthis.player.position.y = -1000;\r\n\t\t\t\t\t\tthis.enemyHandler.update(delta, this.level.tiles, this.player);\r\n\t\t\t\t\t\tthis.animationHandler.update(delta);\r\n\t\t\t\t\t\tthis.projectileHandler.update(delta, this.level.tiles, this.player, this.dynamicTileHandler.dynamicTiles);\r\n\t\t\t\t\t\tthis.particleHandler.update(delta, this.enemyHandler.enemies);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.audioHandler.reset();\r\n\t\t\t\t\t\tthis.sceneHandler.started = false;\r\n\t\t\t\t\t\tthis.sceneHandler.setCurrentLevel(this.level.name);\r\n\t\t\t\t\t\tthis.sceneHandler.currentScene = SceneIndex.RestartMenu;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sceneHandler.update();\r\n\t\t\t\t\tthis.sceneHandler.render();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnextGameTick += skipTicks;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tprivate render() {\r\n\t\tthis.context.clear([0, 0, 0, 0.95]);\r\n\t\tlet dynamicRenderCall = new DynamicRenderCall();\r\n\t\tlet renderCall = new RenderCall();\r\n\t\tthis.renderCalls.clear();\r\n\t\tlet colorRenderCall = new ColorRenderCall();\r\n\t\tlet colorRenderCalls: ColorRenderCall[] = [];\r\n\r\n\t\tlet simpleRenderCalls: SimpleParticleRenderCall[] = [];\r\n\r\n\t\t//GAME\r\n\t\tthis.enemyHandler.createRenderCall(colorRenderCall);\r\n\t\tthis.tileMap.createGoalRenderCall(this.level.end, renderCall);\r\n\r\n\t\tif (this.player.dead) {\r\n\t\t\tthis.textRenderer.createTextRenderCall(400, 64, 50, renderCall, this.camera.position);\r\n\r\n\t\t\tfor (let stickyAnimation of this.player.damageAnimations) {\r\n\t\t\t\tthis.animationHandler.remove(stickyAnimation.animation);\r\n\t\t\t}\r\n\t\t\tthis.player.damageAnimations = [];\r\n\t\t} else if (this.levelCompleted) {\r\n\t\t\tthis.textRenderer.createTextRenderCall(800, 96, 51, renderCall, this.camera.position);\r\n\t\t} else {\r\n\t\t\trenderCall = this.player.createRenderCall(renderCall)\r\n\t\t}\r\n\r\n\t\tthis.animationHandler.createDynamicRenderCall(dynamicRenderCall, this.camera.position);\r\n\t\tthis.animationHandler.createRenderCall(colorRenderCall)\r\n\t\tthis.animationHandler.createStaticRenderCall(renderCall);\r\n\t\tthis.UI.createRenderCall(renderCall, this.camera.position);\r\n\t\tsimpleRenderCalls = this.particleHandler.createRenderCalls(simpleRenderCalls);\r\n\r\n\t\tthis.debugHandler.createRenderCall(renderCall);\r\n\r\n\t\tcolorRenderCalls.push(colorRenderCall);\r\n\r\n\t\tthis.tileMap.createRenderCall(this.renderCalls);\r\n\t\tthis.renderCalls = this.dynamicTileHandler.createRenderCall(this.renderCalls);\r\n\r\n\t\tthis.renderCalls.set(-1, renderCall);\r\n\r\n\t\tthis.renderer.render(this.renderCalls, this.camera.position);\r\n\t\tthis.colorRenderer.render(colorRenderCalls, this.camera.position);\r\n\t\tthis.simpleParticleRenderer.render(simpleRenderCalls, this.camera.position);\r\n\t\tthis.dynamicRenderer.render([dynamicRenderCall]);\r\n\t}\r\n\r\n\tprivate checkGoal() {\r\n\t\tthis.levelCompleted = this.collision.aabbCheck(this.player.getCollisionArea(), this.collisionAreaEnd);\r\n\t}\r\n\r\n\tprivate checkKeys(delta: number) {\r\n\t\tif (!this.player.stunned) {\r\n\t\t\tif (this.leftKeyPress) {\r\n\t\t\t\tthis.player.moveLeft(delta);\r\n\t\t\t} else if (this.rightKeyPress) {\r\n\t\t\t\tthis.player.moveRight(delta);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.jumpKeyPress) {\r\n\t\t\t\tthis.player.jump();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.shieldPress) {\r\n\t\t\t\tthis.player.cast(SpellType.shield);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.frostKeyPress) {\r\n\t\t\t\tthis.player.cast(SpellType.frostBlast);\r\n\t\t\t} else if (this.fireKeyPress) {\r\n\t\t\t\tthis.player.cast(SpellType.fireBlast);\r\n\t\t\t} else if (this.fireballKeyPress) {\r\n\t\t\t\tthis.player.cast(SpellType.fireball);\r\n\t\t\t} else if (this.channelMagicKeyPress) {\r\n\t\t\t\tthis.player.cast(SpellType.channelmagic);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initKeyBindings() {\r\n\r\n\t\tdocument.body.addEventListener(\"keydown\", (event: KeyboardEvent) => {\r\n\r\n\t\t\tvar keyCode = event.keyCode;\r\n\r\n\t\t\tswitch (keyCode) {\r\n\t\t\t\tcase 65:\r\n\t\t\t\t\tthis.leftKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 68:\r\n\t\t\t\t\tthis.rightKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 87:\r\n\t\t\t\t\tthis.jumpKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 97:\r\n\t\t\t\t\tthis.fireballKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\tthis.fireballKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 98:\r\n\t\t\t\t\tthis.channelMagicKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\tthis.channelMagicKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 99:\r\n\t\t\t\t\tthis.frostKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\tthis.frostKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 100:\r\n\t\t\t\t\tthis.fireKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\tthis.fireKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 101:\r\n\t\t\t\t\tthis.shieldPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\tthis.shieldPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38:\r\n\t\t\t\t\tthis.jumpKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 39:\r\n\t\t\t\t\tthis.rightKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37:\r\n\t\t\t\t\tthis.leftKeyPress = true;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tdocument.body.addEventListener(\"keyup\", (event: KeyboardEvent) => {\r\n\r\n\t\t\tvar keyCode = event.keyCode;\r\n\r\n\t\t\tswitch (keyCode) {\r\n\t\t\t\tcase 65:\r\n\t\t\t\t\tthis.leftKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 68:\r\n\t\t\t\t\tthis.rightKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 87:\r\n\t\t\t\t\tthis.jumpKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 97:\r\n\t\t\t\t\tthis.fireballKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 49:\r\n\t\t\t\t\tthis.fireballKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 98:\r\n\t\t\t\t\tthis.channelMagicKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 50:\r\n\t\t\t\t\tthis.channelMagicKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 99:\r\n\t\t\t\t\tthis.frostKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 51:\r\n\t\t\t\t\tthis.frostKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 100:\r\n\t\t\t\t\tthis.fireKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 52:\r\n\t\t\t\t\tthis.fireKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 101:\r\n\t\t\t\t\tthis.shieldPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 53:\r\n\t\t\t\t\tthis.shieldPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38:\r\n\t\t\t\t\tthis.jumpKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 39:\r\n\t\t\t\t\tthis.rightKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37:\r\n\t\t\t\t\tthis.leftKeyPress = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic loadLevel(levelData: LevelData) {\r\n\r\n\t\tlet progress = LocalStorageHelper.getInstance().getCurrentProgress();\r\n\r\n\t\tthis.particleHandler = new ParticleHandler();\r\n\t\tthis.animationHandler = new AnimationHandler(this.particleHandler, this.audioHandler);\r\n\t\tthis.projectileHandler = new ProjectileHandler(this.animationHandler, this.getSpellLevel(progress.defence));\r\n\t\tthis.dynamicTileHandler = new DynamicTileHandler();\r\n\r\n\t\tthis.level = this.loadHelper.levelDataToLevel(levelData, this.projectileHandler, this.animationHandler, this.particleHandler, this);\r\n\t\tthis.collisionAreaEnd = new Rectangle(this.level.end.x + (this.level.end.width / 2), this.level.end.y + (this.level.end.height / 2), 1, 1);\r\n\t\tthis.particleHandler.tiles = this.level.tiles;\r\n\r\n\t\tthis.camera = new Camera([this.level.camera[0], this.level.camera[1]], [this.canvasWidth, this.canvasHeight], this.level.gameSize);\r\n\t\tthis.levelCompleted = false;\r\n\r\n\t\tlet hp = 100 + (10 * progress.hp);\r\n\t\tlet mana = 200 + (20 * progress.mana);\r\n\t\tthis.player = new Player(new Vector(this.level.player[0], this.level.player[1]), this.context, this.projectileHandler, this.animationHandler, this.particleHandler, 48, 85, hp, mana, progress, this.getSpellLevel(progress.fire), this.getSpellLevel(progress.frost), this.getSpellLevel(progress.defence));\r\n\t\tthis.collision.createGrid(new Vector(this.level.gameSize[0], this.level.gameSize[1]), this.level.tiles);\r\n\t\tthis.UI = new UI(hp, mana);\r\n\t\tthis.enemyHandler = new EnemyHandler(this.context, this.projectileHandler, this.animationHandler, this.particleHandler);\r\n\t\tthis.enemyHandler.enemies = this.level.enemies;\r\n\r\n\r\n\t\tthis.deathTimer = 0;\r\n\t\tthis.levelCompletedTimer = 3000;\r\n\r\n\t\tthis.dynamicTileHandler.dynamicTiles = this.level.dynamicTiles;\r\n\t\tthis.tileMap = new TileMap(this.level.tiles, this.level.decorativeTiles);\r\n\r\n\t\tthis.textRenderer = new TextRenderer(this.context);\r\n\t}\r\n\r\n\tprivate getSpellLevel(spellPoints: number) {\r\n\t\tif (spellPoints == 0) {\r\n\t\t\treturn 0;\r\n\t\t} else if (spellPoints < 3) {\r\n\t\t\treturn 1;\r\n\t\t} else if (spellPoints < 6) {\r\n\t\t\treturn 2;\r\n\t\t} else {\r\n\t\t\treturn 3;\r\n\t\t};\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/game.ts","import { Context } from './context';\r\nimport { Game } from './game';\r\nimport { TileMap } from './tileMap';\r\nimport { Renderer } from './render/renderer';\r\n\r\nexport { Context };\r\nexport { Game };\r\nexport { TileMap };\r\nexport { Renderer };\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/index.ts","import { Observable, Subscription, Observer } from 'rxjs';\r\nimport { ShaderType, Asset } from './model';\r\nimport { TileAsset } from './map/model';\r\n\r\nexport class Context\r\n{\r\n\tpublic shaderProgram: WebGLProgram;\r\n\tpublic simpleParticleProgram: WebGLProgram;\r\n\tpublic dynamicVertecyProgram: WebGLProgram;\r\n\tpublic colorShaderProgram: WebGLProgram;\r\n\tpublic gl: WebGLRenderingContext;\r\n\tpublic glTexture: WebGLTexture;\r\n\tpublic frostParticelTexture: WebGLTexture;\r\n\tpublic genericParticleTexture: WebGLTexture;\r\n\tpublic tileTextures = new Map<number, WebGLTexture>();\r\n\r\n\tconstructor(asset: Asset, width: number, height: number, canvas: HTMLCanvasElement){\r\n\t\tthis.initContext(width, height, canvas);\r\n\t\tthis.initShaders(asset);\r\n\t}\r\n\r\n\tpublic clear(color: number[]) {\r\n\t\tthis.gl.clear( this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT );\r\n\t\tthis.gl.clearColor(color[0], color[1], color[2], color[3]);\r\n\t}\r\n\r\n\tprivate initContext(width: number, height: number, canvas: HTMLCanvasElement) {\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\t\tthis.gl = canvas.getContext(\"experimental-webgl\");\r\n\r\n\t\tconsole.log(\"Context initialized...\");\r\n\t}\r\n\r\n\tprivate initShaders(asset: Asset) {\r\n\t\tlet vertexShader = this.compileShader(asset.vertexShader, ShaderType.Vertex);\r\n\t\tlet fragmentShader = this.compileShader(asset.fragmentShader, ShaderType.Fragment);\r\n\r\n\t\tlet simpleParticleVertexShader = this.compileShader(asset.simpleParticleVertexShader, ShaderType.Vertex);\r\n\t\tlet simpleParticleFragmentShader = this.compileShader(asset.simpleParticleFragmentShader, ShaderType.Fragment);\r\n\r\n\t\tlet dynamicVertexShader = this.compileShader(asset.dynamicVertexShader, ShaderType.Vertex);\r\n\t\tlet dynamicFragmentShader = this.compileShader(asset.dynamicFragmentShader, ShaderType.Fragment);\r\n\r\n\t\tlet colorVertexShader = this.compileShader(asset.colorVertexShader, ShaderType.Vertex);\r\n\t\tlet colorFragmentShader = this.compileShader(asset.colorFragmentShader, ShaderType.Fragment);\r\n\r\n\t\tthis.colorShaderProgram = this.gl.createProgram();\r\n\t\tthis.gl.attachShader(this.colorShaderProgram, colorVertexShader);\r\n\t\tthis.gl.attachShader(this.colorShaderProgram, colorFragmentShader);\r\n\t\tthis.gl.linkProgram(this.colorShaderProgram);\r\n\t\tif (!this.gl.getProgramParameter(this.colorShaderProgram, this.gl.LINK_STATUS)) {\r\n\t\t\talert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.colorShaderProgram));\r\n\t\t}\r\n\r\n\t\tthis.dynamicVertecyProgram = this.gl.createProgram();\r\n\t\tthis.gl.attachShader(this.dynamicVertecyProgram, dynamicVertexShader);\r\n\t\tthis.gl.attachShader(this.dynamicVertecyProgram, dynamicFragmentShader);\r\n\t\tthis.gl.linkProgram(this.dynamicVertecyProgram);\r\n\t\tif (!this.gl.getProgramParameter(this.dynamicVertecyProgram, this.gl.LINK_STATUS)) {\r\n\t\t\talert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.dynamicVertecyProgram));\r\n\t\t}\r\n\r\n\t\tthis.simpleParticleProgram = this.gl.createProgram();\r\n\t\tthis.gl.attachShader(this.simpleParticleProgram, simpleParticleVertexShader);\r\n\t\tthis.gl.attachShader(this.simpleParticleProgram, simpleParticleFragmentShader);\r\n\t\tthis.gl.linkProgram(this.simpleParticleProgram);\r\n\t\tif (!this.gl.getProgramParameter(this.simpleParticleProgram, this.gl.LINK_STATUS)) {\r\n\t\t\talert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.simpleParticleProgram));\r\n\t\t}\r\n\r\n\t\tthis.shaderProgram = this.gl.createProgram();\r\n\t\tthis.gl.attachShader(this.shaderProgram, vertexShader);\r\n\t\tthis.gl.attachShader(this.shaderProgram, fragmentShader);\r\n\t\tthis.gl.linkProgram(this.shaderProgram);\t\t \r\n\t\tif (!this.gl.getProgramParameter(this.shaderProgram, this.gl.LINK_STATUS)) {\r\n\t\t\talert(\"Unable to initialize the shader program: \" + this.gl.getProgramInfoLog(this.shaderProgram));\r\n\t\t}\r\n\r\n\t\tthis.initAssetTextures(this.gl, asset)\r\n\t}\r\n\r\n\tprivate initAssetTextures(gl: WebGLRenderingContext, asset: Asset) {\r\n\r\n\r\n\t\tthis.initTextures(gl, asset.tileAssets);\r\n\t\tthis.initBaseTextures(gl, asset);\r\n\r\n\t}\r\n\r\n\tprivate initTextures(gl: WebGLRenderingContext, textureMap: Map<number, TileAsset>) {\r\n\t\ttextureMap.forEach((tileAsset: TileAsset, key: number) => {\r\n\r\n\t\t\tlet texture = gl.createTexture();\r\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, tileAsset.image);\r\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\r\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\r\n\t\t\tthis.tileTextures.set(key, texture);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate initBaseTextures(gl: WebGLRenderingContext, asset: Asset) {\r\n\r\n\t\tthis.glTexture = gl.createTexture();\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.glTexture);\r\n  \t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, asset.texture);\r\n  \t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n  \t\tgl.generateMipmap(gl.TEXTURE_2D);\r\n\r\n\t\tthis.frostParticelTexture = gl.createTexture();\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.frostParticelTexture);\r\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, asset.particleTexture);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n\t\tthis.genericParticleTexture = gl.createTexture();\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.genericParticleTexture);\r\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, asset.genericParticleTexture);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n  \t\tgl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\t\tgl.enable(gl.BLEND);\r\n\t}\r\n\r\n\tprivate compileShader(source: string, shaderType: ShaderType) {\r\n\t\tvar shader: WebGLShader;\r\n\r\n\t\tif(shaderType == ShaderType.Fragment) {\r\n\t\t\tshader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n\t\t} else if (shaderType == ShaderType.Vertex) {\r\n\t\t\tshader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n\t\t}\r\n\r\n\t\tthis.gl.shaderSource(shader, source);\r\n\t\tthis.gl.compileShader(shader);\r\n\r\n\t\tif (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\r\n     \t\tconsole.log(\"An error occurred compiling the shaders: \" + this.gl.getShaderInfoLog(shader));\r\n     \t\treturn null;\r\n   \t\t}\r\n\r\n   \t\treturn shader;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/context.ts","import { Tile, Vector, Rectangle } from './model';\r\nimport { RenderCall } from './render/renderCall';\r\nimport { RenderHelper } from './render/renderHelper';\r\nimport { Constants } from './service/constants';\r\n\r\nexport class TileMap {\r\n\r\n\tpublic renderCalls: Map<number, RenderCall> = new Map<number, RenderCall>();\r\n\tpublic decorativeRenderCalls: Map<number, RenderCall> = new Map<number, RenderCall>();\r\n\r\n\tprivate renderHelper = RenderHelper.getInstance();\r\n\tprivate constants = Constants.getInstance();\r\n\tprivate tileMap: Map<number, Tile[]> = new Map<number, Tile[]>();\r\n\tprivate decorativeTileMap: Map<number, Tile[]> = new Map<number, Tile[]>();\r\n\r\n\tconstructor(public tiles: Tile[], public decorativeTiles: Tile[]) {\r\n\t\tthis.createStaticRenderCalls(this.tiles, this.tileMap, this.renderCalls);\r\n\t\tthis.createStaticRenderCalls(this.decorativeTiles, this.decorativeTileMap, this.decorativeRenderCalls);\r\n\t}\r\n\r\n\tprivate createStaticRenderCalls(tiles: Tile[], tileMap: Map<number, Tile[]>, renderCalls: Map<number, RenderCall>) {\r\n\r\n\t\tfor (let tile of tiles) {\r\n\t\t\tlet set = tileMap.get(tile.key);\r\n\t\t\tif (set) {\r\n\t\t\t\tset.push(tile);\r\n\t\t\t} else {\r\n\t\t\t\ttileMap.set(tile.key, [tile]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttileMap.forEach((tiles: Tile[], key: number) => {\r\n\t\t\tlet renderCall = new RenderCall();\r\n\t\t\trenderCall.key = key;\r\n\r\n\t\t\tfor (let tile of tiles) {\r\n\t\t\t\trenderCall.vertecies = this.renderHelper.getVertecies(tile.x, tile.y, tile.width, tile.height, renderCall.vertecies);\r\n\t\t\t\trenderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(tile, renderCall.textureCoords, this.constants.tileSize);\r\n\t\t\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\t\t\t}\r\n\r\n\t\t\trenderCalls.set(renderCall.key, renderCall);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic createGoalRenderCall(goal: Rectangle, renderCall: RenderCall) {\r\n\r\n\t\trenderCall.vertecies = this.renderHelper.getVertecies(goal.x, goal.y, goal.width, goal.height, renderCall.vertecies);\r\n\t\trenderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, 550);\r\n\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n\t\treturn renderCall;\r\n\t}\r\n\r\n\tpublic createRenderCall(renderCalls: Map<number, RenderCall>) {\r\n\r\n\t\trenderCalls = this.createDecorativeRenderCall(renderCalls);\r\n\r\n\t\tthis.renderCalls.forEach((renderCall: RenderCall, key: number) => {\r\n\t\t\tlet set = renderCalls.get(key);\r\n\r\n\t\t\tif (!set) {\r\n\t\t\t\trenderCalls.set(key, new RenderCall());\r\n\t\t\t\tset = renderCalls.get(key);\r\n\t\t\t}\r\n\r\n\t\t\tset.vertecies.push.apply(set.vertecies, renderCall.vertecies);\r\n\t\t\tset.indecies.push.apply(set.indecies, renderCall.indecies);\r\n\t\t\tset.textureCoords.push.apply(set.textureCoords, renderCall.textureCoords);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic createDecorativeRenderCall(renderCalls: Map<number, RenderCall>) {\r\n\r\n\t\tthis.decorativeRenderCalls.forEach((renderCall: RenderCall, key: number) => {\r\n\t\t\tlet set = renderCalls.get(key);\r\n\r\n\t\t\tif (!set) {\r\n\t\t\t\trenderCalls.set(key, new RenderCall());\r\n\t\t\t\tset = renderCalls.get(key);\r\n\t\t\t}\r\n\r\n\t\t\tset.vertecies.push.apply(set.vertecies, renderCall.vertecies);\r\n\t\t\tset.indecies.push.apply(set.indecies, renderCall.indecies);\r\n\t\t\tset.textureCoords.push.apply(set.textureCoords, renderCall.textureCoords);\r\n\t\t});\r\n\r\n\t\treturn renderCalls;\r\n\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/tileMap.ts","import { RenderHelper } from '../render/renderHelper';\r\nimport { RenderCall } from '../render/renderCall';\r\nimport { Context } from '../context';\r\n\r\nexport class TextRenderer {\r\n\r\n\tprivate renderHelper: RenderHelper = new RenderHelper();\r\n\tprivate context: Context;\r\n\r\n\tconstructor(context: Context) {\r\n\t\tthis.context = context;\r\n\t}\r\n\r\n\tpublic createTextRenderCall(sizeX: number, sizeY: number, type: number, renderCall: RenderCall, camera: [number, number]) {\r\n\r\n\t\trenderCall.vertecies = this.renderHelper.getVertecies(((this.context.gl.canvas.width/2) - (sizeX/2) + camera[0]), ((this.context.gl.canvas.height/2) - (sizeY/2) + camera[1]), sizeX, sizeY, renderCall.vertecies);\r\n\t\trenderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, type);\r\n\t\trenderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n\t\treturn renderCall;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/text/textRenderer.ts","import { Vector, Sprite, Rectangle, Animation, SpellType, FrameAnimation, RotationAnimation, StaticRotationAnimation, Projectile } from '../model'\r\nimport { RenderCall, DynamicRenderCall, RenderHelper, Matrix3, TextureMapper, ColorRenderCall } from '../render';\r\nimport { Context } from '../context';\r\nimport { CollisionData } from '../collision/collisionData';\r\nimport { Player } from '../character/player';\r\nimport { ParticleHandler } from '../handler/particleHandler';\r\nimport { AudioHandler } from \"./audioHandler\";\r\n\r\nexport class AnimationHandler {\r\n\r\n    public animations: Animation[] = [];\r\n    public dynamicAnimations: Animation[] = [];\r\n    private staticAnimations: Animation[] = [];\r\n    private particleHandler: ParticleHandler;\r\n    private textureMapper = TextureMapper.getInstance();\r\n    private renderHelper = RenderHelper.getInstance();\r\n\r\n    constructor(particleHandler: ParticleHandler, public audioHandler: AudioHandler) {\r\n        this.particleHandler = particleHandler;\r\n    }\r\n\r\n    public bloodAnimation_A(position: Vector, size: number) {\r\n        let animation = new Animation([100, 101, 102, 103, 104, 105]);\r\n\r\n        animation.areaToRender = new Rectangle(position.x, position.y, size, size);\r\n\r\n        animation.repetitions = 6;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public bloodAnimation_B_Right(position: Vector, size: number) {\r\n        let animation = new Animation([106, 107, 108, 109, 110, 111]);\r\n        animation.areaToRender = new Rectangle(position.x - 75, position.y, size, size);\r\n\r\n        animation.repetitions = 6;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public bloodAnimation_B_Left(position: Vector, size: number) {\r\n        let animation = new Animation([106, 107, 108, 109, 110, 111]);\r\n        animation.areaToRender = new Rectangle(position.x, position.y, size, size);\r\n\r\n        animation.inverse = true;\r\n\r\n        animation.repetitions = 6;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public voidAnimation() {\r\n        let animation = new Animation([]);\r\n\r\n        animation.areaToRender = new Rectangle(0, 0, 0, 0);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public bloodAnimation_C(position: Vector, size: number) {\r\n        let animation = new Animation([147, 148, 149, 150, 151, 152]);\r\n\r\n        animation.areaToRender = new Rectangle(position.x, position.y, size, size);\r\n\r\n        animation.repetitions = 6;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public swordman_death(position: Vector, inverse: boolean) {\r\n        let animation = new Animation([\r\n            214, 216, 217, 218\r\n        ]);\r\n\r\n        animation.timeToChange = 120;\r\n\r\n        animation.repetitions = 4;\r\n\r\n        animation.areaToRender = new Rectangle(position.x, position.y, 56, 59);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        animation.onCompletion = () => {\r\n            this.swordman_corpse(position, inverse);\r\n        }\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public createArcherDeath(area: Rectangle, inverse: boolean) {\r\n        this.bloodAnimation_C(new Vector(area.x - 10, area.y - 20), 75);\r\n        this.bloodAnimation_B_Left(new Vector(area.x - 10, area.y - 20), 75);\r\n        this.bloodAnimation_B_Right(new Vector(area.x + 65, area.y - 20), 75);\r\n        this.archer_death(area, inverse);\r\n        \r\n    }\r\n\r\n    public archer_death(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([290, 291, 292, 293]);\r\n\r\n        animation.timeToChange = 120;\r\n\r\n        animation.repetitions = 4;\r\n\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        animation.onCompletion = () => {\r\n            this.archer_corpse(area, inverse);\r\n        }\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public archer_corpse(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([293]);\r\n        animation.timeToChange = 120;\r\n\r\n        animation.delay = 4;\r\n\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        this.staticAnimations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public player_sword_death_corpse(position: Vector, inverse: boolean) {\r\n        let animation = new Animation([306]);\r\n        animation.timeToChange = 150;\r\n        animation.delay = 6;\r\n\r\n        animation.areaToRender = new Rectangle(position.x, position.y, 90, 90);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public player_sword_death_animation(position: Vector, inverse: boolean) {\r\n        let animation = new Animation([301, 302, 303, 304, 305, 306]);\r\n\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 150;\r\n        animation.repetitions = 6;\r\n        animation.areaToRender = new Rectangle(position.x, position.y, 90, 90);\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public apprentice_Death(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([144, 145, 146, 153, 154, 155]);\r\n\r\n        animation.repetitions = 5;\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 150;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.onCompletion = () => {\r\n            this.apprentice_corpse(area, inverse);\r\n        }\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public apprentice_corpse(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([155]);\r\n\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 150;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        this.staticAnimations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public masterSorcerer_death(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([586, 587, 589, 590, 591, 592, 593, 594, 595, 596]);\r\n\r\n        animation.repetitions = 9;\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 125;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.onCompletion = () => {\r\n            this.masterSorcerer_corpse(area, inverse);\r\n        }\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public masterSorcerer_corpse(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([596]);\r\n\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 175;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        this.staticAnimations.push(animation);\r\n\r\n        return animation;\r\n    }    \r\n\r\n    public screamer_Death(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([576, 577, 578, 579]);\r\n\r\n        animation.repetitions = 3;\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 175;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.onCompletion = () => {\r\n            this.screamer_corpse(area, inverse);\r\n        }\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public screamer_corpse(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([579]);\r\n\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 175;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        this.staticAnimations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public shadow_Death(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([132, 130, 127, 124, 119]);\r\n\r\n        animation.repetitions = 4;\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 100;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.onCompletion = () => {\r\n            this.shadow_corpse(area, inverse);\r\n        };\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public shadow_corpse(area: Rectangle, inverse: boolean) {\r\n        let animation = new Animation([119]);\r\n\r\n        animation.repetitions = 4;\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 100;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        this.staticAnimations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public swordman_corpse(position: Vector, inverse: boolean) {\r\n        let animation = new Animation([219]);\r\n\r\n        animation.timeToChange = 120;\r\n\r\n        animation.delay = 4;\r\n\r\n        animation.areaToRender = new Rectangle(position.x, position.y, 56, 59);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        this.staticAnimations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public swordman_head(position: Vector, inverse: boolean) {\r\n        let animation = new Animation([215, 220, 221, 222, 223, 224, 225, 226]);\r\n        animation.timeToChange = 75;\r\n        animation.areaToRender = new Rectangle(position.x, position.y, 56, 59);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public fireball_destroy(position: Vector, size: number) {\r\n        let animation = new Animation([118, 119, 120, 121, 122, 123, 124, 125, 126]);\r\n        animation.timeToChange = 50;\r\n        animation.areaToRender = new Rectangle(position.x, position.y, size, size);\r\n\r\n        animation.repetitions = 9;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public necroball_explosion(position: Vector, size: number) {\r\n        this.audioHandler.playSound(\"explode4.ogg\", 1, 0, 0.05);\r\n        this.particleHandler.createNecroballExplosion(position, size);\r\n    }\r\n\r\n    public blue_explosion(position: Vector, size: number) {\r\n        this.audioHandler.playSound(\"spellend.wav\", 1, 0, 0.03);\r\n        this.particleHandler.createBlueExplosion(position, size);\r\n    }\r\n\r\n    public fireball_explosion(position: Vector, size: number) {\r\n        this.audioHandler.playSound(\"explosion1.wav\", 2, 0, 0.05);\r\n        this.particleHandler.createFireballExplosion(position, size);\r\n    }\r\n\r\n    public swordscut_a(position: Vector, size: number, inverse: boolean) {\r\n\r\n        let animation = new Animation([55, 56, 57, 58, 59]);\r\n        animation.inverse = inverse;\r\n        animation.areaToRender = new Rectangle(position.x, position.y, size, size);\r\n\r\n        this.animations.push(animation);\r\n\r\n        animation.repetitions = 5;\r\n\r\n        return animation;\r\n    }\r\n\r\n    public createDebugAnimation(position: Vector, size: number, repetitions: number) {\r\n        let animation = new Animation([5]);\r\n        animation.areaToRender = new Rectangle(position.x, position.y, size, size);\r\n        animation.repetitions = repetitions;\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public fallDeath(position: Vector) {\r\n        this.bloodAnimation_A(new Vector(position.x, position.y + 20), 50);\r\n        this.bloodAnimation_B_Right(new Vector(position.x + 5, position.y + 5), 100);\r\n        this.bloodAnimation_B_Left(new Vector(position.x - 55, position.y + 5), 100);\r\n    }\r\n\r\n    public fireDeathSwordman(area: Rectangle, inverse: boolean) {\r\n\r\n        let onUpdate = (position: Vector) => {\r\n            this.particleHandler.createFireDeath(position);\r\n        }\r\n\r\n        let animation = new FrameAnimation(0, -4, 0, 0, onUpdate, [250, 251, 252, 253, 254, 255, 256, 257]);\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 100;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.repetitions = 8;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public fireDeathArcher(area: Rectangle, inverse: boolean) {\r\n\r\n        let onUpdate = (position: Vector) => {\r\n            this.particleHandler.createFireDeath(position);\r\n        }\r\n\r\n        let animation = new FrameAnimation(0, -4, 0, 0, onUpdate, [282, 283, 284, 285, 286, 287, 288, 289]);\r\n        animation.inverse = inverse;\r\n        animation.timeToChange = 100;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.repetitions = 8;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public createArrow(area: Rectangle, inverse: boolean, velocity: Vector) {\r\n        let animation = new RotationAnimation(velocity, [268]);\r\n        animation.inverse = inverse;\r\n        animation.areaToRender = area;\r\n\r\n        animation.timeToChange = 20000;\r\n        animation.repetitions = 1;\r\n\r\n        this.dynamicAnimations.push(animation);\r\n        this.audioHandler.playSound(\"bow.wav\", 1, 0, 0.1);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public createDeadArrow(area: Rectangle, inverse: boolean, velocity: Vector) {\r\n        let collAngle = new Vector(velocity.x, velocity.y);\r\n\r\n        let animation = new StaticRotationAnimation(collAngle, inverse, [268]);\r\n        animation.inverse = inverse;\r\n\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.timeToChange = 2000;\r\n        animation.repetitions = 1;\r\n\r\n        this.dynamicAnimations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public createArrowHit(projectile: Projectile, useCollisionArea: boolean) {\r\n\r\n        let collAngle = new Vector(projectile.velocity.x, projectile.velocity.y);\r\n\r\n        let animation = new RotationAnimation(collAngle, [269]);\r\n        animation.inverse = projectile.animation.inverse;\r\n\r\n        if (useCollisionArea) {\r\n            animation.areaToRender = new Rectangle(projectile.collisionArea.x, projectile.collisionArea.y, projectile.area.width, projectile.area.height);\r\n        } else {\r\n            animation.areaToRender = new Rectangle(projectile.area.x, projectile.area.y, projectile.area.width, projectile.area.height);\r\n        }\r\n\r\n        animation.areaToRender.width = animation.areaToRender.width * 0.67;\r\n\r\n        animation.timeToChange = 2000;\r\n        animation.repetitions = 1;\r\n\r\n\r\n        this.dynamicAnimations.push(animation);\r\n        this.audioHandler.playSound(\"arrowhit.wav\", 1, 0, 0.1);\r\n\r\n        return animation;\r\n    }\r\n\r\n    public frozenSwordMan(area: Rectangle, inverse: boolean, color: number[], onCompletion: () => void) {\r\n        let animation = new Animation([237, 238, 239, 240, 241, 242]);\r\n        animation.inverse = inverse;\r\n        animation.color = color;\r\n        animation.timeToChange = 250;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.onCompletion = onCompletion;\r\n\r\n        this.animations.push(animation);\r\n\r\n        animation.repetitions = 6;\r\n\r\n        return animation;\r\n    }\r\n\r\n    public frozenArcher(area: Rectangle, inverse: boolean, color: number[], onCompletion: () => void) {\r\n        let animation = new Animation([270, 271, 272, 273, 274, 275]);\r\n        animation.inverse = inverse;\r\n        animation.color = color;\r\n        animation.timeToChange = 250;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        animation.onCompletion = onCompletion;\r\n\r\n        this.animations.push(animation);\r\n\r\n        animation.repetitions = 6;\r\n\r\n        return animation;\r\n    }\r\n\r\n    public frozenPart(area: Rectangle, inverse: boolean, color: number[], partIndex: number, baseTextureNumber: number) {\r\n        let animation = new Animation([baseTextureNumber + partIndex]);\r\n        animation.inverse = inverse;\r\n        animation.color = color;\r\n        animation.timeToChange = 2000;\r\n        animation.areaToRender = new Rectangle(area.x, area.y, area.width, area.height);\r\n\r\n        this.animations.push(animation);\r\n\r\n        animation.repetitions = 1;\r\n\r\n        return animation;\r\n    }\r\n\r\n\r\n\r\n    public update(delta: number) {\r\n\r\n        let completedAnimations: Animation[] = [];\r\n        let totalAnimations = this.animations.concat(this.dynamicAnimations);\r\n\r\n        for (let animation of totalAnimations) {\r\n            animation.next(delta);\r\n            if (animation.repetitions <= 0) {\r\n                completedAnimations.push(animation);\r\n                if (animation.onCompletion) {\r\n                    animation.onCompletion();\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let completedAnimation of completedAnimations) {\r\n            this.remove(completedAnimation);\r\n        }\r\n    }\r\n\r\n    public createDynamicRenderCall(renderCall: DynamicRenderCall, camera: [number, number]) {\r\n\r\n        for (let animation of this.dynamicAnimations) {\r\n            if (animation instanceof RotationAnimation || animation instanceof StaticRotationAnimation) {\r\n\r\n                let x = animation.areaToRender.x - camera[0];\r\n                let y = animation.areaToRender.y - camera[1];\r\n                let width = animation.areaToRender.width;\r\n                let height = animation.areaToRender.height;\r\n\r\n                if (animation.inverse) {\r\n                    renderCall.vertecies = this.renderHelper.getInverseVertecies(x, y, width, height, renderCall.vertecies);\r\n                } else {\r\n                    renderCall.vertecies = this.renderHelper.getVertecies(x, y, width, height, renderCall.vertecies);\r\n                }\r\n\r\n                renderCall.textureCoords.push.apply(renderCall.textureCoords, animation.getCurrentFrame());\r\n                renderCall.matrices = this.renderHelper.getMatrices(x, y, width, height, animation.angle, renderCall.matrices);\r\n                renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n            }\r\n        }\r\n    }\r\n\r\n    public createRenderCall(renderCall: ColorRenderCall) {\r\n\r\n        for (let animation of this.animations) {\r\n            if (animation.delay <= 0) {\r\n                let x = animation.areaToRender.x;\r\n                let y = animation.areaToRender.y;\r\n                let width = animation.areaToRender.width;\r\n                let height = animation.areaToRender.height;\r\n\r\n                if (animation.inverse) {\r\n                    renderCall.vertecies = this.renderHelper.getInverseVertecies(x, y, width, height, renderCall.vertecies);\r\n                } else {\r\n                    renderCall.vertecies = this.renderHelper.getVertecies(x, y, width, height, renderCall.vertecies);\r\n                }\r\n\r\n                renderCall.textureCoords.push.apply(renderCall.textureCoords, animation.getCurrentFrame());\r\n\r\n                renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n                if (animation.color) {\r\n                    renderCall.color = this.renderHelper.getColor(renderCall.color, animation.color);\r\n                } else {\r\n                    renderCall.color = this.renderHelper.getColor(renderCall.color, null);\r\n                }\r\n            }\r\n        }\r\n\r\n        return renderCall;\r\n    }\r\n\r\n    public createStaticRenderCall(renderCall: RenderCall) {\r\n\r\n        for (let animation of this.staticAnimations) {\r\n            if (animation.inverse) {\r\n                renderCall.vertecies = this.renderHelper.getInverseVertecies(animation.areaToRender.x, animation.areaToRender.y, animation.areaToRender.width, animation.areaToRender.height, renderCall.vertecies);\r\n            } else {\r\n                renderCall.vertecies = this.renderHelper.getVertecies(animation.areaToRender.x, animation.areaToRender.y, animation.areaToRender.width, animation.areaToRender.height, renderCall.vertecies);\r\n            }\r\n\r\n            renderCall.textureCoords.push.apply(renderCall.textureCoords, animation.getCurrentFrame());\r\n\r\n            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n        }\r\n\r\n        return renderCall;\r\n    }\r\n\r\n    public remove(animation: Animation) {\r\n        let index = this.animations.indexOf(animation);\r\n        if (index != -1) {\r\n            this.animations.splice(index, 1);\r\n        } else {\r\n            index = this.dynamicAnimations.indexOf(animation);\r\n            if (index != -1) {\r\n                this.dynamicAnimations.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    public enemy(position: Vector, inverse: boolean) {\r\n        let animation = new Animation([209, 211, 210]);\r\n        animation.timeToChange = 120;\r\n        animation.areaToRender = new Rectangle(position.x, position.y, 56, 58);\r\n\r\n        animation.inverse = inverse;\r\n\r\n        this.animations.push(animation);\r\n\r\n        return animation;\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/animationHandler.ts","import {\r\n    Projectile,\r\n    Vector,\r\n    Rectangle,\r\n    SpellType,\r\n    Spell,\r\n    PhysicalProjectile,\r\n    Meele,\r\n    Animation,\r\n    DebugElement,\r\n    StickyAnimation,\r\n    RotationAnimation,\r\n    StaticRotationAnimation,\r\n    CollisionProjectile,\r\n    ProjectileType,\r\n    ParticleProjectile,\r\n    DynamicTile,\r\n    Progress\r\n} from '../model';\r\nimport { Player } from '../character/player';\r\nimport { AnimationHandler } from './animationHandler';\r\nimport { ParticleHandler } from './particleHandler';\r\nimport { EnemyHandler } from './enemyHandler';\r\nimport { DebugHandler } from './debugHandler';\r\nimport { Gravity } from '../forces/gravity';\r\nimport { Drag } from '../forces/drag';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { CollisionData } from '../collision/collisionData';\r\nimport { Enemy } from '../character/enemy';\r\n\r\nexport class ProjectileHandler {\r\n\r\n    public projectiles: Projectile[] = [];\r\n    private enemyProjectiles: Projectile[] = [];\r\n    private animationHandler: AnimationHandler;\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n    private debuggHandler = DebugHandler.getInstance();\r\n\r\n    constructor(animationHandler: AnimationHandler, private shieldLevel: number) {\r\n        this.animationHandler = animationHandler;\r\n    }\r\n\r\n    public clear() {\r\n        this.projectiles = [];\r\n        this.enemyProjectiles = [];\r\n    }\r\n\r\n    public createArrow(position: Vector, inverse: boolean, velocity: Vector) {\r\n        let arrow: PhysicalProjectile;\r\n        let rectangle = new Rectangle(position.x, position.y, 40, 10);\r\n        let collRect: Rectangle;\r\n\r\n        if (inverse) {\r\n            collRect = new Rectangle(position.x + 10, position.y + 5, 1, 1);\r\n        } else {\r\n            collRect = new Rectangle(position.x + 20, position.y + 5, 1, 1);\r\n        }\r\n\r\n        let animation = this.animationHandler.createArrow(rectangle, inverse, velocity);\r\n        arrow = new PhysicalProjectile(velocity, rectangle, animation, 1, collRect, true);\r\n        arrow.gravity = new Gravity(0.0003);\r\n        arrow.drag = new Drag(0);\r\n\r\n        arrow.projectileType = ProjectileType.Arrow;\r\n        arrow.damage = 20;\r\n\r\n        this.enemyProjectiles.push(arrow);\r\n\r\n        return arrow;\r\n    }\r\n\r\n    public createNecroBall(position: Vector, size: number, inverse: boolean, velocity: Vector, damage: number, offset: number, type: ProjectileType, onUpdate: (area: Rectangle, inverse: boolean, offsetX: number) => void) {\r\n        let necroBall: ParticleProjectile;\r\n\r\n        if (inverse) {\r\n            let area = new Rectangle(position.x + 5, position.y, size, size);\r\n            necroBall = new ParticleProjectile(velocity, area, this.animationHandler.voidAnimation(), 0.2, (size * 10), inverse, 0, onUpdate);\r\n        } else {\r\n            let area = new Rectangle(position.x + offset, position.y, size, size);\r\n            necroBall = new ParticleProjectile(velocity, area, this.animationHandler.voidAnimation(), 0.2, (size * 10), inverse, 0, onUpdate);\r\n        }\r\n\r\n        necroBall.projectileType = type;\r\n        necroBall.damage = damage;\r\n        necroBall.distance = 1000;\r\n\r\n        this.animationHandler.audioHandler.playSound(\"foom.wav\", 1, 0, 0.03);\r\n\r\n        this.enemyProjectiles.push(necroBall);\r\n    }\r\n\r\n    public createDeadArrow(position: Vector, inverse: boolean, velocity: Vector, push?: Vector) {\r\n        let arrow: PhysicalProjectile;\r\n        let rectangle = new Rectangle(position.x, position.y, 40, 10);\r\n        let collRect: Rectangle;\r\n\r\n        if (inverse) {\r\n            collRect = new Rectangle(position.x + 10, position.y + 5, 1, 1);\r\n        } else {\r\n            collRect = new Rectangle(position.x + 20, position.y + 5, 1, 1);\r\n        }\r\n\r\n        let animation = this.animationHandler.createDeadArrow(rectangle, inverse, velocity);\r\n        velocity.x = -velocity.x / 2;\r\n        if (push) {\r\n            velocity.x += push.x;\r\n            velocity.y += push.y;\r\n        }\r\n        arrow = new PhysicalProjectile(velocity, rectangle, animation, 1, collRect);\r\n        arrow.gravity = new Gravity(0.0006);\r\n        arrow.drag = new Drag(0.0002);\r\n\r\n        arrow.projectileType = ProjectileType.None;\r\n\r\n        this.projectiles.push(arrow);\r\n\r\n        return arrow;\r\n    }\r\n\r\n    public createFireBall(position: Vector, inverse: boolean, velocityValue: number, strength: number, offset: number, onUpdate: (area: Rectangle, inverse: boolean, offsetX: number) => void) {\r\n\r\n        let fireBall: ParticleProjectile;\r\n\r\n        if (inverse) {\r\n            fireBall = new ParticleProjectile(new Vector(-velocityValue, 0), new Rectangle(position.x, position.y, strength, strength), this.animationHandler.voidAnimation(), 0.2, (strength * 10), inverse, offset, onUpdate);\r\n        } else {\r\n            fireBall = new ParticleProjectile(new Vector(velocityValue, 0), new Rectangle(position.x, position.y, strength, strength), this.animationHandler.voidAnimation(), 0.2, (strength * 10), inverse, offset, onUpdate);\r\n        }\r\n\r\n        this.projectiles.push(fireBall);\r\n    }\r\n\r\n    public createCollisionProjectile(position: Vector, offset: number, inverse: boolean, damage: number, velocity: Vector) {\r\n        let rect: Rectangle;\r\n        if (inverse) {\r\n            rect = new Rectangle(position.x, position.y - 10, 10, 10);\r\n            velocity.x = -velocity.x;\r\n        } else {\r\n            rect = new Rectangle(position.x + offset, position.y - 10, 10, 10);\r\n        }\r\n\r\n        let collisionProjectile = new CollisionProjectile(velocity, rect, 40, this.animationHandler.voidAnimation(), damage);\r\n        collisionProjectile.projectileType = ProjectileType.Sword;\r\n\r\n        this.enemyProjectiles.push(collisionProjectile);\r\n\r\n        return collisionProjectile;\r\n    }\r\n\r\n    public createSwordman_death(position: Vector, inverse: boolean, velocity: Vector) {\r\n        let projectile: PhysicalProjectile;\r\n\r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(position.x, position.y, 28, 29), this.animationHandler.swordman_head(position, inverse), 0.3)\r\n        projectile.extendedOnGroundCollision = () => {\r\n            let currentFrame = projectile.animation.getCurrentFrame();\r\n            projectile.animation.textureCoords = [currentFrame];\r\n            projectile.animation.frameIndex = 0;\r\n        }\r\n        this.animationHandler.bloodAnimation_C(new Vector(position.x - 10, position.y - 20), 75);\r\n        this.animationHandler.bloodAnimation_B_Left(new Vector(position.x - 10, position.y - 20), 75);\r\n        this.animationHandler.bloodAnimation_B_Right(new Vector(position.x + 65, position.y - 20), 75);\r\n        this.animationHandler.swordman_death(position, inverse);\r\n\r\n        this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n\r\n        this.projectiles.push(projectile);\r\n    }\r\n\r\n    public createPlayerSword_death(position: Vector, inverse: boolean) {\r\n\r\n        let projectile: PhysicalProjectile;\r\n        let projectileCorpse: Projectile;\r\n        let velocity = new Vector(0, 0);\r\n        let x = position.x;\r\n\r\n        if (inverse) {\r\n            x -= 45;\r\n        }\r\n\r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(x, position.y - 6, 45, 85), this.animationHandler.player_sword_death_animation(position, inverse), 1)\r\n\r\n        projectileCorpse = new PhysicalProjectile(velocity, new Rectangle(x, position.y - 6, 45, 85), this.animationHandler.player_sword_death_corpse(position, inverse), 1)\r\n        if (inverse) {\r\n            this.animationHandler.bloodAnimation_B_Left(new Vector(position.x - 10, position.y - 20), 75);\r\n        } else {\r\n            this.animationHandler.bloodAnimation_B_Right(new Vector(position.x + 65, position.y - 20), 75);\r\n        }\r\n\r\n        this.projectiles.push(projectile);\r\n        this.projectiles.push(projectileCorpse);\r\n    }\r\n\r\n    public createShadow_death(area: Rectangle, inverse: boolean) {\r\n\r\n        let projectile: PhysicalProjectile;\r\n        let velocity = new Vector(0, 0);\r\n        let x = area.x;\r\n\r\n        this.animationHandler.audioHandler.playSound(\"shade13.wav\", 2, 0, 0.3);\r\n\r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.shadow_Death(area, inverse), 0.8)\r\n\r\n        this.projectiles.push(projectile);\r\n    }\r\n\r\n    public createMasterSorcerer_death(area: Rectangle, inverse: boolean) {\r\n        let projectile: PhysicalProjectile;\r\n        let velocity = new Vector(0, 0);\r\n        let x = area.x;\r\n\r\n        this.animationHandler.audioHandler.playSound(\"mnstr5.wav\", 2, 0, 0.3);        \r\n\r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.masterSorcerer_death(area, inverse), 0.8)\r\n\r\n        this.projectiles.push(projectile);\r\n    }\r\n\r\n    public createScreamer_death(area: Rectangle, inverse: boolean) {\r\n        let projectile: PhysicalProjectile;\r\n        let velocity = new Vector(0, 0);\r\n        let x = area.x;\r\n        \r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.screamer_Death(area, inverse), 0.8)\r\n\r\n        this.projectiles.push(projectile);\r\n    }\r\n\r\n    public createApprentice_death(area: Rectangle, inverse: boolean) {\r\n\r\n        let projectile: PhysicalProjectile;\r\n        let velocity = new Vector(0, 0);\r\n        let x = area.x;\r\n\r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(x, area.y - 10, area.width, area.height), this.animationHandler.apprentice_Death(area, inverse), 0.8)\r\n\r\n        this.projectiles.push(projectile);\r\n    }\r\n\r\n    public createFrozenSwordManDeath(area: Rectangle, inverse: boolean, color: number[]) {\r\n\r\n        let onComplete = () => {\r\n\r\n            let velocotyies = [\r\n                new Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n            ];\r\n\r\n            let collisionAreas = [\r\n                new Rectangle(area.x + 7, area.y + 22, 11, 8),\r\n                new Rectangle(area.x + 12, area.y + 5, 12, 12),\r\n                new Rectangle(area.x + 15, area.y + 24, 14, 6),\r\n                new Rectangle(area.x + 13, area.y + 38, 6, 8),\r\n                new Rectangle(area.x + 6, area.y + 38, 8, 10),\r\n                new Rectangle(area.x + 4, area.y + 11, 13, 16)\r\n            ];\r\n\r\n            for (let i = 0; i < 6; i++) {\r\n                this.createFrozenPart(velocotyies[i], area, inverse, color, i, 243, collisionAreas[i]);\r\n            }\r\n        };\r\n\r\n        this.animationHandler.frozenSwordMan(area, inverse, color, onComplete);\r\n    }\r\n\r\n    public createFrozenArcherDeath(area: Rectangle, inverse: boolean, color: number[]) {\r\n\r\n        let onComplete = () => {\r\n\r\n            let velocotyies = [\r\n                new Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n                new Vector((-Math.random() * 0.15), (-Math.random() * 0.3)),\r\n            ];\r\n\r\n            let collisionAreas = [\r\n                new Rectangle(area.x + 8, area.y + 2, 11, 6),\r\n                new Rectangle(area.x + 4, area.y + 4, 9, 14),\r\n                new Rectangle(area.x + 17, area.y + 3, 11, 11),\r\n                new Rectangle(area.x + 13, area.y + 7, 15, 15),\r\n                new Rectangle(area.x + 5, area.y + 15, 13, 17),\r\n                new Rectangle(area.x + 14, area.y + 19, 13, 13)\r\n            ];\r\n\r\n            for (let i = 0; i < 6; i++) {\r\n                this.createFrozenPart(velocotyies[i], area, inverse, color, i, 276, collisionAreas[i]);\r\n            }\r\n        };\r\n\r\n        this.animationHandler.frozenArcher(area, inverse, color, onComplete);\r\n    }\r\n\r\n    public update(delta: number, collidables: Rectangle[], player: Player, dynamicTiles: DynamicTile[]) {\r\n        let removeProjectile: Projectile[] = [];\r\n        let removeEnemyProjectile: Projectile[] = [];\r\n\r\n        removeProjectile = this.updateFriendslyProjectiles(delta, collidables, dynamicTiles);\r\n        removeEnemyProjectile = this.updateEnemyProjectiles(delta, player, collidables, dynamicTiles);\r\n\r\n        for (let projectile of removeProjectile) {\r\n            this.destroyProjectile(projectile, this.projectiles);\r\n        }\r\n\r\n        for (let projectile of removeEnemyProjectile) {\r\n            this.destroyProjectile(projectile, this.enemyProjectiles);\r\n        }\r\n    }\r\n\r\n    public destroyProjectile(projectile: Projectile, projectiles: Projectile[]) {\r\n        this.destroyAnimation(projectile);\r\n        this.animationHandler.remove(projectile.animation);\r\n        let index = projectiles.indexOf(projectile);\r\n        if (index != -1) {\r\n            projectiles.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public calculateDirection(area: Rectangle, enemy: Enemy) {\r\n        let velocity = new Vector((enemy.position.x + enemy.width / 2) - (area.x + (area.width / 2)), enemy.position.y - (area.y + (area.height / 2)))\r\n        velocity.normalize();\r\n        velocity.multiply((area.width / 90));\r\n\r\n        return velocity;\r\n    }\r\n\r\n    private updateEnemyProjectiles(delta: number, player: Player, collidables: Rectangle[], dynamicTiles: DynamicTile[]) {\r\n        let removeProjectiles: Projectile[] = [];\r\n        let shieldCollidables: Rectangle[] = [];\r\n        let playerCollisionArea = player.getProjectileCollisionArea();\r\n\r\n        shieldCollidables.push(...player.getShieldCollidables());\r\n\r\n        for (let projectile of this.enemyProjectiles) {\r\n            let frameVelocity = new Vector(projectile.velocity.x * delta, projectile.velocity.y * delta);\r\n            removeProjectiles = this.updateAndCollCheckEnemyProjectile(projectile, frameVelocity, delta, player, dynamicTiles, playerCollisionArea, shieldCollidables, removeProjectiles);\r\n            removeProjectiles = this.checkStaticObjectCollisions(projectile, frameVelocity, collidables, removeProjectiles);\r\n        }\r\n\r\n        return removeProjectiles;\r\n    }\r\n\r\n    private updateAndCollCheckEnemyProjectile(projectile: Projectile, frameVelocity: Vector, delta: number, player: Player, dynamicTiles: DynamicTile[], playerCollisionArea: Rectangle, shieldCollidables: Rectangle[], removeProjectiles: Projectile[]) {\r\n        let collisionData: CollisionData;\r\n        let shieldCollisionData: CollisionData;\r\n        let groundCollision: boolean;\r\n        projectile.updateForces(delta);\r\n\r\n        let velocity = player.getVelocity();\r\n        let deltaVelocity = new Vector(frameVelocity.x - velocity.x * delta, frameVelocity.y - velocity.y * delta);\r\n\r\n        collisionData = this.collisionDetection.checkProjectileCollisionY([playerCollisionArea], projectile, deltaVelocity, false);\r\n        shieldCollisionData = this.collisionDetection.checkProjectileCollisionY(shieldCollidables, projectile, deltaVelocity, false);\r\n\r\n        projectile.update(0, collisionData.collisionTimeY * frameVelocity.y, delta);\r\n\r\n        groundCollision = shieldCollisionData.groundCollision;\r\n\r\n        if (shieldCollisionData.groundCollision) {\r\n            this.setShieldDamage(player, projectile);\r\n            removeProjectiles.push(projectile);\r\n        } else if (collisionData.groundCollision) {\r\n            if (shieldCollidables.length > 0) {\r\n                this.setShieldDamage(player, projectile);\r\n            } else {\r\n                this.setDamageAnimation(player, projectile);\r\n            }\r\n\r\n            removeProjectiles.push(projectile);\r\n        }\r\n\r\n        if (projectile.projectileType == ProjectileType.Arrow) {\r\n            collisionData = this.collisionDetection.checkProjectileCollisionX([playerCollisionArea], projectile, deltaVelocity, false, false);\r\n            shieldCollisionData = this.collisionDetection.checkProjectileCollisionX(shieldCollidables, projectile, deltaVelocity, false, false);\r\n        } else {\r\n            collisionData = this.collisionDetection.checkProjectileCollisionX([playerCollisionArea], projectile, deltaVelocity, false, true);\r\n            shieldCollisionData = this.collisionDetection.checkProjectileCollisionX(shieldCollidables, projectile, deltaVelocity, false, true);\r\n        }\r\n\r\n        projectile.update(collisionData.collisionTimeX * frameVelocity.x, 0, delta);\r\n\r\n        if (!groundCollision) {\r\n            if (shieldCollisionData.wallCollision) {\r\n                this.setShieldDamage(player, projectile);\r\n                removeProjectiles.push(projectile);\r\n            } else if (collisionData.wallCollision) {\r\n                if (shieldCollidables.length > 0) {\r\n                    this.setShieldDamage(player, projectile);\r\n                } else {\r\n                    this.setDamageAnimation(player, projectile);\r\n                }\r\n                removeProjectiles.push(projectile);\r\n            }\r\n        }\r\n\r\n        if (projectile instanceof CollisionProjectile || projectile instanceof ParticleProjectile) {\r\n            if (projectile.distance <= 0) {\r\n                removeProjectiles.push(projectile);\r\n            }\r\n        }\r\n\r\n        if (this.collisionDetection.aabbCheckS(projectile.collisionArea, dynamicTiles.map(it => it.tile))) {\r\n            removeProjectiles.push(projectile);\r\n        }\r\n\r\n        return removeProjectiles;\r\n    }\r\n\r\n    private setDamageAnimation(player: Player, projectile: Projectile) {\r\n        this.animationHandler.bloodAnimation_A(new Vector(projectile.collisionArea.x, projectile.collisionArea.y), 20);\r\n        if (projectile.projectileType == ProjectileType.Arrow) {\r\n            this.createStickyArrowAnimation(player, projectile);\r\n            player.takeDamage(projectile.damage);\r\n        } else if (projectile.projectileType == ProjectileType.Sword && projectile instanceof CollisionProjectile) {\r\n            player.takeDamage(projectile.damage);\r\n        } else if (projectile.projectileType == ProjectileType.NecroBall || projectile.projectileType == ProjectileType.BlueBall) {\r\n            player.takeDamage(projectile.damage);\r\n        }\r\n    }\r\n\r\n    private checkStaticObjectCollisions(projectile: Projectile, frameVelocity: Vector, collidables: Rectangle[], removeProjectiles: Projectile[]) {\r\n        let collisionData: CollisionData;\r\n\r\n        collisionData = this.collisionDetection.checkProjectileCollisionY(collidables, projectile, frameVelocity, true);\r\n\r\n        if (collisionData.groundCollision) {\r\n            this.setStaticObjectAnimation(projectile);\r\n            removeProjectiles.push(projectile);\r\n        } else {\r\n            collisionData = this.collisionDetection.checkProjectileCollisionX(collidables, projectile, frameVelocity, true, false);\r\n\r\n            if (collisionData.wallCollision) {\r\n                this.setStaticObjectAnimation(projectile);\r\n                removeProjectiles.push(projectile);\r\n            }\r\n        }\r\n\r\n        return removeProjectiles;\r\n\r\n    }\r\n\r\n    private createStickyArrowAnimation(player: Player, projectile: Projectile) {\r\n        if (projectile.projectileType == ProjectileType.Arrow) {\r\n            let animationOffset: Vector;\r\n            animationOffset = new Vector((player.position.x) - (projectile.area.x), player.position.y - projectile.area.y);\r\n            player.damageAnimations.push(new StickyAnimation(this.animationHandler.createArrowHit(projectile, true), animationOffset));\r\n        }\r\n    }\r\n\r\n    private setStaticObjectAnimation(projectile: Projectile) {\r\n        if (projectile.projectileType == ProjectileType.Arrow) {\r\n            this.animationHandler.createArrowHit(projectile, false);\r\n        }\r\n    }\r\n\r\n    private updateAndCollCheck(projectile: Projectile, delta: number, collidables: Rectangle[], removeProjectiles: Projectile[], dynamicTiles: DynamicTile[]) {\r\n        let collisionData: CollisionData;\r\n\r\n        projectile.updateForces(delta);\r\n\r\n        let frameVelocity = new Vector(projectile.velocity.x * delta, projectile.velocity.y * delta);\r\n        collisionData = this.collisionDetection.checkProjectileCollisionY(collidables, projectile, frameVelocity, true);\r\n        projectile.update(0, collisionData.collisionTimeY * frameVelocity.y, delta);\r\n\r\n        if (projectile instanceof PhysicalProjectile) {\r\n            if (collisionData.groundCollision) {\r\n                projectile.onGroundCollision();\r\n            }\r\n        }\r\n\r\n        if (collisionData.groundCollision) {\r\n            projectile.velocity.y = 0;\r\n        }\r\n\r\n        collisionData = this.collisionDetection.checkProjectileCollisionX(collidables, projectile, frameVelocity, true, false);\r\n        projectile.update(collisionData.collisionTimeX * frameVelocity.x, 0, delta);\r\n\r\n        if (projectile instanceof Spell || projectile instanceof ParticleProjectile) {\r\n            if (projectile.distance <= 0 || collisionData.wallCollision) {\r\n                removeProjectiles.push(projectile);\r\n            }\r\n        }\r\n\r\n        if (collisionData.wallCollision) {\r\n            projectile.velocity.x = 0;\r\n        }\r\n\r\n        if (!(projectile instanceof PhysicalProjectile)) {\r\n            if (this.collisionDetection.aabbCheckS(projectile.collisionArea, dynamicTiles.map(it => it.tile))) {\r\n                removeProjectiles.push(projectile);\r\n            }\r\n        }\r\n\r\n        return removeProjectiles;\r\n    }\r\n\r\n    private updateFriendslyProjectiles(delta: number, collidables: Rectangle[], dynamicTiles: DynamicTile[]) {\r\n        let removeProjectiles: Projectile[] = [];\r\n\r\n        for (let projectile of this.projectiles) {\r\n            this.updateAndCollCheck(projectile, delta, collidables, removeProjectiles, dynamicTiles);\r\n        }\r\n\r\n        return removeProjectiles;\r\n    }\r\n\r\n    private setShieldDamage(player: Player, projectile: Projectile) {\r\n        if (projectile.projectileType == ProjectileType.Arrow) {\r\n            this.createDeadArrow(new Vector(projectile.area.x, projectile.area.y), projectile.animation.inverse, projectile.velocity);\r\n            this.drainShield(player, projectile, projectile.damage);\r\n        } else if (projectile.projectileType == ProjectileType.Sword && projectile instanceof CollisionProjectile) {\r\n            this.drainShield(player, projectile, projectile.damage);\r\n        } else if (projectile.projectileType == ProjectileType.NecroBall || projectile.projectileType == ProjectileType.BlueBall) {\r\n            this.drainShield(player, projectile, projectile.damage * 2);\r\n        }\r\n    }\r\n\r\n    private drainShield(player: Player, projectile: Projectile, amount: number) {\r\n        if (player.mana > 0) {\r\n            let extra: number;\r\n            if (this.shieldLevel != 0) {\r\n                extra = (amount / this.shieldLevel);\r\n            } else {\r\n                extra = amount * 2;\r\n            }\r\n\r\n            if (!player.useMana(amount + extra)) {\r\n                player.mana = 0;\r\n                if (projectile.area.x > player.position.x) {\r\n                    player.shieldExplosion(false);\r\n                } else {\r\n                    player.shieldExplosion(true);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    private destroyAnimation(projectile: Projectile) {\r\n        if (projectile instanceof ParticleProjectile) {\r\n            if (projectile.projectileType == ProjectileType.BlueBall) {\r\n                this.animationHandler.blue_explosion(new Vector(projectile.area.x, projectile.area.y), projectile.area.width);\r\n            } else if (projectile.projectileType == ProjectileType.NecroBall) {\r\n                this.animationHandler.necroball_explosion(new Vector(projectile.area.x, projectile.area.y), projectile.area.width);\r\n\r\n            } else {\r\n                this.animationHandler.fireball_explosion(new Vector(projectile.area.x, projectile.area.y), projectile.area.width);\r\n            }\r\n        }\r\n    }\r\n\r\n    private createFrozenPart(velocity: Vector, rect: Rectangle, inverse: boolean, color: number[], partIndex: number, baseNumber: number, collisionArea: Rectangle) {\r\n        let projectile: Projectile;\r\n\r\n        projectile = new PhysicalProjectile(velocity, new Rectangle(rect.x, rect.y, rect.width, rect.width), this.animationHandler.frozenPart(rect, inverse, color, partIndex, baseNumber), 1, collisionArea)\r\n\r\n        this.projectiles.push(projectile);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/projectileHandler.ts","import { DynamicTile, Vector } from '../model';\r\nimport { Player } from '../character/player';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { RenderHelper, RenderCall } from '../render';\r\nimport { Constants } from '../service/constants';\r\n\r\nexport class DynamicTileHandler {\r\n\r\n    public dynamicTiles: DynamicTile[];\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n    private constants = Constants.getInstance();\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public update(player: Player, delta: number) {\r\n\r\n        for (let dynamicTile of this.dynamicTiles) {\r\n\r\n            let travelDistance: number;\r\n\r\n            if (dynamicTile.verticalAxis) {\r\n                travelDistance = dynamicTile.velocity.y * delta;\r\n            } else {\r\n                travelDistance = dynamicTile.velocity.x * delta;\r\n            }\r\n\r\n            dynamicTile.update(delta, travelDistance);\r\n\r\n            if (player.lift == dynamicTile) {\r\n                if (dynamicTile.velocity.y < 0) {\r\n                    player.position.y = dynamicTile.tile.y - player.height;\r\n                } else {\r\n                    player.position.y = dynamicTile.tile.y - player.height;\r\n                }\r\n\r\n                player.liftVelocity = dynamicTile.velocity;\r\n\r\n                if (player.position.x > dynamicTile.tile.x + dynamicTile.tile.width || player.position.x + player.width < dynamicTile.tile.x) {\r\n                    player.lift = null;\r\n                    player.liftVelocity = new Vector(0, 0);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public createRenderCall(renderCalls: Map<number, RenderCall>) {\r\n\r\n        for (let dynamicTile of this.dynamicTiles) {\r\n\r\n            let set = renderCalls.get(dynamicTile.tile.key);\r\n\r\n            if(!set) {\r\n                renderCalls.set(dynamicTile.tile.key, new RenderCall());\r\n\t\t\t\tset = renderCalls.get(dynamicTile.tile.key);\r\n            }\r\n\r\n            set.vertecies = this.renderHelper.getVertecies(dynamicTile.tile.x, dynamicTile.tile.y, dynamicTile.tile.width, dynamicTile.tile.height, set.vertecies);\r\n            set.textureCoords = this.renderHelper.getTiledTextureCoordinates(dynamicTile.tile, set.textureCoords, this.constants.tileSize);\r\n            set.indecies = this.renderHelper.getIndecies(set.indecies);\r\n        }\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/dynamicTileHandler.ts","import { Particle } from '../particle/particle'\r\nimport { Vector, Tile, Rectangle, DebugElement, SpellType, TextureType } from '../model';\r\nimport { RenderHelper } from '../render/renderHelper';\r\nimport { RenderCall } from '../render/renderCall';\r\nimport { SimpleParticleRenderCall } from '../render/simpleParticleRenderCall';\r\nimport { ParticleRenderCall } from '../render/particleRenderCall';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { DebugHandler } from './debugHandler';\r\nimport { EnemyHandler } from './enemyHandler';\r\nimport { Enemy } from '../character/enemy';\r\nimport { Gravity } from '../forces/gravity';\r\nimport { IEnemy } from \"../character/index\";\r\n\r\nexport class ParticleHandler {\r\n\r\n    public frostParticles: Particle[] = [];\r\n    public frostEffectParticles: Particle[] = [];\r\n\r\n    public fireParticles: Particle[] = [];\r\n    public fireEffectParticles: Particle[] = [];\r\n\r\n    public necroEffectParticles: Particle[] = [];\r\n    public blueEffectParticles: Particle[] = [];\r\n\r\n    public shieldEffectParticles: Particle[] = [];\r\n    public tiles: Tile[];\r\n\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n    private gravity: Gravity = new Gravity(0.0001);\r\n    private noGravity: Gravity = new Gravity(0);\r\n\r\n    private fireColor = [1, 0.5, 0.2, 0.8];\r\n    private frostColor = [0.4, 0.9, 0.9, 0.9];\r\n    private frostEffectColor = [0.7, 0.9, 0.9, 0.9];\r\n    private shieldColor = [0.5, 0.4, 0.7, 0.7];\r\n    private necroColor = [0, 0.5, 0, 0.8];\r\n    private blueColor = [0.4, 0.5, 1, 1];\r\n\r\n    private flameParticleSettings: number[] = [\r\n        2, 5,\r\n        500, 700,\r\n        0.4, 0.5,\r\n        -0.05, -0.03,\r\n        0.1\r\n    ];\r\n\r\n    private largeFlameParticleSettings: number[] = [\r\n        4, 6,\r\n        500, 700,\r\n        0.4, 0.5,\r\n        -0.05, -0.03,\r\n        0.1\r\n    ];\r\n\r\n    private flameEffectSettings: number[] = [\r\n        1, 3,\r\n        100, 400,\r\n        0.3, 0.4,\r\n        -0.2, 0.05,\r\n        0.0\r\n    ];\r\n\r\n    private channelMagicEffectSettings: number[] = [\r\n        8, 4,\r\n        500, 500,\r\n        -10, 10,\r\n        0.1, 0.1,\r\n        -0.2,\r\n        0, Math.PI * 2\r\n    ];\r\n\r\n    private fireExplosionSettings: number[] = [\r\n        4, 8,\r\n        500, 500,\r\n        -20, 20,\r\n        0.05, 0.2,\r\n        -0.2,\r\n        0, Math.PI * 2,\r\n    ];\r\n\r\n    private magicEffectSettings: number[] = [\r\n        1, 3,\r\n        300, 300,\r\n        -0.01, 0.01,\r\n        -0.2, 0,\r\n        0.1\r\n    ];\r\n\r\n    private frostParticleSettings: number[] = [\r\n        3, 5,\r\n        600, 800,\r\n        0.4, 0.5,\r\n        -0.02, 0.02,\r\n        0.2\r\n    ]\r\n\r\n    private largefrostParticleSettings: number[] = [\r\n        5, 7,\r\n        600, 800,\r\n        0.5, 0.6,\r\n        -0.02, 0.02,\r\n        0.2\r\n    ]\r\n\r\n    private frostEffectParticleSettings: number[] = [\r\n        2, 4,\r\n        200, 800,\r\n        0.4, 0.5,\r\n        -0.08, 0.05,\r\n        0.0,\r\n    ]\r\n\r\n    private burnEffectSettings: number[] = [\r\n        10, 15,\r\n        100, 400,\r\n        0.05, -0.05,\r\n        -0.1, -0.1,\r\n        0.0\r\n    ];\r\n\r\n    private shieldEffectSettings: number[] = [\r\n        4, 6,\r\n        150, 250,\r\n        10, 10,\r\n        0.1, 0.1,\r\n        -0.2,\r\n        0, Math.PI * 2\r\n    ];\r\n\r\n    private invertedShieldEffectSettings: number[] = [\r\n        2, 4,\r\n        100, 100,\r\n        10, 10,\r\n        0.1, 0.1,\r\n        0.2,\r\n        -Math.PI * 0.52, -Math.PI * 1.30\r\n    ];\r\n\r\n    private shieldExplosionEffectSettings: number[] = [\r\n        4, 8,\r\n        1000, 1500,\r\n        -20, 20,\r\n        -0.2, 0.2,\r\n        -0.1,\r\n        -Math.PI * 0.52, Math.PI * 0.30\r\n    ];\r\n\r\n    private invertedShieldExplosionEffectSettings: number[] = [\r\n        4, 8,\r\n        1000, 1500,\r\n        -20, 20,\r\n        -0.2, 0.2,\r\n        -0.1,\r\n        -Math.PI * 0.52, -Math.PI * 1.30\r\n    ];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public createShieldExplosionEffect(position: Vector, inverse: boolean) {\r\n        position.y = position.y - 5;\r\n\r\n        let settings: number[] = [];\r\n        if (inverse) {\r\n            settings = this.invertedShieldExplosionEffectSettings;\r\n        } else {\r\n            settings = this.shieldExplosionEffectSettings;\r\n        }\r\n\r\n        let effectParticles = this.createCircleParticles(position, 40, 40, false, settings, 100);\r\n\r\n        this.shieldEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createShieldEffect(position: Vector, inverse: boolean, shieldLevel: number) {\r\n        position.y = position.y + 5;\r\n\r\n        let effectParticles = this.createCenterCircleParticles(position, 10, 20, this.shieldEffectSettings, false, 0, 0, 100, 0, 1 + shieldLevel);\r\n\r\n        this.shieldEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createFireBall(position: Vector, size: number, inverse: boolean, offsetX: number) {\r\n\r\n        let effectParticles = this.fireBall(position, size, inverse, offsetX);\r\n\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createBlueFireBall(position: Vector, size: number, inverse: boolean, offsetX: number) {\r\n\r\n        let effectParticles = this.fireBall(position, size, inverse, offsetX);\r\n\r\n        this.blueEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createBlueExplosion(position: Vector, size: number) {\r\n        let effectParticles = this.fireballExplosion(position, size);\r\n\r\n        this.blueEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createNecroFireBall(position: Vector, size: number, inverse: boolean, offsetX: number) {\r\n\r\n        let effectParticles = this.fireBall(position, size, inverse, offsetX);\r\n\r\n        this.necroEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createNecroballExplosion(position: Vector, size: number) {\r\n        let effectParticles = this.fireballExplosion(position, size);\r\n\r\n        this.necroEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createFireballExplosion(position: Vector, size: number) {\r\n\r\n        let effectParticles = this.fireballExplosion(position, size);\r\n\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    private fireballExplosion(position: Vector, size: number) {\r\n        let radius = size / 2;\r\n        let particleSize = 2 + (size / 20);\r\n\r\n        position.x = position.x + radius;\r\n        position.y = position.y + radius;\r\n\r\n        let settings: number[] = [\r\n            particleSize, particleSize * 2,\r\n            500, 500,\r\n            -20, 20,\r\n            0.05, 0.2,\r\n            -0.2,\r\n            0, Math.PI * 2,\r\n        ];\r\n\r\n        let effectParticles = this.createCircleParticles(position, 0, 0, false, settings, 50);\r\n\r\n        return effectParticles;\r\n    }\r\n\r\n    public createChannelMagic(position: Vector, inverse: boolean) {\r\n\r\n        let positionOffset = new Vector(position.x + 25, position.y + 45);\r\n\r\n        let effectParticles = this.createCenterCircleParticles(positionOffset, 30, 40, this.channelMagicEffectSettings, true, 3, 10, 100, 0, 2);\r\n\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createNecroChannelMagic(position: Vector, inverse: boolean, offsetX: number, offsetY: number, offsetXInverse: number, offsetYInverse: number) {\r\n\r\n        let effectParticles = this.channelCenter(position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse);\r\n\r\n        this.necroEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createBlueChannelMagic(position: Vector, inverse: boolean, offsetX: number, offsetY: number, offsetXInverse: number, offsetYInverse: number) {\r\n\r\n        let effectParticles = this.channelCenter(position, inverse, offsetX, offsetY, offsetXInverse, offsetYInverse);\r\n\r\n        this.blueEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createMagicEffect(position: Vector, inverse: boolean) {\r\n\r\n        let offSetX = this.rand(-10, 10) + 22;\r\n        let offSetY = this.rand(-5, 10) + 45;\r\n        let positionOffset = new Vector(position.x + offSetX, position.y + offSetY);\r\n\r\n        let effectParticles = this.createParticles(positionOffset, inverse, this.magicEffectSettings, 1);\r\n\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createFrostBlast(position: Vector, inverse: boolean, frostLevel: number) {\r\n\r\n        let positionOffset = new Vector(position.x, position.y);\r\n        positionOffset.y += 45;\r\n\r\n        if (inverse) {\r\n            positionOffset.x += 10;\r\n        } else {\r\n            positionOffset.x += 40;\r\n        }\r\n\r\n        let settings: number[];\r\n\r\n        if (frostLevel == 3) {\r\n            settings = this.largefrostParticleSettings;\r\n        } else {\r\n            settings = this.frostParticleSettings;\r\n        }\r\n\r\n        let particles = this.createParticles(positionOffset, inverse, settings, 3 + (frostLevel * 3));\r\n        let effectParticles = this.createParticles(positionOffset, inverse, this.frostEffectParticleSettings, 2 + (frostLevel * 1));\r\n\r\n        this.frostEffectParticles.push(...effectParticles);\r\n        this.frostParticles.push(...particles);\r\n    }\r\n\r\n    public createFireBlast(position: Vector, inverse: boolean, fireLevel: number) {\r\n\r\n        let positionOffset = new Vector(position.x, position.y);\r\n        positionOffset.y += 45;\r\n\r\n        if (inverse) {\r\n            positionOffset.x += 10;\r\n        } else {\r\n            positionOffset.x += 40;\r\n        }\r\n\r\n        let settings: number[];\r\n\r\n        if (fireLevel == 3) {\r\n            settings = this.largeFlameParticleSettings;\r\n        } else {\r\n            settings = this.flameParticleSettings;\r\n        }\r\n\r\n        let particles = this.createParticles(positionOffset, inverse, settings, 3 + (fireLevel * 3));\r\n        let effectParticles = this.createParticles(positionOffset, inverse, this.flameEffectSettings, 2 + (fireLevel * 1));\r\n\r\n        this.fireParticles.push(...particles);\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createBurn(position: Vector) {\r\n        let positionCopy = new Vector(position.x, position.y);\r\n        positionCopy.x += this.rand(-10, 15) + 25;\r\n        positionCopy.y += this.rand(-10, 10) + 25;\r\n\r\n        let effectParticles = this.createParticles(positionCopy, false, this.burnEffectSettings, 1);\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public createFireDeath(position: Vector) {\r\n        position.x += this.rand(-15, 15);\r\n\r\n        position.x += 25;\r\n        position.y += 25;\r\n\r\n        let effectParticles = this.createParticles(position, false, this.burnEffectSettings, 5);\r\n        this.fireEffectParticles.push(...effectParticles);\r\n    }\r\n\r\n    public update(delta: number, enemies: IEnemy[]) {\r\n\r\n        this.updateEffectParticles(this.blueEffectParticles, delta);\r\n        this.updateEffectParticles(this.necroEffectParticles, delta);\r\n        this.updateEffectParticles(this.fireEffectParticles, delta);\r\n        this.updateEffectParticles(this.frostEffectParticles, delta);\r\n        this.updateEffectParticles(this.shieldEffectParticles, delta);\r\n\r\n        this.updateParticles(this.frostParticles, this.noGravity, delta, enemies, SpellType.frostBlast);\r\n        this.updateParticles(this.fireParticles, this.gravity, delta, enemies, SpellType.fireBlast);\r\n    }\r\n\r\n    public createRenderCalls(renderCalls: SimpleParticleRenderCall[]) {\r\n        let fireRenderCall: SimpleParticleRenderCall = new SimpleParticleRenderCall();\r\n        let allFireParticles = this.fireParticles.concat(this.fireEffectParticles)\r\n\r\n        let frostRenderCall: SimpleParticleRenderCall = new SimpleParticleRenderCall();\r\n        let frostEffectRenderCall: SimpleParticleRenderCall = new SimpleParticleRenderCall();\r\n        frostEffectRenderCall.textureType = TextureType.frostTexture;\r\n\r\n        let shieldEffectRenderCall: SimpleParticleRenderCall = new SimpleParticleRenderCall();\r\n        shieldEffectRenderCall.textureType = TextureType.particleTexture;\r\n\r\n        let necroFireRenderCall: SimpleParticleRenderCall = new SimpleParticleRenderCall();\r\n        necroFireRenderCall.textureType = TextureType.particleTexture;\r\n\r\n        let blueFireRenderCall: SimpleParticleRenderCall = new SimpleParticleRenderCall();\r\n        blueFireRenderCall.textureType = TextureType.particleTexture;\r\n\r\n        renderCalls.push(this.addParticles(fireRenderCall, allFireParticles, this.fireColor));\r\n        renderCalls.push(this.addParticles(frostEffectRenderCall, this.frostEffectParticles, this.frostEffectColor));\r\n        renderCalls.push(this.addParticles(frostRenderCall, this.frostParticles, this.frostColor));\r\n        renderCalls.push(this.addParticles(shieldEffectRenderCall, this.shieldEffectParticles, this.shieldColor))\r\n        renderCalls.push(this.addParticles(necroFireRenderCall, this.necroEffectParticles, this.necroColor))\r\n        renderCalls.push(this.addParticles(blueFireRenderCall, this.blueEffectParticles, this.blueColor))\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n    private channelCenter(position: Vector, inverse: boolean, offsetX: number, offsetY: number, offsetXInverse: number, offsetYInverse: number) {\r\n\r\n        let positionOffset: Vector;\r\n\r\n        if (inverse) {\r\n            positionOffset = new Vector(position.x + offsetXInverse, position.y + offsetYInverse);\r\n        } else {\r\n            positionOffset = new Vector(position.x + offsetX, position.y + offsetY);\r\n        }\r\n\r\n        return this.createCenterCircleParticles(positionOffset, 30, 40, this.channelMagicEffectSettings, true, 3, 10, 100, 0, 2);\r\n    }\r\n\r\n    private fireBall(position: Vector, size: number, inverse: boolean, offsetX: number) {\r\n\r\n        let positionOffset = new Vector(position.x, position.y);\r\n        let strength = size / 2;\r\n        let radius = strength / 2;\r\n        let offset = strength / 10;\r\n        let settingFactor = size / 100;\r\n\r\n        if (inverse) {\r\n            positionOffset.x += (strength - offsetX);\r\n        } else {\r\n            positionOffset.x += (strength + offsetX);\r\n        }\r\n\r\n        positionOffset.y += strength;\r\n\r\n        let channelMagicEffectSettings: number[] = [\r\n            4 + (4 * settingFactor), 2 + (2 * settingFactor),\r\n            500, 500,\r\n            -10, 10,\r\n            0, 0,\r\n            -0.2\r\n        ];\r\n\r\n        let effectParticles = this.createCenterCircleParticles(positionOffset, radius, radius, channelMagicEffectSettings, false, offset, strength, 200, -offset, 2);\r\n\r\n        return effectParticles;\r\n    }\r\n\r\n    private addParticles(renderCall: SimpleParticleRenderCall, particles: Particle[], color: number[]) {\r\n        for (let particle of particles) {\r\n            renderCall.vertecies.push(...[particle.area.x, particle.area.y]);\r\n            renderCall.pointSize.push(particle.area.width);\r\n            renderCall.color = color;\r\n            renderCall.itemCount = particles.length;\r\n        }\r\n\r\n        return renderCall;\r\n    }\r\n\r\n    private updateEffectParticles(particleCollection: Particle[], delta: number) {\r\n        let removeCollection: Particle[] = [];\r\n\r\n        for (let particle of particleCollection) {\r\n            this.updateParticle(particle, delta);\r\n            let collisionSize = particle.area.width / 2;\r\n\r\n            if (particle.lifeTime <= 0 || particle.area.width < 0 || particle.dead) {\r\n                removeCollection.push(particle);\r\n            }\r\n        }\r\n\r\n        this.removeParticles(removeCollection, particleCollection);\r\n    }\r\n\r\n    private updateParticles(particleCollection: Particle[], gravity: Gravity, delta: number, enemies: IEnemy[], spelltype: SpellType) {\r\n\r\n        let removeCollection: Particle[] = [];\r\n\r\n        for (let particle of particleCollection) {\r\n            gravity.apply(particle.velocity, delta);\r\n            this.updateParticle(particle, delta);\r\n            let collisionSize = particle.area.width / 2;\r\n            let collisionRectangle = new Rectangle(particle.area.x, particle.area.y, collisionSize, collisionSize);\r\n\r\n            if (!particle.dead) {\r\n                for (let enemy of enemies) {\r\n                    if (this.collisionDetection.aabbCheck(collisionRectangle, enemy.getCollisionArea())) {\r\n                        if (spelltype == SpellType.frostBlast) {\r\n                            enemy.freeze();\r\n                        } else {\r\n                            enemy.burn();\r\n                        }\r\n\r\n                        particle.dead = true;\r\n                        particle.lifeTime = particle.lifeTime > 10 ? this.rand(10, 20) : particle.lifeTime;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (particle.lifeTime <= 0 || particle.area.width < 0) {\r\n                removeCollection.push(particle);\r\n            }\r\n        }\r\n\r\n        this.removeParticles(removeCollection, particleCollection);\r\n    }\r\n\r\n    private removeParticles(removeCollection: Particle[], particleCollection: Particle[]) {\r\n        for (let particle of removeCollection) {\r\n            let index = particleCollection.indexOf(particle);\r\n\r\n            if (index != -1) {\r\n                particleCollection.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    private updateParticle(particle: Particle, delta: number) {\r\n        particle.area.x += particle.velocity.x * delta;\r\n        particle.area.y += particle.velocity.y * delta;\r\n        particle.lifeTime -= delta;\r\n        particle.area.width += particle.growth;\r\n        particle.area.height += particle.growth;\r\n    }\r\n\r\n    private createParticles(position: Vector, inverse: boolean, settings: number[], particleNumber: number) {\r\n\r\n        let newParticles: Particle[] = []\r\n\r\n        for (let i = 0; i < particleNumber; i++) {\r\n\r\n            let particleSize = this.rand(settings[0], settings[1]);\r\n\r\n            let velocity: Vector;\r\n            let area: Rectangle;\r\n            let deltaX: number;\r\n\r\n            if (inverse) {\r\n                velocity = new Vector(-this.rand(settings[4], settings[5]), this.rand(settings[6], settings[7]));\r\n                area = new Rectangle(position.x, position.y, particleSize, particleSize);\r\n                deltaX = this.collisionDetection.getClosestX(new Rectangle(area.x - settings[3], area.y - 8, settings[3], 1), this.tiles, inverse) - area.x;\r\n            } else {\r\n                velocity = new Vector(this.rand(settings[4], settings[5]), this.rand(settings[6], settings[7]));\r\n                area = new Rectangle(position.x, position.y, particleSize, particleSize);\r\n                deltaX = this.collisionDetection.getClosestX(new Rectangle(area.x, area.y - 8, settings[3], 1), this.tiles, inverse) - area.x;\r\n            }\r\n\r\n            let lifeTime: number;\r\n            let collTime = Math.abs((deltaX / velocity.x));\r\n            if (collTime < settings[3]) {\r\n                if (collTime < settings[2]) {\r\n                    lifeTime = this.rand(collTime, collTime + 10);\r\n                } else {\r\n                    lifeTime = this.rand(settings[2], collTime + 10);\r\n                }\r\n            } else {\r\n                lifeTime = this.rand(settings[2], settings[3]);\r\n            }\r\n\r\n            let growth = settings[8];\r\n            let particle = new Particle(area, lifeTime, velocity, growth);\r\n\r\n            newParticles.push(particle);\r\n        }\r\n\r\n        return newParticles;\r\n    }\r\n\r\n    private createCenterCircleParticles(position: Vector, radiusX: number, radiusY: number, settings: number[], inward: boolean, centerOffsetValue: number, centerSize: number, centerLifeTime: number, centerGrowth: number, particleNumber: number) {\r\n\r\n        let newParticles: Particle[] = [];\r\n\r\n        let centerOffSetX = this.rand(-centerOffsetValue, centerOffsetValue);\r\n        let centerOffSetY = this.rand(-centerOffsetValue, centerOffsetValue);\r\n        let centerParticle = new Particle(new Rectangle(position.x + centerOffSetX, position.y + centerOffSetY, centerSize, centerSize), centerLifeTime, new Vector(0, 0), centerGrowth);\r\n\r\n        newParticles.push(centerParticle);\r\n        newParticles.push(...this.createCircleParticles(position, radiusX, radiusY, inward, settings, particleNumber));\r\n\r\n        return newParticles;\r\n    }\r\n\r\n    private createCircleParticles(position: Vector, radiusX: number, radiusY: number, inward: boolean, settings: number[], particleNumber: number) {\r\n\r\n        let particles: Particle[] = [];\r\n\r\n        for (let i = 0; i < particleNumber; i++) {\r\n\r\n            let particleSize = this.rand(settings[0], settings[1]);\r\n            let lifeTime = this.rand(settings[2], settings[3]);\r\n            let offSet = this.rand(settings[4], settings[5]);\r\n\r\n            let x: number;\r\n            let y: number;\r\n            let velocity: Vector;\r\n            let angle = this.rand(settings[9], settings[10]);\r\n            x = position.x + ((radiusX + offSet) * Math.cos(angle));\r\n            y = position.y + ((radiusY + offSet) * Math.sin(angle));\r\n\r\n            if (inward) {\r\n                velocity = new Vector(-(x - position.x), -(y - position.y));\r\n            } else {\r\n                velocity = new Vector(x - position.x, y - position.y);\r\n            }\r\n\r\n            velocity.normalize();\r\n            velocity.multiply(this.rand(settings[6], settings[7]));\r\n\r\n            let particle = new Particle(new Rectangle(x, y, particleSize, particleSize), lifeTime, velocity, settings[8]);\r\n\r\n            particles.push(particle);\r\n        };\r\n\r\n        return particles;\r\n    }\r\n\r\n    private rand(min: number, max: number) {\r\n        return min + (Math.random() * (max - min))\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/particleHandler.ts","import { Rectangle, Vector } from '../model';\r\n\r\nexport class Particle {\r\n\r\n    public area: Rectangle;\r\n    public lifeTime: number;\r\n    public velocity: Vector;\r\n    public growth: number;\r\n    public dead: boolean;\r\n\r\n    constructor(area: Rectangle, lifeTime: number, velocity: Vector, growth: number) {\r\n        this.area = area;\r\n        this.lifeTime = lifeTime;\r\n        this.velocity = velocity;\r\n        this.growth = growth;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/particle/particle.ts","import { SpellType, TextureType } from '../model';\r\n\r\nexport class SimpleParticleRenderCall {\r\n   public vertecies: number[];\r\n   public pointSize: number[];\r\n   public color: number[];\r\n   public itemCount: number;\r\n   public textureType: TextureType;\r\n\r\n   constructor() {\r\n       this.vertecies = [];\r\n       this.pointSize = [];\r\n       this.color = [];\r\n       this.itemCount = 0;\r\n       this.textureType = TextureType.particleTexture;\r\n   }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/simpleParticleRenderCall.ts","import { Context } from '../context';\r\nimport { SimpleParticleRenderCall } from './simpleParticleRenderCall';\r\nimport { TextureType } from '../model';\r\n\r\nexport class SimpleParticleRenderer {\r\n\r\n\tprivate context: Context;\r\n\tprivate gl: WebGLRenderingContext;\r\n\tprivate shaderProgram: WebGLShader;\r\n\r\n\tprivate vertexBuffer: WebGLBuffer;\r\n\tprivate pointSizeBuffer: WebGLBuffer;\r\n\r\n\tprivate sizeAttributeLocation: number;\r\n\tprivate positionLocation: number;\r\n\tprivate resolutionLocation: WebGLUniformLocation;\r\n\tprivate cameraLocation: WebGLUniformLocation;\r\n\tprivate colorUniformLocation: WebGLUniformLocation;\r\n\r\n\tconstructor(context: Context) {\r\n\t\tthis.context = context;\r\n\t\tthis.gl = this.context.gl;\r\n\t\tthis.shaderProgram = this.context.simpleParticleProgram;\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n\t\tthis.gl.bindAttribLocation(this.shaderProgram, 1, \"a_pointSize\");\r\n\r\n\t\tthis.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n\t\tthis.sizeAttributeLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_pointSize\");\r\n\t\tthis.resolutionLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_resolution\");\r\n\t\tthis.cameraLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_camera\");\r\n\t\tthis.colorUniformLocation = this.gl.getUniformLocation(this.shaderProgram, \"u_color\");\r\n\r\n\t\tthis.vertexBuffer = this.gl.createBuffer();\r\n\t\tthis.pointSizeBuffer = this.gl.createBuffer();\r\n\t}\r\n\r\n\tpublic render(renderCalls: SimpleParticleRenderCall[], camera: [number, number]) {\r\n\t\tthis.gl.useProgram(this.shaderProgram);\r\n\t\tfor (let renderCall of renderCalls) {\r\n\r\n\t\t\tif (renderCall.itemCount > 1) {\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.positionLocation);\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.sizeAttributeLocation);\r\n\r\n\t\t\t\tthis.gl.uniform2f(this.resolutionLocation, this.context.gl.canvas.width, this.context.gl.canvas.height);\r\n\t\t\t\tthis.gl.uniform2f(this.cameraLocation, camera[0], camera[1]);\r\n\t\t\t\tthis.gl.uniform4f(this.colorUniformLocation, renderCall.color[0], renderCall.color[1], renderCall.color[2], renderCall.color[3]);\r\n\r\n\t\t\t\tif (renderCall.textureType == TextureType.particleTexture) {\r\n\t\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.genericParticleTexture);\r\n\t\t\t\t} else if(renderCall.textureType == TextureType.frostTexture) {\r\n\t\t\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.context.frostParticelTexture);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n\t\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.positionLocation);\r\n\t\t\t\tthis.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.pointSizeBuffer);\r\n\t\t\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.pointSize), this.gl.STATIC_DRAW);\r\n\t\t\t\tthis.gl.enableVertexAttribArray(this.sizeAttributeLocation);\r\n\t\t\t\tthis.gl.vertexAttribPointer(this.sizeAttributeLocation, 1, this.gl.FLOAT, false, 0, 0);\r\n\r\n\t\t\t\tthis.gl.drawArrays(this.gl.POINTS, 0, renderCall.itemCount);\r\n\r\n\t\t\t\tthis.gl.disableVertexAttribArray(this.positionLocation);\r\n\t\t\t\tthis.gl.disableVertexAttribArray(this.sizeAttributeLocation);\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/simpleParticleRenderer.ts","import { Tile, Spell, Vector, Rectangle, ParticleProjectile, SpellType } from '../model';\r\nimport { Enemy } from '../character/enemy';\r\nimport { Player } from '../character/player';\r\nimport { Swordman } from '../character/swordman';\r\nimport { Archer, Shadow, Apprentice, Screamer, MasterSorcerer, IEnemy } from '../character/';\r\nimport { RenderCall, RenderHelper, ColorRenderCall } from '../render';\r\nimport { Context } from '../context';\r\nimport { ProjectileHandler } from './projectileHandler';\r\nimport { AnimationHandler } from './animationHandler';\r\nimport { ParticleHandler } from './particleHandler';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { DeathType } from '../character/deathType';\r\n\r\nexport class EnemyHandler {\r\n\r\n    public enemies: IEnemy[] = [];\r\n\r\n    private context: Context;\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private projectileHandler: ProjectileHandler;\r\n    private animationHandler: AnimationHandler;\r\n    private particleHandler: ParticleHandler;\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n\r\n    constructor(context: Context, projectileHandler: ProjectileHandler, animationHandler: AnimationHandler, particleHandler: ParticleHandler) {\r\n        this.context = context;\r\n        this.projectileHandler = projectileHandler;\r\n        this.animationHandler = animationHandler;\r\n        this.particleHandler = particleHandler;\r\n    }\r\n\r\n    public update(delta: number, tiles: Tile[], player: Player) {\r\n        for (let enemy of this.enemies) {\r\n            enemy.update(delta, tiles, player);\r\n            this.enemyCollisionCheck(delta);\r\n            this.checkBurn(enemy);\r\n            this.checkEnemyDeath(enemy);\r\n        }\r\n    }\r\n\r\n    createRenderCall(renderCall: ColorRenderCall) {\r\n        for (let enemy of this.enemies) {\r\n            if (enemy.inverse) {\r\n                renderCall.vertecies = this.renderHelper.getInverseVertecies(enemy.position.x, enemy.position.y, enemy.width, enemy.height, renderCall.vertecies);\r\n            } else {\r\n                renderCall.vertecies = this.renderHelper.getVertecies(enemy.position.x, enemy.position.y, enemy.width, enemy.height, renderCall.vertecies);\r\n            }\r\n            renderCall.textureCoords.push.apply(renderCall.textureCoords, enemy.currentAnimation.getCurrentFrame());\r\n            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n            renderCall.color = this.renderHelper.getColor(renderCall.color, enemy.color);\r\n        }\r\n\r\n        return renderCall;\r\n    }\r\n\r\n    remove(enemy: IEnemy) {\r\n        let index = this.enemies.indexOf(enemy);\r\n        if (index >= 0) {\r\n            this.enemies.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    private checkBurn(enemy: IEnemy) {\r\n        if (enemy.burnValue > 0) {\r\n            let collarea = enemy.getCollisionArea();\r\n            let pos = new Vector(collarea.x, collarea.y);\r\n            this.particleHandler.createBurn(pos);\r\n        }\r\n    }\r\n\r\n    private checkEnemyDeath(enemy: IEnemy) {\r\n        if (enemy.dead) {\r\n            if (enemy.deathType == DeathType.freezeDeath) {\r\n                if (enemy instanceof Swordman) {\r\n                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n                    this.projectileHandler.createFrozenSwordManDeath(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse, enemy.color);\r\n                } else if (enemy instanceof Archer) {\r\n                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n                    this.projectileHandler.createFrozenArcherDeath(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse, enemy.color);\r\n                } else if (enemy instanceof Shadow) {\r\n                    this.projectileHandler.createShadow_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Apprentice) {\r\n                    this.projectileHandler.createApprentice_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Screamer) {\r\n                    this.projectileHandler.createScreamer_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof MasterSorcerer) {\r\n                    this.projectileHandler.createMasterSorcerer_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                }\r\n\r\n                this.remove(enemy);\r\n            } else if (enemy.deathType == DeathType.fireDeath) {\r\n                if (enemy instanceof Swordman) {\r\n                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n                    this.animationHandler.fireDeathSwordman(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Archer) {\r\n                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n                    this.animationHandler.fireDeathArcher(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Shadow) {\r\n                    this.projectileHandler.createShadow_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Apprentice) {\r\n                    this.projectileHandler.createApprentice_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Screamer) {\r\n                    this.projectileHandler.createScreamer_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof MasterSorcerer) {\r\n                    this.projectileHandler.createMasterSorcerer_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                }\r\n\r\n                this.remove(enemy);\r\n            } else if (enemy.deathType == DeathType.swordDeath) {\r\n                if (enemy instanceof Archer) {\r\n                    this.animationHandler.audioHandler.playSound(\"swordmandeath.wav\", 2, 0, 0.3);\r\n                    this.animationHandler.createArcherDeath(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Shadow) {\r\n                    this.projectileHandler.createShadow_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Apprentice) {\r\n                    this.projectileHandler.createApprentice_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof Screamer) {\r\n                    this.projectileHandler.createScreamer_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                } else if (enemy instanceof MasterSorcerer) {\r\n                    this.projectileHandler.createMasterSorcerer_death(new Rectangle(enemy.position.x, enemy.position.y, enemy.width, enemy.height), enemy.inverse);\r\n                }\r\n\r\n                this.remove(enemy);\r\n            }\r\n        }\r\n    }\r\n\r\n    private enemyCollisionCheck(delta: number) {\r\n        for (let projectile of this.projectileHandler.projectiles) {\r\n\r\n            if (projectile instanceof ParticleProjectile) {\r\n\r\n                let removeEnemy: Enemy[] = [];\r\n\r\n                for (let enemy of this.enemies) {\r\n\r\n                    let velocityDelta = new Vector((projectile.velocity.x * delta) - (enemy.toMove.x), (projectile.velocity.y * delta) - (enemy.toMove.y));\r\n                    let collisionData = this.collisionDetection.checkProjectileCollisionX([enemy.getCollisionArea()], projectile, velocityDelta, false, true);\r\n\r\n                    if (collisionData.wallCollision) {\r\n\r\n                        enemy.takeDamage(projectile.area.width, SpellType.fireball)\r\n                        if (projectile.inverse) {\r\n                            this.animationHandler.bloodAnimation_B_Left(new Vector(enemy.position.x + enemy.width/2, projectile.area.y + (projectile.area.height/2) - 30), 75);\r\n                        } else {\r\n                            this.animationHandler.bloodAnimation_B_Right(new Vector(enemy.position.x + enemy.width/2, projectile.area.y + (projectile.area.height/2) - 30), 75);\r\n                        }\r\n\r\n                        this.projectileHandler.destroyProjectile(projectile, this.projectileHandler.projectiles);\r\n\r\n                        if (enemy.dead) {\r\n                            if (enemy instanceof Swordman) {\r\n                                this.projectileHandler.createSwordman_death(enemy.position, enemy.inverse, this.projectileHandler.calculateDirection(projectile.area, enemy));\r\n                                removeEnemy.push(enemy);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                for (let enemy of removeEnemy) {\r\n                    this.remove(enemy);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/enemyHandler.ts","import { Vector } from './model';\r\n\r\nexport class Camera {\r\n    private cameraOffset: [number, number] = [800, 500];\r\n\r\n    private maxX: number;\r\n    private maxXCameraPosition: number;\r\n\r\n    private maxY: number;\r\n    private maxYCameraPosition: number;\r\n\r\n    constructor(public position: [number, number], public sceneSize: [number, number], private gameSize: [number, number]) {\r\n        this.position = position;\r\n        this.sceneSize = sceneSize;\r\n        \r\n        this.maxX = 100 + (this.sceneSize[0] - this.cameraOffset[0]);\r\n        this.maxXCameraPosition = this.gameSize[0] - (this.maxX + this.cameraOffset[0] - 100);\r\n\r\n        this.maxY = (this.sceneSize[1] - this.cameraOffset[1]);\r\n        this.maxYCameraPosition = this.gameSize[1] - (this.maxY + this.cameraOffset[1]);\r\n    }\r\n\r\n    public update(focusPosition: Vector) {\r\n\r\n        if(focusPosition.x - this.position[0] > this.cameraOffset[0] - 100) {\r\n            this.position[0] = focusPosition.x - this.cameraOffset[0] + 100;\r\n            \r\n            if((focusPosition.x + this.maxX) > this.gameSize[0]) {\r\n                this.position[0] = this.maxXCameraPosition;\r\n            }\r\n        } else if(focusPosition.x - this.position[0] < this.sceneSize[0] - this.cameraOffset[0]) {\r\n            this.position[0] = focusPosition.x - (this.sceneSize[0] - this.cameraOffset[0]);\r\n            if(this.position[0] < 0) {\r\n                this.position[0] = 0;\r\n            }\r\n        }\r\n\r\n        if(focusPosition.y - this.position[1] > this.cameraOffset[1]) {\r\n            this.position[1] = focusPosition.y - this.cameraOffset[1];\r\n\r\n            if((focusPosition.y + this.maxY) > this.gameSize[1]) {\r\n                this.position[1] = this.maxYCameraPosition;\r\n            }\r\n\r\n        } else if(focusPosition.y - this.position[1] < this.sceneSize[1] - this.cameraOffset[1]) {\r\n            this.position[1] = focusPosition.y - (this.sceneSize[1] - this.cameraOffset[1]);\r\n\r\n             if(this.position[1] < 0) {\r\n                this.position[1] = 0;\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/camera.ts","import { Context } from '../context';\r\nimport { TextureType, Vector } from '../model';\r\nimport { Matrix3, DynamicRenderCall } from './';\r\n\r\nexport class DynamicRenderer {\r\n\r\n    private context: Context;\r\n    private gl: WebGLRenderingContext;\r\n    private shaderProgram: WebGLShader;\r\n\r\n    private vertexBuffer: WebGLBuffer;\r\n    private textureCoordBuffer: WebGLBuffer;\r\n    private indeciesBuffer: WebGLBuffer;\r\n    private matricesBuffer: WebGLBuffer;\r\n\r\n    private matrixAttributeLocation: number;\r\n    private positionLocation: number;\r\n    private textureCoordAttribute: number;\r\n\r\n    private projectionMatrix: number[];\r\n\r\n    constructor(context: Context) {\r\n        this.context = context;\r\n        this.gl = this.context.gl;\r\n        this.shaderProgram = this.context.dynamicVertecyProgram;\r\n        this.gl.useProgram(this.shaderProgram);\r\n\r\n        this.gl.bindAttribLocation(this.shaderProgram, 0, \"a_position\");\r\n        this.gl.bindAttribLocation(this.shaderProgram, 1, \"a_texture_coord\");\r\n        this.gl.bindAttribLocation(this.shaderProgram, 2, \"a_matrix\");\r\n\r\n        this.positionLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_position\");\r\n        this.textureCoordAttribute = this.gl.getAttribLocation(this.shaderProgram, \"a_texture_coord\");\r\n        this.matrixAttributeLocation = this.gl.getAttribLocation(this.shaderProgram, \"a_matrix\");\r\n\r\n        this.vertexBuffer = this.gl.createBuffer();\r\n        this.textureCoordBuffer = this.gl.createBuffer();\r\n        this.indeciesBuffer = this.gl.createBuffer();\r\n        this.matricesBuffer = this.gl.createBuffer();\r\n    }\r\n\r\n    public render(renderCalls: DynamicRenderCall[]) {\r\n        this.gl.useProgram(this.shaderProgram);\r\n        for (let renderCall of renderCalls) {\r\n            if (renderCall.vertecies.length > 0) {\r\n\r\n                this.gl.enableVertexAttribArray(this.positionLocation);\r\n                this.gl.enableVertexAttribArray(this.textureCoordAttribute);\r\n                this.gl.enableVertexAttribArray(this.matrixAttributeLocation);\r\n                this.gl.enableVertexAttribArray(this.matrixAttributeLocation + 1);\r\n                this.gl.enableVertexAttribArray(this.matrixAttributeLocation + 2);\r\n\r\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.vertecies), this.gl.STATIC_DRAW);\r\n\r\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.textureCoords), this.gl.STATIC_DRAW);\r\n\r\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.matricesBuffer);\r\n                this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(renderCall.matrices), this.gl.STATIC_DRAW);\r\n\r\n                this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n                this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(renderCall.indecies), this.gl.STATIC_DRAW);\r\n\r\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vertexBuffer);\r\n                this.gl.vertexAttribPointer(this.positionLocation, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.textureCoordBuffer);\r\n                this.gl.vertexAttribPointer(this.textureCoordAttribute, 2, this.gl.FLOAT, false, 0, 0);\r\n\r\n                this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.matricesBuffer);\r\n                for (var i = 0; i< 3; i++) {\r\n                    this.gl.vertexAttribPointer(this.matrixAttributeLocation + i, 3, this.gl.FLOAT, false, 36, i * 12);\r\n                }\r\n\r\n                this.gl.activeTexture(this.gl.TEXTURE0);\r\n                this.gl.bindTexture(this.gl.TEXTURE_2D, this.context.glTexture);\r\n\r\n                this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.indeciesBuffer);\r\n                this.gl.drawElements(this.gl.TRIANGLES, renderCall.indecies.length, this.gl.UNSIGNED_SHORT, 0)\r\n\r\n                this.gl.disableVertexAttribArray(this.positionLocation);\r\n                this.gl.disableVertexAttribArray(this.textureCoordAttribute);\r\n                this.gl.disableVertexAttribArray(this.matrixAttributeLocation);\r\n                this.gl.disableVertexAttribArray(this.matrixAttributeLocation + 1);\r\n                this.gl.disableVertexAttribArray(this.matrixAttributeLocation + 2);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/render/dynamicRenderer.ts","import { Vector, Rectangle } from '../model';\r\nimport { RenderHelper, RenderCall } from '../render';\r\nimport { Bar, ProgressBar } from './bar';\r\n\r\nexport class UI {\r\n\r\n    private renderHelper = RenderHelper.getInstance();\r\n\r\n    private bars: Bar[] = [];\r\n    private hpBar: ProgressBar = new ProgressBar();\r\n    private manaBar: ProgressBar = new ProgressBar();\r\n    private hudTextureCoords = this.renderHelper.getTextureCoordinates([], 198);\r\n    \r\n    constructor(maxHp: number, maxMana: number) {\r\n        \r\n        this.hpBar.bar = new Bar(new Rectangle(100, 8, 298, 16), 298, new Rectangle(1632, 96, 200, 12), 200);\r\n        this.hpBar.maxValue = maxHp;\r\n        this.manaBar.bar = new Bar(new Rectangle(100, 34, 298, 16), 298, new Rectangle(1632, 128, 200, 12), 200);\r\n        this.manaBar.maxValue = maxMana;\r\n        \r\n        this.bars.push(this.hpBar.bar);\r\n        this.bars.push(this.manaBar.bar);\r\n    }\r\n\r\n    public update(hp: number, mana: number) {\r\n        let hpFactor = hp/this.hpBar.maxValue;\r\n        this.hpBar.bar.area.width = (hpFactor * this.hpBar.bar.maxWidth);\r\n        this.hpBar.bar.textureArea.width = (hpFactor * this.hpBar.bar.maxTextureWidth);\r\n\r\n        let manaFactor = mana/this.manaBar.maxValue;\r\n        this.manaBar.bar.area.width = (manaFactor * this.manaBar.bar.maxWidth);\r\n        this.manaBar.bar.textureArea.width = (manaFactor * this.manaBar.bar.maxTextureWidth);\r\n\r\n    }\r\n\r\n    public createRenderCall(renderCall: RenderCall, camera: [number, number]) {\r\n\r\n        renderCall.vertecies = this.renderHelper.getVertecies(0 + camera[0], 0 + camera[1], 405, 96, renderCall.vertecies);\r\n        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.hudTextureCoords);\r\n        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n        for (let bar of this.bars) {\r\n            renderCall.vertecies = this.renderHelper.getVertecies(bar.area.x + camera[0], bar.area.y + camera[1], bar.area.width, bar.area.height, renderCall.vertecies);\r\n            renderCall.textureCoords.push.apply(renderCall.textureCoords, this.renderHelper.getMainTextureCoords(bar.textureArea));\r\n            renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n        }\r\n\r\n        return renderCall;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/ui.ts","import { Rectangle } from '../model';\r\n\r\nexport class Bar {\r\n\r\n    constructor(\r\n        public area: Rectangle,\r\n        public maxWidth: number,\r\n        public textureArea: Rectangle,\r\n        public maxTextureWidth: number\r\n        ) {\r\n    }\r\n}\r\n\r\nexport class ProgressBar {\r\n    public bar: Bar;\r\n    public maxValue: number;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/bar.ts","import { RenderCall, Renderer, RenderHelper } from '../render';\r\nimport { Observable, Observer } from 'rxjs';\r\nimport { Scene } from './scene';\r\nimport { SceneIndex } from './sceneIndex';\r\nimport { Menu } from './menu';\r\nimport { Clickable } from './clickable';\r\nimport { PowerSelector } from './powerSelector';\r\nimport { Active } from './active';\r\nimport { Rectangle } from '../model';\r\nimport { LevelData } from '../map/model';\r\nimport { LoadHelper } from '../service/loadHelper';\r\nimport { LocalStorageHelper } from '../service/localStorageHelper';\r\nimport { Game } from '../game';\r\nimport { AssetsLoader } from '../service/assetsLoader';\r\nimport { PowerSelectionMenu } from './powerSelectionMenu';\r\nimport { NewGameMenu } from \"./newGameMenu\";\r\nimport { RestartMenu } from \"./restartMenu\";\r\nimport { CreditMenu } from \"./creditMenu\";\r\n\r\nexport class SceneHandler {\r\n\r\n    public started = false;\r\n    public currentScene = SceneIndex.StartMenu;\r\n    public lastCurrentScene = SceneIndex.StartMenu;\r\n    private scenes: Map<number, Scene> = new Map<number, Scene>();\r\n    private mousePosition: [number, number] = [-100, 0];\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private click = false;\r\n    private clicked = false;\r\n    private importClicked = false;\r\n\r\n    private playerlist = document.getElementById(\"playerlist\");\r\n    private textInput = document.getElementById(\"textinput\") as HTMLInputElement;\r\n    private textArea = document.getElementById(\"textarea\");\r\n    private fileUploadButton = document.getElementById(\"fileupload\");\r\n    private fileUploadButtonHighlight = document.getElementById(\"fileuploadHighlight\");\r\n    private uploadInput = document.getElementById(\"importLink\") as HTMLInputElement;\r\n    private modal = document.getElementById(\"modal\");\r\n\r\n    private loadHelper = LoadHelper.getInstance();\r\n    private localStorageHelper = LocalStorageHelper.getInstance();\r\n    private assetLoader = new AssetsLoader();\r\n\r\n    constructor(private renderer: Renderer, private canvasSize: [number, number], private canvas: HTMLElement, private game: Game) {\r\n\r\n        let startMenu = new Menu(\r\n            [\r\n                this.createNewGameButton(),\r\n                this.createContinueButton(),\r\n                this.createLoadButton(),\r\n                this.createCreditsButton()\r\n            ],\r\n            [],\r\n            this,\r\n            this.textArea,\r\n            renderer,\r\n            canvasSize,\r\n            100,\r\n            [512, 512],\r\n            true,\r\n        );\r\n\r\n        startMenu.load();\r\n\r\n        this.scenes.set(SceneIndex.StartMenu, startMenu);\r\n\r\n        let loadMenu = new Menu(\r\n            [\r\n                this.createToStartMenuBack(new Rectangle((this.canvasSize[0] / 2) - 150, 235, 300, 50))\r\n            ],\r\n            [],\r\n            this,\r\n            this.textArea,\r\n            renderer,\r\n            canvasSize,\r\n            100,\r\n            [512, 512],\r\n            true,\r\n        );\r\n\r\n        this.scenes.set(SceneIndex.LoadMenu, loadMenu);\r\n\r\n        this.loadLevelSelectionScreen();\r\n        this.loadLevelFinishedScreen();\r\n        this.loadNewGameMenu();\r\n        this.loadRestartMenu();\r\n        this.loadCreditMenu();\r\n\r\n        this.createEventListerners();\r\n    }\r\n\r\n    public update() {\r\n\r\n        let currentScene = this.scenes.get(this.currentScene);\r\n\r\n        if (this.currentScene != this.lastCurrentScene) {\r\n            this.textArea.style.visibility = \"hidden\";\r\n            currentScene.load();\r\n        }\r\n\r\n        this.lastCurrentScene = this.currentScene;\r\n\r\n        if (this.click && !this.clicked) {\r\n            this.clicked = true;\r\n            currentScene.click(this.mousePosition);\r\n        }\r\n\r\n        currentScene.mouseOver(this.mousePosition);\r\n    }\r\n\r\n    public render() {\r\n        this.scenes.get(this.currentScene).render();\r\n        this.renderer.render(this.createMouseRenderCall(), [0, 0]);\r\n    }\r\n\r\n    public setCurrentLevel(level: string) {\r\n        let scene = this.scenes.get(SceneIndex.RestartMenu) as RestartMenu;\r\n        if (!isNaN(+level)) {\r\n            scene.currentLevel = +level;\r\n        }\r\n    }\r\n\r\n    private createMouseRenderCall() {\r\n        let renderCalls = new Map<number, RenderCall>()\r\n        let renderCall = new RenderCall();\r\n\r\n        renderCall.vertecies = this.renderHelper.getVertecies(this.mousePosition[0], this.mousePosition[1], 32, 32, renderCall.vertecies);\r\n        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n        renderCall.textureCoords = this.renderHelper.getTextureCoordinates(renderCall.textureCoords, 180);\r\n\r\n        renderCalls.set(-1, renderCall);\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n    private loadLevelFinishedScreen() {\r\n\r\n        let levelFinishedScene = new PowerSelectionMenu(\r\n            this,\r\n            this.textArea,\r\n            this.renderer,\r\n            this.canvasSize,\r\n            100,\r\n            [512, 512],\r\n            false,\r\n            [\r\n                this.createNextLevelButton(false),\r\n                this.createToStartMenuBack(new Rectangle(this.canvasSize[0] / 2 - 450, 650, 250, 42))\r\n            ],\r\n            [],\r\n            [\r\n                this.newPowerSelector(150, 100, 150, [105, 102, 106, 103, 107, 104]),\r\n                this.newPowerSelector(350, 100, 150, [111, 108, 112, 109, 113, 110]),\r\n                this.newPowerSelector(550, 100, 150, [117, 114, 118, 115, 119, 116])\r\n            ]\r\n        );\r\n\r\n        this.scenes.set(SceneIndex.LevelFinished, levelFinishedScene);\r\n    }\r\n\r\n    private loadRestartMenu() {\r\n\r\n        let restartMenu = new RestartMenu(\r\n            [\r\n                this.createToStartMenuBack(new Rectangle(this.canvasSize[0] / 2 - 450, 650, 250, 42))\r\n            ],\r\n            [],\r\n            this,\r\n            this.textArea,\r\n            this.renderer,\r\n            this.canvasSize,\r\n            100,\r\n            [512, 512],\r\n            false,\r\n            this.game\r\n        );\r\n\r\n        this.scenes.set(SceneIndex.RestartMenu, restartMenu);\r\n    }\r\n\r\n    private loadCreditMenu() {\r\n        let creditMenu = new CreditMenu(\r\n            [\r\n                this.createToStartMenuBackFromLevelMenu()\r\n            ],\r\n            [],\r\n            this,\r\n            this.textArea,\r\n            this.renderer,\r\n            this.canvasSize,\r\n            100,\r\n            [512, 512],\r\n            false,\r\n            this.game\r\n        );\r\n\r\n        this.scenes.set(SceneIndex.CreditsMenu, creditMenu);\r\n    }\r\n\r\n    private loadNewGameMenu() {\r\n        let newGameMenu = new NewGameMenu(\r\n            [\r\n                this.createToStartMenuBack(new Rectangle(this.canvasSize[0] / 2 - 450, 650, 250, 42)),\r\n                this.createToPowerSelectorMenuButton(true),\r\n            ],\r\n            [],\r\n            this,\r\n            this.textArea,\r\n            this.renderer,\r\n            this.canvasSize,\r\n            100,\r\n            [512, 512],\r\n            false,\r\n            this.textInput,\r\n            this.playerlist\r\n        );\r\n\r\n        this.scenes.set(SceneIndex.NewGameMenu, newGameMenu);\r\n    }\r\n\r\n    private newPowerSelector(x: number, y: number, offset: number, assets: number[]) {\r\n\r\n        let active1 = new Active(0, 1, false, new Rectangle(x, y, 100, 100), assets[0], assets[1], [100, 100])\r\n        let active2 = new Active(0, 2, false, new Rectangle(x, y + offset, 100, 100), assets[2], assets[3], [100, 100])\r\n        let active3 = new Active(0, 3, false, new Rectangle(x, y + offset * 2, 100, 100), assets[4], assets[5], [100, 100])\r\n\r\n        return new PowerSelector([active1, active2, active3]);\r\n    }\r\n\r\n    private loadLevelSelectionScreen() {\r\n\r\n        let onLoad = () => {\r\n            levelSelectionMenu.clickables = [\r\n                ...this.createLevelMenuButtons(),\r\n                this.createToStartMenuBackFromLevelMenu()\r\n            ];\r\n        };\r\n\r\n        let levelSelectionMenu = new Menu(\r\n            [\r\n                ...this.createLevelMenuButtons(),\r\n                this.createToStartMenuBackFromLevelMenu()\r\n            ],\r\n            [],\r\n            this,\r\n            this.textArea,\r\n            this.renderer,\r\n            this.canvasSize,\r\n            100,\r\n            [512, 512],\r\n            false,\r\n            onLoad\r\n        );\r\n\r\n\r\n\r\n        this.scenes.set(SceneIndex.LevelSelection, levelSelectionMenu);\r\n\r\n        return levelSelectionMenu;\r\n    }\r\n\r\n    private createEventListerners() {\r\n        window.addEventListener(\"mousemove\", (event: MouseEvent) => {\r\n            let relativeElement = this.canvas.getBoundingClientRect();\r\n            let x = event.clientX - relativeElement.left;\r\n            let y = event.clientY - relativeElement.top;\r\n\r\n            this.mousePosition = [x, y];\r\n        });\r\n\r\n        window.addEventListener(\"mousedown\", (event: MouseEvent) => {\r\n            this.click = true;\r\n        });\r\n\r\n        window.addEventListener(\"mouseup\", (event: MouseEvent) => {\r\n            this.clicked = false;\r\n            this.click = false;\r\n        });\r\n\r\n        this.uploadInput.addEventListener(\"change\", () => {\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = (evt: ProgressEvent) => {\r\n                this.uploadInput.value = \"\";\r\n                let target = evt.target as FileReader;\r\n\r\n                try {\r\n                    let leveldata = JSON.parse(target.result) as LevelData;\r\n                    if (this.loadHelper.validateLevelData(leveldata)) {\r\n                        this.game.loadLevel(leveldata);\r\n                        let restartMenu = this.scenes.get(SceneIndex.RestartMenu) as RestartMenu;\r\n                        restartMenu.tempLevel = leveldata;\r\n                        this.started = true;\r\n                        this.fileUploadButton.style.visibility = \"hidden\";\r\n                        this.fileUploadButtonHighlight.style.visibility = \"hidden\";\r\n                    } else {\r\n                        this.modal.style.display = \"block\";\r\n                        this.modal.innerHTML += \"Invalid level data!\"\r\n                    }\r\n                } catch (e) {\r\n                    this.modal.style.display = \"block\";\r\n                    this.modal.innerHTML += \"Error loading level!\"\r\n                }\r\n            }\r\n\r\n            fileReader.readAsText(this.uploadInput.files[0], \"UTF-8\")\r\n        });\r\n    }\r\n\r\n    public levelCompleted(level: string) {\r\n        this.started = false;\r\n        this.localStorageHelper.setCurrentProgress((+level + 1));\r\n        this.currentScene = SceneIndex.LevelFinished;\r\n        this.scenes.get(this.currentScene).load();\r\n    }\r\n\r\n    private createLoadButton() {\r\n\r\n        let onClick = () => {\r\n            this.currentScene = SceneIndex.LoadMenu;\r\n            this.fileUploadButton.style.visibility = \"visible\";\r\n        }\r\n\r\n        return new Clickable(new Rectangle((this.canvasSize[0] / 2) - 150, 295, 300, 50), 179, 181, 183, onClick);\r\n    }\r\n\r\n    private createCreditsButton() {\r\n        let onClick = () => {\r\n            this.currentScene = SceneIndex.CreditsMenu;\r\n        }\r\n\r\n        return new Clickable(new Rectangle((this.canvasSize[0] / 2) - 150, 355, 300, 50), 179, 181, 624, onClick);\r\n    }\r\n\r\n    private createNextLevelButton(disabled: boolean) {\r\n\r\n        let onClick = () => {\r\n\r\n            this.textInput.style.visibility = \"hidden\";\r\n            this.textArea.style.visibility = \"hidden\";\r\n            this.playerlist.style.visibility = \"hidden\";\r\n\r\n            let progress = this.localStorageHelper.getCurrentProgress();\r\n            this.assetLoader.getLevel(progress.completedLevels.toString()).subscribe(it => {\r\n                this.game.loadLevel(it);\r\n                this.started = true;\r\n            });\r\n        }\r\n\r\n        let clickable: Clickable;\r\n\r\n        if (disabled) {\r\n            clickable = new Clickable(new Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick, 554);\r\n        } else {\r\n            clickable = new Clickable(new Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick);\r\n        }\r\n\r\n        return clickable;\r\n\r\n    }\r\n\r\n    private createToPowerSelectorMenuButton(disabled: boolean) {\r\n        let onClick = () => {\r\n\r\n            this.textInput.style.visibility = \"hidden\";\r\n            this.textArea.style.visibility = \"hidden\";\r\n            this.playerlist.style.visibility = \"hidden\";\r\n\r\n            this.currentScene = SceneIndex.LevelFinished;\r\n        }\r\n\r\n        let clickable: Clickable;\r\n\r\n        if (disabled) {\r\n            clickable = new Clickable(new Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick, 554);\r\n        } else {\r\n            clickable = new Clickable(new Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 553, onClick);\r\n        }\r\n\r\n        return clickable;\r\n    }\r\n\r\n    private createNewGameButton() {\r\n        let onClick = () => {\r\n            this.currentScene = SceneIndex.NewGameMenu;\r\n        }\r\n\r\n        return new Clickable(new Rectangle((this.canvasSize[0] / 2) - 150, 175, 300, 50), 179, 181, 182, onClick);\r\n    }\r\n\r\n    private createContinueButton() {\r\n        let onClick = () => {\r\n            this.currentScene = SceneIndex.LevelSelection;\r\n        }\r\n\r\n        return new Clickable(new Rectangle((this.canvasSize[0] / 2) - 150, 235, 300, 50), 179, 181, 184, onClick, 554);\r\n    }\r\n\r\n    private createToStartMenuBack(area: Rectangle) {\r\n        let onClick = () => {\r\n            this.currentScene = SceneIndex.StartMenu;\r\n\r\n            this.fileUploadButton.style.visibility = \"hidden\";\r\n            this.fileUploadButtonHighlight.style.visibility = \"hidden\";\r\n            this.textArea.style.visibility = \"hidden\";\r\n            this.textInput.style.visibility = \"hidden\";\r\n            this.playerlist.style.visibility = \"hidden\";\r\n        }\r\n\r\n        return new Clickable(area, 179, 181, 186, onClick);\r\n    }\r\n\r\n    private createToStartMenuBackFromLevelMenu() {\r\n        let onClick = () => {\r\n            this.currentScene = SceneIndex.StartMenu;\r\n        }\r\n\r\n        return new Clickable(new Rectangle((this.canvasSize[0] / 2) - 150, 700, 300, 50), 179, 181, 186, onClick);\r\n    }\r\n\r\n    private createLevelMenuButtons() {\r\n        let progress = this.localStorageHelper.getCurrentProgress();\r\n        let clickables: Clickable[] = [];\r\n\r\n        let collumns = 5;\r\n        for (let i = 0; i < 10; i++) {\r\n            let y = Math.floor(i / collumns);\r\n            let x = i % collumns;\r\n            let disabled = !(progress.completedLevels >= i);\r\n            clickables.push(this.createLevelButton(x, y, i, disabled));\r\n        }\r\n\r\n        return clickables;\r\n    }\r\n\r\n    private createLevelButton(x: number, y: number, level: number, disabled: boolean) {\r\n\r\n        let onClick: () => void;\r\n\r\n        if (disabled) {\r\n            onClick = () => {\r\n\r\n            }\r\n        } else {\r\n            onClick = () => {\r\n                this.assetLoader.getLevel(level.toString()).subscribe(it => {\r\n                    this.game.loadLevel(it);\r\n                    this.started = true;\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        let buttonTexture: number;\r\n        if (disabled) {\r\n            buttonTexture = 187;\r\n        } else {\r\n            buttonTexture = 550;\r\n        }\r\n\r\n        return new Clickable(new Rectangle(100 + (x * 200), 100 + (y * 200), 200, 100), buttonTexture, buttonTexture, 188 + level, onClick);\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/sceneHandler.ts","export enum SceneIndex {\r\n    StartMenu = 1,\r\n    LoadMenu = 2,\r\n    LevelFinished = 3,\r\n    NewGameMenu = 4,\r\n    LevelSelection = 5,\r\n    RestartMenu = 6,\r\n    CreditsMenu = 7\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/sceneIndex.ts","import { RenderCall, Renderer } from '../render';\r\nimport { SceneHandler } from './sceneHandler';\r\nimport { Rectangle, Tile } from '../model';\r\nimport { RenderHelper } from '../render/renderHelper';\r\nimport { Scene } from './scene';\r\nimport { Clickable } from './clickable';\r\nimport { PowerSelector } from './powerSelector';\r\nimport { SceneIndex } from './sceneIndex';\r\nimport { LocalStorageHelper } from '../service/localStorageHelper'\r\n\r\nexport class Menu extends Scene {\r\n\r\n    constructor(\r\n        public clickables: Clickable[],\r\n        public text: Tile[],\r\n        protected sceneHandler: SceneHandler,\r\n        protected textArea: HTMLElement,\r\n        protected renderer: Renderer,\r\n        protected canvasSize: [number, number],\r\n        protected background: number,\r\n        protected tileSize: [number, number],\r\n        protected menu: boolean,\r\n        private onLoad?: () => void) {\r\n        super(sceneHandler, renderer, canvasSize, background, tileSize, menu);\r\n        this.createRenderCalls();\r\n    }\r\n\r\n    public update() {\r\n    }\r\n\r\n    public load() {\r\n\r\n        if(this.onLoad) {\r\n            this.onLoad();\r\n        }\r\n\r\n        if(this.sceneHandler.currentScene == SceneIndex.StartMenu) {\r\n\r\n            if(LocalStorageHelper.getInstance().getProgression().length > 0) {\r\n                this.clickables[1].disabled = false;\r\n            } else {\r\n                this.clickables[1].disabled = true;\r\n            }\r\n        } \r\n    }\r\n\r\n    public render() {\r\n        let rendercall = new RenderCall();\r\n\r\n        for (let clickable of this.clickables) {\r\n            rendercall = clickable.createRenderCall(rendercall);\r\n        }\r\n\r\n        for(let t of this.text) {\r\n            rendercall.vertecies = this.renderHelper.getVertecies(t.x, t.y, t.width, t.height, rendercall.vertecies);\r\n            rendercall.indecies = this.renderHelper.getIndecies(rendercall.indecies);\r\n            rendercall.textureCoords = this.renderHelper.getTextureCoordinates(rendercall.textureCoords, t.key);\r\n        }\r\n\r\n        this.renderCalls.set(-1, rendercall);\r\n\r\n        this.renderer.render(this.renderCalls, [0, 0]);\r\n\r\n        super.render();\r\n    }\r\n\r\n    public click(mousePosition: [number, number]) {\r\n        for (let clickable of this.clickables) {\r\n            clickable.click(mousePosition);\r\n        }\r\n    }\r\n\r\n    public mouseOver(mousePosition: [number, number]) {\r\n        for (let clickable of this.clickables) {\r\n            clickable.mouseOver(mousePosition);\r\n        }\r\n    }\r\n\r\n    protected createRenderCalls() {\r\n        super.createRenderCalls();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/menu.ts","import { RenderCall, Renderer } from '../render';\r\nimport { SceneHandler } from './sceneHandler';\r\nimport { Rectangle } from '../model';\r\nimport { RenderHelper } from '../render/renderHelper';\r\nimport { Clickable } from './clickable';\r\nimport { SceneIndex } from './sceneIndex';\r\n\r\nexport class Scene {\r\n\r\n    protected renderCalls: Map<number, RenderCall> = new Map<number, RenderCall>();\r\n    protected renderHelper = RenderHelper.getInstance();\r\n\r\n    constructor(protected sceneHandler: SceneHandler, protected renderer: Renderer, protected canvasSize: [number, number], protected background: number, protected tileSize: [number, number], protected menu: boolean) {\r\n    }\r\n\r\n    public update() {\r\n    }\r\n\r\n    public render() {\r\n        this.renderCalls = new Map<number, RenderCall>();\r\n        this.createRenderCalls();\r\n    }\r\n\r\n    public load() {\r\n        \r\n    }\r\n\r\n    public click(mousePosition: [number, number]) {\r\n    }\r\n\r\n    public mouseOver(mousePosition: [number, number]) {\r\n    }\r\n\r\n    protected createRenderCalls() {\r\n        this.renderCalls = this.createBackGround(this.renderCalls);\r\n\r\n        if (this.menu) {\r\n            this.renderCalls = this.createMenu(this.renderCalls);\r\n        }\r\n    }\r\n\r\n    protected createMenu(renderCalls: Map<number, RenderCall>) {\r\n        let menu = new RenderCall();\r\n\r\n        menu.vertecies = this.renderHelper.getVertecies((this.canvasSize[0] / 2) - 256, 50, 512, 700, menu.vertecies);\r\n        menu.indecies = this.renderHelper.getIndecies(menu.indecies);\r\n        menu.textureCoords = this.renderHelper.getTiledTextureCoordinates(new Rectangle(0, 0, 288, 295), menu.textureCoords, [512, 512]);\r\n        menu.key = 101;\r\n\r\n        renderCalls.set(menu.key, menu);\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n    private createBackGround(renderCalls: Map<number, RenderCall>) {\r\n        let background = new RenderCall();\r\n\r\n        background.vertecies = this.renderHelper.getVertecies(0, 0, this.canvasSize[0], this.canvasSize[1], background.vertecies);\r\n        background.indecies = this.renderHelper.getIndecies(background.indecies);\r\n        background.textureCoords = this.renderHelper.getTiledTextureCoordinates(new Rectangle(0, 0, this.canvasSize[0], this.canvasSize[0]), background.textureCoords, this.tileSize);\r\n        background.key = this.background;\r\n\r\n        renderCalls.set(background.key, background);\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/scene.ts","import { Progress } from '../model';\r\n\r\nexport class LocalStorageHelper {\r\n    private static instance: LocalStorageHelper = new LocalStorageHelper();\r\n\r\n    constrcuctor() {\r\n        if (LocalStorageHelper.instance) {\r\n            throw new Error('Static class cant be instanced!');\r\n        }\r\n\r\n        LocalStorageHelper.instance = this;\r\n    }\r\n\r\n    public static getInstance() {\r\n        return LocalStorageHelper.instance;\r\n    }\r\n\r\n    public progressionKey = \"progression\";\r\n\r\n    public newPlayer(name: string) {\r\n\r\n        let progression = this.getProgression();\r\n\r\n        for(let p of progression){\r\n            p.active = false;\r\n            this.saveProgress(p);\r\n        }\r\n\r\n        let progress = new Progress();\r\n        progress.playerName = name;\r\n        progress.active = true;\r\n        progress.completedLevels = 0;\r\n        progress.fire = 0;\r\n        progress.frost = 0;\r\n        progress.defence = 0;\r\n        progress.hp = 0;\r\n        progress.mana = 0;\r\n\r\n        this.saveProgress(progress);\r\n    }\r\n\r\n    public setPowers(fire: number, frost: number, defence: number) {\r\n        let progress = this.getCurrentProgress();\r\n\r\n        progress.fire = fire;\r\n        progress.frost = frost;\r\n        progress.defence = defence;\r\n\r\n        this.saveProgress(progress);\r\n    }\r\n\r\n    public setCurrentProgress(level: number) {\r\n        let progress = this.getCurrentProgress();\r\n        if (progress.completedLevels < level) {\r\n            progress.completedLevels = level;\r\n        }\r\n\r\n        this.saveProgress(progress);\r\n    }\r\n\r\n    public getProgression() {\r\n\r\n        let progression = this.getItem(this.progressionKey) as Progress[]\r\n\r\n        if(progression == null) {\r\n            progression = [];\r\n        }\r\n\r\n        return progression;\r\n    }\r\n\r\n    public getCurrentProgress() {\r\n        let progression = this.getItem(this.progressionKey) as Progress[];\r\n\r\n        if (!progression) {\r\n            progression = [this.defaultProgress()] as Progress[];\r\n        }\r\n\r\n        return progression.find(it => it.active === true);\r\n    }\r\n\r\n    public saveProgress(progress: Progress) {\r\n\r\n        let progression = this.getItem(this.progressionKey) as Progress[];\r\n\r\n        if (!progression) {\r\n            progression = [];\r\n        }\r\n\r\n        let prg = progression.find(it => it.playerName == progress.playerName);\r\n\r\n        if (prg) {\r\n            let index = progression.indexOf(prg);\r\n            if (index != -1) {\r\n                progression.splice(index, 1);\r\n            }\r\n\r\n            progression.push(progress);\r\n        } else {\r\n            progression.push(progress);\r\n        }\r\n\r\n        this.setItem(this.progressionKey, progression);\r\n\r\n    }\r\n\r\n    public setActive(name: string) {\r\n        let progression = this.getProgression();\r\n\r\n        for(let progress of progression) {\r\n            if(progress.playerName == name) {\r\n                progress.active = true;\r\n            } else {\r\n                progress.active = false;\r\n            }\r\n\r\n            this.saveProgress(progress);\r\n        }\r\n\r\n    }\r\n\r\n    private defaultProgress() {\r\n        let progress = new Progress();\r\n        progress.playerName = \"nouser\";\r\n        progress.active = true;\r\n        progress.completedLevels = 0;\r\n        progress.fire = 0;\r\n        progress.frost = 0;\r\n        progress.defence = 0;\r\n        progress.hp = 0;\r\n        progress.mana = 0;\r\n\r\n        return progress;\r\n    }\r\n\r\n    private getItem(key: string) {\r\n        return JSON.parse(localStorage.getItem(key));\r\n    }\r\n\r\n    private setItem(key: string, value: any) {\r\n        localStorage.setItem(key, JSON.stringify(value));\r\n    }\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/service/localStorageHelper.ts","import { RenderCall, Renderer, RenderHelper } from '../render';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { Rectangle } from '../model';\r\n\r\nexport class Clickable {\r\n\r\n    public disabled = false;\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n    private hover = false;\r\n\r\n    private baseTextureCoords: number[];\r\n    private hoverTextureCoords: number[];\r\n    private textTextureCoords: number[];\r\n    private disabledTextureCoords: number[];\r\n     \r\n\r\n    constructor(private area: Rectangle, private buttonTexture: number, private hoverTexture: number, private textTexture: number, private onClick: () => void, private disabledTexture?: number) {\r\n        this.baseTextureCoords = this.renderHelper.getTextureCoordinates([], buttonTexture);\r\n        this.hoverTextureCoords = this.renderHelper.getTextureCoordinates([], hoverTexture);\r\n        this.textTextureCoords = this.renderHelper.getTextureCoordinates([], textTexture);\r\n\r\n        if(disabledTexture != null) {\r\n            this.disabledTextureCoords = this.renderHelper.getTextureCoordinates([], disabledTexture);\r\n        }\r\n    }\r\n\r\n    public click(mouseposition: [number, number]) {\r\n        if(this.isWithinArea(mouseposition)) {\r\n            if(!this.disabled) {\r\n                this.onClick();\r\n            }\r\n        };\r\n    }\r\n\r\n    public mouseOver(mouseposition: [number, number]) {\r\n        if(this.isWithinArea(mouseposition)) {\r\n            this.hover = true;\r\n        } else {\r\n            this.hover = false;\r\n        }\r\n    }\r\n\r\n    public createRenderCall(renderCall: RenderCall) {\r\n\r\n        renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.getTexture());\r\n\r\n        renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n        renderCall.textureCoords.push.apply(renderCall.textureCoords, this.textTextureCoords);\r\n\r\n        return renderCall;\r\n    }\r\n\r\n    private isWithinArea(mouseposition: [number, number]) {\r\n        return this.collisionDetection.aabbCheck(new Rectangle(mouseposition[0], mouseposition[1], 1, 1), this.area);\r\n    }\r\n\r\n    private getTexture() {\r\n        if(this.disabled && this.disabledTexture != null) {\r\n            return this.disabledTextureCoords;\r\n        }\r\n        if(this.hover) {\r\n            return this.hoverTextureCoords;\r\n        } else {\r\n            return this.baseTextureCoords;\r\n        }\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/clickable.ts","import { RenderCall, Renderer, RenderHelper } from '../render';\r\nimport { Rectangle } from '../model';\r\nimport { Active } from './active';\r\n\r\nexport class PowerSelector {\r\n\r\n    private renderHelper = RenderHelper.getInstance();\r\n\r\n    constructor(public actives: [Active, Active, Active]) {\r\n    }\r\n\r\n    public render(renderCalls: Map<number, RenderCall>) {\r\n        for (let active of this.actives) {\r\n            active.createRenderCall(renderCalls);\r\n        }\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n    public click(mouseposition: [number, number]) {\r\n        for (let active of this.actives) {\r\n            if(!this.actives[0].active) {\r\n                this.actives[0].click(mouseposition);\r\n                break;\r\n            } else if(!this.actives[1].active) {\r\n                this.actives[1].click(mouseposition);\r\n                break;\r\n            } else if(!this.actives[2].active) {\r\n                this.actives[2].click(mouseposition);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public getPoints() {\r\n        return this.actives[0].value + this.actives[1].value + this.actives[2].value;\r\n    }\r\n\r\n    public fill(points: number) {\r\n\r\n        let active1 = this.actives[0];\r\n        let active2 = this.actives[1];\r\n        let active3 = this.actives[2];\r\n\r\n        active1.reset();\r\n        active2.reset();\r\n        active3.reset();\r\n\r\n        for(let i = 0; i < points; i++) {\r\n            \r\n            if(!active1.active) {\r\n                active1.addPoint();\r\n            } else if(!active2.active) {\r\n                active2.addPoint();\r\n            } else if(!active3.active) {\r\n                active3.addPoint();\r\n            }\r\n            \r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/powerSelector.ts","import { RenderCall, Renderer, RenderHelper } from '../render';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\nimport { Rectangle } from '../model';\r\n\r\nexport class Active {\r\n\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n\r\n    constructor(public value: number,\r\n        public maxValue: number,\r\n        public active: boolean,\r\n        private area: Rectangle,\r\n        private asset: number,\r\n        private activeAsset: number,\r\n        private size: [number, number]) {\r\n    }\r\n\r\n    public createRenderCall(renderCalls: Map<number, RenderCall>) {\r\n\r\n        renderCalls = this.addRenderCall(renderCalls, this.asset, false);\r\n        renderCalls = this.addRenderCall(renderCalls, this.activeAsset, true);\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n    public click(mouseposition: [number, number]) {\r\n        if (this.isWithinArea(mouseposition)) {\r\n            this.addPoint();\r\n        };\r\n    }\r\n\r\n    public addPoint() {\r\n        this.value++;\r\n        if (this.value == this.maxValue) {\r\n            this.active = true;\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        this.value = 0;\r\n        this.active = false;\r\n    }\r\n\r\n    private addRenderCall(renderCalls: Map<number, RenderCall>, asset: number, partial: boolean) {\r\n        let renderCall: RenderCall;\r\n\r\n        if (renderCalls.has(asset)) {\r\n            renderCall = renderCalls.get(asset);\r\n        } else {\r\n            renderCall = new RenderCall();\r\n        }\r\n\r\n        if (partial) {\r\n            let area = new Rectangle(this.area.x, this.area.y, this.area.width, this.area.height * (this.value / this.maxValue));\r\n            renderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(area, renderCall.textureCoords, this.size);\r\n            renderCall.vertecies = this.renderHelper.getVertecies(area.x, area.y, area.width, area.height, renderCall.vertecies);\r\n        } else {\r\n            renderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(this.area, renderCall.textureCoords, this.size);\r\n            renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n        }\r\n\r\n        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n\r\n        renderCalls.set(asset, renderCall);\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n\r\n    private isWithinArea(mouseposition: [number, number]) {\r\n        return this.collisionDetection.aabbCheck(new Rectangle(mouseposition[0], mouseposition[1], 1, 1), this.area);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/active.ts","import { Menu } from './menu';\r\nimport { RenderCall, Renderer } from '../render';\r\nimport { LocalStorageHelper } from '../service/localStorageHelper';\r\nimport { SceneHandler } from './sceneHandler';\r\nimport { Rectangle } from '../model';\r\nimport { RenderHelper } from '../render/renderHelper';\r\nimport { Scene } from './scene';\r\nimport { Clickable } from './clickable';\r\nimport { PowerSelector } from './powerSelector';\r\nimport { SceneIndex } from './sceneIndex';\r\nimport { Progress, Tile } from '../model';\r\nimport { SimpleClickable } from './simpleClickable';\r\n\r\nexport class PowerSelectionMenu extends Menu {\r\n\r\n    private localStorageHelper = LocalStorageHelper.getInstance();\r\n    private progress: Progress;\r\n    private simpleClickables: [SimpleClickable, SimpleClickable];\r\n\r\n    constructor(protected sceneHandler: SceneHandler,\r\n        protected textArea: HTMLElement,\r\n        protected renderer: Renderer,\r\n        protected canvasSize: [number, number],\r\n        protected background: number,\r\n        protected tileSize: [number, number],\r\n        protected menu: boolean,\r\n        public clickables: Clickable[],\r\n        public text: Tile[],\r\n        private powerSelectors: [PowerSelector, PowerSelector, PowerSelector]) {\r\n        super(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n        this.load();\r\n        this.textArea.style.visibility = \"hidden\";\r\n    }\r\n\r\n    public render() {\r\n\r\n        for (let powerSelector of this.powerSelectors) {\r\n            this.renderCalls = powerSelector.render(this.renderCalls);\r\n        }\r\n\r\n        for (let simpleClickable of this.simpleClickables) {\r\n            this.renderCalls = simpleClickable.createRenderCall(this.renderCalls);\r\n        }\r\n\r\n        super.render();\r\n    }\r\n\r\n    public click(mousePosition: [number, number]) {\r\n        super.click(mousePosition);\r\n\r\n        for (let powerSelector of this.powerSelectors) {\r\n            if (this.getAvailablePoints() > 0) {\r\n                powerSelector.click(mousePosition);\r\n            }\r\n        }\r\n\r\n        for (let simpleClickable of this.simpleClickables) {\r\n            if (this.getAvailablePoints() > 0) {\r\n                simpleClickable.click(mousePosition);\r\n            }\r\n        }\r\n\r\n        this.progress.fire = this.powerSelectors[0].getPoints();\r\n        this.progress.frost = this.powerSelectors[1].getPoints();\r\n        this.progress.defence = this.powerSelectors[2].getPoints();\r\n\r\n        this.textArea.innerHTML = \"Skillpoints:\" + this.getAvailablePoints();\r\n\r\n        this.localStorageHelper.saveProgress(this.progress);\r\n    }\r\n\r\n    public load() {\r\n        this.progress = this.localStorageHelper.getCurrentProgress();\r\n\r\n        let onHpClick = () => {\r\n            this.progress.hp++;\r\n        }\r\n\r\n        let hpClickable = new SimpleClickable(new Rectangle(750, 100, 100, 100), 120, [100, 100], onHpClick);\r\n\r\n        let onManaClick = () => {\r\n            this.progress.mana++;\r\n        }\r\n\r\n        let manaClickable = new SimpleClickable(new Rectangle(950, 100, 100, 100), 121, [256, 256], onManaClick);\r\n\r\n        this.simpleClickables = [hpClickable, manaClickable];\r\n\r\n        this.powerSelectors[0].fill(this.progress.fire);\r\n        this.powerSelectors[1].fill(this.progress.frost);\r\n        this.powerSelectors[2].fill(this.progress.defence);\r\n\r\n        this.textArea.style.visibility = \"visible\";\r\n        this.textArea.innerHTML = \"Skillpoints:\" + this.getAvailablePoints();\r\n\r\n\r\n    }\r\n\r\n    private getAvailablePoints() {\r\n        return (((this.progress.completedLevels+1) * 2) - (this.progress.fire + this.progress.frost + this.progress.defence + this.progress.hp + this.progress.mana));\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/powerSelectionMenu.ts","import { Rectangle } from '../model';\r\nimport { RenderCall, RenderHelper } from '../render';\r\nimport { CollisionDetection } from '../collision/collisionDetection';\r\n\r\nexport class SimpleClickable {\r\n\r\n    private renderHelper = RenderHelper.getInstance();\r\n    private collisionDetection = CollisionDetection.getInstance();\r\n\r\n    constructor(private area: Rectangle, private textureKey: number, private size: [number, number], private onClick: () => void) {\r\n    }\r\n\r\n    public click(mouseposition: [number, number]) {\r\n        if (this.isWithinArea(mouseposition)) {\r\n            this.onClick();\r\n        };\r\n    }\r\n\r\n    public createRenderCall(renderCalls: Map<number, RenderCall>) {\r\n\r\n        let renderCall: RenderCall;\r\n\r\n        if (renderCalls.has(this.textureKey)) {\r\n            renderCall = renderCalls.get(this.textureKey);\r\n        } else {\r\n            renderCall = new RenderCall();\r\n        }\r\n\r\n        renderCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(this.area, renderCall.textureCoords, this.size);\r\n        renderCall.vertecies = this.renderHelper.getVertecies(this.area.x, this.area.y, this.area.width, this.area.height, renderCall.vertecies);\r\n        renderCall.indecies = this.renderHelper.getIndecies(renderCall.indecies);\r\n\r\n\r\n        renderCalls.set(this.textureKey, renderCall);\r\n\r\n        return renderCalls;\r\n    }\r\n\r\n    private isWithinArea(mouseposition: [number, number]) {\r\n        return this.collisionDetection.aabbCheck(new Rectangle(mouseposition[0], mouseposition[1], 1, 1), this.area);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/simpleClickable.ts","import { Rectangle, Tile } from '../model';\r\nimport { Menu } from \"./menu\";\r\nimport { Clickable } from \"./clickable\";\r\nimport { SceneHandler } from \"./sceneHandler\";\r\nimport { Renderer } from \"../index\";\r\nimport { RenderCall } from \"../render/index\";\r\nimport { SceneIndex } from \"./sceneIndex\";\r\nimport { LocalStorageHelper } from \"../service/localStorageHelper\";\r\n\r\nexport class NewGameMenu extends Menu {\r\n\r\n    constructor(\r\n        public clickables: Clickable[],\r\n        public text: Tile[],\r\n        protected sceneHandler: SceneHandler,\r\n        protected textArea: HTMLElement,\r\n        protected renderer: Renderer,\r\n        protected canvasSize: [number, number],\r\n        protected background: number,\r\n        protected tileSize: [number, number],\r\n        protected menu: boolean,\r\n        private textInput: HTMLInputElement,\r\n        private playerlist: HTMLElement) {\r\n        super(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n\r\n        this.text.push(new Tile(75, 70, 200, 33, 557));\r\n\r\n        let onClick = () => {\r\n            let name = this.textInput.value;\r\n            if (name.length > 0) {\r\n                LocalStorageHelper.getInstance().newPlayer(name);\r\n                this.checkProgressionExists();\r\n                this.reDrawPlayerList();\r\n            }\r\n        }\r\n\r\n        clickables.push(new Clickable(new Rectangle(150, 150, 200, 33), 179, 181, 555, onClick));\r\n\r\n    }\r\n\r\n    public load() {\r\n        this.textInput.style.visibility = \"visible\";\r\n        this.playerlist.style.visibility = \"visible\";\r\n\r\n        this.reDrawPlayerList();\r\n\r\n        this.checkProgressionExists();\r\n    }\r\n\r\n    private reDrawPlayerList() {\r\n        while (this.playerlist.firstChild) {\r\n            this.playerlist.removeChild(this.playerlist.firstChild);\r\n        }\r\n\r\n        this.playerlist.children\r\n        let progression = LocalStorageHelper.getInstance().getProgression();\r\n\r\n        for (let progress of progression) {\r\n            let item = document.createElement(\"div\");\r\n            item.style.setProperty(\"color\", \"#ac9478\", \"important\");\r\n            item.style.textShadow = \"-2px 0 #5d392c, 0 2px #5d392c, 2px 0 #5d392c, 0 -2px #5d392c\";\r\n            item.style.padding = \"5px\";\r\n\r\n            item.innerHTML = progress.playerName;\r\n\r\n            if (progress.active) {\r\n                item.innerHTML = \"➣ \" + item.innerHTML;\r\n            }\r\n\r\n            item.onclick = () => {\r\n                LocalStorageHelper.getInstance().setActive(progress.playerName);\r\n                this.reDrawPlayerList();\r\n            }\r\n\r\n            this.playerlist.appendChild(item);\r\n        }\r\n    }\r\n\r\n    private checkProgressionExists() {\r\n        if (LocalStorageHelper.getInstance().getProgression().length > 0) {\r\n            this.clickables[1].disabled = false;\r\n        } else {\r\n            this.clickables[1].disabled = true;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/newGameMenu.ts","import { Rectangle, Tile } from '../model';\r\nimport { Menu } from \"./menu\";\r\nimport { Clickable } from \"./clickable\";\r\nimport { SceneHandler } from \"./sceneHandler\";\r\nimport { Renderer } from \"../index\";\r\nimport { RenderCall } from \"../render/index\";\r\nimport { SceneIndex } from \"./sceneIndex\";\r\nimport { LocalStorageHelper } from \"../service/localStorageHelper\";\r\nimport { AssetsLoader } from '../service/assetsLoader';\r\nimport { Game } from \"../game\";\r\nimport { LevelData } from \"../map/model/index\";\r\n\r\nexport class RestartMenu extends Menu {\r\n\r\n    public currentLevel = 0;\r\n    public tempLevel: LevelData;\r\n    private assetLoader = new AssetsLoader();\r\n\r\n    constructor(\r\n        public clickables: Clickable[],\r\n        public text: Tile[],\r\n        protected sceneHandler: SceneHandler,\r\n        protected textArea: HTMLElement,\r\n        protected renderer: Renderer,\r\n        protected canvasSize: [number, number],\r\n        protected background: number,\r\n        protected tileSize: [number, number],\r\n        protected menu: boolean,\r\n        private game: Game) {\r\n        super(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n\r\n        this.load();\r\n    }\r\n\r\n    public load() {\r\n        this.clickables[1] = new Clickable(new Rectangle(this.canvasSize[0] / 2 + 200, 650, 250, 42), 179, 181, 558, this.getClickCall());\r\n    }\r\n\r\n    private getClickCall() {\r\n        return () => {\r\n            if (this.tempLevel != null) {\r\n                this.game.loadLevel(this.tempLevel);\r\n                this.sceneHandler.started = true;\r\n            } else {\r\n                this.assetLoader.getLevel(this.currentLevel.toString()).subscribe(it => {\r\n                    this.game.loadLevel(it);\r\n                    this.sceneHandler.started = true;\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/restartMenu.ts","import { Rectangle, Tile } from '../model';\r\nimport { Menu } from \"./menu\";\r\nimport { Clickable } from \"./clickable\";\r\nimport { SceneHandler } from \"./sceneHandler\";\r\nimport { Renderer } from \"../index\";\r\nimport { RenderCall } from \"../render/index\";\r\nimport { SceneIndex } from \"./sceneIndex\";\r\nimport { LocalStorageHelper } from \"../service/localStorageHelper\";\r\nimport { AssetsLoader } from '../service/assetsLoader';\r\nimport { Game } from \"../game\";\r\nimport { LevelData } from \"../map/model/index\";\r\n\r\nexport class CreditMenu extends Menu {\r\n\r\n    public currentLevel = 0;\r\n    public tempLevel: LevelData;\r\n    private assetLoader = new AssetsLoader();\r\n\r\n    constructor(\r\n        public clickables: Clickable[],\r\n        public text: Tile[],\r\n        protected sceneHandler: SceneHandler,\r\n        protected textArea: HTMLElement,\r\n        protected renderer: Renderer,\r\n        protected canvasSize: [number, number],\r\n        protected background: number,\r\n        protected tileSize: [number, number],\r\n        protected menu: boolean,\r\n        private game: Game) {\r\n        super(clickables, text, sceneHandler, textArea, renderer, canvasSize, background, tileSize, menu);\r\n    }\r\n\r\n    public render() {\r\n\r\n        let creditsCall = new RenderCall();\r\n\r\n        creditsCall.vertecies = this.renderHelper.getVertecies(0, 0, this.canvasSize[0], this.canvasSize[1], creditsCall.vertecies);\r\n        creditsCall.indecies = this.renderHelper.getIndecies(creditsCall.indecies);\r\n        creditsCall.textureCoords = this.renderHelper.getTiledTextureCoordinates(new Rectangle(0, 0, this.canvasSize[0], this.canvasSize[0]), creditsCall.textureCoords, [1600, 1800]);\r\n        creditsCall.key = 122;\r\n\r\n        this.renderCalls.set(creditsCall.key, creditsCall);\r\n\r\n        super.render();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/UI/creditMenu.ts","import { AudioAsset, ContinuousAudio } from \"../model/index\";\r\n\r\nexport class AudioHandler {\r\n\r\n    private audioContext = new AudioContext();\r\n    private sources = new Map<string, AudioBuffer>();\r\n    private continiousAudio: ContinuousAudio[] = [];\r\n\r\n    constructor(private audioAsset: AudioAsset) {\r\n\r\n        audioAsset.bufferDatas.forEach((data, key) => {\r\n            this.audioContext.decodeAudioData(data).then(it => {\r\n                this.sources.set(key, it);\r\n            });\r\n        });\r\n    }\r\n\r\n    public createContinuos(name: string, duration: number, offset: number, volume: number) {\r\n        let continious = new ContinuousAudio(this.audioContext, this.sources.get(name), duration, offset, volume);\r\n        this.continiousAudio.push(continious);\r\n\r\n        return continious;\r\n    }\r\n\r\n    public update(delta: number) {\r\n        for (let continious of this.continiousAudio) {\r\n            continious.update();\r\n        }\r\n    }\r\n\r\n    public playSound(key: string, duration: number, offset: number, volume: number) {\r\n        let bufferData = this.sources.get(key);\r\n\r\n        if (bufferData) {\r\n            let gainNode = this.audioContext.createGain();\r\n            let source = this.audioContext.createBufferSource();\r\n            gainNode.connect(this.audioContext.destination);\r\n            gainNode.gain.value = volume;\r\n            source.buffer = bufferData;\r\n            source.connect(gainNode);\r\n            source.start(0, offset, duration);\r\n        }\r\n    }\r\n\r\n    public reset() {\r\n        for (let continious of this.continiousAudio) {\r\n            continious.reset();\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/game/handler/audioHandler.ts"],"sourceRoot":""}